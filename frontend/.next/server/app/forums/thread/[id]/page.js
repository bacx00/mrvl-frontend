(()=>{var e={};e.id=364,e.ids=[364],e.modules={440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(1658);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1135:()=>{},1743:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>l});var s=r(5239),n=r(8088),a=r(8170),o=r.n(a),d=r(893),i={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);r.d(t,i);let l={children:["",{children:["forums",{children:["thread",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9780)),"/var/www/mrvl-frontend/frontend/src/app/forums/thread/[id]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"/var/www/mrvl-frontend/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/var/www/mrvl-frontend/frontend/src/app/forums/thread/[id]/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/forums/thread/[id]/page",pathname:"/forums/thread/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3744:(e,t,r)=>{Promise.resolve().then(r.bind(r,9780))},3873:e=>{"use strict";e.exports=require("path")},4431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var s=r(7413),n=r(2202),a=r.n(n),o=r(4988),d=r.n(o);r(1135);let i={title:"Create Next App",description:"Generated by create next app"};function l({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${a().variable} ${d().variable} antialiased`,children:e})})}},5701:()=>{},6189:(e,t,r)=>{"use strict";var s=r(5773);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},7108:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},8592:(e,t,r)=>{Promise.resolve().then(r.bind(r,9150))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9150:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(687),n=r(3210),a=r(6189),o=r(5814),d=r.n(o);function i(){let{id:e}=(0,a.useParams)(),{user:t}=Object(function(){var e=Error("Cannot find module '@/context/AuthContext'");throw e.code="MODULE_NOT_FOUND",e}())(),[r,o]=(0,n.useState)(null),[i,l]=(0,n.useState)([]),[c,m]=(0,n.useState)(!0),[x,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(""),[b,f]=(0,n.useState)(!1),[v,g]=(0,n.useState)(1),[j,w]=(0,n.useState)(1),N=(0,n.useRef)(null);new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-31536e6).toISOString(),new Date(Date.now()-31536e6).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-1728e7).toISOString(),new Date(Date.now()-72e6).toISOString(),new Date(Date.now()-1296e7).toISOString(),new Date(Date.now()-648e5).toISOString(),new Date(Date.now()-612e5).toISOString(),new Date(Date.now()-2592e7).toISOString(),new Date(Date.now()-504e5).toISOString();let D=async r=>{if(r.trim()&&t){f(!0);try{let s=await fetch(`/api/forums/threads/${e}/posts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r})});if(s.ok){let e=await s.json();l(t=>[...t,e])}else{let e={id:`post-${Date.now()}`,content:r,author:{id:t.id,name:t.username,avatar:t.avatar||"/avatars/default.png",posts:t.posts||1,joinDate:t.joinDate||new Date().toISOString()},createdAt:new Date().toISOString(),reactions:[]};l(t=>[...t,e])}p(""),setTimeout(()=>{N.current?.scrollIntoView({behavior:"smooth"})},100)}catch(e){console.error("Error posting reply:",e),u("Failed to post reply. Please try again.")}finally{f(!1)}}},y=(e,t)=>{l(r=>r.map(r=>{if(r.id===e){let e=r.reactions?[...r.reactions]:[],s=e.findIndex(e=>e.type===t);if(s>=0){let t=e[s].userReacted;e[s]={...e[s],count:t?e[s].count-1:e[s].count+1,userReacted:!t}}else e.push({type:t,count:1,userReacted:!0});return{...r,reactions:e}}return r}))};return c?(0,s.jsxs)("div",{className:"min-h-screen bg-[#0f1419]",children:[(0,s.jsx)("div",{className:"bg-[#1a242d] border-b border-[#2b3d4d]",children:(0,s.jsxs)("div",{className:"container mx-auto py-4",children:[(0,s.jsx)("div",{className:"h-4 w-32 bg-[#2b3d4d] animate-pulse rounded mb-2"}),(0,s.jsx)("div",{className:"h-8 w-64 bg-[#2b3d4d] animate-pulse rounded"})]})}),(0,s.jsx)("div",{className:"container mx-auto py-6",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,s.jsx)("div",{className:"lg:w-3/4 space-y-4",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"bg-[#1a242d] border border-[#2b3d4d] rounded p-6",children:[(0,s.jsx)("div",{className:"h-4 bg-[#2b3d4d] rounded mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-[#2b3d4d] rounded mb-2 animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-[#2b3d4d] rounded w-2/3 animate-pulse"})]},e))}),(0,s.jsx)("div",{className:"lg:w-1/4",children:(0,s.jsx)("div",{className:"h-64 bg-[#1a242d] border border-[#2b3d4d] animate-pulse rounded"})})]})})]}):x&&!r?(0,s.jsx)("div",{className:"min-h-screen bg-[#0f1419]",children:(0,s.jsx)("div",{className:"container mx-auto py-6",children:(0,s.jsxs)("div",{className:"bg-[#1a242d] border border-[#fa4454] rounded p-8 text-center",children:[(0,s.jsx)("div",{className:"text-[#fa4454] text-4xl mb-4",children:"⚠️"}),(0,s.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Thread Not Found"}),(0,s.jsx)("p",{className:"text-[#768894] mb-4",children:x||"This thread may have been deleted or moved."}),(0,s.jsx)(d(),{href:"/forums",className:"bg-[#fa4454] hover:bg-[#e8323e] text-white px-6 py-2 rounded font-medium transition-colors",children:"Back to Forums"})]})})}):r?(0,s.jsxs)("div",{className:"min-h-screen bg-[#0f1419]",children:[(0,s.jsx)("div",{className:"bg-[#1a242d] border-b border-[#2b3d4d]",children:(0,s.jsxs)("div",{className:"container mx-auto py-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-sm text-[#768894] mb-3",children:[(0,s.jsx)(d(),{href:"/",className:"hover:text-[#fa4454] transition-colors",children:"Home"}),(0,s.jsx)("span",{className:"mx-2",children:"/"}),(0,s.jsx)(d(),{href:"/forums",className:"hover:text-[#fa4454] transition-colors",children:"Forums"}),(0,s.jsx)("span",{className:"mx-2",children:"/"}),(0,s.jsx)(d(),{href:`/forums/${r.category.id}`,className:"hover:text-[#fa4454] transition-colors",children:r.category.name}),(0,s.jsx)("span",{className:"mx-2",children:"/"}),(0,s.jsx)("span",{className:"text-white",children:"Thread"})]}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[r.isPinned&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-green-900/30 text-green-400 text-xs rounded mr-2",children:"\uD83D\uDCCC Pinned"}),r.isLocked&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 bg-red-900/30 text-red-400 text-xs rounded mr-2",children:"\uD83D\uDD12 Locked"})]}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:r.title}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center text-sm text-[#768894] space-x-4",children:[(0,s.jsxs)("span",{children:["by ",(0,s.jsx)("span",{className:"text-white font-medium",children:r.author.name})]}),(0,s.jsx)("span",{children:new Date(r.createdAt).toLocaleDateString()}),(0,s.jsxs)("span",{children:[r.views.toLocaleString()," views"]}),(0,s.jsxs)("span",{children:[i.length," replies"]})]})]}),(0,s.jsx)("div",{className:"mt-4 lg:mt-0",children:(0,s.jsxs)(d(),{href:`/forums/${r.category.id}`,className:"inline-flex items-center text-[#fa4454] hover:underline text-sm",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to ",r.category.name]})})]}),r.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:r.tags.map(e=>(0,s.jsxs)("span",{className:"px-2 py-1 bg-[#2b3d4d] text-[#768894] text-xs rounded",children:["#",e]},e))})]})}),(0,s.jsx)("div",{className:"container mx-auto py-6",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,s.jsxs)("div",{className:"lg:w-3/4",children:[(0,s.jsx)("div",{className:"space-y-4 mb-8",children:i.map(e=>(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@/components/PostCard'");throw e.code="MODULE_NOT_FOUND",e}()),{post:e,onReaction:y},e.id))}),j>1&&(0,s.jsx)("div",{className:"mb-8 flex justify-center",children:(0,s.jsxs)("div",{className:"inline-flex rounded overflow-hidden border border-[#2b3d4d]",children:[(0,s.jsx)("button",{onClick:()=>g(e=>Math.max(e-1,1)),disabled:1===v,className:"bg-[#1a242d] hover:bg-[#2b3d4d] disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 text-sm border-r border-[#2b3d4d] transition-colors",children:"Previous"}),Array.from({length:Math.min(j,5)},(e,t)=>{let r=t+1;return(0,s.jsx)("button",{onClick:()=>g(r),className:`px-4 py-2 text-sm border-r border-[#2b3d4d] last:border-r-0 transition-colors ${v===r?"bg-[#fa4454] text-white":"bg-[#1a242d] hover:bg-[#2b3d4d] text-white"}`,children:r},r)}),(0,s.jsx)("button",{onClick:()=>g(e=>Math.min(e+1,j)),disabled:v===j,className:"bg-[#1a242d] hover:bg-[#2b3d4d] disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 text-sm transition-colors",children:"Next"})]})}),t&&!r.isLocked?(0,s.jsxs)("div",{className:"bg-[#1a242d] border border-[#2b3d4d] rounded p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Post a Reply"}),(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@/components/RichTextEditor'");throw e.code="MODULE_NOT_FOUND",e}()),{value:h,onChange:p,onSubmit:D,placeholder:"Write your reply...",isSubmitting:b})]}):r.isLocked?(0,s.jsxs)("div",{className:"bg-[#1a242d] border border-[#2b3d4d] rounded p-6 text-center",children:[(0,s.jsx)("div",{className:"text-[#768894] text-4xl mb-4",children:"\uD83D\uDD12"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Thread Locked"}),(0,s.jsx)("p",{className:"text-[#768894]",children:"This thread has been locked by a moderator and cannot be replied to."})]}):(0,s.jsxs)("div",{className:"bg-[#1a242d] border border-[#2b3d4d] rounded p-6 text-center",children:[(0,s.jsx)("div",{className:"text-[#768894] text-4xl mb-4",children:"\uD83D\uDC64"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Login Required"}),(0,s.jsx)("p",{className:"text-[#768894] mb-4",children:"You need to be logged in to reply to this thread."}),(0,s.jsx)(d(),{href:"/user/login",className:"bg-[#fa4454] hover:bg-[#e8323e] text-white px-6 py-2 rounded font-medium transition-colors",children:"Login to Reply"})]}),(0,s.jsx)("div",{ref:N})]}),(0,s.jsx)("div",{className:"lg:w-1/4",children:(0,s.jsx)(Object(function(){var e=Error("Cannot find module '@/components/ForumSidebar'");throw e.code="MODULE_NOT_FOUND",e}()),{})})]})})]}):null}(function(){var e=Error("Cannot find module '@/components/PostCard'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/RichTextEditor'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/context/AuthContext'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/components/ForumSidebar'");throw e.code="MODULE_NOT_FOUND",e}()},9253:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9492:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},9551:e=>{"use strict";e.exports=require("url")},9780:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/var/www/mrvl-frontend/frontend/src/app/forums/thread/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/var/www/mrvl-frontend/frontend/src/app/forums/thread/[id]/page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,169,658,814],()=>r(1743));module.exports=s})();