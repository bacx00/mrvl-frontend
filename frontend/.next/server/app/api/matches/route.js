(()=>{var e={};e.id=809,e.ids=[809],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3065:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>O,routeModule:()=>h,serverHooks:()=>w,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>f});var r={};a.r(r),a.d(r,{GET:()=>p,POST:()=>g});var o=a(6559),n=a(8088),s=a(7719),i=a(2190);!function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let m=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({page:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional().transform(e=>e?parseInt(e):1),limit:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional().transform(e=>e?parseInt(e):20),status:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["live","upcoming","completed","all"]).optional().default("all"),region:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["americas","emea","apac","global","all"]).optional().default("all"),team:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional(),event:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional(),date:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional(),search:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional(),sortBy:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["date","event","team1","team2"]).optional().default("date"),sortOrder:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["asc","desc"]).optional().default("desc")}),l=[{id:"1",team1:{id:1,name:"Sentinels",shortName:"SEN",logo:"/teams/sentinels-logo.png",country:"USA",region:"americas",players:["TenZ","ShahZaM","SicK","dapr","zombs"]},team2:{id:2,name:"Cloud9",shortName:"C9",logo:"/teams/cloud9-logo.png",country:"USA",region:"americas",players:["leaf","xeppaa","mitch","vanity","Xeta"]},score:{team1:13,team2:10},status:"completed",event:{id:"champ2025",name:"Champions Tour 2025: Americas",stage:"Playoffs - Semi-Finals",logo:"/events/champions-tour.png"},date:"2025-05-05T18:00:00.000Z",timezone:"UTC",map:"Asgard",format:"Bo3",winner:"team1",duration:"45m 32s",viewersPeak:125420,vod:"https://watch.mrvl.net/123456",highlights:"https://highlights.mrvl.net/123456",region:"americas",tags:["playoffs","elimination"],isLive:!1,liveViewers:0,createdAt:"2025-05-01T10:00:00.000Z",updatedAt:"2025-05-05T20:45:32.000Z"},{id:"2",team1:{id:3,name:"Gen.G",shortName:"GEN",logo:"/teams/geng-logo.png",country:"KOR",region:"apac",players:["Meteor","Algo","Secret","Munchkin","eKo"]},team2:{id:4,name:"DRX",shortName:"DRX",logo:"/teams/drx-logo.png",country:"KOR",region:"apac",players:["stax","Rb","Zest","BuZz","Mako"]},score:{team1:8,team2:12},status:"live",event:{id:"pacific2025",name:"Champions Tour 2025: Pacific",stage:"Playoffs - Upper Final",logo:"/events/champions-tour-pacific.png"},date:"2025-05-22T15:00:00.000Z",timezone:"UTC",map:"Wakanda",format:"Bo3",winner:null,duration:"32m 15s",viewersPeak:89340,livestream:"https://watch.mrvl.net/live/456789",region:"apac",tags:["playoffs","live"],isLive:!0,liveViewers:89340,createdAt:"2025-05-20T10:00:00.000Z",updatedAt:"2025-05-22T16:32:15.000Z"},{id:"3",team1:{id:5,name:"Fnatic",shortName:"FNC",logo:"/teams/fnatic-logo.png",country:"GBR",region:"emea",players:["Boaster","Derke","Alfajer","Chronicle","Leo"]},team2:{id:6,name:"Team Liquid",shortName:"TL",logo:"/teams/liquid-logo.png",country:"GBR",region:"emea",players:["Redgar","Sayf","nAts","Jamppi","soulcas"]},score:{team1:0,team2:0},status:"upcoming",event:{id:"emea2025",name:"Champions Tour 2025: EMEA",stage:"Playoffs - Quarter Finals",logo:"/events/champions-tour-emea.png"},date:"2025-05-25T14:00:00.000Z",timezone:"UTC",map:"TBD",format:"Bo3",winner:null,duration:null,viewersPeak:0,region:"emea",tags:["playoffs","upcoming"],isLive:!1,liveViewers:0,createdAt:"2025-05-15T10:00:00.000Z",updatedAt:"2025-05-15T10:00:00.000Z"},{id:"4",team1:{id:7,name:"100 Thieves",shortName:"100T",logo:"/teams/100t-logo.png",country:"USA",region:"americas",players:["Asuna","Cryo","Derrek","stellar","bang"]},team2:{id:8,name:"LOUD",shortName:"LOUD",logo:"/teams/loud-logo.png",country:"BRA",region:"americas",players:["Less","aspas","Saadhak","pANcada","tuyz"]},score:{team1:2,team2:13},status:"completed",event:{id:"champ2025",name:"Champions Tour 2025: Americas",stage:"Regular Season",logo:"/events/champions-tour.png"},date:"2025-05-18T20:00:00.000Z",timezone:"UTC",map:"Sanctum Sanctorum",format:"Bo3",winner:"team2",duration:"38m 45s",viewersPeak:67890,vod:"https://watch.mrvl.net/789012",highlights:"https://highlights.mrvl.net/789012",region:"americas",tags:["regular-season"],isLive:!1,liveViewers:0,createdAt:"2025-05-15T10:00:00.000Z",updatedAt:"2025-05-18T21:38:45.000Z"}],c=[],d=0,u=new Map;async function p(e){try{var t,a,r;let o;let n=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown";if(!function(e){let t=Date.now(),a=u.get(e);return!a||t>a.resetTime?(u.set(e,{count:1,resetTime:t+6e4}),!0):!(a.count>=100)&&(a.count++,!0)}(n))return i.NextResponse.json({error:"Rate limit exceeded. Please try again later."},{status:429});let{searchParams:s}=new URL(e.url),p=Object.fromEntries(s.entries());try{o=m.parse(p)}catch(e){if(e instanceof Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).ZodError)return i.NextResponse.json({error:"Invalid query parameters",details:e.errors},{status:400})}let g=Date.now();c.length>0&&g-d<3e4?console.log("[CACHE] Serving matches from cache"):(c=[...l],d=g,console.log("[CACHE] Refreshed matches cache"));let h=function(e,t){let a=[...e];if("all"!==t.status&&(a=a.filter(e=>e.status===t.status)),"all"!==t.region&&(a=a.filter(e=>e.region===t.region)),t.team){let e=t.team.toLowerCase();a=a.filter(t=>t.team1.name.toLowerCase().includes(e)||t.team2.name.toLowerCase().includes(e))}if(t.event&&(a=a.filter(e=>e.event.id===t.event)),t.date){let e=new Date(t.date);a=a.filter(t=>new Date(t.date).toDateString()===e.toDateString())}return t.search&&(a=function(e,t){let a=t.toLowerCase();return e.filter(e=>e.team1.name.toLowerCase().includes(a)||e.team2.name.toLowerCase().includes(a)||e.event.name.toLowerCase().includes(a)||e.event.stage.toLowerCase().includes(a)||e.map.toLowerCase().includes(a))}(a,t.search)),a}(c,o);t=h,a=o.sortBy,r=o.sortOrder,h=t.sort((e,t)=>{let o,n;switch(a){case"date":default:o=new Date(e.date).getTime(),n=new Date(t.date).getTime();break;case"event":o=e.event.name,n=t.event.name;break;case"team1":o=e.team1.name,n=t.team1.name;break;case"team2":o=e.team2.name,n=t.team2.name}return("string"==typeof o&&(o=o.toLowerCase(),n=n.toLowerCase()),"desc"===r)?o>n?-1:+(o<n):o<n?-1:+(o>n)});let v=function(e,t,a){let r=(t-1)*a,o=r+a;return{matches:e.slice(r,o),pagination:{currentPage:t,totalPages:Math.ceil(e.length/a),totalMatches:e.length,hasNextPage:o<e.length,hasPreviousPage:t>1,limit:a}}}(h,o.page,o.limit),f=function(){let e=l.filter(e=>"live"===e.status),t=e.reduce((e,t)=>e+t.liveViewers,0);return{liveMatches:e.length,totalViewers:t,peakViewers:Math.max(...e.map(e=>e.liveViewers),0)}}(),w=e.headers.get("user-agent")||"",O=/Mobile|Android|iPhone|iPad/.test(w);return O&&(v.matches=v.matches.map(e=>({id:e.id,team1:{name:e.team1.shortName||e.team1.name,logo:e.team1.logo,country:e.team1.country},team2:{name:e.team2.shortName||e.team2.name,logo:e.team2.logo,country:e.team2.country},score:e.score,status:e.status,event:{name:e.event.name,stage:e.event.stage},date:e.date,map:e.map,isLive:e.isLive,liveViewers:e.liveViewers}))),i.NextResponse.json({success:!0,data:v.matches,pagination:v.pagination,filters:{applied:o,available:{status:["live","upcoming","completed"],region:["americas","emea","apac","global"],sortBy:["date","event","team1","team2"],sortOrder:["asc","desc"]}},liveStats:f,meta:{timestamp:new Date().toISOString(),cached:g-d<3e4,mobile:O}})}catch(e){return console.error("Matches API error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function g(e){try{let t=await e.json();for(let e of["team1","team2","event","date","map","format"])if(!t[e])return i.NextResponse.json({error:`Missing required field: ${e}`},{status:400});let a={id:String(l.length+1),...t,status:"upcoming",score:{team1:0,team2:0},winner:null,duration:null,viewersPeak:0,isLive:!1,liveViewers:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return l.push(a),c=[],d=0,console.log(`[ADMIN] New match created: ${a.team1.name} vs ${a.team2.name}`),i.NextResponse.json({success:!0,message:"Match created successfully",match:a},{status:201})}catch(e){return console.error("Create match error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/matches/route",pathname:"/api/matches",filename:"route",bundlePath:"app/api/matches/route"},resolvedPagePath:"/var/www/mrvl-frontend/frontend/src/app/api/matches/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:v,workUnitAsyncStorage:f,serverHooks:w}=h;function O(){return(0,s.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:f})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[447,580],()=>a(3065));module.exports=r})();