(()=>{var e={};e.id=255,e.ids=[255],e.modules={84:(e,t,n)=>{"use strict";n.r(t),n.d(t,{patchFetch:()=>w,routeModule:()=>R,serverHooks:()=>f,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>y});var a={};n.r(a),n.d(a,{GET:()=>h,POST:()=>k});var r=n(6559),o=n(8088),i=n(7719),s=n(2190);!function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let c=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({type:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["teams","players","combined"]).optional().default("teams"),region:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["americas","emea","apac","global","all"]).optional().default("global"),period:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["current","30d","90d","season","all-time"]).optional().default("current"),limit:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional().transform(e=>e?parseInt(e):50),includeHistory:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional().transform(e=>"true"===e),includeStats:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional().transform(e=>"true"===e)}),p=[{id:1,teamId:"1",name:"Sentinels",shortName:"SEN",logo:"/teams/sentinels-logo.png",rank:1,previousRank:1,peakRank:1,points:1250,previousPoints:1245,pointsChange:5,region:"americas",country:"United States",recentResults:["W","W","W","W","W"],recentForm:{wins:5,losses:0,streak:{type:"win",count:5}},change:0,changeDirection:"stable",lastUpdate:new Date(Date.now()-72e5).toISOString(),stats:{matchesPlayed:32,winRate:81.25,mapWinRate:78.4,averageRating:1.23,recentPerformance:85.7},achievements:[{event:"Champions Tour 2025: Americas",placement:1,points:500},{event:"Marvel Rivals Championship",placement:2,points:300}],nextMatch:{opponent:"FNATIC",date:"2025-05-25T18:00:00.000Z",importance:"high"},rankingHistory:[{date:"2025-05-01",rank:1,points:1200},{date:"2025-05-08",rank:1,points:1225},{date:"2025-05-15",rank:1,points:1240},{date:"2025-05-22",rank:1,points:1250}]},{id:2,teamId:"2",name:"FNATIC",shortName:"FNC",logo:"/teams/fnatic-logo.png",rank:2,previousRank:3,peakRank:1,points:1205,previousPoints:1180,pointsChange:25,region:"emea",country:"United Kingdom",recentResults:["W","W","L","W","W"],recentForm:{wins:4,losses:1,streak:{type:"win",count:2}},change:1,changeDirection:"up",lastUpdate:new Date(Date.now()-36e5).toISOString(),stats:{matchesPlayed:34,winRate:79.41,mapWinRate:76.5,averageRating:1.18,recentPerformance:82.3},achievements:[{event:"Champions Tour 2025: EMEA",placement:1,points:450},{event:"MRVL EMEA Masters",placement:1,points:200}],nextMatch:{opponent:"Sentinels",date:"2025-05-25T18:00:00.000Z",importance:"high"},rankingHistory:[{date:"2025-05-01",rank:4,points:1120},{date:"2025-05-08",rank:3,points:1150},{date:"2025-05-15",rank:3,points:1180},{date:"2025-05-22",rank:2,points:1205}]},{id:3,teamId:"3",name:"Gen.G",shortName:"GEN",logo:"/teams/geng-logo.png",rank:3,previousRank:4,peakRank:2,points:1180,previousPoints:1160,pointsChange:20,region:"apac",country:"South Korea",recentResults:["W","W","W","L","W"],recentForm:{wins:4,losses:1,streak:{type:"win",count:1}},change:1,changeDirection:"up",lastUpdate:new Date(Date.now()-18e5).toISOString(),stats:{matchesPlayed:29,winRate:79.31,mapWinRate:75.8,averageRating:1.15,recentPerformance:80.1},achievements:[{event:"Champions Tour 2025: APAC",placement:1,points:400},{event:"MRVL APAC Open",placement:1,points:150}],nextMatch:{opponent:"DRX",date:"2025-05-30T16:00:00.000Z",importance:"medium"},rankingHistory:[{date:"2025-05-01",rank:5,points:1100},{date:"2025-05-08",rank:4,points:1130},{date:"2025-05-15",rank:4,points:1160},{date:"2025-05-22",rank:3,points:1180}]},{id:4,teamId:"4",name:"Cloud9",shortName:"C9",logo:"/teams/cloud9-logo.png",rank:4,previousRank:2,peakRank:2,points:1150,previousPoints:1190,pointsChange:-40,region:"americas",country:"United States",recentResults:["W","L","W","W","L"],recentForm:{wins:3,losses:2,streak:{type:"loss",count:1}},change:-2,changeDirection:"down",lastUpdate:new Date(Date.now()-144e5).toISOString(),stats:{matchesPlayed:31,winRate:70.97,mapWinRate:68.2,averageRating:1.08,recentPerformance:65.4},achievements:[{event:"MRVL Spring Invitational",placement:2,points:250},{event:"Americas Qualifier",placement:3,points:150}],nextMatch:{opponent:"100 Thieves",date:"2025-05-28T20:00:00.000Z",importance:"medium"},rankingHistory:[{date:"2025-05-01",rank:3,points:1170},{date:"2025-05-08",rank:2,points:1190},{date:"2025-05-15",rank:2,points:1185},{date:"2025-05-22",rank:4,points:1150}]},{id:5,teamId:"5",name:"Team Liquid",shortName:"TL",logo:"/teams/liquid-logo.png",rank:5,previousRank:6,peakRank:3,points:1120,previousPoints:1100,pointsChange:20,region:"emea",country:"Netherlands",recentResults:["L","W","W","W","W"],recentForm:{wins:4,losses:1,streak:{type:"win",count:4}},change:1,changeDirection:"up",lastUpdate:new Date(Date.now()-216e5).toISOString(),stats:{matchesPlayed:28,winRate:75,mapWinRate:72.1,averageRating:1.12,recentPerformance:78.9},achievements:[{event:"EMEA Qualifier",placement:2,points:200},{event:"Spring Series",placement:1,points:180}],nextMatch:{opponent:"G2 Esports",date:"2025-05-27T16:00:00.000Z",importance:"medium"},rankingHistory:[{date:"2025-05-01",rank:8,points:1020},{date:"2025-05-08",rank:7,points:1050},{date:"2025-05-15",rank:6,points:1100},{date:"2025-05-22",rank:5,points:1120}]}],d=[{id:1,playerId:"101",name:"TenZ",team:"Sentinels",teamLogo:"/teams/sentinels-logo.png",rank:1,previousRank:1,peakRank:1,rating:1.42,previousRating:1.4,ratingChange:.02,region:"americas",country:"Canada",role:"dps",stats:{acs:285,kd:1.8,winRate:81.25,matchesPlayed:32,clutchSuccess:67.5},recentForm:9.2,change:0,changeDirection:"stable",rankingHistory:[{date:"2025-05-01",rank:1,rating:1.38},{date:"2025-05-08",rank:1,rating:1.39},{date:"2025-05-15",rank:1,rating:1.41},{date:"2025-05-22",rank:1,rating:1.42}]},{id:2,playerId:"301",name:"Meteor",team:"Gen.G",teamLogo:"/teams/geng-logo.png",rank:2,previousRank:3,peakRank:2,rating:1.38,previousRating:1.35,ratingChange:.03,region:"apac",country:"South Korea",role:"dps",stats:{acs:278,kd:1.7,winRate:79.31,matchesPlayed:29,clutchSuccess:71.2},recentForm:8.9,change:1,changeDirection:"up",rankingHistory:[{date:"2025-05-01",rank:4,rating:1.31},{date:"2025-05-08",rank:3,rating:1.33},{date:"2025-05-15",rank:3,rating:1.35},{date:"2025-05-22",rank:2,rating:1.38}]},{id:3,playerId:"201",name:"Boaster",team:"FNATIC",teamLogo:"/teams/fnatic-logo.png",rank:3,previousRank:2,peakRank:1,rating:1.35,previousRating:1.37,ratingChange:-.02,region:"emea",country:"United Kingdom",role:"igl",stats:{acs:245,kd:1.3,winRate:79.41,matchesPlayed:34,clutchSuccess:48.9},recentForm:8.4,change:-1,changeDirection:"down",rankingHistory:[{date:"2025-05-01",rank:3,rating:1.32},{date:"2025-05-08",rank:2,rating:1.35},{date:"2025-05-15",rank:2,rating:1.37},{date:"2025-05-22",rank:3,rating:1.35}]},{id:4,playerId:"401",name:"leaf",team:"Cloud9",teamLogo:"/teams/cloud9-logo.png",rank:4,previousRank:5,peakRank:3,rating:1.32,previousRating:1.29,ratingChange:.03,region:"americas",country:"United States",role:"dps",stats:{acs:268,kd:1.5,winRate:70.97,matchesPlayed:31,clutchSuccess:58.3},recentForm:7.8,change:1,changeDirection:"up",rankingHistory:[{date:"2025-05-01",rank:6,rating:1.25},{date:"2025-05-08",rank:5,rating:1.27},{date:"2025-05-15",rank:5,rating:1.29},{date:"2025-05-22",rank:4,rating:1.32}]},{id:5,playerId:"202",name:"Derke",team:"FNATIC",teamLogo:"/teams/fnatic-logo.png",rank:5,previousRank:4,peakRank:2,rating:1.31,previousRating:1.33,ratingChange:-.02,region:"emea",country:"Finland",role:"dps",stats:{acs:274,kd:1.6,winRate:79.41,matchesPlayed:34,clutchSuccess:62.1},recentForm:8.1,change:-1,changeDirection:"down",rankingHistory:[{date:"2025-05-01",rank:5,rating:1.28},{date:"2025-05-08",rank:4,rating:1.31},{date:"2025-05-15",rank:4,rating:1.33},{date:"2025-05-22",rank:5,rating:1.31}]}],g=new Map,l=new Map,m=new Map;function u(e,t){return"all"===t||"global"===t?e:e.filter(e=>e.region===t)}async function h(e){try{var t,n,a,r;let o;let i=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown";if(!function(e){let t=Date.now(),n=m.get(e);return!n||t>n.resetTime?(m.set(e,{count:1,resetTime:t+6e4}),!0):!(n.count>=60)&&(n.count++,!0)}(i))return s.NextResponse.json({error:"Rate limit exceeded. Please try again later."},{status:429});let{searchParams:h}=new URL(e.url),k=Object.fromEntries(h.entries());try{o=c.parse(k)}catch(e){if(e instanceof Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).ZodError)return s.NextResponse.json({error:"Invalid query parameters",details:e.errors},{status:400})}let R=`${o.type}_${o.region}_${o.period}`,v=Date.now(),y=g.get(R),f=l.get(R)||0;if(y&&v-f<3e5)console.log(`[CACHE] Serving ${R} rankings from cache`);else{let e=u((t=[...p],o.period,t),o.region),n=u((a=[...d],o.period,a),o.region);g.set(R,{teams:e,players:n}),l.set(R,v),console.log(`[CACHE] Refreshed ${R} rankings cache`)}let{teams:w,players:D}=g.get(R),O=w.slice(0,o.limit),C=D.slice(0,o.limit),N=e.headers.get("user-agent")||"",S=/Mobile|Android|iPhone|iPad/.test(N);S&&!o.includeStats&&(O=O.map(e=>({id:e.id,name:e.shortName||e.name,logo:e.logo,rank:e.rank,change:e.change,changeDirection:e.changeDirection,points:e.points,region:e.region,recentResults:e.recentResults.slice(0,3)})),C=C.map(e=>({id:e.id,name:e.name,team:e.team,teamLogo:e.teamLogo,rank:e.rank,change:e.change,rating:e.rating,role:e.role}))),o.includeHistory||(O=O.map(e=>{let{rankingHistory:t,...n}=e;return n}),C=C.map(e=>{let{rankingHistory:t,...n}=e;return n}));let E={totalTeams:w.length,totalPlayers:D.length,regionBreakdown:{teams:w.reduce((e,t)=>(e[t.region]=(e[t.region]||0)+1,e),{}),players:D.reduce((e,t)=>(e[t.region]=(e[t.region]||0)+1,e),{})},movements:{teamMovements:{up:w.filter(e=>"up"===e.changeDirection).length,down:w.filter(e=>"down"===e.changeDirection).length,stable:w.filter(e=>"stable"===e.changeDirection).length},playerMovements:{up:D.filter(e=>"up"===e.changeDirection).length,down:D.filter(e=>"down"===e.changeDirection).length,stable:D.filter(e=>"stable"===e.changeDirection).length}},averageStats:{teamWinRate:w.reduce((e,t)=>e+(t.stats?.winRate||0),0)/w.length,playerRating:D.reduce((e,t)=>e+t.rating,0)/D.length}},x={};return"teams"===o.type?x.rankings=O:"players"===o.type?x.rankings=C:(x.teamRankings=O,x.playerRankings=C),s.NextResponse.json({success:!0,...x,filters:{applied:o,available:{type:["teams","players","combined"],region:["americas","emea","apac","global"],period:["current","30d","90d","season","all-time"]}},stats:E,meta:{timestamp:new Date().toISOString(),cached:v-f<3e5,mobile:S,totalResults:"teams"===o.type?w.length:"players"===o.type?D.length:w.length+D.length}})}catch(e){return console.error("Rankings API error:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}async function k(e){try{let{type:t,updates:n}=await e.json();if(!t||!n)return s.NextResponse.json({error:"Missing required fields: type and updates"},{status:400});return"teams"===t?n.forEach(e=>{let t=p.findIndex(t=>t.id===e.id);-1!==t&&(p[t]={...p[t],...e},p[t].lastUpdate=new Date().toISOString())}):"players"===t&&n.forEach(e=>{let t=d.findIndex(t=>t.id===e.id);-1!==t&&(d[t]={...d[t],...e})}),g.clear(),l.clear(),console.log(`[ADMIN] Rankings updated for ${t}: ${n.length} entries`),s.NextResponse.json({success:!0,message:`${t} rankings updated successfully`,updatedCount:n.length})}catch(e){return console.error("Update rankings error:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}let R=new r.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/rankings/route",pathname:"/api/rankings",filename:"route",bundlePath:"app/api/rankings/route"},resolvedPagePath:"/var/www/mrvl-frontend/frontend/src/app/api/rankings/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:v,workUnitAsyncStorage:y,serverHooks:f}=R;function w(){return(0,i.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:y})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),a=t.X(0,[447,580],()=>n(84));module.exports=a})();