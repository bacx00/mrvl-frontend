(()=>{var e={};e.id=667,e.ids=[667],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2327:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>v,serverHooks:()=>f,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>w});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>m,PUT:()=>g});var a=r(6559),o=r(8088),n=r(7719),i=r(2190);!function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let d=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({includeStats:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional().transform(e=>"true"===e),userRole:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["admin","moderator","user","guest"]).optional().default("guest")}),u=[{id:"general",name:"General Discussion",description:"General Marvel Rivals discussion, questions, and community chat",color:"#3b82f6",icon:"\uD83D\uDCAC",order:1,isPublic:!0,allowGuests:!0,requiresVerification:!1,threads:1247,posts:18392,lastActivity:{threadId:"latest-1",threadTitle:"Thoughts on the new season?",username:"PlayerOne",timestamp:new Date(Date.now()-12e4).toISOString()},moderators:[{id:"mod1",username:"CommunityMod",avatar:"/avatars/mod1.png"},{id:"mod2",username:"MarvelMod",avatar:"/avatars/mod2.png"}],rules:["Be respectful to all community members","No spam or excessive self-promotion","Stay on topic when possible","Use search before creating duplicate threads"],weeklyStats:{newThreads:23,newPosts:456,activeUsers:189,trend:"up"}},{id:"patch-notes",name:"Patch Notes & Updates",description:"Official game updates, patch notes, and developer announcements",color:"#f59e0b",icon:"\uD83D\uDCCB",order:2,isPublic:!0,allowGuests:!0,requiresVerification:!1,threads:89,posts:2341,lastActivity:{threadId:"patch-2.1",threadTitle:"Patch 2.1.0 - Hero Balance Updates",username:"DevTeam",timestamp:new Date(Date.now()-144e5).toISOString()},moderators:[{id:"dev1",username:"NetEaseDev",avatar:"/avatars/dev1.png"},{id:"mod1",username:"CommunityMod",avatar:"/avatars/mod1.png"}],rules:["Official announcements only in pinned threads","Constructive feedback and discussion encouraged","No bug reports here - use bug report category","Keep discussions civil and productive"],weeklyStats:{newThreads:3,newPosts:167,activeUsers:234,trend:"up"}},{id:"competitive",name:"Competitive Discussion",description:"Tournament talk, team discussions, and competitive analysis",color:"#ef4444",icon:"\uD83C\uDFC6",order:3,isPublic:!0,allowGuests:!0,requiresVerification:!1,threads:567,posts:8923,lastActivity:{threadId:"champs-2025",threadTitle:"Champions 2025 Predictions Thread",username:"EsportsAnalyst",timestamp:new Date(Date.now()-9e5).toISOString()},moderators:[{id:"esports1",username:"TournamentMod",avatar:"/avatars/esports1.png"}],rules:["No spoilers in thread titles","Use spoiler tags for recent match results","Respect all teams and players","Back up claims with evidence when possible"],weeklyStats:{newThreads:45,newPosts:789,activeUsers:156,trend:"up"}},{id:"guides",name:"Guides & Strategy",description:"Hero guides, tips, strategies, and gameplay discussion",color:"#10b981",icon:"\uD83D\uDCDA",order:4,isPublic:!0,allowGuests:!0,requiresVerification:!1,threads:234,posts:3456,lastActivity:{threadId:"iron-man-guide",threadTitle:"Complete Iron Man Guide for Season 2",username:"ProCoach",timestamp:new Date(Date.now()-27e5).toISOString()},moderators:[{id:"guide1",username:"GuidesMod",avatar:"/avatars/guide1.png"}],rules:["High-quality guides preferred","Include your rank/experience when giving advice","Be open to feedback and discussion","Update guides when patches change the meta"],weeklyStats:{newThreads:12,newPosts:234,activeUsers:98,trend:"stable"}},{id:"memes",name:"Memes & Highlights",description:"Funny moments, memes, clips, and community highlights",color:"#8b5cf6",icon:"\uD83D\uDE04",order:5,isPublic:!0,allowGuests:!0,requiresVerification:!1,threads:892,posts:5671,lastActivity:{threadId:"weekly-clips",threadTitle:"Best Plays of the Week #47",username:"ClipMaster",timestamp:new Date(Date.now()-48e4).toISOString()},moderators:[{id:"fun1",username:"FunMod",avatar:"/avatars/fun1.png"}],rules:["Keep content appropriate and family-friendly","Give credit to original creators","No low-effort posts or spam","Celebrate great plays from all skill levels"],weeklyStats:{newThreads:67,newPosts:423,activeUsers:245,trend:"up"}},{id:"bug-reports",name:"Bug Reports",description:"Report bugs, technical issues, and provide feedback",color:"#f97316",icon:"\uD83D\uDC1B",order:6,isPublic:!0,allowGuests:!1,requiresVerification:!0,threads:156,posts:987,lastActivity:{threadId:"audio-bug",threadTitle:"Audio cutting out on Wakanda map",username:"BugHunter",timestamp:new Date(Date.now()-36e5).toISOString()},moderators:[{id:"dev1",username:"NetEaseDev",avatar:"/avatars/dev1.png"},{id:"bug1",username:"BugMod",avatar:"/avatars/bug1.png"}],rules:["Use the bug report template","Search for existing reports before posting","Include system specs and reproduction steps","Be patient - developers will respond when possible"],weeklyStats:{newThreads:8,newPosts:45,activeUsers:34,trend:"down"}},{id:"off-topic",name:"Off Topic",description:"Non-Marvel Rivals discussion and casual conversation",color:"#6b7280",icon:"\uD83C\uDF10",order:7,isPublic:!0,allowGuests:!0,requiresVerification:!1,threads:445,posts:2234,lastActivity:{threadId:"movie-talk",threadTitle:"Favorite Marvel movies?",username:"MovieFan",timestamp:new Date(Date.now()-108e5).toISOString()},moderators:[{id:"mod1",username:"CommunityMod",avatar:"/avatars/mod1.png"}],rules:["Keep discussions respectful","No politics or controversial topics","Marvel-related content preferred but not required","Follow general community guidelines"],weeklyStats:{newThreads:18,newPosts:156,activeUsers:89,trend:"stable"}}],c=new Map;function l(e){let t=Math.max(0,24-(Date.now()-new Date(e.lastActivity.timestamp).getTime())/36e5)/24;return 10*t+.1*(e.weeklyStats.newPosts/7)+2*(e.weeklyStats.newThreads/7)}async function p(e){try{var t;let r;let s=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown";if(!function(e){let t=Date.now(),r=c.get(e);return!r||t>r.resetTime?(c.set(e,{count:1,resetTime:t+6e4}),!0):!(r.count>=30)&&(r.count++,!0)}(s))return i.NextResponse.json({error:"Rate limit exceeded. Please try again later."},{status:429});let{searchParams:a}=new URL(e.url),o=Object.fromEntries(a.entries());try{r=d.parse(o)}catch(e){if(e instanceof Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).ZodError)return i.NextResponse.json({error:"Invalid query parameters",details:e.errors},{status:400})}let n=(t=r.userRole,u.filter(e=>"admin"===t||("moderator"===t?e.isPublic:"user"===t?e.isPublic&&(e.allowGuests||!e.requiresVerification):e.isPublic&&e.allowGuests)));n.sort((e,t)=>e.order!==t.order?e.order-t.order:l(t)-l(e));let p=e.headers.get("user-agent")||"",m=/Mobile|Android|iPhone|iPad/.test(p);m&&!r.includeStats&&(n=n.map(e=>({id:e.id,name:e.name,description:e.description,color:e.color,icon:e.icon,threads:e.threads,posts:e.posts,lastActivity:{username:e.lastActivity.username,timestamp:e.lastActivity.timestamp}})));let g=n.reduce((e,t)=>({threads:e.threads+t.threads,posts:e.posts+t.posts,categories:e.categories+1}),{threads:0,posts:0,categories:0});return i.NextResponse.json({success:!0,data:n,totals:g,meta:{timestamp:new Date().toISOString(),userRole:r.userRole,mobile:m,includeStats:r.includeStats}})}catch(e){return console.error("Categories API error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function m(e){try{let t=await e.json();for(let e of["name","description","color","icon"])if(!t[e])return i.NextResponse.json({error:`Missing required field: ${e}`},{status:400});let r={id:t.name.toLowerCase().replace(/[^a-z0-9]/g,"-"),name:t.name,description:t.description,color:t.color,icon:t.icon,order:u.length+1,isPublic:!1!==t.isPublic,allowGuests:!1!==t.allowGuests,requiresVerification:!0===t.requiresVerification,threads:0,posts:0,lastActivity:null,moderators:[],rules:t.rules||[],weeklyStats:{newThreads:0,newPosts:0,activeUsers:0,trend:"stable"}};return u.push(r),console.log(`[ADMIN] New category created: ${r.name}`),i.NextResponse.json({success:!0,message:"Category created successfully",category:r},{status:201})}catch(e){return console.error("Create category error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function g(e){try{let{categoryId:t,...r}=await e.json();if(!t)return i.NextResponse.json({error:"Category ID is required"},{status:400});let s=u.findIndex(e=>e.id===t);if(-1===s)return i.NextResponse.json({error:"Category not found"},{status:404});return u[s]={...u[s],...r},console.log(`[ADMIN] Category updated: ${t}`),i.NextResponse.json({success:!0,message:"Category updated successfully",category:u[s]})}catch(e){return console.error("Update category error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let v=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/forums/categories/route",pathname:"/api/forums/categories",filename:"route",bundlePath:"app/api/forums/categories/route"},resolvedPagePath:"/var/www/mrvl-frontend/frontend/src/app/api/forums/categories/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:h,workUnitAsyncStorage:w,serverHooks:f}=v;function y(){return(0,n.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:w})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580],()=>r(2327));module.exports=s})();