(()=>{var e={};e.id=967,e.ids=[967],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2405:(e,a,t)=>{"use strict";t.r(a),t.d(a,{patchFetch:()=>R,routeModule:()=>h,serverHooks:()=>f,workAsyncStorage:()=>w,workUnitAsyncStorage:()=>y});var r={};t.r(r),t.d(r,{GET:()=>p,POST:()=>g,PUT:()=>v});var n=t(6559),o=t(8088),i=t(7719),s=t(2190);!function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let m=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({type:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["overview","players","teams","heroes","maps","tournaments"]).optional().default("overview"),period:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["24h","7d","30d","90d","season","all-time"]).optional().default("30d"),region:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["americas","emea","apac","global","all"]).optional().default("global"),format:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["json","csv"]).optional().default("json"),includeCharts:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional().transform(e=>"true"===e),granularity:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["daily","weekly","monthly"]).optional().default("daily")}),c={overview:{totalMatches:1547,totalPlayers:423,totalTeams:89,totalTournaments:24,totalPrizePool:275e4,averageMatchDuration:16.8,peakViewership:1234567,totalViewHours:89e5,lastUpdated:new Date().toISOString()},timeline:{matches:[{date:"2025-04-01",count:42,viewers:89e3},{date:"2025-04-02",count:38,viewers:76e3},{date:"2025-04-03",count:55,viewers:112e3},{date:"2025-04-04",count:47,viewers:94e3},{date:"2025-04-05",count:62,viewers:134e3},{date:"2025-04-06",count:58,viewers:128e3},{date:"2025-04-07",count:71,viewers:156e3},{date:"2025-04-08",count:64,viewers:142e3},{date:"2025-04-09",count:49,viewers:98e3},{date:"2025-04-10",count:73,viewers:167e3},{date:"2025-04-11",count:68,viewers:145e3},{date:"2025-04-12",count:52,viewers:108e3},{date:"2025-04-13",count:77,viewers:178e3},{date:"2025-04-14",count:85,viewers:198e3},{date:"2025-04-15",count:95,viewers:234e3},{date:"2025-04-16",count:88,viewers:201e3},{date:"2025-04-17",count:92,viewers:219e3},{date:"2025-04-18",count:79,viewers:186e3},{date:"2025-04-19",count:84,viewers:195e3},{date:"2025-04-20",count:91,viewers:213e3},{date:"2025-04-21",count:87,viewers:204e3},{date:"2025-04-22",count:96,viewers:228e3}],growth:{playerGrowth:15.7,viewerGrowth:23.4,tournamentGrowth:8.9,prizePoolGrowth:45.2}},playerStats:{topPerformers:[{id:"101",name:"TenZ",team:"Sentinels",rating:1.42,acs:285,kd:1.8,winRate:81.25,matchesPlayed:32,heroesPlayed:["Iron Man","Spider-Man","Black Panther"],achievements:3,earnings:125e3},{id:"301",name:"Meteor",team:"Gen.G",rating:1.38,acs:278,kd:1.7,winRate:79.31,matchesPlayed:29,heroesPlayed:["Iron Man","Luna Snow","Captain America"],achievements:2,earnings:98e3},{id:"201",name:"Boaster",team:"FNATIC",rating:1.35,acs:245,kd:1.3,winRate:79.41,matchesPlayed:34,heroesPlayed:["Doctor Strange","Luna Snow","Storm"],achievements:4,earnings:87e3},{id:"401",name:"leaf",team:"Cloud9",rating:1.32,acs:268,kd:1.5,winRate:70.97,matchesPlayed:31,heroesPlayed:["Black Panther","Spider-Man","Storm"],achievements:1,earnings:76e3},{id:"202",name:"Derke",team:"FNATIC",rating:1.31,acs:274,kd:1.6,winRate:79.41,matchesPlayed:34,heroesPlayed:["Iron Man","Black Panther","Storm"],achievements:4,earnings:82e3}],roleDistribution:{dps:{count:156,percentage:36.9},tank:{count:98,percentage:23.2},support:{count:124,percentage:29.3},flex:{count:45,percentage:10.6}},averageStats:{acs:198.7,kd:1.12,winRate:52.3,matchesPerPlayer:18.4,careerLength:8.6},trends:{risingStars:["leaf","Meteor","Alfajer"],veteranPerformers:["TenZ","ShahZaM","Boaster"],breakoutPlayers:["Secret","Chronicle","Leo"]}},teamStats:{topTeams:[{id:"1",name:"Sentinels",region:"americas",ranking:1,rating:1.23,winRate:81.25,mapWinRate:78.4,matches:32,achievements:3,earnings:45e4,averageMatchDuration:18.2,fanFollowing:1234567},{id:"2",name:"FNATIC",region:"emea",ranking:2,rating:1.18,winRate:79.41,mapWinRate:76.5,matches:34,achievements:4,earnings:38e4,averageMatchDuration:17.8,fanFollowing:987654},{id:"3",name:"Gen.G",region:"apac",ranking:3,rating:1.15,winRate:79.31,mapWinRate:75.8,matches:29,achievements:2,earnings:32e4,averageMatchDuration:16.9,fanFollowing:756432},{id:"4",name:"Cloud9",region:"americas",ranking:4,rating:1.08,winRate:70.97,mapWinRate:68.2,matches:31,achievements:1,earnings:28e4,averageMatchDuration:17.1,fanFollowing:654321},{id:"5",name:"Team Liquid",region:"emea",ranking:5,rating:1.12,winRate:75,mapWinRate:72.1,matches:28,achievements:2,earnings:25e4,averageMatchDuration:16.5,fanFollowing:543210}],regionalBreakdown:{americas:{teams:28,winRateAvg:54.7,topTeam:"Sentinels"},emea:{teams:31,winRateAvg:51.2,topTeam:"FNATIC"},apac:{teams:30,winRateAvg:49.8,topTeam:"Gen.G"}},teamSizeDistribution:{5:{count:67,percentage:75.3},6:{count:18,percentage:20.2},7:{count:4,percentage:4.5}}},heroStats:[{name:"Iron Man",role:"dps",pickRate:78.2,winRate:52.4,banRate:12.3,averageDamage:18420,averageElims:14.7,playTime:2840,difficulty:"medium",meta:"S-tier"},{name:"Spider-Man",role:"dps",pickRate:62.8,winRate:49.2,banRate:8.9,averageDamage:16230,averageElims:13.2,playTime:2156,difficulty:"hard",meta:"A-tier"},{name:"Doctor Strange",role:"support",pickRate:58.1,winRate:53.7,banRate:15.6,averageDamage:12580,averageElims:8.9,playTime:1987,difficulty:"hard",meta:"S-tier"},{name:"Captain America",role:"tank",pickRate:45.2,winRate:50.8,banRate:6.7,averageDamage:8940,averageElims:6.3,playTime:1654,difficulty:"easy",meta:"B-tier"},{name:"Storm",role:"dps",pickRate:41.5,winRate:47.6,banRate:4.2,averageDamage:15670,averageElims:12.1,playTime:1423,difficulty:"medium",meta:"B-tier"},{name:"Black Panther",role:"dps",pickRate:48.6,winRate:51.2,banRate:7.8,averageDamage:17890,averageElims:13.8,playTime:1789,difficulty:"hard",meta:"A-tier"},{name:"Hulk",role:"tank",pickRate:52.4,winRate:48.9,banRate:9.2,averageDamage:10560,averageElims:7.1,playTime:1934,difficulty:"easy",meta:"B-tier"},{name:"Luna Snow",role:"support",pickRate:32.1,winRate:49.3,banRate:3.4,averageDamage:8940,averageElims:5.2,playTime:1156,difficulty:"medium",meta:"C-tier"}],mapStats:[{name:"Asgard",type:"Escort",playedCount:387,attackWinRate:48.2,defenseWinRate:51.8,averageDuration:18.4,mostPlayedHero:"Iron Man",competitiveScore:8.7},{name:"Wakanda",type:"Hybrid",playedCount:342,attackWinRate:52.1,defenseWinRate:47.9,averageDuration:16.8,mostPlayedHero:"Black Panther",competitiveScore:9.2},{name:"New York",type:"Assault",playedCount:298,attackWinRate:49.5,defenseWinRate:50.5,averageDuration:17.2,mostPlayedHero:"Spider-Man",competitiveScore:8.1},{name:"Tokyo",type:"Control",playedCount:267,attackWinRate:51.4,defenseWinRate:48.6,averageDuration:16.3,mostPlayedHero:"Storm",competitiveScore:7.9},{name:"Sakaar",type:"Escort",playedCount:234,attackWinRate:47.8,defenseWinRate:52.2,averageDuration:15.5,mostPlayedHero:"Hulk",competitiveScore:7.2},{name:"London",type:"Hybrid",playedCount:189,attackWinRate:50.1,defenseWinRate:49.9,averageDuration:14.7,mostPlayedHero:"Doctor Strange",competitiveScore:6.8}],tournamentStats:{totalTournaments:24,totalPrizePool:275e4,averagePrizePool:114583,largestTournament:{name:"Marvel Rivals Championship 2025",prizePool:1e6,teams:16,viewers:1234567},regionalDistribution:{global:{count:6,prizePool:15e5},americas:{count:7,prizePool:45e4},emea:{count:6,prizePool:4e5},apac:{count:5,prizePool:4e5}},upcomingTournaments:[{name:"Champions 2025",date:"2025-06-15",prizePool:1e6,teams:16,status:"registration"},{name:"Summer Showdown",date:"2025-07-10",prizePool:15e4,teams:8,status:"announced"}],viewershipTrends:{peakConcurrent:1234567,averageConcurrent:234567,totalViewHours:89e5,uniqueViewers:3456789,chatMessages:0xbc614e}},analytics:{engagement:{matchCompletionRate:94.7,averageViewDuration:23.4,peakViewingHours:[18,19,20,21],mobileViewership:42.3,socialMediaMentions:567890},performance:{serverUptime:99.8,averageLatency:23,matchmakingTime:2.1,bugReports:234,playerSatisfaction:8.7},economy:{totalEarnings:275e4,averagePlayerEarnings:6502,topEarner:{name:"TenZ",earnings:125e3},sponsorshipValue:89e5,merchandiseSales:1234567}}},l=new Map,d=new Map,u=new Map;async function p(e){try{let n,o;let i=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown";if(!function(e){let a=Date.now(),t=u.get(e);return!t||a>t.resetTime?(u.set(e,{count:1,resetTime:a+6e4}),!0):!(t.count>=30)&&(t.count++,!0)}(i))return s.NextResponse.json({error:"Rate limit exceeded. Please try again later."},{status:429});let{searchParams:p}=new URL(e.url),g=Object.fromEntries(p.entries());try{n=m.parse(g)}catch(e){if(e instanceof Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).ZodError)return s.NextResponse.json({error:"Invalid query parameters",details:e.errors},{status:400})}let v=`${n.type}_${n.period}_${n.region}`,h=Date.now(),w=l.get(v),y=d.get(v)||0;if(w&&h-y<18e4?(console.log(`[CACHE] Serving ${v} stats from cache`),o=w):(o=function(e,a){if("all"===a||"global"===a)return e;let t=JSON.parse(JSON.stringify(e));return t.playerStats?.topPerformers&&(t.playerStats.topPerformers=t.playerStats.topPerformers.slice(0,5)),t}(function(e,a){let t=JSON.parse(JSON.stringify(e)),r={"24h":.03,"7d":.2,"30d":.8,"90d":1,season:1.2,"all-time":1.5}[a]||1;return t.overview&&(t.overview.totalMatches=Math.round(t.overview.totalMatches*r),t.overview.totalViewHours=Math.round(t.overview.totalViewHours*r)),t}(c,n.period),n.region),l.set(v,o),d.set(v,h),console.log(`[CACHE] Refreshed ${v} stats cache`)),"csv"===n.format){let e=function(e,a){let t="";switch(a){case"players":t="Name,Team,Rating,ACS,K/D,Win Rate,Matches\n",e.playerStats.topPerformers.forEach(e=>{t+=`${e.name},${e.team},${e.rating},${e.acs},${e.kd},${e.winRate},${e.matchesPlayed}
`});break;case"heroes":t="Hero,Role,Pick Rate,Win Rate,Ban Rate,Meta Tier\n",e.heroStats.forEach(e=>{t+=`${e.name},${e.role},${e.pickRate},${e.winRate},${e.banRate},${e.meta}
`});break;case"maps":t="Map,Type,Played,Attack Win Rate,Defense Win Rate,Avg Duration\n",e.mapStats.forEach(e=>{t+=`${e.name},${e.type},${e.playedCount},${e.attackWinRate},${e.defenseWinRate},${e.averageDuration}
`});break;default:t="Data export not available for this type"}return t}(o,n.type);return new s.NextResponse(e,{headers:{"Content-Type":"text/csv","Content-Disposition":`attachment; filename="${n.type}_stats.csv"`}})}let f={};if(n.includeCharts){var a,t,r;a=o,t=n.type,n.granularity,f=({overview:{matchesOverTime:a.timeline.matches.map(e=>({date:e.date,matches:e.count,viewers:e.viewers})),growthMetrics:a.timeline.growth},players:{topPerformers:a.playerStats.topPerformers.slice(0,10).map(e=>({name:e.name,rating:e.rating,winRate:e.winRate})),roleDistribution:Object.entries(a.playerStats.roleDistribution).map(([e,a])=>({role:e,count:a.count,percentage:a.percentage}))},heroes:{pickRates:a.heroStats.slice(0,10).map(e=>({name:e.name,pickRate:e.pickRate,winRate:e.winRate})),metaTiers:a.heroStats.reduce((e,a)=>(e[a.meta]=(e[a.meta]||0)+1,e),{})},maps:{playRates:a.mapStats.map(e=>({name:e.name,played:e.playedCount,winRate:(e.attackWinRate+e.defenseWinRate)/2})),durations:a.mapStats.map(e=>({name:e.name,duration:e.averageDuration}))}})[t]||{}}let R=e.headers.get("user-agent")||"",S=/Mobile|Android|iPhone|iPad/.test(R),k={};switch(n.type){case"overview":k={overview:o.overview,timeline:o.timeline,analytics:o.analytics};break;case"players":k={players:o.playerStats,overview:{totalPlayers:o.overview.totalPlayers}};break;case"teams":k={teams:o.teamStats,overview:{totalTeams:o.overview.totalTeams}};break;case"heroes":k={heroes:o.heroStats,meta:{totalHeroes:o.heroStats.length,averagePickRate:o.heroStats.reduce((e,a)=>e+a.pickRate,0)/o.heroStats.length}};break;case"maps":k={maps:o.mapStats,meta:{totalMaps:o.mapStats.length,averageDuration:o.mapStats.reduce((e,a)=>e+a.averageDuration,0)/o.mapStats.length}};break;case"tournaments":k={tournaments:o.tournamentStats,overview:{totalTournaments:o.overview.totalTournaments}};break;default:k=o}return S&&(k.players?.topPerformers&&(k.players.topPerformers=k.players.topPerformers.slice(0,10)),k.heroes&&(k.heroes=k.heroes.slice(0,12)),k.timeline?.matches&&(k.timeline.matches=k.timeline.matches.slice(-14))),s.NextResponse.json({success:!0,data:k,charts:n.includeCharts?f:void 0,filters:{applied:n,available:{type:["overview","players","teams","heroes","maps","tournaments"],period:["24h","7d","30d","90d","season","all-time"],region:["americas","emea","apac","global"],granularity:["daily","weekly","monthly"]}},meta:{timestamp:new Date().toISOString(),cached:h-y<18e4,mobile:S,period:n.period,region:n.region,dataPoints:k.timeline?.matches?.length||0}})}catch(e){return console.error("Stats API error:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}async function g(e){try{let a=await e.json(),{metrics:t,filters:r,groupBy:n,timeRange:o,aggregation:i="sum"}=a;if(!t||!Array.isArray(t))return s.NextResponse.json({error:"Metrics array is required"},{status:400});let m={query:a,results:{totalRecords:1547,aggregatedData:t.map(e=>({metric:e,value:Math.round(1e3*Math.random()),trend:Math.random()>.5?"up":"down",changePercent:Math.round((20*Math.random()-10)*100)/100}))},executionTime:Math.round(500*Math.random()+100),cacheHit:!1};return console.log(`[ANALYTICS] Custom query executed: ${t.join(", ")}`),s.NextResponse.json({success:!0,analytics:m,meta:{timestamp:new Date().toISOString(),queryComplexity:"medium",estimatedCost:.05}})}catch(e){return console.error("Custom analytics error:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}async function v(e){try{let{type:a,data:t}=await e.json(),r={matches:{newMatch:t.matchId,viewers:t.viewers||Math.round(5e4*Math.random()+1e4),timestamp:new Date().toISOString()},players:{playerId:t.playerId,newRating:t.rating,matchResult:t.result,timestamp:new Date().toISOString()},tournaments:{tournamentId:t.tournamentId,status:t.status,viewers:t.viewers,timestamp:new Date().toISOString()}};for(let[e]of l.entries())e.includes(a)&&(l.delete(e),d.delete(e));return console.log(`[REAL-TIME] Stats updated for ${a}`),s.NextResponse.json({success:!0,update:r[a],meta:{timestamp:new Date().toISOString(),type:a,cacheCleared:!0}})}catch(e){return console.error("Real-time update error:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}let h=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/stats/route",pathname:"/api/stats",filename:"route",bundlePath:"app/api/stats/route"},resolvedPagePath:"/var/www/mrvl-frontend/frontend/src/app/api/stats/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:w,workUnitAsyncStorage:y,serverHooks:f}=h;function R(){return(0,i.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:y})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[447,580],()=>t(2405));module.exports=r})();