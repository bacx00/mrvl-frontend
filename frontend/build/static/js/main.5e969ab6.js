/*! For license information please see main.5e969ab6.js.LICENSE.txt */
(()=>{"use strict";var e={49:(e,t)=>{var a=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),x=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,p={};function v(e,t,a){this.props=e,this.context=t,this.refs=p,this.updater=a||h}function y(){}function b(e,t,a){this.props=e,this.context=t,this.refs=p,this.updater=a||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var f=b.prototype=new y;f.constructor=b,g(f,v.prototype),f.isPureReactComponent=!0;var j=Array.isArray,k=Object.prototype.hasOwnProperty,w={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var s,n={},l=null,i=null;if(null!=t)for(s in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(l=""+t.key),t)k.call(t,s)&&!N.hasOwnProperty(s)&&(n[s]=t[s]);var o=arguments.length-2;if(1===o)n.children=r;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];n.children=d}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===n[s]&&(n[s]=o[s]);return{$$typeof:a,type:e,key:l,ref:i,props:n,_owner:w.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,s,n,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case a:case r:o=!0}}if(o)return l=l(o=e),e=""===n?"."+E(o,0):n,j(l)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),T(l,t,s,"",(function(e){return e}))):null!=l&&(S(l)&&(l=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,s+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(C,"$&/")+"/")+e)),t.push(l)),1;if(o=0,n=""===n?".":n+":",j(e))for(var d=0;d<e.length;d++){var c=n+E(i=e[d],d);o+=T(i,t,s,c,l)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),d=0;!(i=e.next()).done;)o+=T(i=i.value,t,s,c=n+E(i,d++),l);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function A(e,t,a){if(null==e)return e;var r=[],s=0;return T(e,r,"","",(function(e){return t.call(a,e,s++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},I={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,a){A(e,(function(){t.apply(this,arguments)}),a)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=l,t.PureComponent=b,t.StrictMode=n,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),n=e.key,l=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,i=w.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)k.call(t,d)&&!N.hasOwnProperty(d)&&(s[d]=void 0===t[d]&&void 0!==o?o[d]:t[d])}var d=arguments.length-2;if(1===d)s.children=r;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];s.children=o}return{$$typeof:a,type:e.type,key:n,ref:l,props:s,_owner:i}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,a){return P.current.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,a){return P.current.useReducer(e,t,a)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,a){return P.current.useSyncExternalStore(e,t,a)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},119:(e,t,a)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(345)},340:(e,t,a)=>{e.exports=a(761)},345:(e,t,a)=>{var r=a(950),s=a(340);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,i={};function o(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(i[e]=t,e=0;e<t.length;e++)l.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),m=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},h={};function g(e,t,a,r,s,n,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=l}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){p[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];p[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){p[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){p[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){p[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){p[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){p[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){p[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){p[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,a,r){var s=p.hasOwnProperty(t)?p[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,a,r){if(null===t||"undefined"===typeof t||function(e,t,a,r){if(null!==a&&0===a.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==a?!a.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,a,r))return!0;if(r)return!1;if(null!==a)switch(a.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,a,s,r)&&(a=null),r||null===s?function(e){return!!m.call(h,e)||!m.call(x,e)&&(u.test(e)?h[e]=!0:(x[e]=!0,!1))}(t)&&(null===a?e.removeAttribute(t):e.setAttribute(t,""+a)):s.mustUseProperty?e[s.propertyName]=null===a?3!==s.type&&"":a:(t=s.attributeName,r=s.attributeNamespace,null===a?e.removeAttribute(t):(a=3===(s=s.type)||4===s&&!0===a?"":""+a,r?e.setAttributeNS(r,t,a):e.setAttribute(t,a))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);p[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);p[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);p[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){p[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),p.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){p[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var f=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),k=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,U=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var O=!1;function F(e,t){if(!e||O)return"";O=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&"string"===typeof d.stack){for(var s=d.stack.split("\n"),n=r.stack.split("\n"),l=s.length-1,i=n.length-1;1<=l&&0<=i&&s[l]!==n[i];)i--;for(;1<=l&&0<=i;l--,i--)if(s[l]!==n[i]){if(1!==l||1!==i)do{if(l--,0>--i||s[l]!==n[i]){var o="\n"+s[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=l&&0<=i);break}}}finally{O=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?z(e):""}function B(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case k:return"Portal";case _:return"Profiler";case N:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return W(e(t))}catch(a){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var s=a.get,n=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==a&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var a=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=a?a:e._wrapperState.initialChecked})}function J(e,t){var a=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;a=V(null!=t.value?t.value:a),e._wrapperState={initialChecked:r,initialValue:a,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var a=V(t.value),r=t.type;if(null!=a)"number"===r?(0===a&&""===e.value||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,a):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}""!==(a=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==a&&(e.name=a)}function ee(e,t,a){"number"===t&&Z(e.ownerDocument)===e||(null==a?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var te=Array.isArray;function ae(e,t,a,r){if(e=e.options,t){t={};for(var s=0;s<a.length;s++)t["$"+a[s]]=!0;for(a=0;a<e.length;a++)s=t.hasOwnProperty("$"+e[a].value),e[a].selected!==s&&(e[a].selected=s),s&&r&&(e[a].defaultSelected=!0)}else{for(a=""+V(a),t=null,s=0;s<e.length;s++){if(e[s].value===a)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var a=t.value;if(null==a){if(a=t.children,t=t.defaultValue,null!=a){if(null!=t)throw Error(n(92));if(te(a)){if(1<a.length)throw Error(n(93));a=a[0]}t=a}null==t&&(t=""),a=t}e._wrapperState={initialValue:V(a)}}function ne(e,t){var a=V(t.value),r=V(t.defaultValue);null!=a&&((a=""+a)!==e.value&&(e.value=a),null==t.defaultValue&&e.defaultValue!==a&&(e.defaultValue=a)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ce,me=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,a,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function ue(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}var xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ge(e,t,a){return null==t||"boolean"===typeof t||""===t?"":a||"number"!==typeof t||0===t||xe.hasOwnProperty(e)&&xe[e]?(""+t).trim():t+"px"}function pe(e,t){for(var a in e=e.style,t)if(t.hasOwnProperty(a)){var r=0===a.indexOf("--"),s=ge(a,t[a],r);"float"===a&&(a="cssFloat"),r?e.setProperty(a,s):e[a]=s}}Object.keys(xe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xe[t]=xe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,we=null,Ne=null;function _e(e){if(e=ys(e)){if("function"!==typeof ke)throw Error(n(280));var t=e.stateNode;t&&(t=fs(t),ke(e.stateNode,e.type,t))}}function Se(e){we?Ne?Ne.push(e):Ne=[e]:we=e}function Ce(){if(we){var e=we,t=Ne;if(Ne=we=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ee(e,t){return e(t)}function Te(){}var Ae=!1;function Me(e,t,a){if(Ae)return e(t,a);Ae=!0;try{return Ee(e,t,a)}finally{Ae=!1,(null!==we||null!==Ne)&&(Te(),Ce())}}function Pe(e,t){var a=e.stateNode;if(null===a)return null;var r=fs(a);if(null===r)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(a&&"function"!==typeof a)throw Error(n(231,t,typeof a));return a}var Re=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Re=!1}function De(e,t,a,r,s,n,l,i,o){var d=Array.prototype.slice.call(arguments,3);try{t.apply(a,d)}catch(c){this.onError(c)}}var Le=!1,Ue=null,ze=!1,Oe=null,Fe={onError:function(e){Le=!0,Ue=e}};function Be(e,t,a,r,s,n,l,i,o){Le=!1,Ue=null,De.apply(Fe,arguments)}function We(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(n(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(n(188));return t!==e?null:e}for(var a=e,r=t;;){var s=a.return;if(null===s)break;var l=s.alternate;if(null===l){if(null!==(r=s.return)){a=r;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===a)return Ve(s),e;if(l===r)return Ve(s),t;l=l.sibling}throw Error(n(188))}if(a.return!==r.return)a=s,r=l;else{for(var i=!1,o=s.child;o;){if(o===a){i=!0,a=s,r=l;break}if(o===r){i=!0,r=s,a=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===a){i=!0,a=l,r=s;break}if(o===r){i=!0,r=l,a=s;break}o=o.sibling}if(!i)throw Error(n(189))}}if(a.alternate!==r)throw Error(n(190))}if(3!==a.tag)throw Error(n(188));return a.stateNode.current===a?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=s.unstable_scheduleCallback,Ze=s.unstable_cancelCallback,Ke=s.unstable_shouldYield,Je=s.unstable_requestPaint,Qe=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,at=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,nt=null;var lt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/ot|0)|0},it=Math.log,ot=Math.LN2;var dt=64,ct=4194304;function mt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var a=e.pendingLanes;if(0===a)return 0;var r=0,s=e.suspendedLanes,n=e.pingedLanes,l=268435455&a;if(0!==l){var i=l&~s;0!==i?r=mt(i):0!==(n&=l)&&(r=mt(n))}else 0!==(l=a&~s)?r=mt(l):0!==n&&(r=mt(n));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(n=t&-t)||16===s&&0!==(4194240&n)))return t;if(0!==(4&r)&&(r|=16&a),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(a=31-lt(t)),r|=e[a],t&=~s;return r}function xt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=dt;return 0===(4194240&(dt<<=1))&&(dt=64),e}function pt(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function vt(e,t,a){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-lt(t)]=a}function yt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-lt(a),s=1<<r;s&t|e[r]&t&&(e[r]|=t),a&=~s}}var bt=0;function ft(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,kt,wt,Nt,_t,St=!1,Ct=[],Et=null,Tt=null,At=null,Mt=new Map,Pt=new Map,Rt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,a,r,s,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:n,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ut(e){var t=vs(e.target);if(null!==t){var a=We(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=He(a)))return e.blockedOn=t,void _t(e.priority,(function(){wt(a)}))}else if(3===t&&a.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===a.tag?a.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var a=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==a)return null!==(t=ys(a))&&kt(t),e.blockedOn=a,!1;var r=new(a=e.nativeEvent).constructor(a.type,a);fe=r,a.target.dispatchEvent(r),fe=null,t.shift()}return!0}function Ot(e,t,a){zt(e)&&a.delete(t)}function Ft(){St=!1,null!==Et&&zt(Et)&&(Et=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==At&&zt(At)&&(At=null),Mt.forEach(Ot),Pt.forEach(Ot)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ft)))}function Wt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var a=1;a<Ct.length;a++){var r=Ct[a];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Tt&&Bt(Tt,e),null!==At&&Bt(At,e),Mt.forEach(t),Pt.forEach(t),a=0;a<Rt.length;a++)(r=Rt[a]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(a=Rt[0]).blockedOn;)Ut(a),null===a.blockedOn&&Rt.shift()}var Ht=f.ReactCurrentBatchConfig,Vt=!0;function qt(e,t,a,r){var s=bt,n=Ht.transition;Ht.transition=null;try{bt=1,Yt(e,t,a,r)}finally{bt=s,Ht.transition=n}}function Gt(e,t,a,r){var s=bt,n=Ht.transition;Ht.transition=null;try{bt=4,Yt(e,t,a,r)}finally{bt=s,Ht.transition=n}}function Yt(e,t,a,r){if(Vt){var s=Kt(e,t,a,r);if(null===s)Hr(e,t,r,Zt,a),Dt(e,r);else if(function(e,t,a,r,s){switch(t){case"focusin":return Et=Lt(Et,e,t,a,r,s),!0;case"dragenter":return Tt=Lt(Tt,e,t,a,r,s),!0;case"mouseover":return At=Lt(At,e,t,a,r,s),!0;case"pointerover":var n=s.pointerId;return Mt.set(n,Lt(Mt.get(n)||null,e,t,a,r,s)),!0;case"gotpointercapture":return n=s.pointerId,Pt.set(n,Lt(Pt.get(n)||null,e,t,a,r,s)),!0}return!1}(s,e,t,a,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==s;){var n=ys(s);if(null!==n&&jt(n),null===(n=Kt(e,t,a,r))&&Hr(e,t,r,Zt,a),n===s)break;s=n}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,a)}}var Zt=null;function Kt(e,t,a,r){if(Zt=null,null!==(e=vs(e=je(r))))if(null===(t=We(e)))e=null;else if(13===(a=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===a){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case at:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,$t=null;function ea(){if($t)return $t;var e,t,a=Xt,r=a.length,s="value"in Qt?Qt.value:Qt.textContent,n=s.length;for(e=0;e<r&&a[e]===s[e];e++);var l=r-e;for(t=1;t<=l&&a[r-t]===s[n-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function aa(){return!0}function ra(){return!1}function sa(e){function t(t,a,r,s,n){for(var l in this._reactName=t,this._targetInst=r,this.type=a,this.nativeEvent=s,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?aa:ra,this.isPropagationStopped=ra,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),t}var na,la,ia,oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=sa(oa),ca=U({},oa,{view:0,detail:0}),ma=sa(ca),ua=U({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ia&&(ia&&"mousemove"===e.type?(na=e.screenX-ia.screenX,la=e.screenY-ia.screenY):la=na=0,ia=e),na)},movementY:function(e){return"movementY"in e?e.movementY:la}}),xa=sa(ua),ha=sa(U({},ua,{dataTransfer:0})),ga=sa(U({},ca,{relatedTarget:0})),pa=sa(U({},oa,{animationName:0,elapsedTime:0,pseudoElement:0})),va=U({},oa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ya=sa(va),ba=sa(U({},oa,{data:0})),fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ja={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ka={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wa(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ka[e])&&!!t[e]}function Na(){return wa}var _a=U({},ca,{key:function(e){if(e.key){var t=fa[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ta(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ja[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return"keypress"===e.type?ta(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ta(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sa=sa(_a),Ca=sa(U({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ea=sa(U({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na})),Ta=sa(U({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0})),Aa=U({},ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ma=sa(Aa),Pa=[9,13,27,32],Ra=c&&"CompositionEvent"in window,Ia=null;c&&"documentMode"in document&&(Ia=document.documentMode);var Da=c&&"TextEvent"in window&&!Ia,La=c&&(!Ra||Ia&&8<Ia&&11>=Ia),Ua=String.fromCharCode(32),za=!1;function Oa(e,t){switch(e){case"keyup":return-1!==Pa.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fa(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ba=!1;var Wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wa[e.type]:"textarea"===t}function Va(e,t,a,r){Se(r),0<(t=qr(t,"onChange")).length&&(a=new da("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var qa=null,Ga=null;function Ya(e){Ur(e,0)}function Za(e){if(Y(bs(e)))return e}function Ka(e,t){if("change"===e)return t}var Ja=!1;if(c){var Qa;if(c){var Xa="oninput"in document;if(!Xa){var $a=document.createElement("div");$a.setAttribute("oninput","return;"),Xa="function"===typeof $a.oninput}Qa=Xa}else Qa=!1;Ja=Qa&&(!document.documentMode||9<document.documentMode)}function er(){qa&&(qa.detachEvent("onpropertychange",tr),Ga=qa=null)}function tr(e){if("value"===e.propertyName&&Za(Ga)){var t=[];Va(t,Ga,e,je(e)),Me(Ya,t)}}function ar(e,t,a){"focusin"===e?(er(),Ga=a,(qa=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Za(Ga)}function sr(e,t){if("click"===e)return Za(t)}function nr(e,t){if("input"===e||"change"===e)return Za(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ir(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var s=a[r];if(!m.call(t,s)||!lr(e[s],t[s]))return!1}return!0}function or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var a,r=or(e);for(e=0;r;){if(3===r.nodeType){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=or(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var a="string"===typeof t.contentWindow.location.href}catch(r){a=!1}if(!a)break;t=Z((e=t.contentWindow).document)}return t}function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function xr(e){var t=mr(),a=e.focusedElem,r=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&cr(a.ownerDocument.documentElement,a)){if(null!==r&&ur(a))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if((e=(t=a.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=a.textContent.length,n=Math.min(r.start,s);r=void 0===r.end?n:Math.min(r.end,s),!e.extend&&n>r&&(s=r,r=n,n=s),s=dr(a,n);var l=dr(a,r);s&&l&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),n>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}for(t=[],e=a;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<t.length;a++)(e=t[a]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,pr=null,vr=null,yr=!1;function br(e,t,a){var r=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;yr||null==gr||gr!==Z(r)||("selectionStart"in(r=gr)&&ur(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ir(vr,r)||(vr=r,0<(r=qr(pr,"onSelect")).length&&(t=new da("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=gr)))}function fr(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var jr={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionend:fr("Transition","TransitionEnd")},kr={},wr={};function Nr(e){if(kr[e])return kr[e];if(!jr[e])return e;var t,a=jr[e];for(t in a)if(a.hasOwnProperty(t)&&t in wr)return kr[e]=a[t];return e}c&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var _r=Nr("animationend"),Sr=Nr("animationiteration"),Cr=Nr("animationstart"),Er=Nr("transitionend"),Tr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Tr.set(e,t),o(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Rr=Ar[Pr];Mr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Mr(_r,"onAnimationEnd"),Mr(Sr,"onAnimationIteration"),Mr(Cr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Er,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Lr(e,t,a){var r=e.type||"unknown-event";e.currentTarget=a,function(e,t,a,r,s,l,i,o,d){if(Be.apply(this,arguments),Le){if(!Le)throw Error(n(198));var c=Ue;Le=!1,Ue=null,ze||(ze=!0,Oe=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var a=0;a<e.length;a++){var r=e[a],s=r.event;r=r.listeners;e:{var n=void 0;if(t)for(var l=r.length-1;0<=l;l--){var i=r[l],o=i.instance,d=i.currentTarget;if(i=i.listener,o!==n&&s.isPropagationStopped())break e;Lr(s,i,d),n=o}else for(l=0;l<r.length;l++){if(o=(i=r[l]).instance,d=i.currentTarget,i=i.listener,o!==n&&s.isPropagationStopped())break e;Lr(s,i,d),n=o}}}if(ze)throw e=Oe,ze=!1,Oe=null,e}function zr(e,t){var a=t[hs];void 0===a&&(a=t[hs]=new Set);var r=e+"__bubble";a.has(r)||(Wr(t,e,2,!1),a.add(r))}function Or(e,t,a){var r=0;t&&(r|=4),Wr(a,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Fr]){e[Fr]=!0,l.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Or(t,!1,e),Or(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Or("selectionchange",!1,t))}}function Wr(e,t,a,r){switch(Jt(t)){case 1:var s=qt;break;case 4:s=Gt;break;default:s=Yt}a=s.bind(null,t,a,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,a,{capture:!0,passive:s}):e.addEventListener(t,a,!0):void 0!==s?e.addEventListener(t,a,{passive:s}):e.addEventListener(t,a,!1)}function Hr(e,t,a,r,s){var n=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var l=r.tag;if(3===l||4===l){var i=r.stateNode.containerInfo;if(i===s||8===i.nodeType&&i.parentNode===s)break;if(4===l)for(l=r.return;null!==l;){var o=l.tag;if((3===o||4===o)&&((o=l.stateNode.containerInfo)===s||8===o.nodeType&&o.parentNode===s))return;l=l.return}for(;null!==i;){if(null===(l=vs(i)))return;if(5===(o=l.tag)||6===o){r=n=l;continue e}i=i.parentNode}}r=r.return}Me((function(){var r=n,s=je(a),l=[];e:{var i=Tr.get(e);if(void 0!==i){var o=da,d=e;switch(e){case"keypress":if(0===ta(a))break e;case"keydown":case"keyup":o=Sa;break;case"focusin":d="focus",o=ga;break;case"focusout":d="blur",o=ga;break;case"beforeblur":case"afterblur":o=ga;break;case"click":if(2===a.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=ha;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Ea;break;case _r:case Sr:case Cr:o=pa;break;case Er:o=Ta;break;case"scroll":o=ma;break;case"wheel":o=Ma;break;case"copy":case"cut":case"paste":o=ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Ca}var c=0!==(4&t),m=!c&&"scroll"===e,u=c?null!==i?i+"Capture":null:i;c=[];for(var x,h=r;null!==h;){var g=(x=h).stateNode;if(5===x.tag&&null!==g&&(x=g,null!==u&&(null!=(g=Pe(h,u))&&c.push(Vr(h,g,x)))),m)break;h=h.return}0<c.length&&(i=new o(i,d,null,a,s),l.push({event:i,listeners:c}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||a===fe||!(d=a.relatedTarget||a.fromElement)||!vs(d)&&!d[xs])&&(o||i)&&(i=s.window===s?s:(i=s.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=r,null!==(d=(d=a.relatedTarget||a.toElement)?vs(d):null)&&(d!==(m=We(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(o=null,d=r),o!==d)){if(c=xa,g="onMouseLeave",u="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ca,g="onPointerLeave",u="onPointerEnter",h="pointer"),m=null==o?i:bs(o),x=null==d?i:bs(d),(i=new c(g,h+"leave",o,a,s)).target=m,i.relatedTarget=x,g=null,vs(s)===r&&((c=new c(u,h+"enter",d,a,s)).target=x,c.relatedTarget=m,g=c),m=g,o&&d)e:{for(u=d,h=0,x=c=o;x;x=Gr(x))h++;for(x=0,g=u;g;g=Gr(g))x++;for(;0<h-x;)c=Gr(c),h--;for(;0<x-h;)u=Gr(u),x--;for(;h--;){if(c===u||null!==u&&c===u.alternate)break e;c=Gr(c),u=Gr(u)}c=null}else c=null;null!==o&&Yr(l,i,o,c,!1),null!==d&&null!==m&&Yr(l,m,d,c,!0)}if("select"===(o=(i=r?bs(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===o&&"file"===i.type)var p=Ka;else if(Ha(i))if(Ja)p=nr;else{p=rr;var v=ar}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(p=sr);switch(p&&(p=p(e,r))?Va(l,p,a,s):(v&&v(e,i,r),"focusout"===e&&(v=i._wrapperState)&&v.controlled&&"number"===i.type&&ee(i,"number",i.value)),v=r?bs(r):window,e){case"focusin":(Ha(v)||"true"===v.contentEditable)&&(gr=v,pr=r,vr=null);break;case"focusout":vr=pr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(l,a,s);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":br(l,a,s)}var y;if(Ra)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ba?Oa(e,a)&&(b="onCompositionEnd"):"keydown"===e&&229===a.keyCode&&(b="onCompositionStart");b&&(La&&"ko"!==a.locale&&(Ba||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ba&&(y=ea()):(Xt="value"in(Qt=s)?Qt.value:Qt.textContent,Ba=!0)),0<(v=qr(r,b)).length&&(b=new ba(b,e,null,a,s),l.push({event:b,listeners:v}),y?b.data=y:null!==(y=Fa(a))&&(b.data=y))),(y=Da?function(e,t){switch(e){case"compositionend":return Fa(t);case"keypress":return 32!==t.which?null:(za=!0,Ua);case"textInput":return(e=t.data)===Ua&&za?null:e;default:return null}}(e,a):function(e,t){if(Ba)return"compositionend"===e||!Ra&&Oa(e,t)?(e=ea(),$t=Xt=Qt=null,Ba=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return La&&"ko"!==t.locale?null:t.data}}(e,a))&&(0<(r=qr(r,"onBeforeInput")).length&&(s=new ba("onBeforeInput","beforeinput",null,a,s),l.push({event:s,listeners:r}),s.data=y))}Ur(l,t)}))}function Vr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function qr(e,t){for(var a=t+"Capture",r=[];null!==e;){var s=e,n=s.stateNode;5===s.tag&&null!==n&&(s=n,null!=(n=Pe(e,a))&&r.unshift(Vr(e,n,s)),null!=(n=Pe(e,t))&&r.push(Vr(e,n,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,a,r,s){for(var n=t._reactName,l=[];null!==a&&a!==r;){var i=a,o=i.alternate,d=i.stateNode;if(null!==o&&o===r)break;5===i.tag&&null!==d&&(i=d,s?null!=(o=Pe(a,n))&&l.unshift(Vr(a,o,i)):s||null!=(o=Pe(a,n))&&l.push(Vr(a,o,i))),a=a.return}0!==l.length&&e.push({event:t,listeners:l})}var Zr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Kr,"")}function Qr(e,t,a){if(t=Jr(t),Jr(e)!==t&&a)throw Error(n(425))}function Xr(){}var $r=null,es=null;function ts(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var as="function"===typeof setTimeout?setTimeout:void 0,rs="function"===typeof clearTimeout?clearTimeout:void 0,ss="function"===typeof Promise?Promise:void 0,ns="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ss?function(e){return ss.resolve(null).then(e).catch(ls)}:as;function ls(e){setTimeout((function(){throw e}))}function is(e,t){var a=t,r=0;do{var s=a.nextSibling;if(e.removeChild(a),s&&8===s.nodeType)if("/$"===(a=s.data)){if(0===r)return e.removeChild(s),void Wt(t);r--}else"$"!==a&&"$?"!==a&&"$!"!==a||r++;a=s}while(a);Wt(t)}function os(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("$"===a||"$!"===a||"$?"===a){if(0===t)return e;t--}else"/$"===a&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),ms="__reactFiber$"+cs,us="__reactProps$"+cs,xs="__reactContainer$"+cs,hs="__reactEvents$"+cs,gs="__reactListeners$"+cs,ps="__reactHandles$"+cs;function vs(e){var t=e[ms];if(t)return t;for(var a=e.parentNode;a;){if(t=a[xs]||a[ms]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=ds(e);null!==e;){if(a=e[ms])return a;e=ds(e)}return t}a=(e=a).parentNode}return null}function ys(e){return!(e=e[ms]||e[xs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function fs(e){return e[us]||null}var js=[],ks=-1;function ws(e){return{current:e}}function Ns(e){0>ks||(e.current=js[ks],js[ks]=null,ks--)}function _s(e,t){ks++,js[ks]=e.current,e.current=t}var Ss={},Cs=ws(Ss),Es=ws(!1),Ts=Ss;function As(e,t){var a=e.type.contextTypes;if(!a)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,n={};for(s in a)n[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Ms(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ns(Es),Ns(Cs)}function Rs(e,t,a){if(Cs.current!==Ss)throw Error(n(168));_s(Cs,t),_s(Es,a)}function Is(e,t,a){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return a;for(var s in r=r.getChildContext())if(!(s in t))throw Error(n(108,H(e)||"Unknown",s));return U({},a,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,Ts=Cs.current,_s(Cs,e),_s(Es,Es.current),!0}function Ls(e,t,a){var r=e.stateNode;if(!r)throw Error(n(169));a?(e=Is(e,t,Ts),r.__reactInternalMemoizedMergedChildContext=e,Ns(Es),Ns(Cs),_s(Cs,e)):Ns(Es),_s(Es,a)}var Us=null,zs=!1,Os=!1;function Fs(e){null===Us?Us=[e]:Us.push(e)}function Bs(){if(!Os&&null!==Us){Os=!0;var e=0,t=bt;try{var a=Us;for(bt=1;e<a.length;e++){var r=a[e];do{r=r(!0)}while(null!==r)}Us=null,zs=!1}catch(s){throw null!==Us&&(Us=Us.slice(e+1)),Ye($e,Bs),s}finally{bt=t,Os=!1}}return null}var Ws=[],Hs=0,Vs=null,qs=0,Gs=[],Ys=0,Zs=null,Ks=1,Js="";function Qs(e,t){Ws[Hs++]=qs,Ws[Hs++]=Vs,Vs=e,qs=t}function Xs(e,t,a){Gs[Ys++]=Ks,Gs[Ys++]=Js,Gs[Ys++]=Zs,Zs=e;var r=Ks;e=Js;var s=32-lt(r)-1;r&=~(1<<s),a+=1;var n=32-lt(t)+s;if(30<n){var l=s-s%5;n=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Ks=1<<32-lt(t)+s|a<<s|r,Js=n+e}else Ks=1<<n|a<<s|r,Js=e}function $s(e){null!==e.return&&(Qs(e,1),Xs(e,1,0))}function en(e){for(;e===Vs;)Vs=Ws[--Hs],Ws[Hs]=null,qs=Ws[--Hs],Ws[Hs]=null;for(;e===Zs;)Zs=Gs[--Ys],Gs[Ys]=null,Js=Gs[--Ys],Gs[Ys]=null,Ks=Gs[--Ys],Gs[Ys]=null}var tn=null,an=null,rn=!1,sn=null;function nn(e,t){var a=Md(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,null===(t=e.deletions)?(e.deletions=[a],e.flags|=16):t.push(a)}function ln(e,t){switch(e.tag){case 5:var a=e.type;return null!==(t=1!==t.nodeType||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,tn=e,an=os(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,tn=e,an=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(a=null!==Zs?{id:Ks,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},(a=Md(18,null,null,0)).stateNode=t,a.return=e,e.child=a,tn=e,an=null,!0);default:return!1}}function on(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function dn(e){if(rn){var t=an;if(t){var a=t;if(!ln(e,t)){if(on(e))throw Error(n(418));t=os(a.nextSibling);var r=tn;t&&ln(e,t)?nn(r,a):(e.flags=-4097&e.flags|2,rn=!1,tn=e)}}else{if(on(e))throw Error(n(418));e.flags=-4097&e.flags|2,rn=!1,tn=e}}}function cn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tn=e}function mn(e){if(e!==tn)return!1;if(!rn)return cn(e),rn=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ts(e.type,e.memoizedProps)),t&&(t=an)){if(on(e))throw un(),Error(n(418));for(;t;)nn(e,t),t=os(t.nextSibling)}if(cn(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var a=e.data;if("/$"===a){if(0===t){an=os(e.nextSibling);break e}t--}else"$"!==a&&"$!"!==a&&"$?"!==a||t++}e=e.nextSibling}an=null}}else an=tn?os(e.stateNode.nextSibling):null;return!0}function un(){for(var e=an;e;)e=os(e.nextSibling)}function xn(){an=tn=null,rn=!1}function hn(e){null===sn?sn=[e]:sn.push(e)}var gn=f.ReactCurrentBatchConfig;function pn(e,t,a){if(null!==(e=a.ref)&&"function"!==typeof e&&"object"!==typeof e){if(a._owner){if(a=a._owner){if(1!==a.tag)throw Error(n(309));var r=a.stateNode}if(!r)throw Error(n(147,e));var s=r,l=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=s.refs;null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!==typeof e)throw Error(n(284));if(!a._owner)throw Error(n(290,e))}return e}function vn(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yn(e){return(0,e._init)(e._payload)}function bn(e){function t(t,a){if(e){var r=t.deletions;null===r?(t.deletions=[a],t.flags|=16):r.push(a)}}function a(a,r){if(!e)return null;for(;null!==r;)t(a,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Rd(e,t)).index=0,e.sibling=null,e}function l(t,a,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<a?(t.flags|=2,a):r:(t.flags|=2,a):(t.flags|=1048576,a)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,a,r){return null===t||6!==t.tag?((t=Ud(a,e.mode,r)).return=e,t):((t=s(t,a)).return=e,t)}function d(e,t,a,r){var n=a.type;return n===w?m(e,t,a.props.children,r,a.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===P&&yn(n)===t.type)?((r=s(t,a.props)).ref=pn(e,t,a),r.return=e,r):((r=Id(a.type,a.key,a.props,null,e.mode,r)).ref=pn(e,t,a),r.return=e,r)}function c(e,t,a,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=zd(a,e.mode,r)).return=e,t):((t=s(t,a.children||[])).return=e,t)}function m(e,t,a,r,n){return null===t||7!==t.tag?((t=Dd(a,e.mode,r,n)).return=e,t):((t=s(t,a)).return=e,t)}function u(e,t,a){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ud(""+t,e.mode,a)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(a=Id(t.type,t.key,t.props,null,e.mode,a)).ref=pn(e,null,t),a.return=e,a;case k:return(t=zd(t,e.mode,a)).return=e,t;case P:return u(e,(0,t._init)(t._payload),a)}if(te(t)||D(t))return(t=Dd(t,e.mode,a,null)).return=e,t;vn(e,t)}return null}function x(e,t,a,r){var s=null!==t?t.key:null;if("string"===typeof a&&""!==a||"number"===typeof a)return null!==s?null:o(e,t,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return a.key===s?d(e,t,a,r):null;case k:return a.key===s?c(e,t,a,r):null;case P:return x(e,t,(s=a._init)(a._payload),r)}if(te(a)||D(a))return null!==s?null:m(e,t,a,r,null);vn(e,a)}return null}function h(e,t,a,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return o(t,e=e.get(a)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return d(t,e=e.get(null===r.key?a:r.key)||null,r,s);case k:return c(t,e=e.get(null===r.key?a:r.key)||null,r,s);case P:return h(e,t,a,(0,r._init)(r._payload),s)}if(te(r)||D(r))return m(t,e=e.get(a)||null,r,s,null);vn(t,r)}return null}function g(s,n,i,o){for(var d=null,c=null,m=n,g=n=0,p=null;null!==m&&g<i.length;g++){m.index>g?(p=m,m=null):p=m.sibling;var v=x(s,m,i[g],o);if(null===v){null===m&&(m=p);break}e&&m&&null===v.alternate&&t(s,m),n=l(v,n,g),null===c?d=v:c.sibling=v,c=v,m=p}if(g===i.length)return a(s,m),rn&&Qs(s,g),d;if(null===m){for(;g<i.length;g++)null!==(m=u(s,i[g],o))&&(n=l(m,n,g),null===c?d=m:c.sibling=m,c=m);return rn&&Qs(s,g),d}for(m=r(s,m);g<i.length;g++)null!==(p=h(m,s,g,i[g],o))&&(e&&null!==p.alternate&&m.delete(null===p.key?g:p.key),n=l(p,n,g),null===c?d=p:c.sibling=p,c=p);return e&&m.forEach((function(e){return t(s,e)})),rn&&Qs(s,g),d}function p(s,i,o,d){var c=D(o);if("function"!==typeof c)throw Error(n(150));if(null==(o=c.call(o)))throw Error(n(151));for(var m=c=null,g=i,p=i=0,v=null,y=o.next();null!==g&&!y.done;p++,y=o.next()){g.index>p?(v=g,g=null):v=g.sibling;var b=x(s,g,y.value,d);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(s,g),i=l(b,i,p),null===m?c=b:m.sibling=b,m=b,g=v}if(y.done)return a(s,g),rn&&Qs(s,p),c;if(null===g){for(;!y.done;p++,y=o.next())null!==(y=u(s,y.value,d))&&(i=l(y,i,p),null===m?c=y:m.sibling=y,m=y);return rn&&Qs(s,p),c}for(g=r(s,g);!y.done;p++,y=o.next())null!==(y=h(g,s,p,y.value,d))&&(e&&null!==y.alternate&&g.delete(null===y.key?p:y.key),i=l(y,i,p),null===m?c=y:m.sibling=y,m=y);return e&&g.forEach((function(e){return t(s,e)})),rn&&Qs(s,p),c}return function e(r,n,l,o){if("object"===typeof l&&null!==l&&l.type===w&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case j:e:{for(var d=l.key,c=n;null!==c;){if(c.key===d){if((d=l.type)===w){if(7===c.tag){a(r,c.sibling),(n=s(c,l.props.children)).return=r,r=n;break e}}else if(c.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===P&&yn(d)===c.type){a(r,c.sibling),(n=s(c,l.props)).ref=pn(r,c,l),n.return=r,r=n;break e}a(r,c);break}t(r,c),c=c.sibling}l.type===w?((n=Dd(l.props.children,r.mode,o,l.key)).return=r,r=n):((o=Id(l.type,l.key,l.props,null,r.mode,o)).ref=pn(r,n,l),o.return=r,r=o)}return i(r);case k:e:{for(c=l.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===l.containerInfo&&n.stateNode.implementation===l.implementation){a(r,n.sibling),(n=s(n,l.children||[])).return=r,r=n;break e}a(r,n);break}t(r,n),n=n.sibling}(n=zd(l,r.mode,o)).return=r,r=n}return i(r);case P:return e(r,n,(c=l._init)(l._payload),o)}if(te(l))return g(r,n,l,o);if(D(l))return p(r,n,l,o);vn(r,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==n&&6===n.tag?(a(r,n.sibling),(n=s(n,l)).return=r,r=n):(a(r,n),(n=Ud(l,r.mode,o)).return=r,r=n),i(r)):a(r,n)}}var fn=bn(!0),jn=bn(!1),kn=ws(null),wn=null,Nn=null,_n=null;function Sn(){_n=Nn=wn=null}function Cn(e){var t=kn.current;Ns(kn),e._currentValue=t}function En(e,t,a){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function Tn(e,t){wn=e,_n=Nn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yi=!0),e.firstContext=null)}function An(e){var t=e._currentValue;if(_n!==e)if(e={context:e,memoizedValue:t,next:null},null===Nn){if(null===wn)throw Error(n(308));Nn=e,wn.dependencies={lanes:0,firstContext:e}}else Nn=Nn.next=e;return t}var Mn=null;function Pn(e){null===Mn?Mn=[e]:Mn.push(e)}function Rn(e,t,a,r){var s=t.interleaved;return null===s?(a.next=a,Pn(t)):(a.next=s.next,s.next=a),t.interleaved=a,In(e,r)}function In(e,t){e.lanes|=t;var a=e.alternate;for(null!==a&&(a.lanes|=t),a=e,e=e.return;null!==e;)e.childLanes|=t,null!==(a=e.alternate)&&(a.childLanes|=t),a=e,e=e.return;return 3===a.tag?a.stateNode:null}var Dn=!1;function Ln(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Un(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function On(e,t,a){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Eo)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,In(e,a)}return null===(s=r.interleaved)?(t.next=t,Pn(r)):(t.next=s.next,s.next=t),r.interleaved=t,In(e,a)}function Fn(e,t,a){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&a))){var r=t.lanes;a|=r&=e.pendingLanes,t.lanes=a,yt(e,a)}}function Bn(e,t){var a=e.updateQueue,r=e.alternate;if(null!==r&&a===(r=r.updateQueue)){var s=null,n=null;if(null!==(a=a.firstBaseUpdate)){do{var l={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};null===n?s=n=l:n=n.next=l,a=a.next}while(null!==a);null===n?s=n=t:n=n.next=t}else s=n=t;return a={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:n,shared:r.shared,effects:r.effects},void(e.updateQueue=a)}null===(e=a.lastBaseUpdate)?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Wn(e,t,a,r){var s=e.updateQueue;Dn=!1;var n=s.firstBaseUpdate,l=s.lastBaseUpdate,i=s.shared.pending;if(null!==i){s.shared.pending=null;var o=i,d=o.next;o.next=null,null===l?n=d:l.next=d,l=o;var c=e.alternate;null!==c&&((i=(c=c.updateQueue).lastBaseUpdate)!==l&&(null===i?c.firstBaseUpdate=d:i.next=d,c.lastBaseUpdate=o))}if(null!==n){var m=s.baseState;for(l=0,c=d=o=null,i=n;;){var u=i.lane,x=i.eventTime;if((r&u)===u){null!==c&&(c=c.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,g=i;switch(u=t,x=a,g.tag){case 1:if("function"===typeof(h=g.payload)){m=h.call(x,m,u);break e}m=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(u="function"===typeof(h=g.payload)?h.call(x,m,u):h)||void 0===u)break e;m=U({},m,u);break e;case 2:Dn=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(u=s.effects)?s.effects=[i]:u.push(i))}else x={eventTime:x,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(d=c=x,o=m):c=c.next=x,l|=u;if(null===(i=i.next)){if(null===(i=s.shared.pending))break;i=(u=i).next,u.next=null,s.lastBaseUpdate=u,s.shared.pending=null}}if(null===c&&(o=m),s.baseState=o,s.firstBaseUpdate=d,s.lastBaseUpdate=c,null!==(t=s.shared.interleaved)){s=t;do{l|=s.lane,s=s.next}while(s!==t)}else null===n&&(s.shared.lanes=0);Lo|=l,e.lanes=l,e.memoizedState=m}}function Hn(e,t,a){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=a,"function"!==typeof s)throw Error(n(191,s));s.call(r)}}}var Vn={},qn=ws(Vn),Gn=ws(Vn),Yn=ws(Vn);function Zn(e){if(e===Vn)throw Error(n(174));return e}function Kn(e,t){switch(_s(Yn,t),_s(Gn,e),_s(qn,Vn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ns(qn),_s(qn,t)}function Jn(){Ns(qn),Ns(Gn),Ns(Yn)}function Qn(e){Zn(Yn.current);var t=Zn(qn.current),a=oe(t,e.type);t!==a&&(_s(Gn,e),_s(qn,a))}function Xn(e){Gn.current===e&&(Ns(qn),Ns(Gn))}var $n=ws(0);function el(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||"$?"===a.data||"$!"===a.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tl=[];function al(){for(var e=0;e<tl.length;e++)tl[e]._workInProgressVersionPrimary=null;tl.length=0}var rl=f.ReactCurrentDispatcher,sl=f.ReactCurrentBatchConfig,nl=0,ll=null,il=null,ol=null,dl=!1,cl=!1,ml=0,ul=0;function xl(){throw Error(n(321))}function hl(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!lr(e[a],t[a]))return!1;return!0}function gl(e,t,a,r,s,l){if(nl=l,ll=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rl.current=null===e||null===e.memoizedState?Xl:$l,e=a(r,s),cl){l=0;do{if(cl=!1,ml=0,25<=l)throw Error(n(301));l+=1,ol=il=null,t.updateQueue=null,rl.current=ei,e=a(r,s)}while(cl)}if(rl.current=Ql,t=null!==il&&null!==il.next,nl=0,ol=il=ll=null,dl=!1,t)throw Error(n(300));return e}function pl(){var e=0!==ml;return ml=0,e}function vl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ol?ll.memoizedState=ol=e:ol=ol.next=e,ol}function yl(){if(null===il){var e=ll.alternate;e=null!==e?e.memoizedState:null}else e=il.next;var t=null===ol?ll.memoizedState:ol.next;if(null!==t)ol=t,il=e;else{if(null===e)throw Error(n(310));e={memoizedState:(il=e).memoizedState,baseState:il.baseState,baseQueue:il.baseQueue,queue:il.queue,next:null},null===ol?ll.memoizedState=ol=e:ol=ol.next=e}return ol}function bl(e,t){return"function"===typeof t?t(e):t}function fl(e){var t=yl(),a=t.queue;if(null===a)throw Error(n(311));a.lastRenderedReducer=e;var r=il,s=r.baseQueue,l=a.pending;if(null!==l){if(null!==s){var i=s.next;s.next=l.next,l.next=i}r.baseQueue=s=l,a.pending=null}if(null!==s){l=s.next,r=r.baseState;var o=i=null,d=null,c=l;do{var m=c.lane;if((nl&m)===m)null!==d&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var u={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===d?(o=d=u,i=r):d=d.next=u,ll.lanes|=m,Lo|=m}c=c.next}while(null!==c&&c!==l);null===d?i=r:d.next=o,lr(r,t.memoizedState)||(yi=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=d,a.lastRenderedState=r}if(null!==(e=a.interleaved)){s=e;do{l=s.lane,ll.lanes|=l,Lo|=l,s=s.next}while(s!==e)}else null===s&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function jl(e){var t=yl(),a=t.queue;if(null===a)throw Error(n(311));a.lastRenderedReducer=e;var r=a.dispatch,s=a.pending,l=t.memoizedState;if(null!==s){a.pending=null;var i=s=s.next;do{l=e(l,i.action),i=i.next}while(i!==s);lr(l,t.memoizedState)||(yi=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),a.lastRenderedState=l}return[l,r]}function kl(){}function wl(e,t){var a=ll,r=yl(),s=t(),l=!lr(r.memoizedState,s);if(l&&(r.memoizedState=s,yi=!0),r=r.queue,Dl(Sl.bind(null,a,r,e),[e]),r.getSnapshot!==t||l||null!==ol&&1&ol.memoizedState.tag){if(a.flags|=2048,Al(9,_l.bind(null,a,r,s,t),void 0,null),null===To)throw Error(n(349));0!==(30&nl)||Nl(a,t,s)}return s}function Nl(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.stores=[e]):null===(a=t.stores)?t.stores=[e]:a.push(e)}function _l(e,t,a,r){t.value=a,t.getSnapshot=r,Cl(t)&&El(e)}function Sl(e,t,a){return a((function(){Cl(t)&&El(e)}))}function Cl(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!lr(e,a)}catch(r){return!0}}function El(e){var t=In(e,1);null!==t&&ad(t,e,1,-1)}function Tl(e){var t=vl();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:e},t.queue=e,e=e.dispatch=Yl.bind(null,ll,e),[t.memoizedState,e]}function Al(e,t,a,r){return e={tag:e,create:t,destroy:a,deps:r,next:null},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.lastEffect=e.next=e):null===(a=t.lastEffect)?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function Ml(){return yl().memoizedState}function Pl(e,t,a,r){var s=vl();ll.flags|=e,s.memoizedState=Al(1|t,a,void 0,void 0===r?null:r)}function Rl(e,t,a,r){var s=yl();r=void 0===r?null:r;var n=void 0;if(null!==il){var l=il.memoizedState;if(n=l.destroy,null!==r&&hl(r,l.deps))return void(s.memoizedState=Al(t,a,n,r))}ll.flags|=e,s.memoizedState=Al(1|t,a,n,r)}function Il(e,t){return Pl(8390656,8,e,t)}function Dl(e,t){return Rl(2048,8,e,t)}function Ll(e,t){return Rl(4,2,e,t)}function Ul(e,t){return Rl(4,4,e,t)}function zl(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ol(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Rl(4,4,zl.bind(null,t,e),a)}function Fl(){}function Bl(e,t){var a=yl();t=void 0===t?null:t;var r=a.memoizedState;return null!==r&&null!==t&&hl(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function Wl(e,t){var a=yl();t=void 0===t?null:t;var r=a.memoizedState;return null!==r&&null!==t&&hl(t,r[1])?r[0]:(e=e(),a.memoizedState=[e,t],e)}function Hl(e,t,a){return 0===(21&nl)?(e.baseState&&(e.baseState=!1,yi=!0),e.memoizedState=a):(lr(a,t)||(a=gt(),ll.lanes|=a,Lo|=a,e.baseState=!0),t)}function Vl(e,t){var a=bt;bt=0!==a&&4>a?a:4,e(!0);var r=sl.transition;sl.transition={};try{e(!1),t()}finally{bt=a,sl.transition=r}}function ql(){return yl().memoizedState}function Gl(e,t,a){var r=td(e);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},Zl(e))Kl(t,a);else if(null!==(a=Rn(e,t,a,r))){ad(a,e,r,ed()),Jl(a,t,r)}}function Yl(e,t,a){var r=td(e),s={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zl(e))Kl(t,s);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var l=t.lastRenderedState,i=n(l,a);if(s.hasEagerState=!0,s.eagerState=i,lr(i,l)){var o=t.interleaved;return null===o?(s.next=s,Pn(t)):(s.next=o.next,o.next=s),void(t.interleaved=s)}}catch(d){}null!==(a=Rn(e,t,s,r))&&(ad(a,e,r,s=ed()),Jl(a,t,r))}}function Zl(e){var t=e.alternate;return e===ll||null!==t&&t===ll}function Kl(e,t){cl=dl=!0;var a=e.pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Jl(e,t,a){if(0!==(4194240&a)){var r=t.lanes;a|=r&=e.pendingLanes,t.lanes=a,yt(e,a)}}var Ql={readContext:An,useCallback:xl,useContext:xl,useEffect:xl,useImperativeHandle:xl,useInsertionEffect:xl,useLayoutEffect:xl,useMemo:xl,useReducer:xl,useRef:xl,useState:xl,useDebugValue:xl,useDeferredValue:xl,useTransition:xl,useMutableSource:xl,useSyncExternalStore:xl,useId:xl,unstable_isNewReconciler:!1},Xl={readContext:An,useCallback:function(e,t){return vl().memoizedState=[e,void 0===t?null:t],e},useContext:An,useEffect:Il,useImperativeHandle:function(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Pl(4194308,4,zl.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Pl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pl(4,2,e,t)},useMemo:function(e,t){var a=vl();return t=void 0===t?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var r=vl();return t=void 0!==a?a(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gl.bind(null,ll,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vl().memoizedState=e},useState:Tl,useDebugValue:Fl,useDeferredValue:function(e){return vl().memoizedState=e},useTransition:function(){var e=Tl(!1),t=e[0];return e=Vl.bind(null,e[1]),vl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var r=ll,s=vl();if(rn){if(void 0===a)throw Error(n(407));a=a()}else{if(a=t(),null===To)throw Error(n(349));0!==(30&nl)||Nl(r,t,a)}s.memoizedState=a;var l={value:a,getSnapshot:t};return s.queue=l,Il(Sl.bind(null,r,l,e),[e]),r.flags|=2048,Al(9,_l.bind(null,r,l,a,t),void 0,null),a},useId:function(){var e=vl(),t=To.identifierPrefix;if(rn){var a=Js;t=":"+t+"R"+(a=(Ks&~(1<<32-lt(Ks)-1)).toString(32)+a),0<(a=ml++)&&(t+="H"+a.toString(32)),t+=":"}else t=":"+t+"r"+(a=ul++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$l={readContext:An,useCallback:Bl,useContext:An,useEffect:Dl,useImperativeHandle:Ol,useInsertionEffect:Ll,useLayoutEffect:Ul,useMemo:Wl,useReducer:fl,useRef:Ml,useState:function(){return fl(bl)},useDebugValue:Fl,useDeferredValue:function(e){return Hl(yl(),il.memoizedState,e)},useTransition:function(){return[fl(bl)[0],yl().memoizedState]},useMutableSource:kl,useSyncExternalStore:wl,useId:ql,unstable_isNewReconciler:!1},ei={readContext:An,useCallback:Bl,useContext:An,useEffect:Dl,useImperativeHandle:Ol,useInsertionEffect:Ll,useLayoutEffect:Ul,useMemo:Wl,useReducer:jl,useRef:Ml,useState:function(){return jl(bl)},useDebugValue:Fl,useDeferredValue:function(e){var t=yl();return null===il?t.memoizedState=e:Hl(t,il.memoizedState,e)},useTransition:function(){return[jl(bl)[0],yl().memoizedState]},useMutableSource:kl,useSyncExternalStore:wl,useId:ql,unstable_isNewReconciler:!1};function ti(e,t){if(e&&e.defaultProps){for(var a in t=U({},t),e=e.defaultProps)void 0===t[a]&&(t[a]=e[a]);return t}return t}function ai(e,t,a,r){a=null===(a=a(r,t=e.memoizedState))||void 0===a?t:U({},t,a),e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}var ri={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,a){e=e._reactInternals;var r=ed(),s=td(e),n=zn(r,s);n.payload=t,void 0!==a&&null!==a&&(n.callback=a),null!==(t=On(e,n,s))&&(ad(t,e,s,r),Fn(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=ed(),s=td(e),n=zn(r,s);n.tag=1,n.payload=t,void 0!==a&&null!==a&&(n.callback=a),null!==(t=On(e,n,s))&&(ad(t,e,s,r),Fn(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ed(),r=td(e),s=zn(a,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=On(e,s,r))&&(ad(t,e,r,a),Fn(t,e,r))}};function si(e,t,a,r,s,n,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,n,l):!t.prototype||!t.prototype.isPureReactComponent||(!ir(a,r)||!ir(s,n))}function ni(e,t,a){var r=!1,s=Ss,n=t.contextType;return"object"===typeof n&&null!==n?n=An(n):(s=Ms(t)?Ts:Cs.current,n=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):Ss),t=new t(a,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ri,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=n),t}function li(e,t,a,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&ri.enqueueReplaceState(t,t.state,null)}function ii(e,t,a,r){var s=e.stateNode;s.props=a,s.state=e.memoizedState,s.refs={},Ln(e);var n=t.contextType;"object"===typeof n&&null!==n?s.context=An(n):(n=Ms(t)?Ts:Cs.current,s.context=As(e,n)),s.state=e.memoizedState,"function"===typeof(n=t.getDerivedStateFromProps)&&(ai(e,t,n,a),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ri.enqueueReplaceState(s,s.state,null),Wn(e,a,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function oi(e,t){try{var a="",r=t;do{a+=B(r),r=r.return}while(r);var s=a}catch(n){s="\nError generating stack: "+n.message+"\n"+n.stack}return{value:e,source:t,stack:s,digest:null}}function di(e,t,a){return{value:e,source:null,stack:null!=a?a:null,digest:null!=t?t:null}}function ci(e,t){try{console.error(t.value)}catch(a){setTimeout((function(){throw a}))}}var mi="function"===typeof WeakMap?WeakMap:Map;function ui(e,t,a){(a=zn(-1,a)).tag=3,a.payload={element:null};var r=t.value;return a.callback=function(){Vo||(Vo=!0,qo=r),ci(0,t)},a}function xi(e,t,a){(a=zn(-1,a)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;a.payload=function(){return r(s)},a.callback=function(){ci(0,t)}}var n=e.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(a.callback=function(){ci(0,t),"function"!==typeof r&&(null===Go?Go=new Set([this]):Go.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),a}function hi(e,t,a){var r=e.pingCache;if(null===r){r=e.pingCache=new mi;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(a)||(s.add(a),e=_d.bind(null,e,t,a),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function pi(e,t,a,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,1===a.tag&&(null===a.alternate?a.tag=17:((t=zn(-1,1)).tag=2,On(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vi=f.ReactCurrentOwner,yi=!1;function bi(e,t,a,r){t.child=null===e?jn(t,null,a,r):fn(t,e.child,a,r)}function fi(e,t,a,r,s){a=a.render;var n=t.ref;return Tn(t,s),r=gl(e,t,a,r,n,s),a=pl(),null===e||yi?(rn&&a&&$s(t),t.flags|=1,bi(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hi(e,t,s))}function ji(e,t,a,r,s){if(null===e){var n=a.type;return"function"!==typeof n||Pd(n)||void 0!==n.defaultProps||null!==a.compare||void 0!==a.defaultProps?((e=Id(a.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,ki(e,t,n,r,s))}if(n=e.child,0===(e.lanes&s)){var l=n.memoizedProps;if((a=null!==(a=a.compare)?a:ir)(l,r)&&e.ref===t.ref)return Hi(e,t,s)}return t.flags|=1,(e=Rd(n,r)).ref=t.ref,e.return=t,t.child=e}function ki(e,t,a,r,s){if(null!==e){var n=e.memoizedProps;if(ir(n,r)&&e.ref===t.ref){if(yi=!1,t.pendingProps=r=n,0===(e.lanes&s))return t.lanes=e.lanes,Hi(e,t,s);0!==(131072&e.flags)&&(yi=!0)}}return _i(e,t,a,r,s)}function wi(e,t,a){var r=t.pendingProps,s=r.children,n=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_s(Ro,Po),Po|=a;else{if(0===(1073741824&a))return e=null!==n?n.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_s(Ro,Po),Po|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==n?n.baseLanes:a,_s(Ro,Po),Po|=r}else null!==n?(r=n.baseLanes|a,t.memoizedState=null):r=a,_s(Ro,Po),Po|=r;return bi(e,t,s,a),t.child}function Ni(e,t){var a=t.ref;(null===e&&null!==a||null!==e&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function _i(e,t,a,r,s){var n=Ms(a)?Ts:Cs.current;return n=As(t,n),Tn(t,s),a=gl(e,t,a,r,n,s),r=pl(),null===e||yi?(rn&&r&&$s(t),t.flags|=1,bi(e,t,a,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hi(e,t,s))}function Si(e,t,a,r,s){if(Ms(a)){var n=!0;Ds(t)}else n=!1;if(Tn(t,s),null===t.stateNode)Wi(e,t),ni(t,a,r),ii(t,a,r,s),r=!0;else if(null===e){var l=t.stateNode,i=t.memoizedProps;l.props=i;var o=l.context,d=a.contextType;"object"===typeof d&&null!==d?d=An(d):d=As(t,d=Ms(a)?Ts:Cs.current);var c=a.getDerivedStateFromProps,m="function"===typeof c||"function"===typeof l.getSnapshotBeforeUpdate;m||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i!==r||o!==d)&&li(t,l,r,d),Dn=!1;var u=t.memoizedState;l.state=u,Wn(t,r,l,s),o=t.memoizedState,i!==r||u!==o||Es.current||Dn?("function"===typeof c&&(ai(t,a,c,r),o=t.memoizedState),(i=Dn||si(t,a,i,r,u,o,d))?(m||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),l.props=r,l.state=o,l.context=d,r=i):("function"===typeof l.componentDidMount&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Un(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:ti(t.type,i),l.props=d,m=t.pendingProps,u=l.context,"object"===typeof(o=a.contextType)&&null!==o?o=An(o):o=As(t,o=Ms(a)?Ts:Cs.current);var x=a.getDerivedStateFromProps;(c="function"===typeof x||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i!==m||u!==o)&&li(t,l,r,o),Dn=!1,u=t.memoizedState,l.state=u,Wn(t,r,l,s);var h=t.memoizedState;i!==m||u!==h||Es.current||Dn?("function"===typeof x&&(ai(t,a,x,r),h=t.memoizedState),(d=Dn||si(t,a,d,r,u,h,o)||!1)?(c||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(r,h,o),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(r,h,o)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),l.props=r,l.state=h,l.context=o,r=d):("function"!==typeof l.componentDidUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return Ci(e,t,a,r,n,s)}function Ci(e,t,a,r,s,n){Ni(e,t);var l=0!==(128&t.flags);if(!r&&!l)return s&&Ls(t,a,!1),Hi(e,t,n);r=t.stateNode,vi.current=t;var i=l&&"function"!==typeof a.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&l?(t.child=fn(t,e.child,null,n),t.child=fn(t,null,i,n)):bi(e,t,i,n),t.memoizedState=r.state,s&&Ls(t,a,!0),t.child}function Ei(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Kn(e,t.containerInfo)}function Ti(e,t,a,r,s){return xn(),hn(s),t.flags|=256,bi(e,t,a,r),t.child}var Ai,Mi,Pi,Ri,Ii={dehydrated:null,treeContext:null,retryLane:0};function Di(e){return{baseLanes:e,cachePool:null,transitions:null}}function Li(e,t,a){var r,s=t.pendingProps,l=$n.current,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&l)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),_s($n,1&l),null===e)return dn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},0===(1&s)&&null!==i?(i.childLanes=0,i.pendingProps=o):i=Ld(o,s,0,null),e=Dd(e,s,a,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Di(a),t.memoizedState=Ii,e):Ui(t,o));if(null!==(l=e.memoizedState)&&null!==(r=l.dehydrated))return function(e,t,a,r,s,l,i){if(a)return 256&t.flags?(t.flags&=-257,zi(e,t,i,r=di(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=r.fallback,s=t.mode,r=Ld({mode:"visible",children:r.children},s,0,null),(l=Dd(l,s,i,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,0!==(1&t.mode)&&fn(t,e.child,null,i),t.child.memoizedState=Di(i),t.memoizedState=Ii,l);if(0===(1&t.mode))return zi(e,t,i,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var o=r.dgst;return r=o,zi(e,t,i,r=di(l=Error(n(419)),r,void 0))}if(o=0!==(i&e.childLanes),yi||o){if(null!==(r=To)){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|i))?0:s)&&s!==l.retryLane&&(l.retryLane=s,In(e,s),ad(r,e,s,-1))}return gd(),zi(e,t,i,r=di(Error(n(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cd.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,an=os(s.nextSibling),tn=t,rn=!0,sn=null,null!==e&&(Gs[Ys++]=Ks,Gs[Ys++]=Js,Gs[Ys++]=Zs,Ks=e.id,Js=e.overflow,Zs=t),t=Ui(t,r.children),t.flags|=4096,t)}(e,t,o,s,r,l,a);if(i){i=s.fallback,o=t.mode,r=(l=e.child).sibling;var d={mode:"hidden",children:s.children};return 0===(1&o)&&t.child!==l?((s=t.child).childLanes=0,s.pendingProps=d,t.deletions=null):(s=Rd(l,d)).subtreeFlags=14680064&l.subtreeFlags,null!==r?i=Rd(r,i):(i=Dd(i,o,a,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=null===(o=e.child.memoizedState)?Di(a):{baseLanes:o.baseLanes|a,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~a,t.memoizedState=Ii,s}return e=(i=e.child).sibling,s=Rd(i,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=a),s.return=t,s.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=s,t.memoizedState=null,s}function Ui(e,t){return(t=Ld({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zi(e,t,a,r){return null!==r&&hn(r),fn(t,e.child,null,a),(e=Ui(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Oi(e,t,a){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),En(e.return,t,a)}function Fi(e,t,a,r,s){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:s}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=a,n.tailMode=s)}function Bi(e,t,a){var r=t.pendingProps,s=r.revealOrder,n=r.tail;if(bi(e,t,r.children,a),0!==(2&(r=$n.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Oi(e,a,t);else if(19===e.tag)Oi(e,a,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_s($n,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(a=t.child,s=null;null!==a;)null!==(e=a.alternate)&&null===el(e)&&(s=a),a=a.sibling;null===(a=s)?(s=t.child,t.child=null):(s=a.sibling,a.sibling=null),Fi(t,!1,s,a,n);break;case"backwards":for(a=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===el(e)){t.child=s;break}e=s.sibling,s.sibling=a,a=s,s=e}Fi(t,!0,a,null,n);break;case"together":Fi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hi(e,t,a){if(null!==e&&(t.dependencies=e.dependencies),Lo|=t.lanes,0===(a&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(a=Rd(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=Rd(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function Vi(e,t){if(!rn)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;null!==a;)null!==a.alternate&&(r=a),a=a.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qi(e){var t=null!==e.alternate&&e.alternate.child===e.child,a=0,r=0;if(t)for(var s=e.child;null!==s;)a|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)a|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function Gi(e,t,a){var r=t.pendingProps;switch(en(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(t),null;case 1:case 17:return Ms(t.type)&&Ps(),qi(t),null;case 3:return r=t.stateNode,Jn(),Ns(Es),Ns(Cs),al(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(mn(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==sn&&(ld(sn),sn=null))),Mi(e,t),qi(t),null;case 5:Xn(t);var s=Zn(Yn.current);if(a=t.type,null!==e&&null!=t.stateNode)Pi(e,t,a,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(n(166));return qi(t),null}if(e=Zn(qn.current),mn(t)){r=t.stateNode,a=t.type;var l=t.memoizedProps;switch(r[ms]=t,r[us]=l,e=0!==(1&t.mode),a){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(s=0;s<Ir.length;s++)zr(Ir[s],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":J(r,l),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},zr("invalid",r);break;case"textarea":se(r,l),zr("invalid",r)}for(var o in ye(a,l),s=null,l)if(l.hasOwnProperty(o)){var d=l[o];"children"===o?"string"===typeof d?r.textContent!==d&&(!0!==l.suppressHydrationWarning&&Qr(r.textContent,d,e),s=["children",d]):"number"===typeof d&&r.textContent!==""+d&&(!0!==l.suppressHydrationWarning&&Qr(r.textContent,d,e),s=["children",""+d]):i.hasOwnProperty(o)&&null!=d&&"onScroll"===o&&zr("scroll",r)}switch(a){case"input":G(r),$(r,l,!0);break;case"textarea":G(r),le(r);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(r.onclick=Xr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(a)),"http://www.w3.org/1999/xhtml"===e?"script"===a?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=o.createElement(a,{is:r.is}):(e=o.createElement(a),"select"===a&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,a),e[ms]=t,e[us]=r,Ai(e,t,!1,!1),t.stateNode=e;e:{switch(o=be(a,r),a){case"dialog":zr("cancel",e),zr("close",e),s=r;break;case"iframe":case"object":case"embed":zr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ir.length;s++)zr(Ir[s],e);s=r;break;case"source":zr("error",e),s=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),s=r;break;case"details":zr("toggle",e),s=r;break;case"input":J(e,r),s=K(e,r),zr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=U({},r,{value:void 0}),zr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),zr("invalid",e)}for(l in ye(a,s),d=s)if(d.hasOwnProperty(l)){var c=d[l];"style"===l?pe(e,c):"dangerouslySetInnerHTML"===l?null!=(c=c?c.__html:void 0)&&me(e,c):"children"===l?"string"===typeof c?("textarea"!==a||""!==c)&&ue(e,c):"number"===typeof c&&ue(e,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(i.hasOwnProperty(l)?null!=c&&"onScroll"===l&&zr("scroll",e):null!=c&&b(e,l,c,o))}switch(a){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(l=r.value)?ae(e,!!r.multiple,l,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Xr)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qi(t),null;case 6:if(e&&null!=t.stateNode)Ri(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(n(166));if(a=Zn(Yn.current),Zn(qn.current),mn(t)){if(r=t.stateNode,a=t.memoizedProps,r[ms]=t,(l=r.nodeValue!==a)&&null!==(e=tn))switch(e.tag){case 3:Qr(r.nodeValue,a,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,a,0!==(1&e.mode))}l&&(t.flags|=4)}else(r=(9===a.nodeType?a:a.ownerDocument).createTextNode(r))[ms]=t,t.stateNode=r}return qi(t),null;case 13:if(Ns($n),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rn&&null!==an&&0!==(1&t.mode)&&0===(128&t.flags))un(),xn(),t.flags|=98560,l=!1;else if(l=mn(t),null!==r&&null!==r.dehydrated){if(null===e){if(!l)throw Error(n(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(n(317));l[ms]=t}else xn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qi(t),l=!1}else null!==sn&&(ld(sn),sn=null),l=!0;if(!l)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=a,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$n.current)?0===Io&&(Io=3):gd())),null!==t.updateQueue&&(t.flags|=4),qi(t),null);case 4:return Jn(),Mi(e,t),null===e&&Br(t.stateNode.containerInfo),qi(t),null;case 10:return Cn(t.type._context),qi(t),null;case 19:if(Ns($n),null===(l=t.memoizedState))return qi(t),null;if(r=0!==(128&t.flags),null===(o=l.rendering))if(r)Vi(l,!1);else{if(0!==Io||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=el(e))){for(t.flags|=128,Vi(l,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=a,a=t.child;null!==a;)e=r,(l=a).flags&=14680066,null===(o=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return _s($n,1&$n.current|2),t.child}e=e.sibling}null!==l.tail&&Qe()>Wo&&(t.flags|=128,r=!0,Vi(l,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=el(o))){if(t.flags|=128,r=!0,null!==(a=e.updateQueue)&&(t.updateQueue=a,t.flags|=4),Vi(l,!0),null===l.tail&&"hidden"===l.tailMode&&!o.alternate&&!rn)return qi(t),null}else 2*Qe()-l.renderingStartTime>Wo&&1073741824!==a&&(t.flags|=128,r=!0,Vi(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(null!==(a=l.last)?a.sibling=o:t.child=o,l.last=o)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qe(),t.sibling=null,a=$n.current,_s($n,r?1&a|2:1&a),t):(qi(t),null);case 22:case 23:return md(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Po)&&(qi(t),6&t.subtreeFlags&&(t.flags|=8192)):qi(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Yi(e,t){switch(en(t),t.tag){case 1:return Ms(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jn(),Ns(Es),Ns(Cs),al(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xn(t),null;case 13:if(Ns($n),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));xn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ns($n),null;case 4:return Jn(),null;case 10:return Cn(t.type._context),null;case 22:case 23:return md(),null;default:return null}}Ai=function(e,t){for(var a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Mi=function(){},Pi=function(e,t,a,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Zn(qn.current);var n,l=null;switch(a){case"input":s=K(e,s),r=K(e,r),l=[];break;case"select":s=U({},s,{value:void 0}),r=U({},r,{value:void 0}),l=[];break;case"textarea":s=re(e,s),r=re(e,r),l=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(c in ye(a,r),a=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var o=s[c];for(n in o)o.hasOwnProperty(n)&&(a||(a={}),a[n]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(i.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var d=r[c];if(o=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&d!==o&&(null!=d||null!=o))if("style"===c)if(o){for(n in o)!o.hasOwnProperty(n)||d&&d.hasOwnProperty(n)||(a||(a={}),a[n]="");for(n in d)d.hasOwnProperty(n)&&o[n]!==d[n]&&(a||(a={}),a[n]=d[n])}else a||(l||(l=[]),l.push(c,a)),a=d;else"dangerouslySetInnerHTML"===c?(d=d?d.__html:void 0,o=o?o.__html:void 0,null!=d&&o!==d&&(l=l||[]).push(c,d)):"children"===c?"string"!==typeof d&&"number"!==typeof d||(l=l||[]).push(c,""+d):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(i.hasOwnProperty(c)?(null!=d&&"onScroll"===c&&zr("scroll",e),l||o===d||(l=[])):(l=l||[]).push(c,d))}a&&(l=l||[]).push("style",a);var c=l;(t.updateQueue=c)&&(t.flags|=4)}},Ri=function(e,t,a,r){a!==r&&(t.flags|=4)};var Zi=!1,Ki=!1,Ji="function"===typeof WeakSet?WeakSet:Set,Qi=null;function Xi(e,t){var a=e.ref;if(null!==a)if("function"===typeof a)try{a(null)}catch(r){Nd(e,t,r)}else a.current=null}function $i(e,t,a){try{a()}catch(r){Nd(e,t,r)}}var eo=!1;function to(e,t,a){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var n=s.destroy;s.destroy=void 0,void 0!==n&&$i(t,a,n)}s=s.next}while(s!==r)}}function ao(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a=t=t.next;do{if((a.tag&e)===e){var r=a.create;a.destroy=r()}a=a.next}while(a!==t)}}function ro(e){var t=e.ref;if(null!==t){var a=e.stateNode;e.tag,e=a,"function"===typeof t?t(e):t.current=e}}function so(e){var t=e.alternate;null!==t&&(e.alternate=null,so(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ms],delete t[us],delete t[hs],delete t[gs],delete t[ps])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function no(e){return 5===e.tag||3===e.tag||4===e.tag}function lo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||no(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function io(e,t,a){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===a.nodeType?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(8===a.nodeType?(t=a.parentNode).insertBefore(e,a):(t=a).appendChild(e),null!==(a=a._reactRootContainer)&&void 0!==a||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(io(e,t,a),e=e.sibling;null!==e;)io(e,t,a),e=e.sibling}function oo(e,t,a){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(4!==r&&null!==(e=e.child))for(oo(e,t,a),e=e.sibling;null!==e;)oo(e,t,a),e=e.sibling}var co=null,mo=!1;function uo(e,t,a){for(a=a.child;null!==a;)xo(e,t,a),a=a.sibling}function xo(e,t,a){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(st,a)}catch(i){}switch(a.tag){case 5:Ki||Xi(a,t);case 6:var r=co,s=mo;co=null,uo(e,t,a),mo=s,null!==(co=r)&&(mo?(e=co,a=a.stateNode,8===e.nodeType?e.parentNode.removeChild(a):e.removeChild(a)):co.removeChild(a.stateNode));break;case 18:null!==co&&(mo?(e=co,a=a.stateNode,8===e.nodeType?is(e.parentNode,a):1===e.nodeType&&is(e,a),Wt(e)):is(co,a.stateNode));break;case 4:r=co,s=mo,co=a.stateNode.containerInfo,mo=!0,uo(e,t,a),co=r,mo=s;break;case 0:case 11:case 14:case 15:if(!Ki&&(null!==(r=a.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var n=s,l=n.destroy;n=n.tag,void 0!==l&&(0!==(2&n)||0!==(4&n))&&$i(a,t,l),s=s.next}while(s!==r)}uo(e,t,a);break;case 1:if(!Ki&&(Xi(a,t),"function"===typeof(r=a.stateNode).componentWillUnmount))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(i){Nd(a,t,i)}uo(e,t,a);break;case 21:uo(e,t,a);break;case 22:1&a.mode?(Ki=(r=Ki)||null!==a.memoizedState,uo(e,t,a),Ki=r):uo(e,t,a);break;default:uo(e,t,a)}}function ho(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var a=e.stateNode;null===a&&(a=e.stateNode=new Ji),t.forEach((function(t){var r=Ed.bind(null,e,t);a.has(t)||(a.add(t),t.then(r,r))}))}}function go(e,t){var a=t.deletions;if(null!==a)for(var r=0;r<a.length;r++){var s=a[r];try{var l=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,mo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,mo=!0;break e}o=o.return}if(null===co)throw Error(n(160));xo(l,i,s),co=null,mo=!1;var d=s.alternate;null!==d&&(d.return=null),s.return=null}catch(c){Nd(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)po(t,e),t=t.sibling}function po(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(go(t,e),vo(e),4&r){try{to(3,e,e.return),ao(3,e)}catch(p){Nd(e,e.return,p)}try{to(5,e,e.return)}catch(p){Nd(e,e.return,p)}}break;case 1:go(t,e),vo(e),512&r&&null!==a&&Xi(a,a.return);break;case 5:if(go(t,e),vo(e),512&r&&null!==a&&Xi(a,a.return),32&e.flags){var s=e.stateNode;try{ue(s,"")}catch(p){Nd(e,e.return,p)}}if(4&r&&null!=(s=e.stateNode)){var l=e.memoizedProps,i=null!==a?a.memoizedProps:l,o=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===o&&"radio"===l.type&&null!=l.name&&Q(s,l),be(o,i);var c=be(o,l);for(i=0;i<d.length;i+=2){var m=d[i],u=d[i+1];"style"===m?pe(s,u):"dangerouslySetInnerHTML"===m?me(s,u):"children"===m?ue(s,u):b(s,m,u,c)}switch(o){case"input":X(s,l);break;case"textarea":ne(s,l);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var h=l.value;null!=h?ae(s,!!l.multiple,h,!1):x!==!!l.multiple&&(null!=l.defaultValue?ae(s,!!l.multiple,l.defaultValue,!0):ae(s,!!l.multiple,l.multiple?[]:"",!1))}s[us]=l}catch(p){Nd(e,e.return,p)}}break;case 6:if(go(t,e),vo(e),4&r){if(null===e.stateNode)throw Error(n(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(p){Nd(e,e.return,p)}}break;case 3:if(go(t,e),vo(e),4&r&&null!==a&&a.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(p){Nd(e,e.return,p)}break;case 4:default:go(t,e),vo(e);break;case 13:go(t,e),vo(e),8192&(s=e.child).flags&&(l=null!==s.memoizedState,s.stateNode.isHidden=l,!l||null!==s.alternate&&null!==s.alternate.memoizedState||(Bo=Qe())),4&r&&ho(e);break;case 22:if(m=null!==a&&null!==a.memoizedState,1&e.mode?(Ki=(c=Ki)||m,go(t,e),Ki=c):go(t,e),vo(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!m&&0!==(1&e.mode))for(Qi=e,m=e.child;null!==m;){for(u=Qi=m;null!==Qi;){switch(h=(x=Qi).child,x.tag){case 0:case 11:case 14:case 15:to(4,x,x.return);break;case 1:Xi(x,x.return);var g=x.stateNode;if("function"===typeof g.componentWillUnmount){r=x,a=x.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Nd(r,a,p)}}break;case 5:Xi(x,x.return);break;case 22:if(null!==x.memoizedState){jo(u);continue}}null!==h?(h.return=x,Qi=h):jo(u)}m=m.sibling}e:for(m=null,u=e;;){if(5===u.tag){if(null===m){m=u;try{s=u.stateNode,c?"function"===typeof(l=s.style).setProperty?l.setProperty("display","none","important"):l.display="none":(o=u.stateNode,i=void 0!==(d=u.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,o.style.display=ge("display",i))}catch(p){Nd(e,e.return,p)}}}else if(6===u.tag){if(null===m)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(p){Nd(e,e.return,p)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:go(t,e),vo(e),4&r&&ho(e);case 21:}}function vo(e){var t=e.flags;if(2&t){try{e:{for(var a=e.return;null!==a;){if(no(a)){var r=a;break e}a=a.return}throw Error(n(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(ue(s,""),r.flags&=-33),oo(e,lo(e),s);break;case 3:case 4:var l=r.stateNode.containerInfo;io(e,lo(e),l);break;default:throw Error(n(161))}}catch(i){Nd(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yo(e,t,a){Qi=e,bo(e,t,a)}function bo(e,t,a){for(var r=0!==(1&e.mode);null!==Qi;){var s=Qi,n=s.child;if(22===s.tag&&r){var l=null!==s.memoizedState||Zi;if(!l){var i=s.alternate,o=null!==i&&null!==i.memoizedState||Ki;i=Zi;var d=Ki;if(Zi=l,(Ki=o)&&!d)for(Qi=s;null!==Qi;)o=(l=Qi).child,22===l.tag&&null!==l.memoizedState?ko(s):null!==o?(o.return=l,Qi=o):ko(s);for(;null!==n;)Qi=n,bo(n,t,a),n=n.sibling;Qi=s,Zi=i,Ki=d}fo(e)}else 0!==(8772&s.subtreeFlags)&&null!==n?(n.return=s,Qi=n):fo(e)}}function fo(e){for(;null!==Qi;){var t=Qi;if(0!==(8772&t.flags)){var a=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ki||ao(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ki)if(null===a)r.componentDidMount();else{var s=t.elementType===t.type?a.memoizedProps:ti(t.type,a.memoizedProps);r.componentDidUpdate(s,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;null!==l&&Hn(t,l,r);break;case 3:var i=t.updateQueue;if(null!==i){if(a=null,null!==t.child)switch(t.child.tag){case 5:case 1:a=t.child.stateNode}Hn(t,i,a)}break;case 5:var o=t.stateNode;if(null===a&&4&t.flags){a=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&a.focus();break;case"img":d.src&&(a.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var m=c.memoizedState;if(null!==m){var u=m.dehydrated;null!==u&&Wt(u)}}}break;default:throw Error(n(163))}Ki||512&t.flags&&ro(t)}catch(x){Nd(t,t.return,x)}}if(t===e){Qi=null;break}if(null!==(a=t.sibling)){a.return=t.return,Qi=a;break}Qi=t.return}}function jo(e){for(;null!==Qi;){var t=Qi;if(t===e){Qi=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Qi=a;break}Qi=t.return}}function ko(e){for(;null!==Qi;){var t=Qi;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{ao(4,t)}catch(o){Nd(t,a,o)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(o){Nd(t,s,o)}}var n=t.return;try{ro(t)}catch(o){Nd(t,n,o)}break;case 5:var l=t.return;try{ro(t)}catch(o){Nd(t,l,o)}}}catch(o){Nd(t,t.return,o)}if(t===e){Qi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Qi=i;break}Qi=t.return}}var wo,No=Math.ceil,_o=f.ReactCurrentDispatcher,So=f.ReactCurrentOwner,Co=f.ReactCurrentBatchConfig,Eo=0,To=null,Ao=null,Mo=0,Po=0,Ro=ws(0),Io=0,Do=null,Lo=0,Uo=0,zo=0,Oo=null,Fo=null,Bo=0,Wo=1/0,Ho=null,Vo=!1,qo=null,Go=null,Yo=!1,Zo=null,Ko=0,Jo=0,Qo=null,Xo=-1,$o=0;function ed(){return 0!==(6&Eo)?Qe():-1!==Xo?Xo:Xo=Qe()}function td(e){return 0===(1&e.mode)?1:0!==(2&Eo)&&0!==Mo?Mo&-Mo:null!==gn.transition?(0===$o&&($o=gt()),$o):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ad(e,t,a,r){if(50<Jo)throw Jo=0,Qo=null,Error(n(185));vt(e,a,r),0!==(2&Eo)&&e===To||(e===To&&(0===(2&Eo)&&(Uo|=a),4===Io&&id(e,Mo)),rd(e,r),1===a&&0===Eo&&0===(1&t.mode)&&(Wo=Qe()+500,zs&&Bs()))}function rd(e,t){var a=e.callbackNode;!function(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,n=e.pendingLanes;0<n;){var l=31-lt(n),i=1<<l,o=s[l];-1===o?0!==(i&a)&&0===(i&r)||(s[l]=xt(i,t)):o<=t&&(e.expiredLanes|=i),n&=~i}}(e,t);var r=ut(e,e===To?Mo:0);if(0===r)null!==a&&Ze(a),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=a&&Ze(a),1===t)0===e.tag?function(e){zs=!0,Fs(e)}(od.bind(null,e)):Fs(od.bind(null,e)),ns((function(){0===(6&Eo)&&Bs()})),a=null;else{switch(ft(r)){case 1:a=$e;break;case 4:a=et;break;case 16:default:a=tt;break;case 536870912:a=rt}a=Td(a,sd.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function sd(e,t){if(Xo=-1,$o=0,0!==(6&Eo))throw Error(n(327));var a=e.callbackNode;if(kd()&&e.callbackNode!==a)return null;var r=ut(e,e===To?Mo:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=pd(e,r);else{t=r;var s=Eo;Eo|=2;var l=hd();for(To===e&&Mo===t||(Ho=null,Wo=Qe()+500,ud(e,t));;)try{yd();break}catch(o){xd(e,o)}Sn(),_o.current=l,Eo=s,null!==Ao?t=0:(To=null,Mo=0,t=Io)}if(0!==t){if(2===t&&(0!==(s=ht(e))&&(r=s,t=nd(e,s))),1===t)throw a=Do,ud(e,0),id(e,r),rd(e,Qe()),a;if(6===t)id(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var a=t.updateQueue;if(null!==a&&null!==(a=a.stores))for(var r=0;r<a.length;r++){var s=a[r],n=s.getSnapshot;s=s.value;try{if(!lr(n(),s))return!1}catch(i){return!1}}}if(a=t.child,16384&t.subtreeFlags&&null!==a)a.return=t,t=a;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=pd(e,r))&&(0!==(l=ht(e))&&(r=l,t=nd(e,l))),1===t))throw a=Do,ud(e,0),id(e,r),rd(e,Qe()),a;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(n(345));case 2:case 5:jd(e,Fo,Ho);break;case 3:if(id(e,r),(130023424&r)===r&&10<(t=Bo+500-Qe())){if(0!==ut(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ed(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=as(jd.bind(null,e,Fo,Ho),t);break}jd(e,Fo,Ho);break;case 4:if(id(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-lt(r);l=1<<i,(i=t[i])>s&&(s=i),r&=~l}if(r=s,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*No(r/1960))-r)){e.timeoutHandle=as(jd.bind(null,e,Fo,Ho),r);break}jd(e,Fo,Ho);break;default:throw Error(n(329))}}}return rd(e,Qe()),e.callbackNode===a?sd.bind(null,e):null}function nd(e,t){var a=Oo;return e.current.memoizedState.isDehydrated&&(ud(e,t).flags|=256),2!==(e=pd(e,t))&&(t=Fo,Fo=a,null!==t&&ld(t)),e}function ld(e){null===Fo?Fo=e:Fo.push.apply(Fo,e)}function id(e,t){for(t&=~zo,t&=~Uo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-lt(t),r=1<<a;e[a]=-1,t&=~r}}function od(e){if(0!==(6&Eo))throw Error(n(327));kd();var t=ut(e,0);if(0===(1&t))return rd(e,Qe()),null;var a=pd(e,t);if(0!==e.tag&&2===a){var r=ht(e);0!==r&&(t=r,a=nd(e,r))}if(1===a)throw a=Do,ud(e,0),id(e,t),rd(e,Qe()),a;if(6===a)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jd(e,Fo,Ho),rd(e,Qe()),null}function dd(e,t){var a=Eo;Eo|=1;try{return e(t)}finally{0===(Eo=a)&&(Wo=Qe()+500,zs&&Bs())}}function cd(e){null!==Zo&&0===Zo.tag&&0===(6&Eo)&&kd();var t=Eo;Eo|=1;var a=Co.transition,r=bt;try{if(Co.transition=null,bt=1,e)return e()}finally{bt=r,Co.transition=a,0===(6&(Eo=t))&&Bs()}}function md(){Po=Ro.current,Ns(Ro)}function ud(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(-1!==a&&(e.timeoutHandle=-1,rs(a)),null!==Ao)for(a=Ao.return;null!==a;){var r=a;switch(en(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:Jn(),Ns(Es),Ns(Cs),al();break;case 5:Xn(r);break;case 4:Jn();break;case 13:case 19:Ns($n);break;case 10:Cn(r.type._context);break;case 22:case 23:md()}a=a.return}if(To=e,Ao=e=Rd(e.current,null),Mo=Po=t,Io=0,Do=null,zo=Uo=Lo=0,Fo=Oo=null,null!==Mn){for(t=0;t<Mn.length;t++)if(null!==(r=(a=Mn[t]).interleaved)){a.interleaved=null;var s=r.next,n=a.pending;if(null!==n){var l=n.next;n.next=s,r.next=l}a.pending=r}Mn=null}return e}function xd(e,t){for(;;){var a=Ao;try{if(Sn(),rl.current=Ql,dl){for(var r=ll.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}dl=!1}if(nl=0,ol=il=ll=null,cl=!1,ml=0,So.current=null,null===a||null===a.return){Io=1,Do=t,Ao=null;break}e:{var l=e,i=a.return,o=a,d=t;if(t=Mo,o.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var c=d,m=o,u=m.tag;if(0===(1&m.mode)&&(0===u||11===u||15===u)){var x=m.alternate;x?(m.updateQueue=x.updateQueue,m.memoizedState=x.memoizedState,m.lanes=x.lanes):(m.updateQueue=null,m.memoizedState=null)}var h=gi(i);if(null!==h){h.flags&=-257,pi(h,i,o,0,t),1&h.mode&&hi(l,c,t),d=c;var g=(t=h).updateQueue;if(null===g){var p=new Set;p.add(d),t.updateQueue=p}else g.add(d);break e}if(0===(1&t)){hi(l,c,t),gd();break e}d=Error(n(426))}else if(rn&&1&o.mode){var v=gi(i);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),pi(v,i,o,0,t),hn(oi(d,o));break e}}l=d=oi(d,o),4!==Io&&(Io=2),null===Oo?Oo=[l]:Oo.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,Bn(l,ui(0,d,t));break e;case 1:o=d;var y=l.type,b=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Go||!Go.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,Bn(l,xi(l,o,t));break e}}l=l.return}while(null!==l)}fd(a)}catch(f){t=f,Ao===a&&null!==a&&(Ao=a=a.return);continue}break}}function hd(){var e=_o.current;return _o.current=Ql,null===e?Ql:e}function gd(){0!==Io&&3!==Io&&2!==Io||(Io=4),null===To||0===(268435455&Lo)&&0===(268435455&Uo)||id(To,Mo)}function pd(e,t){var a=Eo;Eo|=2;var r=hd();for(To===e&&Mo===t||(Ho=null,ud(e,t));;)try{vd();break}catch(s){xd(e,s)}if(Sn(),Eo=a,_o.current=r,null!==Ao)throw Error(n(261));return To=null,Mo=0,Io}function vd(){for(;null!==Ao;)bd(Ao)}function yd(){for(;null!==Ao&&!Ke();)bd(Ao)}function bd(e){var t=wo(e.alternate,e,Po);e.memoizedProps=e.pendingProps,null===t?fd(e):Ao=t,So.current=null}function fd(e){var t=e;do{var a=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(a=Gi(a,t,Po)))return void(Ao=a)}else{if(null!==(a=Yi(a,t)))return a.flags&=32767,void(Ao=a);if(null===e)return Io=6,void(Ao=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ao=t);Ao=t=e}while(null!==t);0===Io&&(Io=5)}function jd(e,t,a){var r=bt,s=Co.transition;try{Co.transition=null,bt=1,function(e,t,a,r){do{kd()}while(null!==Zo);if(0!==(6&Eo))throw Error(n(327));a=e.finishedWork;var s=e.finishedLanes;if(null===a)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var l=a.lanes|a.childLanes;if(function(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<a;){var s=31-lt(a),n=1<<s;t[s]=0,r[s]=-1,e[s]=-1,a&=~n}}(e,l),e===To&&(Ao=To=null,Mo=0),0===(2064&a.subtreeFlags)&&0===(2064&a.flags)||Yo||(Yo=!0,Td(tt,(function(){return kd(),null}))),l=0!==(15990&a.flags),0!==(15990&a.subtreeFlags)||l){l=Co.transition,Co.transition=null;var i=bt;bt=1;var o=Eo;Eo|=4,So.current=null,function(e,t){if($r=Vt,ur(e=mr())){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(r&&0!==r.rangeCount){a=r.anchorNode;var s=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{a.nodeType,l.nodeType}catch(j){a=null;break e}var i=0,o=-1,d=-1,c=0,m=0,u=e,x=null;t:for(;;){for(var h;u!==a||0!==s&&3!==u.nodeType||(o=i+s),u!==l||0!==r&&3!==u.nodeType||(d=i+r),3===u.nodeType&&(i+=u.nodeValue.length),null!==(h=u.firstChild);)x=u,u=h;for(;;){if(u===e)break t;if(x===a&&++c===s&&(o=i),x===l&&++m===r&&(d=i),null!==(h=u.nextSibling))break;x=(u=x).parentNode}u=h}a=-1===o||-1===d?null:{start:o,end:d}}else a=null}a=a||{start:0,end:0}}else a=null;for(es={focusedElem:e,selectionRange:a},Vt=!1,Qi=t;null!==Qi;)if(e=(t=Qi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qi=e;else for(;null!==Qi;){t=Qi;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var p=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?p:ti(t.type,p),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var f=t.stateNode.containerInfo;1===f.nodeType?f.textContent="":9===f.nodeType&&f.documentElement&&f.removeChild(f.documentElement);break;default:throw Error(n(163))}}catch(j){Nd(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Qi=e;break}Qi=t.return}g=eo,eo=!1}(e,a),po(a,e),xr(es),Vt=!!$r,es=$r=null,e.current=a,yo(a,e,s),Je(),Eo=o,bt=i,Co.transition=l}else e.current=a;if(Yo&&(Yo=!1,Zo=e,Ko=s),l=e.pendingLanes,0===l&&(Go=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(a.stateNode),rd(e,Qe()),null!==t)for(r=e.onRecoverableError,a=0;a<t.length;a++)s=t[a],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vo)throw Vo=!1,e=qo,qo=null,e;0!==(1&Ko)&&0!==e.tag&&kd(),l=e.pendingLanes,0!==(1&l)?e===Qo?Jo++:(Jo=0,Qo=e):Jo=0,Bs()}(e,t,a,r)}finally{Co.transition=s,bt=r}return null}function kd(){if(null!==Zo){var e=ft(Ko),t=Co.transition,a=bt;try{if(Co.transition=null,bt=16>e?16:e,null===Zo)var r=!1;else{if(e=Zo,Zo=null,Ko=0,0!==(6&Eo))throw Error(n(331));var s=Eo;for(Eo|=4,Qi=e.current;null!==Qi;){var l=Qi,i=l.child;if(0!==(16&Qi.flags)){var o=l.deletions;if(null!==o){for(var d=0;d<o.length;d++){var c=o[d];for(Qi=c;null!==Qi;){var m=Qi;switch(m.tag){case 0:case 11:case 15:to(8,m,l)}var u=m.child;if(null!==u)u.return=m,Qi=u;else for(;null!==Qi;){var x=(m=Qi).sibling,h=m.return;if(so(m),m===c){Qi=null;break}if(null!==x){x.return=h,Qi=x;break}Qi=h}}}var g=l.alternate;if(null!==g){var p=g.child;if(null!==p){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(null!==p)}}Qi=l}}if(0!==(2064&l.subtreeFlags)&&null!==i)i.return=l,Qi=i;else e:for(;null!==Qi;){if(0!==(2048&(l=Qi).flags))switch(l.tag){case 0:case 11:case 15:to(9,l,l.return)}var y=l.sibling;if(null!==y){y.return=l.return,Qi=y;break e}Qi=l.return}}var b=e.current;for(Qi=b;null!==Qi;){var f=(i=Qi).child;if(0!==(2064&i.subtreeFlags)&&null!==f)f.return=i,Qi=f;else e:for(i=b;null!==Qi;){if(0!==(2048&(o=Qi).flags))try{switch(o.tag){case 0:case 11:case 15:ao(9,o)}}catch(k){Nd(o,o.return,k)}if(o===i){Qi=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,Qi=j;break e}Qi=o.return}}if(Eo=s,Bs(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(st,e)}catch(k){}r=!0}return r}finally{bt=a,Co.transition=t}}return!1}function wd(e,t,a){e=On(e,t=ui(0,t=oi(a,t),1),1),t=ed(),null!==e&&(vt(e,1,t),rd(e,t))}function Nd(e,t,a){if(3===e.tag)wd(e,e,a);else for(;null!==t;){if(3===t.tag){wd(t,e,a);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Go||!Go.has(r))){t=On(t,e=xi(t,e=oi(a,e),1),1),e=ed(),null!==t&&(vt(t,1,e),rd(t,e));break}}t=t.return}}function _d(e,t,a){var r=e.pingCache;null!==r&&r.delete(t),t=ed(),e.pingedLanes|=e.suspendedLanes&a,To===e&&(Mo&a)===a&&(4===Io||3===Io&&(130023424&Mo)===Mo&&500>Qe()-Bo?ud(e,0):zo|=a),rd(e,t)}function Sd(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var a=ed();null!==(e=In(e,t))&&(vt(e,t,a),rd(e,a))}function Cd(e){var t=e.memoizedState,a=0;null!==t&&(a=t.retryLane),Sd(e,a)}function Ed(e,t){var a=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(a=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(n(314))}null!==r&&r.delete(t),Sd(e,a)}function Td(e,t){return Ye(e,t)}function Ad(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Md(e,t,a,r){return new Ad(e,t,a,r)}function Pd(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rd(e,t){var a=e.alternate;return null===a?((a=Md(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=14680064&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Id(e,t,a,r,s,l){var i=2;if(r=e,"function"===typeof e)Pd(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case w:return Dd(a.children,s,l,t);case N:i=8,s|=8;break;case _:return(e=Md(12,a,t,2|s)).elementType=_,e.lanes=l,e;case T:return(e=Md(13,a,t,s)).elementType=T,e.lanes=l,e;case A:return(e=Md(19,a,t,s)).elementType=A,e.lanes=l,e;case R:return Ld(a,s,l,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:i=10;break e;case C:i=9;break e;case E:i=11;break e;case M:i=14;break e;case P:i=16,r=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Md(i,a,t,s)).elementType=e,t.type=r,t.lanes=l,t}function Dd(e,t,a,r){return(e=Md(7,e,r,t)).lanes=a,e}function Ld(e,t,a,r){return(e=Md(22,e,r,t)).elementType=R,e.lanes=a,e.stateNode={isHidden:!1},e}function Ud(e,t,a){return(e=Md(6,e,null,t)).lanes=a,e}function zd(e,t,a){return(t=Md(4,null!==e.children?e.children:[],e.key,t)).lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Od(e,t,a,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fd(e,t,a,r,s,n,l,i,o){return e=new Od(e,t,a,i,o),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Md(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ln(n),e}function Bd(e){if(!e)return Ss;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ms(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var a=e.type;if(Ms(a))return Is(e,a,t)}return t}function Wd(e,t,a,r,s,n,l,i,o){return(e=Fd(a,r,!0,e,0,n,0,i,o)).context=Bd(null),a=e.current,(n=zn(r=ed(),s=td(a))).callback=void 0!==t&&null!==t?t:null,On(a,n,s),e.current.lanes=s,vt(e,s,r),rd(e,r),e}function Hd(e,t,a,r){var s=t.current,n=ed(),l=td(s);return a=Bd(a),null===t.context?t.context=a:t.pendingContext=a,(t=zn(n,l)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=On(s,t,l))&&(ad(e,s,l,n),Fn(e,s,l)),l}function Vd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var a=e.retryLane;e.retryLane=0!==a&&a<t?a:t}}function Gd(e,t){qd(e,t),(e=e.alternate)&&qd(e,t)}wo=function(e,t,a){if(null!==e)if(e.memoizedProps!==t.pendingProps||Es.current)yi=!0;else{if(0===(e.lanes&a)&&0===(128&t.flags))return yi=!1,function(e,t,a){switch(t.tag){case 3:Ei(t),xn();break;case 5:Qn(t);break;case 1:Ms(t.type)&&Ds(t);break;case 4:Kn(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_s(kn,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_s($n,1&$n.current),t.flags|=128,null):0!==(a&t.child.childLanes)?Li(e,t,a):(_s($n,1&$n.current),null!==(e=Hi(e,t,a))?e.sibling:null);_s($n,1&$n.current);break;case 19:if(r=0!==(a&t.childLanes),0!==(128&e.flags)){if(r)return Bi(e,t,a);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),_s($n,$n.current),r)break;return null;case 22:case 23:return t.lanes=0,wi(e,t,a)}return Hi(e,t,a)}(e,t,a);yi=0!==(131072&e.flags)}else yi=!1,rn&&0!==(1048576&t.flags)&&Xs(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wi(e,t),e=t.pendingProps;var s=As(t,Cs.current);Tn(t,a),s=gl(null,t,r,e,s,a);var l=pl();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ms(r)?(l=!0,Ds(t)):l=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ln(t),s.updater=ri,t.stateNode=s,s._reactInternals=t,ii(t,r,e,a),t=Ci(null,t,r,!0,l,a)):(t.tag=0,rn&&l&&$s(t),bi(null,t,s,a),t=t.child),t;case 16:r=t.elementType;e:{switch(Wi(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Pd(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===M)return 14}return 2}(r),e=ti(r,e),s){case 0:t=_i(null,t,r,e,a);break e;case 1:t=Si(null,t,r,e,a);break e;case 11:t=fi(null,t,r,e,a);break e;case 14:t=ji(null,t,r,ti(r.type,e),a);break e}throw Error(n(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,_i(e,t,r,s=t.elementType===r?s:ti(r,s),a);case 1:return r=t.type,s=t.pendingProps,Si(e,t,r,s=t.elementType===r?s:ti(r,s),a);case 3:e:{if(Ei(t),null===e)throw Error(n(387));r=t.pendingProps,s=(l=t.memoizedState).element,Un(e,t),Wn(t,r,null,a);var i=t.memoizedState;if(r=i.element,l.isDehydrated){if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Ti(e,t,r,a,s=oi(Error(n(423)),t));break e}if(r!==s){t=Ti(e,t,r,a,s=oi(Error(n(424)),t));break e}for(an=os(t.stateNode.containerInfo.firstChild),tn=t,rn=!0,sn=null,a=jn(t,null,r,a),t.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(xn(),r===s){t=Hi(e,t,a);break e}bi(e,t,r,a)}t=t.child}return t;case 5:return Qn(t),null===e&&dn(t),r=t.type,s=t.pendingProps,l=null!==e?e.memoizedProps:null,i=s.children,ts(r,s)?i=null:null!==l&&ts(r,l)&&(t.flags|=32),Ni(e,t),bi(e,t,i,a),t.child;case 6:return null===e&&dn(t),null;case 13:return Li(e,t,a);case 4:return Kn(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fn(t,null,r,a):bi(e,t,r,a),t.child;case 11:return r=t.type,s=t.pendingProps,fi(e,t,r,s=t.elementType===r?s:ti(r,s),a);case 7:return bi(e,t,t.pendingProps,a),t.child;case 8:case 12:return bi(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,l=t.memoizedProps,i=s.value,_s(kn,r._currentValue),r._currentValue=i,null!==l)if(lr(l.value,i)){if(l.children===s.children&&!Es.current){t=Hi(e,t,a);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var o=l.dependencies;if(null!==o){i=l.child;for(var d=o.firstContext;null!==d;){if(d.context===r){if(1===l.tag){(d=zn(-1,a&-a)).tag=2;var c=l.updateQueue;if(null!==c){var m=(c=c.shared).pending;null===m?d.next=d:(d.next=m.next,m.next=d),c.pending=d}}l.lanes|=a,null!==(d=l.alternate)&&(d.lanes|=a),En(l.return,a,t),o.lanes|=a;break}d=d.next}}else if(10===l.tag)i=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(i=l.return))throw Error(n(341));i.lanes|=a,null!==(o=i.alternate)&&(o.lanes|=a),En(i,a,t),i=l.sibling}else i=l.child;if(null!==i)i.return=l;else for(i=l;null!==i;){if(i===t){i=null;break}if(null!==(l=i.sibling)){l.return=i.return,i=l;break}i=i.return}l=i}bi(e,t,s.children,a),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Tn(t,a),r=r(s=An(s)),t.flags|=1,bi(e,t,r,a),t.child;case 14:return s=ti(r=t.type,t.pendingProps),ji(e,t,r,s=ti(r.type,s),a);case 15:return ki(e,t,t.type,t.pendingProps,a);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ti(r,s),Wi(e,t),t.tag=1,Ms(r)?(e=!0,Ds(t)):e=!1,Tn(t,a),ni(t,r,s),ii(t,r,s,a),Ci(null,t,r,!0,e,a);case 19:return Bi(e,t,a);case 22:return wi(e,t,a)}throw Error(n(156,t.tag))};var Yd="function"===typeof reportError?reportError:function(e){console.error(e)};function Zd(e){this._internalRoot=e}function Kd(e){this._internalRoot=e}function Jd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xd(){}function $d(e,t,a,r,s){var n=a._reactRootContainer;if(n){var l=n;if("function"===typeof s){var i=s;s=function(){var e=Vd(l);i.call(e)}}Hd(t,l,e,s)}else l=function(e,t,a,r,s){if(s){if("function"===typeof r){var n=r;r=function(){var e=Vd(l);n.call(e)}}var l=Wd(t,r,e,0,null,!1,0,"",Xd);return e._reactRootContainer=l,e[xs]=l.current,Br(8===e.nodeType?e.parentNode:e),cd(),l}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var i=r;r=function(){var e=Vd(o);i.call(e)}}var o=Fd(e,0,!1,null,0,!1,0,"",Xd);return e._reactRootContainer=o,e[xs]=o.current,Br(8===e.nodeType?e.parentNode:e),cd((function(){Hd(t,o,a,r)})),o}(a,t,e,s,r);return Vd(l)}Kd.prototype.render=Zd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Hd(e,t,null,null)},Kd.prototype.unmount=Zd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cd((function(){Hd(null,e,null,null)})),t[xs]=null}},Kd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Rt.length&&0!==t&&t<Rt[a].priority;a++);Rt.splice(a,0,e),0===a&&Ut(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=mt(t.pendingLanes);0!==a&&(yt(t,1|a),rd(t,Qe()),0===(6&Eo)&&(Wo=Qe()+500,Bs()))}break;case 13:cd((function(){var t=In(e,1);if(null!==t){var a=ed();ad(t,e,1,a)}})),Gd(e,1)}},kt=function(e){if(13===e.tag){var t=In(e,134217728);if(null!==t)ad(t,e,134217728,ed());Gd(e,134217728)}},wt=function(e){if(13===e.tag){var t=td(e),a=In(e,t);if(null!==a)ad(a,e,t,ed());Gd(e,t)}},Nt=function(){return bt},_t=function(e,t){var a=bt;try{return bt=e,t()}finally{bt=a}},ke=function(e,t,a){switch(t){case"input":if(X(e,a),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var s=fs(r);if(!s)throw Error(n(90));Y(r),X(r,s)}}}break;case"textarea":ne(e,a);break;case"select":null!=(t=a.value)&&ae(e,!!a.multiple,t,!1)}},Ee=dd,Te=cd;var ec={usingClientEntryPoint:!1,Events:[ys,bs,fs,Se,Ce,dd]},tc={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ac={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{st=rc.inject(ac),nt=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jd(t))throw Error(n(200));return function(e,t,a){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:a}}(e,t,null,a)},t.createRoot=function(e,t){if(!Jd(e))throw Error(n(299));var a=!1,r="",s=Yd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Fd(e,1,!1,null,0,a,0,r,s),e[xs]=t.current,Br(8===e.nodeType?e.parentNode:e),new Zd(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cd(e)},t.hydrate=function(e,t,a){if(!Qd(t))throw Error(n(200));return $d(null,e,t,!0,a)},t.hydrateRoot=function(e,t,a){if(!Jd(e))throw Error(n(405));var r=null!=a&&a.hydratedSources||null,s=!1,l="",i=Yd;if(null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(s=!0),void 0!==a.identifierPrefix&&(l=a.identifierPrefix),void 0!==a.onRecoverableError&&(i=a.onRecoverableError)),t=Wd(t,null,e,1,null!=a?a:null,s,0,l,i),e[xs]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(a=r[e])._getVersion)(a._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[a,s]:t.mutableSourceEagerHydrationData.push(a,s);return new Kd(t)},t.render=function(e,t,a){if(!Qd(t))throw Error(n(200));return $d(null,e,t,!1,a)},t.unmountComponentAtNode=function(e){if(!Qd(e))throw Error(n(40));return!!e._reactRootContainer&&(cd((function(){$d(null,null,e,!1,(function(){e._reactRootContainer=null,e[xs]=null}))})),!0)},t.unstable_batchedUpdates=dd,t.unstable_renderSubtreeIntoContainer=function(e,t,a,r){if(!Qd(a))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return $d(e,t,a,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,a)=>{var r=a(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},414:(e,t,a)=>{e.exports=a(654)},654:(e,t,a)=>{var r=a(950),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,a){var r,n={},d=null,c=null;for(r in void 0!==a&&(d=""+a),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)l.call(t,r)&&!o.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:s,type:e,key:d,ref:c,props:n,_owner:i.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},761:(e,t)=>{function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var r=a-1>>>1,s=e[r];if(!(0<n(s,t)))break e;e[r]=t,e[a]=s,a=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var r=0,s=e.length,l=s>>>1;r<l;){var i=2*(r+1)-1,o=e[i],d=i+1,c=e[d];if(0>n(o,a))d<s&&0>n(c,o)?(e[r]=c,e[d]=a,r=d):(e[r]=o,e[i]=a,r=i);else{if(!(d<s&&0>n(c,a)))break e;e[r]=c,e[d]=a,r=d}}}return t}function n(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],c=[],m=1,u=null,x=3,h=!1,g=!1,p=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function f(e){for(var t=r(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,a(d,t)}t=r(c)}}function j(e){if(p=!1,f(e),!g)if(null!==r(d))g=!0,R(k);else{var t=r(c);null!==t&&I(j,t.startTime-e)}}function k(e,a){g=!1,p&&(p=!1,y(S),S=-1),h=!0;var n=x;try{for(f(a),u=r(d);null!==u&&(!(u.expirationTime>a)||e&&!T());){var l=u.callback;if("function"===typeof l){u.callback=null,x=u.priorityLevel;var i=l(u.expirationTime<=a);a=t.unstable_now(),"function"===typeof i?u.callback=i:u===r(d)&&s(d),f(a)}else s(d);u=r(d)}if(null!==u)var o=!0;else{var m=r(c);null!==m&&I(j,m.startTime-a),o=!1}return o}finally{u=null,x=n,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,N=!1,_=null,S=-1,C=5,E=-1;function T(){return!(t.unstable_now()-E<C)}function A(){if(null!==_){var e=t.unstable_now();E=e;var a=!0;try{a=_(!0,e)}finally{a?w():(N=!1,_=null)}}else N=!1}if("function"===typeof b)w=function(){b(A)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,P=M.port2;M.port1.onmessage=A,w=function(){P.postMessage(null)}}else w=function(){v(A,0)};function R(e){_=e,N||(N=!0,w())}function I(e,a){S=v((function(){e(t.unstable_now())}),a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var a=x;x=t;try{return e()}finally{x=a}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=x;x=e;try{return t()}finally{x=a}},t.unstable_scheduleCallback=function(e,s,n){var l=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?l+n:l:n=l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:m++,callback:s,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>l?(e.sortIndex=n,a(c,e),null===r(d)&&e===r(c)&&(p?(y(S),S=-1):p=!0,I(j,n-l))):(e.sortIndex=i,a(d,e),g||h||(g=!0,R(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=x;return function(){var a=x;x=t;try{return e.apply(this,arguments)}finally{x=a}}}},950:(e,t,a)=>{e.exports=a(49)}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};a.r(r),a.d(r,{hasBrowserEnv:()=>ur,hasStandardBrowserEnv:()=>hr,hasStandardBrowserWebWorkerEnv:()=>gr,navigator:()=>xr,origin:()=>pr});var s=a(950),n=a(352);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function i(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function o(e,t,a){return(t=i(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const m={BASE_URL:"https://staging.mrvl.net",API_URL:"https://staging.mrvl.net/api",ENVIRONMENT:"production",ENDPOINTS:{TEAMS:"/teams",ADMIN_TEAMS:"/admin/teams",TEAM_BY_ID:e=>"/teams/".concat(e),ADMIN_TEAM_BY_ID:e=>"/admin/teams/".concat(e),PLAYERS:"/players",ADMIN_PLAYERS:"/admin/players",PLAYER_BY_ID:e=>"/players/".concat(e),ADMIN_PLAYER_BY_ID:e=>"/admin/players/".concat(e),MATCHES:"/matches",ADMIN_MATCHES:"/admin/matches",MATCH_BY_ID:e=>"/matches/".concat(e),ADMIN_MATCH_BY_ID:e=>"/admin/matches/".concat(e),EVENTS:"/events",ADMIN_EVENTS:"/admin/events",EVENT_BY_ID:e=>"/events/".concat(e),ADMIN_EVENT_BY_ID:e=>"/admin/events/".concat(e),FORUMS:"/forums",THREADS:"/threads",THREAD_BY_ID:e=>"/threads/".concat(e),POSTS:"/posts",POST_BY_ID:e=>"/posts/".concat(e),USERS:"/users",ADMIN_USERS:"/admin/users",USER_BY_ID:e=>"/users/".concat(e),ADMIN_USER_BY_ID:e=>"/admin/users/".concat(e),LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout",FORGOT_PASSWORD:"/auth/forgot-password",RESET_PASSWORD:"/auth/reset-password",UPLOAD_TEAM_LOGO:e=>"/upload/team/".concat(e,"/logo"),UPLOAD_TEAM_FLAG:e=>"/upload/team/".concat(e,"/flag"),UPLOAD_TEAM_COACH_AVATAR:e=>"/upload/team/".concat(e,"/coach-avatar"),UPLOAD_PLAYER_AVATAR:e=>"/upload/player/".concat(e,"/avatar"),UPLOAD_EVENT_IMAGE:e=>"/upload/event/".concat(e,"/image"),UPLOAD_NEWS_IMAGE:e=>"/upload/news/".concat(e,"/image"),RANKINGS_TEAMS:"/rankings/teams",RANKINGS_PLAYERS:"/rankings/players",STATS:"/stats",NEWS:"/news",ADMIN_NEWS:"/admin/news",NEWS_BY_ID:e=>"/news/".concat(e),ADMIN_NEWS_BY_ID:e=>"/admin/news/".concat(e),BRACKETS:"/brackets",BRACKET_BY_ID:e=>"/brackets/".concat(e),TOURNAMENTS:"/tournaments"}};console.log("\ud83d\udd27 API Configuration Loaded:",m);var u=a(414);const x=m.API_URL;console.log("\ud83d\udd27 API Configuration:",{REACT_APP_BACKEND_URL:"https://staging.mrvl.net",API_BASE_URL:x,NODE_ENV:"production",CONFIG:m});const h={async request(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=e.startsWith("/")?"".concat(x).concat(e):"".concat(x,"/").concat(e);const r=localStorage.getItem("authToken"),s=c({method:"GET",mode:"cors",credentials:"include",headers:c(c({"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},r&&{Authorization:"Bearer ".concat(r)}),a.headers)},a);try{console.log("\ud83c\udf10 API Request: ".concat(s.method," ").concat(t)),console.log("\ud83d\udce6 Request Data:",a.body?a.body instanceof FormData?"FormData":JSON.parse(a.body):"No body");const e=await fetch(t,s);console.log("\ud83d\udce1 Response Status: ".concat(e.status," ").concat(e.statusText)),console.log("\ud83d\udccb Response Headers:",Object.fromEntries(e.headers.entries()));const r=await e.text();let n;console.log("\ud83d\udcc4 Raw Response:",r.substring(0,500));try{n=JSON.parse(r)}catch(si){throw console.warn("\u26a0\ufe0f Non-JSON response received:",r.substring(0,200)),new Error("Server returned non-JSON response: ".concat(r.substring(0,100)))}if(!e.ok){console.error("\u274c HTTP Error ".concat(e.status,":"),n),401===e.status&&(console.warn("401 Unauthorized - clearing authentication data"),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),window.dispatchEvent(new CustomEvent("auth-expired")));let t="HTTP ".concat(e.status);if(n.message&&(t+=": ".concat(n.message)),n.errors){const e=Object.values(n.errors)[0];Array.isArray(e)&&(t+=" - ".concat(e[0]))}const a=new Error(t);throw a.status=e.status,a.data=n,a}return console.log("\u2705 API Success:",n),n}catch(n){if(console.error("\u274c API Error (".concat(s.method," ").concat(e,"):"),n),"TypeError"===n.name&&n.message.includes("Failed to fetch"))throw new Error("Unable to connect to server. Please check your connection.");throw n}},async postFile(e,t){let a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};console.log("\ud83d\udd10 File upload - using Bearer token only (no CSRF)..."),a=e.startsWith("/")?"".concat(x).concat(e):"".concat(x,"/").concat(e);const s=localStorage.getItem("authToken");if(console.log("\ud83d\udd10 File Upload - Auth Token:",s?"Found":"Missing"),!s)throw new Error("Authentication required. Please log in and try again.");const n=c({Accept:"application/json",Authorization:"Bearer ".concat(s)},r.headers),l={method:"POST",mode:"cors",credentials:"include",headers:n,body:t};try{console.log("\ud83c\udf10 File Upload Request: ".concat(l.method," ").concat(a)),console.log("\ud83d\udce6 FormData keys:",Array.from(t.keys())),console.log("\ud83d\udccb Request Headers:",n);const e=await fetch(a,l);console.log("\ud83d\udce1 File Upload Response Status: ".concat(e.status," ").concat(e.statusText)),console.log("\ud83d\udccb File Upload Response Headers:",Object.fromEntries(e.headers.entries()));const r=await e.text();let s;console.log("\ud83d\udcc4 File Upload Raw Response:",r.substring(0,500));try{s=JSON.parse(r)}catch(si){throw console.warn("\u26a0\ufe0f File Upload - Non-JSON response received:",r.substring(0,200)),new Error("Server returned non-JSON response: ".concat(r.substring(0,100)))}if(!e.ok){console.error("\u274c File Upload HTTP Error ".concat(e.status,":"),s);let t="HTTP ".concat(e.status);s.message&&(t+=": ".concat(s.message));const a=new Error(t);throw a.status=e.status,a.data=s,a}return console.log("\u2705 File Upload Success:",s),s}catch(i){throw console.error("\u274c File Upload Error (".concat(e,"):"),i),i}},get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(e,c(c({},t),{},{method:"GET"}))},post(e,t){const a=t instanceof FormData,r=c(c({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),{},{method:"POST"});var s;a?(null===(s=r.headers)||void 0===s||delete s["Content-Type"],r.body=t):r.body=JSON.stringify(t);return this.request(e,r)},put(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(e,c(c({},a),{},{method:"PUT",body:JSON.stringify(t)}))},delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(e,c(c({},t),{},{method:"DELETE"}))}},g=(0,s.createContext)(),p=()=>{const e=(0,s.useContext)(g);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},v=e=>{let{children:t}=e;const[a,r]=(0,s.useState)((()=>"undefined"!==typeof window&&localStorage.getItem("theme")||"dark"));return(0,s.useEffect)((()=>{document.documentElement.className=a}),[a]),(0,u.jsx)(g.Provider,{value:{theme:a,toggleTheme:()=>{const e="light"===a?"dark":"light";r(e),localStorage.setItem("theme",e)}},children:t})},y=(0,s.createContext)(),b=()=>{const e=(0,s.useContext)(y);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},f=e=>{let{children:t}=e;const[a,r]=(0,s.useState)(null),[n,l]=(0,s.useState)(!0),[i,o]=(0,s.useState)(!1),d=((0,s.useCallback)((async()=>{try{const e=await h.get("/user"),t=e.data||e.user||e;t&&!t.roles&&t.role&&(t.roles=[t.role]),r(t),o(!0),console.log("User data fetched successfully:",t)}catch(e){console.error("Failed to fetch user:",e),401===e.status||e.message.includes("HTTP 401")?(console.log("Token expired or invalid, logging out..."),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),r(null),o(!1)):v()}finally{l(!1)}}),[]),(0,s.useCallback)((async()=>{try{const e=await h.get("/user");let t;return console.log("\ud83d\udce5 updateUser raw response:",e),t=e&&e.data&&"object"===typeof e.data?e.data:e&&e.user?e.user:e,console.log("\ud83d\udc64 Extracted user data:",t),t&&!t.roles&&t.role&&(t.roles=[t.role]),t&&localStorage.setItem("userData",JSON.stringify(t)),r(t),console.log("\u2705 User context updated successfully with:",t),t}catch(e){if(console.error("\u274c Failed to update user:",e),401===e.status||e.message.includes("HTTP 401"))throw console.log("Token expired during user update, logging out..."),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),r(null),o(!1),new Error("Session expired. Please log in again.");throw e}}),[]));(0,s.useEffect)((()=>{const e=()=>{console.log("Auth expired event received, updating state..."),r(null),o(!1),l(!1)};window.addEventListener("auth-expired",e);if(localStorage.getItem("authToken")){const e=async()=>{try{const e=new Promise(((e,t)=>setTimeout((()=>t(new Error("timeout"))),3e3))),t=h.get("/user"),a=await Promise.race([t,e]),s=a.data||a.user||a;s&&!s.roles&&s.role&&(s.roles=[s.role]),r(s),o(!0),console.log("Initial user data loaded:",s)}catch(e){if(console.error("Failed to fetch user from API:",e),401===e.status||e.message.includes("HTTP 401"))console.log("Initial auth check failed with 401, clearing auth data..."),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),r(null),o(!1);else{const e=localStorage.getItem("userData");if(e)try{const t=JSON.parse(e);console.log("Recovered user data from cache:",t),r(t),o(!0)}catch(si){console.error("Failed to parse cached user data:",si),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),r(null),o(!1)}else localStorage.removeItem("authToken"),r(null),o(!1)}}finally{l(!1)}};e()}else l(!1);return()=>{window.removeEventListener("auth-expired",e)}}),[]);const c=async(e,t)=>{try{console.log("\ud83d\udd11 Attempting login with:",{email:e});const a=await h.post("/auth/login",{email:e.trim(),password:t});if(console.log("\u2705 Login response:",a),a.success&&a.token&&a.user){const e=a.token,t=a.user;return localStorage.setItem("authToken",e),localStorage.setItem("userData",JSON.stringify(t)),r(t),o(!0),console.log("\u2705 Login successful, user:",t),{success:!0,user:t,token:e}}if(a.requires_2fa_setup)return console.log("\ud83d\udd10 2FA setup required"),{success:!1,requires_2fa_setup:!0,temp_token:a.temp_token,user:a.user,message:a.message};if(a.requires_2fa_verification)return console.log("\ud83d\udd10 2FA verification required"),{success:!1,requires_2fa_verification:!0,temp_token:a.temp_token,user:a.user,message:a.message};throw console.error("\u274c Invalid response format:",a),new Error(a.message||"Login failed - invalid response format")}catch(a){if(console.error("\u274c Login error:",a),a.data&&(a.data.requires_2fa_setup||a.data.requires_2fa_verification))return a.data;let e="Login failed. Please try again.";throw a.message.includes("HTTP 401")?e="Invalid email or password.":a.message.includes("HTTP 422")?e="Please check your email and password format.":a.message.includes("Unable to connect")?e="Unable to connect to server. Please check your connection.":a.message&&!a.message.includes("HTTP")&&(e=a.message),new Error(e)}},m=async e=>{try{if(console.log("\ud83d\udcdd Attempting registration with:",e),!e.name||!e.name.trim())throw new Error("Name is required");if(!e.email||!e.email.trim())throw new Error("Email is required");if(!e.password||e.password.length<8)throw new Error("Password must be at least 8 characters");if(e.password!==e.password_confirmation)throw new Error("Passwords do not match");const t={name:e.name.trim(),email:e.email.trim(),password:e.password,password_confirmation:e.password_confirmation};console.log("\ud83d\udcdd Sending registration data:",t);const a=await h.post("/auth/register",t);if(console.log("\u2705 Registration response:",a),a.token&&a.user){const e=a.token,t=a.user;return localStorage.setItem("authToken",e),localStorage.setItem("userData",JSON.stringify(t)),r(t),o(!0),console.log("\u2705 Registration successful, user:",t),{success:!0,user:t,token:e}}throw console.error("\u274c Invalid response format:",a),new Error(a.message||"Registration failed - invalid response format")}catch(t){console.error("\u274c Registration error:",t);let e="Registration failed. Please try again.";if(t.message.includes("HTTP 422"))if(t.data&&t.data.errors){const a=Object.values(t.data.errors)[0];Array.isArray(a)&&(e=a[0])}else t.data&&t.data.message&&(e=t.data.message);else t.message.includes("HTTP 409")?e="This email is already registered. Please try signing in.":t.message.includes("Unable to connect")?e="Unable to connect to server. Please check your connection.":t.message&&!t.message.includes("HTTP")&&(e=t.message);throw new Error(e)}},x=async e=>{try{console.log("\ud83d\udd10 Setting up 2FA with temp token:",e);const t=await h.post("/auth/2fa/setup-login",{temp_token:e});return console.log("\u2705 2FA Setup response:",t),t}catch(t){throw console.error("\u274c 2FA Setup error:",t),t}},g=async(e,t)=>{try{console.log("\ud83d\udd10 Enabling 2FA with temp token and code");const a=await h.post("/auth/2fa/enable-login",{temp_token:e,code:t});if(console.log("\u2705 2FA Enable response:",a),a.success&&a.token&&a.user){const e=a.token,t=a.user;return localStorage.setItem("authToken",e),localStorage.setItem("userData",JSON.stringify(t)),r(t),o(!0),console.log("\u2705 Login completed after 2FA setup, user:",t),{success:!0,user:t,token:e,recovery_codes:a.recovery_codes}}return a}catch(a){throw console.error("\u274c 2FA Enable error:",a),a}},p=async(e,t)=>{try{console.log("\ud83d\udd10 Verifying 2FA with temp token and code");const a=await h.post("/auth/2fa/verify-login",{temp_token:e,code:t});if(console.log("\u2705 2FA Verify response:",a),a.success&&a.token&&a.user){const e=a.token,t=a.user;return localStorage.setItem("authToken",e),localStorage.setItem("userData",JSON.stringify(t)),r(t),o(!0),console.log("\u2705 Login completed after 2FA verification, user:",t),{success:!0,user:t,token:e}}return a}catch(a){throw console.error("\u274c 2FA Verify error:",a),a}},v=async()=>{try{localStorage.getItem("authToken")&&await h.post("/auth/logout")}catch(e){console.warn("Logout request failed:",e)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("userData"),r(null),o(!1),window.navigateTo&&window.navigateTo("home")}},b=(0,s.useCallback)((()=>!!a&&"admin"===a.role),[a]),f=(0,s.useCallback)((()=>!!a&&("moderator"===a.role||"admin"===a.role)),[a]),j=(0,s.useCallback)((()=>!!a&&("user"===a.role||"moderator"===a.role||"admin"===a.role)),[a]),k=(0,s.useCallback)((e=>!!a&&a.role===e),[a]),w=(0,s.useCallback)((e=>!(!a||!Array.isArray(e))&&e.includes(a.role)),[a]),N=(0,s.useCallback)((()=>a&&a.role?a.role_display_name||a.role.charAt(0).toUpperCase()+a.role.slice(1):"Guest"),[a]),_=(0,s.useMemo)((()=>({user:a,loading:n,isAuthenticated:i,isAdmin:b,isModerator:f,isUser:j,hasRole:k,hasAnyRole:w,getRoleDisplayName:N,login:c,register:m,logout:v,updateUser:d,setup2FA:x,enable2FA:g,verify2FA:p,api:h})),[a,n,i,b,f,j,k,w,N,c,m,v,d,x,g,p]);return(0,u.jsx)(y.Provider,{value:_,children:t})},j=(0,s.createContext)(null),k=e=>{let{children:t}=e;const a=(0,s.useRef)(new Set),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"generic";console.log("\ud83c\udfaf Triggering activity stats update for action: ".concat(e)),a.current.forEach((t=>{try{t(e)}catch(a){console.error("Error triggering stats update:",a)}}))},n={registerUpdateTrigger:e=>(a.current.add(e),()=>{a.current.delete(e)}),triggerStatsUpdate:r,triggerForumPost:()=>r("forum_post"),triggerForumThread:()=>r("forum_thread"),triggerComment:()=>r("comment"),triggerVote:()=>r("vote"),triggerActivity:()=>r("activity")};return(0,u.jsx)(j.Provider,{value:n,children:t})},w=()=>{const e=(0,s.useContext)(j);return e||{registerUpdateTrigger:()=>()=>{},triggerStatsUpdate:()=>{},triggerForumPost:()=>{},triggerForumThread:()=>{},triggerComment:()=>{},triggerVote:()=>{},triggerActivity:()=>{}}};const N=new class{constructor(){this.heroImagesCache=null,this.cacheTimestamp=null,this.cacheExpiry=3e5}async fetchHeroImages(){try{if(this.heroImagesCache&&this.cacheTimestamp&&Date.now()-this.cacheTimestamp<this.cacheExpiry)return this.heroImagesCache;const e=await fetch("".concat(m.BASE_URL,"/api/public/heroes/images/all"));if(!e.ok)throw new Error("Failed to fetch hero images");const t=await e.json();return this.heroImagesCache=t.data,this.cacheTimestamp=Date.now(),t.data}catch(e){return console.error("Error fetching hero images:",e),[]}}async getHeroImageBySlug(e){try{const t=await fetch("".concat(m.BASE_URL,"/api/public/heroes/images/").concat(e));if(!t.ok)throw new Error("Hero not found");return(await t.json()).data}catch(t){return console.error("Error fetching hero image:",t),null}}getHeroImageUrl(e){return null!==e&&void 0!==e&&e.image_url&&null!==e&&void 0!==e&&e.image_exists?"".concat(m.BASE_URL).concat(e.image_url):null}heroNameToSlug(e){if(!e)return"";const t={"Cloak & Dagger":"cloak-and-dagger","C&D":"cloak-and-dagger","Mr. Fantastic":"mr-fantastic","The Punisher":"punisher","The Thing":"the-thing","Jeff the Land Shark":"jeff-the-land-shark",Jeff:"jeff-the-land-shark"};return t[e]?t[e]:e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}async getHeroDisplay(e){if(!e)return null;const t=this.heroNameToSlug(e),a=await this.getHeroImageBySlug(t);return a||{hero_name:e,slug:t,image_url:null,image_exists:!1,fallback_text:e,role:this.getHeroRole(e),role_color:this.getRoleColor(this.getHeroRole(e))}}getHeroRole(e){return{"Captain America":"Vanguard","Doctor Strange":"Vanguard",Groot:"Vanguard",Hulk:"Vanguard","Bruce Banner":"Vanguard",Magneto:"Vanguard",Thor:"Vanguard",Venom:"Vanguard","Peni Parker":"Vanguard","Emma Frost":"Vanguard","Mister Fantastic":"Vanguard","Mr. Fantastic":"Vanguard","Black Widow":"Duelist",Hawkeye:"Duelist","Iron Man":"Duelist",Punisher:"Duelist","The Punisher":"Duelist","Spider-Man":"Duelist","Squirrel Girl":"Duelist","Star-Lord":"Duelist","Winter Soldier":"Duelist",Storm:"Duelist","Scarlet Witch":"Duelist","Moon Knight":"Duelist",Psylocke:"Duelist","Black Panther":"Duelist","Iron Fist":"Duelist",Magik:"Duelist",Namor:"Duelist",Wolverine:"Duelist",Hela:"Duelist","Human Torch":"Duelist","The Thing":"Duelist",Ultron:"Duelist","Adam Warlock":"Strategist","Cloak & Dagger":"Strategist","C&D":"Strategist","Jeff the Land Shark":"Strategist",Jeff:"Strategist","Luna Snow":"Strategist",Mantis:"Strategist","Rocket Raccoon":"Strategist",Loki:"Strategist","Invisible Woman":"Strategist"}[e]||"Duelist"}getRoleColor(e){return{Vanguard:"#3b82f6",Duelist:"#dc2626",Strategist:"#16a34a"}[e]||"#6b7280"}},_=e=>{let{heroName:t,className:a="",size:r="md",showRole:n=!1,fallbackOnly:l=!1}=e;const[i,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),[m,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!t)return void c(!1);if(l)return o({hero_name:t,fallback_text:t,role:N.getHeroRole(t),role_color:N.getRoleColor(N.getHeroRole(t))}),void c(!1);(async()=>{try{const e=await N.getHeroDisplay(t);o(e)}catch(e){console.error("Error fetching hero data:",e),o({hero_name:t,fallback_text:t,role:N.getHeroRole(t),role_color:N.getRoleColor(N.getHeroRole(t))})}finally{c(!1)}})()}),[t,l]);const h={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-16 h-16 text-xl","2xl":"w-20 h-20 text-2xl"},g=h[r]||h.md;if(d)return(0,u.jsx)("div",{className:"".concat(g," ").concat(a," bg-gray-200 rounded-full animate-pulse")});if(!t){const e="https://staging.mrvl.net/images/heroes/spider-man-headbig.webp";return(0,u.jsx)("div",{className:"".concat(g," ").concat(a," flex items-center justify-center"),children:(0,u.jsx)("img",{src:e,alt:"Spider-Man",className:"w-full h-full object-contain",onError:e=>{e.target.style.display="none";const t=document.createElement("span");t.className="text-gray-500 text-xs font-medium",t.textContent="SM",e.target.parentElement.appendChild(t)}})})}if(!i)return(0,u.jsx)("div",{className:"".concat(g," ").concat(a," bg-gray-200 rounded-full flex items-center justify-center"),children:(0,u.jsx)("span",{className:"text-gray-400",children:"?"})});const p=i.image_exists&&!m?N.getHeroImageUrl(i):null;return(0,u.jsxs)("div",{className:"relative ".concat(a.includes("w-full")?"":g," ").concat(a," flex items-center justify-center"),children:[p&&!m?(0,u.jsx)("img",{src:p,alt:i.hero_name,className:"".concat(a.includes("w-full")?"w-full h-full":g," object-contain"),onError:()=>x(!0)}):(0,u.jsx)("div",{className:"".concat(a.includes("w-full")?"w-full h-full":""," flex items-center justify-center text-gray-700 dark:text-gray-300 text-sm font-medium px-2 text-center"),children:i.fallback_text||i.hero_name}),n&&(0,u.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:i.role_color},title:i.role})]})},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";if(!e||null===e||void 0===e||""===e)switch(t){case"team-logo":case"player-avatar":default:return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNGM0Y0RjYiLz4KPHRleHQgeD0iMjAiIHk9IjI4IiBmb250LWZhbWlseT0ic3lzdGVtLXVpIiBmb250LXNpemU9IjIwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzZCNzI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+PzwvdGV4dD4KPC9zdmc+";case"news-featured":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTEwIiBmb250LWZhbWlseT0ic3lzdGVtLXVpIiBmb250LXNpemU9IjQwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzZCNzI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+PzwvdGV4dD4KPC9zdmc+";case"event-banner":return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDgwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InRvdXJuYW1lbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZGMyNjI2O3N0b3Atb3BhY2l0eToxIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNiOTFjMWM7c3RvcC1vcGFjaXR5OjEiIC8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9InVybCgjdG91cm5hbWVudCkiLz4KPHN2ZyB4PSIzNzUiIHk9IjEyNSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiPgo8cGF0aCBkPSJNMTIgMkw0IDdsOSA1IDkgLTUtOEwyWk0xMiAyMWwtOC01aDJsNiAyIDYtMmgyTDEyIDIxWiIvPgo8L3N2Zz4KPHR5cGUgeD0iNDAwIiB5PSIxNjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIG9wYWNpdHk9IjAuNyI+VE9VUk5BTUVOVCA8L3R5cGU+Cjwvc3ZnPg=="}if("string"===typeof e&&(e=>{if(!e||"string"!==typeof e)return!1;if(e.includes("staging.mrvl.net")||e.includes("mrvl.net"))return!1;if(/^https?:\/\//.test(e))return!e.includes("staging.mrvl.net")&&!e.includes("mrvl.net");const t=["liquipedia.net","liquipedia.org","vlr.gg","hltv.org","cdn.","imgur.com","i.imgur.com"];for(const a of t)if(e.includes(a))return!0;return!1})(e))return console.warn("\ud83d\udea8 External URL blocked:",e,"- Using fallback for security"),S(null,t);if("string"===typeof e&&e.startsWith("blob:"))return console.warn("\ud83d\udea8 Blob URL detected:",e,"- This should be replaced with actual storage URL after upload"),S(null,t);if("string"===typeof e&&/(?:\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])|(?:\uD83E[\uDD00-\uDDFF])|[\u2600-\u26FF]|[\u2700-\u27BF]/.test(e))return console.warn("\ud83d\udea8 Invalid emoji path detected:",e,"Using fallback"),S(null,t);if("string"===typeof e&&(e.startsWith("http://")||e.startsWith("https://"))){if(e.includes("1039tfjgievqa983.mrvl.net")){return e.replace("https://1039tfjgievqa983.mrvl.net",m.BASE_URL)}return e}if(e.includes("/")){if(e.includes("/heroes/")||e.includes("/heroes-portraits/")||e.includes("/images/")){const t=e.startsWith("/")?e:"/".concat(e);return"".concat(m.BASE_URL).concat(t)}if(e.startsWith("/storage/"))return"".concat(m.BASE_URL).concat(e);const t=e.startsWith("/")?e.substring(1):e;return t.startsWith("storage/")?"".concat(m.BASE_URL,"/").concat(t):"".concat(m.BASE_URL,"/storage/").concat(t)}return"".concat(m.BASE_URL,"/storage/").concat(e)},C=e=>null!==e&&void 0!==e&&e.logo&&"object"===typeof e.logo&&e.logo.url?S(e.logo.url,"team-logo"):null!==e&&void 0!==e&&e.logo&&"string"===typeof e.logo&&e.logo.length>0?S(e.logo,"team-logo"):S(null,"team-logo"),E=e=>{if(!e)return S(null,"team-logo");let t=e.logo;if(t&&"object"===typeof t&&t.url){let e=t.url;return e.startsWith("//storage/")||e.startsWith("//events/")?e="".concat(m.BASE_URL).concat(e.substring(1)):(e.startsWith("/events/")||e.startsWith("/storage/"))&&(e="".concat(m.BASE_URL).concat(e)),e}if(t=t||e.logo_url||e.logoUrl,!t)return S(null,"team-logo");if("string"===typeof t&&(t.startsWith("http://")||t.startsWith("https://")))return t;if("string"===typeof t&&t.startsWith("/storage/")){return"".concat(m.BASE_URL).concat(t)}if("string"===typeof t&&(t.startsWith("events/")||t.startsWith("/events/"))){const e=t.startsWith("/")?t:"/".concat(t);return"".concat(m.BASE_URL).concat(e)}return S(t,"team-logo")},T=e=>{if(!e)return S(null,"player-avatar");if(null!==e&&void 0!==e&&e.avatar&&"object"===typeof e.avatar&&e.avatar.url)return S(e.avatar.url,"player-avatar");const t=e.avatar_url||e.avatarUrl||e.avatar;return S(t,"player-avatar")},A=e=>{if(!e)return S(null,"player-avatar");if(e.avatar&&e.avatar.includes("/heroes/")){const t=e.avatar.replace("/storage","");return"".concat(m.BASE_URL).concat(t)}const t=e.avatar_url||e.avatarUrl||e.avatar;return S(t,"player-avatar")},M=e=>{if(!e)return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDgwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InRvdXJuYW1lbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZGMyNjI2O3N0b3Atb3BhY2l0eToxIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNiOTFjMWM7c3RvcC1vcGFjaXR5OjEiIC8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9InVybCgjdG91cm5hbWVudCkiLz4KPHN2ZyB4PSIzNzUiIHk9IjEyNSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiPgo8cGF0aCBkPSJNMTIgMkw0IDdsOSA1IDkgLTUtOEwyWk0xMiAyMWwtOC01aDJsNiAyIDYtMmgyTDEyIDIxWiIvPgo8L3N2Zz4KPHR5cGUgeD0iNDAwIiB5PSIxNjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIG9wYWNpdHk9IjAuNyI+VE9VUk5BTUVOVCA8L3R5cGU+Cjwvc3ZnPg==";if(e.banner&&null!==e.banner&&""!==e.banner.trim()){return S(e.banner,"event-banner")}if(e.banner_image&&null!==e.banner_image&&""!==e.banner_image.trim()){return S(e.banner_image,"event-banner")}if(e.featured_image&&null!==e.featured_image&&""!==e.featured_image.trim()){return S(e.featured_image,"event-banner")}if(e.logo&&null!==e.logo){const t="object"===typeof e.logo?e.logo.url||e.logo.path||"":e.logo;if(t&&"string"===typeof t&&""!==t.trim()){return E(e)}}return"live"===e.status||"ongoing"===e.status?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDgwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImxpdmUiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZGMyNjI2O3N0b3Atb3BhY2l0eToxIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNiOTFjMWM7c3RvcC1vcGFjaXR5OjEiIC8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjgwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9InVybCgjbGl2ZSkiLz4KPHN2ZyB4PSIzNzUiIHk9IjEyNSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiPgo8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIiBmaWxsPSJ3aGl0ZSI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0icmFkaXVzIiB2YWx1ZXM9IjM7NTszIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPjwvY2lyY2xlPgo8L3N2Zz4KPHR5cGUgeD0iNDAwIiB5PSIxNjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxJVkUgVE9VUk5BTUVOVCA8L3R5cGU+Cjwvc3ZnPg==":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDgwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InVwY29taW5nIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzI1NjNlYjtzdG9wLW9wYWNpdHk6MSIgLz4KPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMWQ0ZWQ4O3N0b3Atb3BhY2l0eToxIiAvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+CjxyZWN0IHdpZHRoPSI4MDAiIGhlaWdodD0iMzAwIiBmaWxsPSJ1cmwoI3VwY29taW5nKSIvPgo8c3ZnIHg9IjM3NSIgeT0iMTI1IiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuOCI+CjxwYXRoIGQ9Ik0xMiAyTDEzLjA5IDguMjZMMjIgOUwxNiAxNEwxNy4xOCAyMkwxMiAxOEw2LjgyIDIyTDggMTRMMiA5TDEwLjkxIDguMjZMMTIgMloiLz4KPC9zdmc+Cjx0ZXh0IHg9IjQwMCIgeT0iMTcwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBvcGFjaXR5PSIwLjciPlVQQ09NSU5HIFRPVVJOQU1FTlQgPC90ZXh0Pgo8L3N2Zz4="},P=e=>{if(!e)return S(null,"news-featured");const t=e.featured_image_url||e.featuredImageUrl||e.image||e.featured_image;if(t&&"object"===typeof t){console.log("\ud83d\uddbc\ufe0f getNewsFeaturedImageUrl - Complex image object detected:",t);const e=t.url||t.path||null;if(e&&"string"===typeof e){if(e.startsWith("http")||e.startsWith(m.BASE_URL))return console.log("\ud83d\uddbc\ufe0f getNewsFeaturedImageUrl - Using complete URL from object:",e),e;const t="".concat(m.BASE_URL).concat(e);return console.log("\ud83d\uddbc\ufe0f getNewsFeaturedImageUrl - Built complete URL from object:",t),t}return S(null,"news-featured")}const a=S(t,"news-featured");return console.log("\ud83d\uddbc\ufe0f getNewsFeaturedImageUrl - Final URL:",a),a},R=e=>{if(!e||"string"!==typeof e)return"\ud83c\udf0d";const t=e.trim(),a={US:"\ud83c\uddfa\ud83c\uddf8","UNITED STATES":"\ud83c\uddfa\ud83c\uddf8",USA:"\ud83c\uddfa\ud83c\uddf8",CA:"\ud83c\udde8\ud83c\udde6",CANADA:"\ud83c\udde8\ud83c\udde6",MX:"\ud83c\uddf2\ud83c\uddfd",MEXICO:"\ud83c\uddf2\ud83c\uddfd",UK:"\ud83c\uddec\ud83c\udde7","UNITED KINGDOM":"\ud83c\uddec\ud83c\udde7",GB:"\ud83c\uddec\ud83c\udde7",DE:"\ud83c\udde9\ud83c\uddea",GERMANY:"\ud83c\udde9\ud83c\uddea",FR:"\ud83c\uddeb\ud83c\uddf7",FRANCE:"\ud83c\uddeb\ud83c\uddf7",ES:"\ud83c\uddea\ud83c\uddf8",SPAIN:"\ud83c\uddea\ud83c\uddf8",IT:"\ud83c\uddee\ud83c\uddf9",ITALY:"\ud83c\uddee\ud83c\uddf9",SE:"\ud83c\uddf8\ud83c\uddea",SWEDEN:"\ud83c\uddf8\ud83c\uddea",NO:"\ud83c\uddf3\ud83c\uddf4",NORWAY:"\ud83c\uddf3\ud83c\uddf4",DK:"\ud83c\udde9\ud83c\uddf0",DENMARK:"\ud83c\udde9\ud83c\uddf0",FI:"\ud83c\uddeb\ud83c\uddee",FINLAND:"\ud83c\uddeb\ud83c\uddee",NL:"\ud83c\uddf3\ud83c\uddf1",NETHERLANDS:"\ud83c\uddf3\ud83c\uddf1",BE:"\ud83c\udde7\ud83c\uddea",BELGIUM:"\ud83c\udde7\ud83c\uddea",PL:"\ud83c\uddf5\ud83c\uddf1",POLAND:"\ud83c\uddf5\ud83c\uddf1",CZ:"\ud83c\udde8\ud83c\uddff","CZECH REPUBLIC":"\ud83c\udde8\ud83c\uddff",PT:"\ud83c\uddf5\ud83c\uddf9",PORTUGAL:"\ud83c\uddf5\ud83c\uddf9",GR:"\ud83c\uddec\ud83c\uddf7",GREECE:"\ud83c\uddec\ud83c\uddf7",RU:"\ud83c\uddf7\ud83c\uddfa",RUSSIA:"\ud83c\uddf7\ud83c\uddfa",UA:"\ud83c\uddfa\ud83c\udde6",UKRAINE:"\ud83c\uddfa\ud83c\udde6",TR:"\ud83c\uddf9\ud83c\uddf7",TURKEY:"\ud83c\uddf9\ud83c\uddf7",KR:"\ud83c\uddf0\ud83c\uddf7","SOUTH KOREA":"\ud83c\uddf0\ud83c\uddf7",KOREA:"\ud83c\uddf0\ud83c\uddf7",JP:"\ud83c\uddef\ud83c\uddf5",JAPAN:"\ud83c\uddef\ud83c\uddf5",CN:"\ud83c\udde8\ud83c\uddf3",CHINA:"\ud83c\udde8\ud83c\uddf3",TW:"\ud83c\uddf9\ud83c\uddfc",TAIWAN:"\ud83c\uddf9\ud83c\uddfc",HK:"\ud83c\udded\ud83c\uddf0","HONG KONG":"\ud83c\udded\ud83c\uddf0",SG:"\ud83c\uddf8\ud83c\uddec",SINGAPORE:"\ud83c\uddf8\ud83c\uddec",MY:"\ud83c\uddf2\ud83c\uddfe",MALAYSIA:"\ud83c\uddf2\ud83c\uddfe",TH:"\ud83c\uddf9\ud83c\udded",THAILAND:"\ud83c\uddf9\ud83c\udded",VN:"\ud83c\uddfb\ud83c\uddf3",VIETNAM:"\ud83c\uddfb\ud83c\uddf3",PH:"\ud83c\uddf5\ud83c\udded",PHILIPPINES:"\ud83c\uddf5\ud83c\udded",ID:"\ud83c\uddee\ud83c\udde9",INDONESIA:"\ud83c\uddee\ud83c\udde9",IN:"\ud83c\uddee\ud83c\uddf3",INDIA:"\ud83c\uddee\ud83c\uddf3",AU:"\ud83c\udde6\ud83c\uddfa",AUSTRALIA:"\ud83c\udde6\ud83c\uddfa",NZ:"\ud83c\uddf3\ud83c\uddff","NEW ZEALAND":"\ud83c\uddf3\ud83c\uddff",BR:"\ud83c\udde7\ud83c\uddf7",BRAZIL:"\ud83c\udde7\ud83c\uddf7",AR:"\ud83c\udde6\ud83c\uddf7",ARGENTINA:"\ud83c\udde6\ud83c\uddf7",CL:"\ud83c\udde8\ud83c\uddf1",CHILE:"\ud83c\udde8\ud83c\uddf1",CO:"\ud83c\udde8\ud83c\uddf4",COLOMBIA:"\ud83c\udde8\ud83c\uddf4",PE:"\ud83c\uddf5\ud83c\uddea",PERU:"\ud83c\uddf5\ud83c\uddea",AE:"\ud83c\udde6\ud83c\uddea",UAE:"\ud83c\udde6\ud83c\uddea","UNITED ARAB EMIRATES":"\ud83c\udde6\ud83c\uddea",SA:"\ud83c\uddf8\ud83c\udde6","SAUDI ARABIA":"\ud83c\uddf8\ud83c\udde6",IL:"\ud83c\uddee\ud83c\uddf1",ISRAEL:"\ud83c\uddee\ud83c\uddf1",ZA:"\ud83c\uddff\ud83c\udde6","SOUTH AFRICA":"\ud83c\uddff\ud83c\udde6",EG:"\ud83c\uddea\ud83c\uddec",EGYPT:"\ud83c\uddea\ud83c\uddec",MA:"\ud83c\uddf2\ud83c\udde6",MOROCCO:"\ud83c\uddf2\ud83c\udde6",INTL:"\ud83c\udf0d",INTERNATIONAL:"\ud83c\udf0d",EU:"\ud83c\uddea\ud83c\uddfa",EUROPE:"\ud83c\uddea\ud83c\uddfa",NA:"\ud83c\udf0e","NORTH AMERICA":"\ud83c\udf0e",SOUTH_AMERICA:"\ud83c\udf0e",ASIA:"\ud83c\udf0f",APAC:"\ud83c\udf0f"};return a[t.toUpperCase()]||a[t]||"\ud83c\udf0d"},I=e=>{if(!e||"string"!==typeof e)return"International";const t=e.trim(),a={US:"United States","UNITED STATES":"United States",USA:"United States",CA:"Canada",CANADA:"Canada",MX:"Mexico",MEXICO:"Mexico",UK:"United Kingdom","UNITED KINGDOM":"United Kingdom",GB:"United Kingdom",DE:"Germany",GERMANY:"Germany",FR:"France",FRANCE:"France",ES:"Spain",SPAIN:"Spain",IT:"Italy",ITALY:"Italy",SE:"Sweden",SWEDEN:"Sweden",NO:"Norway",NORWAY:"Norway",DK:"Denmark",DENMARK:"Denmark",FI:"Finland",FINLAND:"Finland",NL:"Netherlands",NETHERLANDS:"Netherlands",BE:"Belgium",BELGIUM:"Belgium",PL:"Poland",POLAND:"Poland",CZ:"Czech Republic","CZECH REPUBLIC":"Czech Republic",PT:"Portugal",PORTUGAL:"Portugal",GR:"Greece",GREECE:"Greece",RU:"Russia",RUSSIA:"Russia",UA:"Ukraine",UKRAINE:"Ukraine",TR:"Turkey",TURKEY:"Turkey",KR:"South Korea","SOUTH KOREA":"South Korea",KOREA:"South Korea",JP:"Japan",JAPAN:"Japan",CN:"China",CHINA:"China",TW:"Taiwan",TAIWAN:"Taiwan",HK:"Hong Kong","HONG KONG":"Hong Kong",SG:"Singapore",SINGAPORE:"Singapore",MY:"Malaysia",MALAYSIA:"Malaysia",TH:"Thailand",THAILAND:"Thailand",VN:"Vietnam",VIETNAM:"Vietnam",PH:"Philippines",PHILIPPINES:"Philippines",ID:"Indonesia",INDONESIA:"Indonesia",IN:"India",INDIA:"India",AU:"Australia",AUSTRALIA:"Australia",NZ:"New Zealand","NEW ZEALAND":"New Zealand",BR:"Brazil",BRAZIL:"Brazil",AR:"Argentina",ARGENTINA:"Argentina",CL:"Chile",CHILE:"Chile",CO:"Colombia",COLOMBIA:"Colombia",PE:"Peru",PERU:"Peru",AE:"United Arab Emirates",UAE:"United Arab Emirates","UNITED ARAB EMIRATES":"United Arab Emirates",SA:"Saudi Arabia","SAUDI ARABIA":"Saudi Arabia",IL:"Israel",ISRAEL:"Israel",ZA:"South Africa","SOUTH AFRICA":"South Africa",EG:"Egypt",EGYPT:"Egypt",MA:"Morocco",MOROCCO:"Morocco",INTL:"International",INTERNATIONAL:"International",EU:"Europe",EUROPE:"Europe",NA:"North America","NORTH AMERICA":"North America",SOUTH_AMERICA:"South America",ASIA:"Asia",APAC:"Asia-Pacific"};return a[t.toUpperCase()]||a[t]||t},D=e=>{let{team:t,size:a="w-8 h-8",className:r=""}=e;if(!t)return(0,u.jsx)("div",{className:"".concat(a," rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-500 dark:text-gray-400 ").concat(r),children:"TEAM"});const s=C(t),n=t.name||t.short_name||t.shortName||"Team";(t.short_name||t.shortName||n).substring(0,4).toUpperCase();return(0,u.jsx)("div",{className:"".concat(a," rounded-full bg-gray-100 dark:bg-gray-700 overflow-hidden ").concat(r),children:(0,u.jsx)("img",{src:s,alt:n,className:"w-full h-full object-cover",onError:e=>{e.target.src=S(null,"team-logo")}})})},L=e=>{let{player:t,size:a="w-8 h-8",className:r=""}=e;const[n,l]=s.useState(!1);if(!t)return(0,u.jsx)("div",{className:"".concat(a," rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-500 dark:text-gray-400 ").concat(r),children:"P"});const i=T(t),o=t.name||t.username||t.ign||t.real_name||"Player";(()=>{const e=t.ign||t.username||t.name||"P",a=e.split(" ");a.length>1?"".concat(a[0][0]).concat(a[1][0]).toUpperCase():e.substring(0,2).toUpperCase()})();return n||!i||i.includes("placeholder")?(0,u.jsx)("div",{className:"".concat(a," rounded-full bg-gray-100 flex items-center justify-center text-gray-500 font-bold text-lg ").concat(r),children:"?"}):(0,u.jsx)("div",{className:"".concat(a," rounded-full bg-gray-100 dark:bg-gray-700 overflow-hidden ").concat(r),children:(0,u.jsx)("img",{src:i,alt:o,className:"w-full h-full object-cover",onError:e=>{l(!0)},onLoad:()=>{}})})},U=e=>{if(!e||"string"!==typeof e)return null;const t={"Black Widow":"black-widow-headbig.webp",Hawkeye:"hawkeye-headbig.webp","Star-Lord":"star-lord-headbig.webp",Punisher:"the-punisher-headbig.webp","The Punisher":"the-punisher-headbig.webp","Winter Soldier":"winter-soldier-headbig.webp","Squirrel Girl":"squirrel-girl-headbig.webp","Iron Man":"iron-man-headbig.webp","Spider-Man":"spider-man-headbig.webp",Storm:"storm-headbig.webp","Scarlet Witch":"scarlet-witch-headbig.webp","Moon Knight":"moon-knight-headbig.webp",Psylocke:"psylocke-headbig.webp","Black Panther":"black-panther-headbig.webp","Iron Fist":"iron-fist-headbig.webp",Magik:"magik-headbig.webp",Namor:"namor-headbig.webp",Wolverine:"wolverine-headbig.webp",Hela:"hela-headbig.webp",Hulk:"bruce-banner-headbig.webp","Bruce Banner":"bruce-banner-headbig.webp",Groot:"groot-headbig.webp","Doctor Strange":"doctor-strange-headbig.webp",Magneto:"magneto-headbig.webp","Captain America":"captain-america-headbig.webp",Venom:"venom-headbig.webp",Thor:"thor-headbig.webp","Peni Parker":"peni-parker-headbig.webp",Mantis:"mantis-headbig.webp","Luna Snow":"luna-snow-headbig.webp","Adam Warlock":"adam-warlock-headbig.webp","Cloak & Dagger":"cloak-dagger-headbig.webp","C&D":"cloak-dagger-headbig.webp","Jeff the Land Shark":"jeff-the-land-shark-headbig.webp",Jeff:"jeff-the-land-shark-headbig.webp","Rocket Raccoon":"rocket-raccoon-headbig.webp",Loki:"loki-headbig.webp","Invisible Woman":"invisible-woman-headbig.webp","Mister Fantastic":"mister-fantastic-headbig.webp","Mr. Fantastic":"mister-fantastic-headbig.webp","Human Torch":"human-torch-headbig.webp","The Thing":"the-thing-headbig.webp",Thing:"the-thing-headbig.webp",Ultron:"ultron-headbig.webp","Emma Frost":"emma-frost-headbig.webp"};return t[e]?"".concat(m.BASE_URL,"/images/heroes/").concat(t[e]):null},z=e=>({"Captain America":"Vanguard","Doctor Strange":"Vanguard",Groot:"Vanguard",Hulk:"Vanguard",Magneto:"Vanguard",Thor:"Vanguard",Venom:"Vanguard","Peni Parker":"Vanguard","Black Widow":"Duelist",Hawkeye:"Duelist","Iron Man":"Duelist",Punisher:"Duelist","Spider-Man":"Duelist","Squirrel Girl":"Duelist","Star-Lord":"Duelist","Winter Soldier":"Duelist",Storm:"Duelist","Scarlet Witch":"Duelist","Moon Knight":"Duelist",Psylocke:"Duelist","Black Panther":"Duelist","Iron Fist":"Duelist",Magik:"Duelist",Namor:"Duelist",Wolverine:"Duelist",Hela:"Duelist","Adam Warlock":"Strategist","Cloak & Dagger":"Strategist","Jeff the Land Shark":"Strategist","Luna Snow":"Strategist",Mantis:"Strategist","Rocket Raccoon":"Strategist",Loki:"Strategist","Invisible Woman":"Strategist",Juno:"Strategist",Mercy:"Strategist",Zenyatta:"Strategist","C&D":"Strategist",Jeff:"Strategist"}[e]||"Duelist"),O={ADMIN:"admin",MODERATOR:"moderator",USER:"user"},F={[O.USER]:1,[O.MODERATOR]:2,[O.ADMIN]:3},B={[O.ADMIN]:{name:"Admin",displayName:"Super Admin",color:"red",theme:{primary:"bg-red-600",primaryHover:"hover:bg-red-700",primaryText:"text-red-600",primaryTextDark:"dark:text-red-400",bg:"bg-red-50",bgDark:"dark:bg-red-900/20",border:"border-red-200",borderDark:"dark:border-red-700",badge:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",gradient:"from-red-500 to-red-600",shadow:"shadow-red-500/30"},icon:"\ud83d\udd34",emoji:"\ud83d\udc51",permissions:["admin_dashboard","user_management","system_settings","all_crud_operations","analytics_full","reporting_full","role_assignment","content_moderation","forum_management"]},[O.MODERATOR]:{name:"Moderator",displayName:"Moderator",color:"yellow",theme:{primary:"bg-yellow-600",primaryHover:"hover:bg-yellow-700",primaryText:"text-yellow-600",primaryTextDark:"dark:text-yellow-400",bg:"bg-yellow-50",bgDark:"dark:bg-yellow-900/20",border:"border-yellow-200",borderDark:"dark:border-yellow-700",badge:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",gradient:"from-yellow-500 to-yellow-600",shadow:"shadow-yellow-500/30"},icon:"\ud83d\udfe1",emoji:"\u26a1",permissions:["moderator_dashboard","content_moderation","forum_management","user_warnings","user_suspension","comment_moderation","post_moderation","analytics_content","match_verification"]},[O.USER]:{name:"User",displayName:"User",color:"green",theme:{primary:"bg-green-600",primaryHover:"hover:bg-green-700",primaryText:"text-green-600",primaryTextDark:"dark:text-green-400",bg:"bg-green-50",bgDark:"dark:bg-green-900/20",border:"border-green-200",borderDark:"dark:border-green-700",badge:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",gradient:"from-green-500 to-green-600",shadow:"shadow-green-500/30"},icon:"\ud83d\udfe2",emoji:"\ud83c\udfae",permissions:["user_dashboard","profile_customization","forum_participation","voting_system","comment_system","public_data_view","personal_statistics"]}},W=e=>{if(!e)return O.USER;let t;if(e.roles&&Array.isArray(e.roles))t=e.roles.filter((e=>Object.values(O).includes(e)));else{if(!e.role||!Object.values(O).includes(e.role))return O.USER;t=[e.role]}return 0===t.length?O.USER:t.reduce(((e,t)=>F[t]>F[e]?t:e),O.USER)},H=(e,t)=>!!e&&(e.roles&&Array.isArray(e.roles)?e.roles.includes(t):!!e.role&&e.role===t),V=(e,t)=>{const a=W(e);return F[a]>=F[t]},q=e=>{const t=W(e);return B[t]},G=e=>{const t=q(e);return{text:t.displayName,className:t.theme.badge,icon:t.icon,emoji:t.emoji}},Y=e=>{const t=W(e);return t===O.ADMIN?"admin-dashboard":t===O.MODERATOR?"moderator-dashboard":"user-dashboard"};const Z=function(e){let{user:t,size:a="md",showIcon:r=!0,showText:s=!0,variant:n="default",className:l=""}=e;if(!t)return null;const i=G(t),o=q(t),d={default:i.className,outline:"border-2 ".concat(o.theme.border," ").concat(o.theme.borderDark," ").concat(o.theme.primaryText," ").concat(o.theme.primaryTextDark," bg-transparent"),minimal:"".concat(o.theme.primaryText," ").concat(o.theme.primaryTextDark," bg-transparent")};return(0,u.jsxs)("span",{className:"\n      inline-flex items-center space-x-1 font-medium rounded-full transition-all duration-200\n      ".concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-2 text-base"}[a]," \n      ").concat(d[n],"\n      ").concat(l,"\n    "),children:[r&&(0,u.jsx)("span",{className:"leading-none",children:i.icon}),s&&(0,u.jsx)("span",{className:"leading-none",children:i.text})]})},K=e=>{let{user:t,size:a="md",showFlairs:r=!0,showName:s=!0,showRole:n=!1,className:l=""}=e;const i=(null===t||void 0===t?void 0:t.use_hero_as_avatar)&&(null===t||void 0===t?void 0:t.hero_flair);return(0,u.jsxs)("div",{className:"flex items-center gap-2 ".concat(l),children:[i?(0,u.jsx)(_,{heroName:t.hero_flair,size:a,className:"rounded-full",showRole:!1}):null!==t&&void 0!==t&&t.avatar?(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)("img",{src:S(t.avatar,"player-avatar"),alt:t.name,className:"".concat("xs"===a?"w-6 h-6":"sm"===a?"w-8 h-8":"md"===a?"w-10 h-10":"lg"===a?"w-12 h-12":"w-16 h-16"," rounded-full object-cover"),onError:e=>{e.target.src=S(null,"player-avatar")}})}):(0,u.jsx)("div",{className:"".concat("xs"===a?"w-6 h-6 text-xs":"sm"===a?"w-8 h-8 text-sm":"md"===a?"w-10 h-10 text-base":"lg"===a?"w-12 h-12 text-lg":"w-16 h-16 text-xl"," rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center font-medium"),children:(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:(o=(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.username),o?o.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2):"?")})}),(0,u.jsx)("div",{className:"flex flex-col",children:s&&(0,u.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.username)||"Unknown User"}),r&&(null===t||void 0===t?void 0:t.show_team_flair)&&(null===t||void 0===t?void 0:t.team_flair)&&(0,u.jsx)("div",{className:"flex items-center",children:t.team_flair.logo?(0,u.jsx)("img",{src:S(t.team_flair.logo,"team-logo"),alt:t.team_flair.name,className:"w-5 h-5 object-contain",title:t.team_flair.name,onError:e=>{e.target.src=S(null,"team-logo")}}):(0,u.jsxs)("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:["[",t.team_flair.short_name||t.team_flair.name,"]"]})})]}),n&&t&&(0,u.jsx)(Z,{user:t,size:"sm",showIcon:!0,showText:!0,variant:"default"})]})})]});var o};const J=function(e){let{currentPage:t,navigateTo:a,onAuthClick:r,user:n}=e;const{user:l,logout:i,isAdmin:o,api:d}=b(),{theme:c,toggleTheme:m}=p(),[x,h]=(0,s.useState)(!1),[g,v]=(0,s.useState)(""),[y,f]=(0,s.useState)([]),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),_=(0,s.useRef)(null),S=(0,s.useRef)(null),C=l||n;console.log("\ud83d\udd0d Navigation: User role debug:",{user:null===C||void 0===C?void 0:C.name,userRole:null===C||void 0===C?void 0:C.role,userRoles:null===C||void 0===C?void 0:C.roles,isAdmin:!!C&&H(C,O.ADMIN),isModerator:!!C&&H(C,O.MODERATOR),ROLES:O});const E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("\ud83e\udded Navigation: Navigating to ".concat(e),t),!a||"function"!==typeof a)return console.error("\u274c Navigation: navigateTo function not available"),void alert("Navigation error: Page navigation is not available. Please refresh and try again.");try{a(e,t),h(!1)}catch(r){console.error("\u274c Navigation: Navigation failed:",r),alert("Navigation failed. Please try again.")}},T=()=>{console.log("\ud83d\udeaa Navigation: User logging out");try{i&&"function"===typeof i?(i(),h(!1),E("home")):(console.error("\u274c Navigation: Logout function not available"),alert("Logout failed. Please refresh the page."))}catch(e){console.error("\u274c Navigation: Logout error:",e),alert("Logout failed. Please try again.")}};(0,s.useEffect)((()=>{const e=setTimeout((()=>{g.trim()&&(async e=>{if(!e.trim()||e.length<2)return f([]),void k(!1);N(!0);try{console.log("\ud83d\udd0d Live search for:",e);const[j,w,N,_,S,C]=await Promise.allSettled([d.get("/teams"),d.get("/players"),d.get("/events"),d.get("/matches"),d.get("/forums/threads"),d.get("/news")]),E=e.toLowerCase(),T=[];var t,a,r,s,n,l,i,o,c,m,u,x,h,g,p,v,y,b;if("fulfilled"===j.status)((null===(t=j.value)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)||(null===(r=j.value)||void 0===r?void 0:r.data)||[]).filter((e=>{var t,a;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(E))||(null===(a=e.short_name)||void 0===a?void 0:a.toLowerCase().includes(E))})).slice(0,3).forEach((e=>{T.push({id:e.id,type:"team",title:e.name,subtitle:e.short_name,icon:"",data:e})}));if("fulfilled"===w.status)((null===(s=w.value)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.data)||(null===(l=w.value)||void 0===l?void 0:l.data)||[]).filter((e=>{var t,a;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(E))||(null===(a=e.username)||void 0===a?void 0:a.toLowerCase().includes(E))})).slice(0,3).forEach((e=>{T.push({id:e.id,type:"player",title:e.name||e.username,subtitle:e.team_name||"Free Agent",icon:"",data:e})}));if("fulfilled"===_.status)((null===(i=_.value)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.data)||(null===(c=_.value)||void 0===c?void 0:c.data)||[]).filter((e=>{var t,a,r,s;return(null===(t=e.team1)||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(E))||(null===(r=e.team2)||void 0===r||null===(s=r.name)||void 0===s?void 0:s.toLowerCase().includes(E))})).slice(0,2).forEach((e=>{var t,a,r;T.push({id:e.id,type:"match",title:"".concat(null===(t=e.team1)||void 0===t?void 0:t.name," vs ").concat(null===(a=e.team2)||void 0===a?void 0:a.name),subtitle:(null===(r=e.event)||void 0===r?void 0:r.name)||"Match",icon:"",data:e})}));if("fulfilled"===N.status)((null===(m=N.value)||void 0===m||null===(u=m.data)||void 0===u?void 0:u.data)||(null===(x=N.value)||void 0===x?void 0:x.data)||[]).filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(E)})).slice(0,2).forEach((e=>{T.push({id:e.id,type:"event",title:e.name,subtitle:e.location||"Tournament",icon:"",data:e})}));if("fulfilled"===S.status)((null===(h=S.value)||void 0===h||null===(g=h.data)||void 0===g?void 0:g.data)||(null===(p=S.value)||void 0===p?void 0:p.data)||[]).filter((e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(E)})).slice(0,2).forEach((e=>{var t;T.push({id:e.id,type:"forum",title:e.title,subtitle:"by ".concat(e.user_name||(null===(t=e.user)||void 0===t?void 0:t.name)||"Anonymous"),icon:"",data:e})}));if("fulfilled"===C.status)((null===(v=C.value)||void 0===v||null===(y=v.data)||void 0===y?void 0:y.data)||(null===(b=C.value)||void 0===b?void 0:b.data)||[]).filter((e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(E)})).slice(0,2).forEach((e=>{var t;T.push({id:e.id,type:"news",title:e.title,subtitle:(null===(t=e.author)||void 0===t?void 0:t.name)||"MRVL Team",icon:"",data:e})}));f(T.slice(0,10)),k(T.length>0)}catch(j){console.error("\u274c Live search error:",j),f([]),k(!1)}finally{N(!1)}})(g)}),300);return()=>clearTimeout(e)}),[g]),(0,s.useEffect)((()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&_.current&&!_.current.contains(e.target)&&k(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const A=e=>{switch(console.log("\ud83d\udd17 Search result clicked:",e),e.type){case"team":E("team-detail",{id:e.id});break;case"player":E("player-detail",{id:e.id});break;case"match":E("match-detail",{id:e.id});break;case"event":E("event-detail",{id:e.id});break;case"forum":E("thread-detail",{id:e.id});break;case"news":E("news-detail",{id:e.id})}k(!1),v("")},M=()=>{console.log("\ud83d\udd11 Navigation: Auth button clicked"),r&&"function"===typeof r?r():(console.error("\u274c Navigation: onAuthClick function not available"),alert("Authentication modal is not available. Please refresh the page."))},P=()=>{console.log("\ud83d\udcca Navigation: Dashboard button clicked, user role check:",{isAdmin:o()||!1,user:(null===C||void 0===C?void 0:C.role)||"none"});try{const e=Y(C);E(e)}catch(e){console.error("\u274c Navigation: Dashboard navigation error:",e),alert("Dashboard access failed. Please try again.")}},R=[];C&&H(C,O.MODERATOR)&&!H(C,O.ADMIN)&&R.push({id:"moderator-dashboard",label:"Mod Panel"});const I=[{id:"forums",label:"Forums"},{id:"matches",label:"Matches"},{id:"events",label:"Events"},{id:"rankings",label:"Rankings"}];return(0,u.jsxs)("nav",{className:"sticky top-0 z-40 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-600",children:[(0,u.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between h-14",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"cursor-pointer group",onClick:()=>E("home"),children:(0,u.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-red-600 dark:text-red-400 group-hover:scale-110 transition-transform",children:"MRVL"})})}),(0,u.jsx)("div",{className:"hidden lg:flex items-center justify-center flex-1",children:(0,u.jsxs)("div",{className:"flex items-center space-x-8",children:[I.map((e=>(0,u.jsx)("button",{onClick:()=>E(e.id),className:"px-3 py-2 text-sm font-medium transition-colors whitespace-nowrap ".concat(t===e.id?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400"),children:e.label},e.id))),R.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),R.map((e=>(0,u.jsx)("button",{onClick:()=>E(e.id),className:"px-3 py-2 text-sm font-medium transition-colors whitespace-nowrap flex items-center space-x-1 ".concat(t===e.id?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400"),children:(0,u.jsx)("span",{children:e.label})},e.id)))]})]})}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"hidden md:flex items-center",children:(0,u.jsxs)("div",{className:"relative w-48",children:[(0,u.jsx)("input",{ref:_,type:"text",placeholder:"Search",value:g,onChange:e=>v(e.target.value),onFocus:()=>g.trim()&&k(!0),onKeyPress:e=>{"Enter"===e.key&&g.trim()&&(E("search",{query:g.trim()}),k(!1),v(""))},className:"w-full px-3 py-1.5 pl-8 pr-3 text-sm bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"}),(0,u.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:w?(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-red-500 rounded-full animate-spin"}):(0,u.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),j&&y.length>0&&(0,u.jsxs)("div",{ref:S,className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:[y.map(((e,t)=>(0,u.jsxs)("button",{onClick:()=>A(e),className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.subtitle})]}),(0,u.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 capitalize",children:e.type})]},"".concat(e.type,"-").concat(e.id)))),(0,u.jsxs)("button",{onClick:()=>{E("search",{query:g.trim()}),k(!1),v("")},className:"w-full px-3 py-2 text-center text-sm text-red-600 dark:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-t border-gray-200 dark:border-gray-600 font-medium",children:['View all results for "',g,'" \u2192']})]})]})}),(0,u.jsx)("button",{onClick:()=>{console.log("\ud83c\udfa8 Navigation: Theme toggle clicked");try{m&&"function"===typeof m?m():console.error("\u274c Navigation: toggleTheme function not available")}catch(e){console.error("\u274c Navigation: Theme toggle error:",e)}},className:"p-1.5 rounded text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors h-8 w-8 flex items-center justify-center","aria-label":"Toggle theme",children:"dark"===c?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),C?(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:P,className:"px-2 py-1.5 text-sm font-medium transition-colors whitespace-nowrap ".concat(["user-dashboard","admin-dashboard"].includes(t)?"text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400"),children:"Dashboard"}),(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("button",{onClick:()=>E("user-profile",{id:C.id}),className:"flex items-center space-x-2 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:(0,u.jsx)(K,{user:C,size:"sm",showFlairs:!0,showName:!0,showRole:!1})}),(0,u.jsx)(Z,{user:C,size:"sm",showIcon:!0,showText:!1,variant:"default"})]}),(0,u.jsx)("button",{onClick:T,className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors","aria-label":"Logout",children:"Logout"})]}):(0,u.jsx)("button",{onClick:M,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white font-medium rounded text-sm transition-colors",children:"Sign In"}),(0,u.jsx)("button",{onClick:()=>{h(!x)},className:"lg:hidden p-1.5 rounded text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors h-8 w-8 flex items-center justify-center","aria-label":"Toggle mobile menu",children:x?"\u2715":"\u2630"})]})]}),(0,u.jsx)("div",{className:"md:hidden px-4 pb-3",children:(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"text",placeholder:"Search",value:g,onChange:e=>v(e.target.value),onFocus:()=>g.trim()&&k(!0),onKeyPress:e=>{"Enter"===e.key&&g.trim()&&(E("search",{query:g.trim()}),k(!1),v(""))},className:"w-full px-3 py-2 pl-8 pr-3 text-sm bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-red-500 focus:border-red-500"}),(0,u.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:w?(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-red-500 rounded-full animate-spin"}):(0,u.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),j&&y.length>0&&(0,u.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:[y.map(((e,t)=>(0,u.jsxs)("button",{onClick:()=>A(e),className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[(0,u.jsx)("span",{className:"text-base",children:e.icon}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.subtitle})]}),(0,u.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 capitalize",children:e.type})]},"mobile-".concat(e.type,"-").concat(e.id)))),(0,u.jsxs)("button",{onClick:()=>{E("search",{query:g.trim()}),k(!1),v("")},className:"w-full px-3 py-2 text-center text-sm text-red-600 dark:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-t border-gray-200 dark:border-gray-600 font-medium",children:['View all results for "',g,'" \u2192']})]})]})})]}),x&&(0,u.jsx)("div",{className:"lg:hidden",children:(0,u.jsxs)("div",{className:"px-4 pt-2 pb-4 space-y-1 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-600",children:[C&&(0,u.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 mb-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your Role:"}),(0,u.jsx)(Z,{user:C,size:"sm",showIcon:!0,showText:!0,variant:"default"})]}),I.map((e=>(0,u.jsx)("button",{onClick:()=>E(e.id),className:"w-full text-left px-3 py-2 text-sm font-medium transition-colors ".concat(t===e.id?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700"),children:e.label},e.id))),R.length>0&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 mt-2 pt-2",children:[(0,u.jsx)("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide px-3 py-1",children:V(C,O.ADMIN)?"Admin Tools":"Moderator Tools"}),R.map((e=>(0,u.jsx)("button",{onClick:()=>E(e.id),className:"w-full text-left px-3 py-2 text-sm font-medium transition-colors flex items-center justify-between ".concat(t===e.id?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700"),children:(0,u.jsx)("span",{children:e.label})},e.id)))]})}),C&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2 mt-2",children:[(0,u.jsx)("button",{onClick:P,className:"w-full text-left px-3 py-2 text-sm font-medium transition-colors ".concat(["user-dashboard","admin-dashboard"].includes(t)?"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700"),children:"Dashboard"}),(0,u.jsx)("button",{onClick:T,className:"w-full text-left px-3 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Logout"})]})}),!C&&(0,u.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2 mt-2",children:(0,u.jsx)("button",{onClick:M,className:"w-full text-left px-3 py-2 text-sm font-medium bg-red-600 text-white hover:bg-red-700 transition-colors rounded",children:"Sign In"})})]})})]})};function Q(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}const X=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,a)=>a?a.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},$=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t)).join(" ").trim()};var ee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const te=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],ae=(0,s.forwardRef)(((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:i="",children:o,iconNode:d}=e,m=Q(e,te);return(0,s.createElement)("svg",c(c(c({ref:t},ee),{},{width:r,height:r,stroke:a,strokeWidth:l?24*Number(n)/Number(r):n,className:$("lucide",i)},!o&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"}),m),[...d.map((e=>{let[t,a]=e;return(0,s.createElement)(t,a)})),...Array.isArray(o)?o:[o]])})),re=["className"],se=(e,t)=>{const a=(0,s.forwardRef)(((a,r)=>{let{className:n}=a,l=Q(a,re);return(0,s.createElement)(ae,c({ref:r,iconNode:t,className:$("lucide-".concat((i=X(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),n)},l));var i}));return a.displayName=X(e),a},ne=se("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),le=se("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),ie=se("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),oe=se("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),de=se("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ce=se("newspaper",[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]]),me=se("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ue=se("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),xe=se("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),he=se("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ge=se("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pe=se("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),ve=se("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ye=se("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),be=se("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fe=se("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),je=se("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ke=se("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),we=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const[r,n]=(0,s.useState)(0),[l,i]=(0,s.useState)(0),[o,d]=(0,s.useState)(0),[c,m]=(0,s.useState)(!1),u=(0,s.useRef)(null),x=(0,s.useCallback)((e=>{const t=e.touches[0];n(t.clientX),i(t.clientY),d(t.clientX),m(!0)}),[]),h=(0,s.useCallback)((e=>{if(!c)return;const t=e.touches[0];d(t.clientX);Math.abs(t.clientX-r)>Math.abs(t.clientY-l)&&e.preventDefault()}),[c,r,l]),g=(0,s.useCallback)((()=>{if(!c)return;const s=o-r;Math.abs(s)>=a&&(s>0&&t?t():s<0&&e&&e()),m(!1),n(0),d(0)}),[c,o,r,a,e,t]);return(0,s.useEffect)((()=>{const e=u.current;if(e)return e.addEventListener("touchstart",x,{passive:!1}),e.addEventListener("touchmove",h,{passive:!1}),e.addEventListener("touchend",g),()=>{e.removeEventListener("touchstart",x),e.removeEventListener("touchmove",h),e.removeEventListener("touchend",g)}}),[x,h,g]),{elementRef:u,isSwiping:c,swipeProgress:c?Math.abs(o-r)/a:0,swipeDirection:o>r?"right":"left"}},Ne={light:()=>{if(window.DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission)try{new TouchEvent("touchstart",{force:.5})}catch(e){}navigator.vibrate&&navigator.vibrate(10)},medium:()=>{if(window.DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission)try{new TouchEvent("touchstart",{force:.75})}catch(e){}navigator.vibrate&&navigator.vibrate(20)},heavy:()=>{if(window.DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission)try{new TouchEvent("touchstart",{force:1})}catch(e){}navigator.vibrate&&navigator.vibrate([30,10,30])},success:()=>{navigator.vibrate&&navigator.vibrate([10,10,10])},error:()=>{navigator.vibrate&&navigator.vibrate([50,20,50,20,50])},notification:()=>{navigator.vibrate&&navigator.vibrate([100,50,100])},matchStart:()=>{navigator.vibrate&&navigator.vibrate([200,100,200,100,500])},scoreUpdate:()=>{navigator.vibrate&&navigator.vibrate([50,25,50])},achievement:()=>{navigator.vibrate&&navigator.vibrate([100,50,100,50,200])},levelUp:()=>{navigator.vibrate&&navigator.vibrate([200,100,100,50,100,50,300])},streak:()=>{navigator.vibrate&&navigator.vibrate([75,25,75,25,75])},reaction:()=>{navigator.vibrate&&navigator.vibrate([25])},unlock:()=>{navigator.vibrate&&navigator.vibrate([150,75,150])},cardFlip:()=>{navigator.vibrate&&navigator.vibrate([40,20,60])},swipeAction:()=>{navigator.vibrate&&navigator.vibrate([30])},powerUser:()=>{navigator.vibrate&&navigator.vibrate([25,10,25,10,25,10,100])},challenge:()=>{navigator.vibrate&&navigator.vibrate([100,50,50,25,50,25,200])}},_e=e=>{let{icon:t,label:a,active:r,onClick:s,className:n=""}=e;return(0,u.jsxs)("button",{onClick:s,className:"flex items-center space-x-3 w-full px-3 py-2.5 rounded-lg transition-colors ".concat(r?"bg-red-50 dark:bg-red-900/20 text-red-500 dark:text-red-400":"hover:bg-gray-100 dark:hover:bg-gray-800"," ").concat(n),children:[(0,u.jsx)(t,{className:"w-5 h-5"}),(0,u.jsx)("span",{className:"font-medium",children:a})]})},Se=e=>{let{currentPage:t,navigateTo:a,user:r}=e;const[n,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)([]),[p,v]=(0,s.useState)(!1),[y,f]=(0,s.useState)([]),j=(0,s.useRef)(null),k=(0,s.useRef)(null),{logout:w,isAdmin:N}=b();(0,s.useEffect)((()=>{l(!1)}),[t]),(0,s.useEffect)((()=>{d&&j.current&&j.current.focus()}),[d]),(0,s.useEffect)((()=>(document.body.style.overflow=n?"hidden":"",()=>{document.body.style.overflow=""})),[n]);const _=(0,s.useCallback)((()=>{i.trim()&&(Ne.light(),a("search",{query:i.trim()}),o(""),c(!1),g([]))}),[i,a]),S=(0,s.useCallback)((e=>{o(e),k.current&&clearTimeout(k.current),e.trim().length>2?(v(!0),k.current=setTimeout((async()=>{const t=[{type:"team",name:"Sentinels",icon:ne},{type:"event",name:"VCT Masters",icon:le},{type:"match",name:"SEN vs FNC",icon:ie}].filter((t=>t.name.toLowerCase().includes(e.toLowerCase())));g(t),v(!1)}),300)):(g([]),v(!1))}),[]),C=(0,s.useCallback)((()=>{Ne.medium(),w(),l(!1),a("home")}),[w,a]),E=(0,s.useCallback)((()=>{const e=M.findIndex((e=>e.id===t));e<M.length-1&&(Ne.light(),a(M[e+1].id))}),[t,a]),T=(0,s.useCallback)((()=>{const e=M.findIndex((e=>e.id===t));e>0&&(Ne.light(),a(M[e-1].id))}),[t,a]),{elementRef:A}=we(E,T,100),M=[{id:"home",icon:oe,label:"Home"},{id:"matches",icon:ie,label:"Matches"},{id:"events",icon:le,label:"Events"},{id:"teams",icon:ne,label:"Teams"},{id:"rankings",icon:de,label:"Rankings"}],P=[{id:"news",icon:ce,label:"News"},{id:"forums",icon:me,label:"Forums"},{id:"stats",icon:ue,label:"Stats"}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("header",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700 z-50 transition-all duration-200",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 mobile-safe-area",children:[(0,u.jsxs)("button",{onClick:()=>a("home"),className:"flex items-center space-x-2 touch-target touch-optimized rounded-lg hover:bg-gray-100/50 dark:hover:bg-gray-800/50 transition-colors px-2 py-1 -ml-2",children:[(0,u.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center shadow-lg",children:(0,u.jsx)("span",{className:"text-white font-bold text-lg",children:"M"})}),(0,u.jsxs)("div",{className:"flex flex-col items-start",children:[(0,u.jsx)("span",{className:"font-bold text-lg leading-none text-gray-900 dark:text-white",children:"MRVL"}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 leading-none",children:"Esports"})]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)("button",{onClick:()=>c(!d),className:"touch-target touch-optimized p-3 rounded-xl transition-all duration-300 transform ".concat(d?"bg-red-500 text-white shadow-lg scale-105":"hover:bg-gray-100/70 dark:hover:bg-gray-800/70 text-gray-600 dark:text-gray-400 hover:scale-105"),"aria-label":"Search",children:(0,u.jsx)(xe,{className:"w-5 h-5 transition-transform duration-200 ".concat(d?"rotate-90":"")})}),r&&(0,u.jsxs)("button",{onClick:()=>a("notifications"),className:"touch-target touch-optimized p-3 rounded-xl hover:bg-gray-100/70 dark:hover:bg-gray-800/70 transition-all duration-200 relative text-gray-600 dark:text-gray-400","aria-label":"Notifications",children:[(0,u.jsx)(he,{className:"w-5 h-5"}),(0,u.jsx)("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),(0,u.jsx)("button",{onClick:()=>l(!n),className:"touch-target touch-optimized p-3 rounded-xl transition-all duration-200 ".concat(n?"bg-red-500 text-white shadow-lg rotate-90":"hover:bg-gray-100/70 dark:hover:bg-gray-800/70 text-gray-600 dark:text-gray-400"),"aria-label":"Menu",children:n?(0,u.jsx)(ge,{className:"w-5 h-5"}):(0,u.jsx)(pe,{className:"w-5 h-5"})})]})]}),(0,u.jsx)("div",{className:"overflow-hidden transition-all duration-300 border-t border-gray-200 dark:border-gray-700 ".concat(d?"max-h-20 opacity-100":"max-h-0 opacity-0"),children:(0,u.jsx)("div",{className:"px-4 py-3",children:(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_()},className:"relative",children:[(0,u.jsxs)("div",{className:"relative bg-gradient-to-r from-gray-100/80 to-gray-50/80 dark:from-gray-800/80 dark:to-gray-700/80 rounded-xl backdrop-blur-sm border border-gray-200/50 dark:border-gray-600/50 focus-within:border-red-300 focus-within:ring-1 focus-within:ring-red-500/20 transition-all duration-200",children:[(0,u.jsx)("input",{ref:j,type:"search",value:i,onChange:e=>S(e.target.value),placeholder:"Search teams, players, events, matches...",className:"w-full px-12 py-3.5 bg-transparent text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none mobile-input-no-zoom",autoComplete:"off",spellCheck:"false"}),(0,u.jsx)(xe,{className:"absolute left-4 top-4 w-4 h-4 text-gray-400"}),(0,u.jsxs)("div",{className:"absolute right-2 top-2 flex space-x-1",children:[i&&(0,u.jsx)("button",{type:"submit",className:"p-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors text-xs",children:"Go"}),(0,u.jsx)("button",{type:"button",onClick:()=>{c(!1),o("")},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,u.jsx)(ge,{className:"w-4 h-4"})})]}),p&&(0,u.jsx)("div",{className:"absolute right-12 top-4",children:(0,u.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full"})})]}),h.length>0&&(0,u.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-b-xl shadow-xl z-10 max-h-60 overflow-y-auto",children:h.map(((e,t)=>{const a=e.icon;return(0,u.jsxs)("button",{onClick:()=>{o(e.name),_()},className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left",children:[(0,u.jsx)(a,{className:"w-4 h-4 text-gray-400"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.type})]})]},t)}))})]})})})]}),(0,u.jsx)("nav",{ref:A,className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg border-t border-gray-200 dark:border-gray-700 z-50 touch-optimized",children:(0,u.jsx)("div",{className:"mobile-safe-area",children:(0,u.jsx)("div",{className:"grid grid-cols-5 min-h-16",children:M.map((e=>{const r=t===e.id;return(0,u.jsxs)("button",{onClick:()=>{Ne.light(),a(e.id)},className:"touch-target touch-optimized flex flex-col items-center justify-center space-y-1 py-3 px-1 transition-all duration-200 relative transform-gpu ".concat(r?"text-red-500 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300"),children:[r&&(0,u.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-1 bg-red-500 rounded-b-full"}),(0,u.jsx)("div",{className:"p-2 rounded-xl transition-all duration-200 transform-gpu ".concat(r?"bg-red-50 dark:bg-red-900/20 scale-110":"hover:bg-gray-100/50 dark:hover:bg-gray-800/50"),children:(0,u.jsx)(e.icon,{className:"w-5 h-5"})}),(0,u.jsx)("span",{className:"text-xs font-medium transition-all duration-200 ".concat(r?"font-semibold":""),children:e.label})]},e.id)}))})})}),n&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>l(!1)}),(0,u.jsxs)("div",{className:"lg:hidden fixed inset-y-0 right-0 w-full max-w-sm bg-white dark:bg-gray-900 shadow-xl z-50 overflow-y-auto transform animate-slide-in-right",children:[(0,u.jsx)("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h2",{className:"text-lg font-bold",children:"Menu"}),(0,u.jsx)("button",{onClick:()=>l(!1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,u.jsx)(ge,{className:"w-5 h-5"})})]})}),r?(0,u.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("button",{onClick:()=>{a("user-profile",{id:r.id}),l(!1)},className:"flex items-center space-x-3 w-full",children:[(0,u.jsx)(K,{user:r,size:"md"}),(0,u.jsxs)("div",{className:"flex-1 text-left",children:[(0,u.jsx)("div",{className:"font-semibold",children:r.name}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View Profile"})]}),(0,u.jsx)(ve,{className:"w-5 h-5 text-gray-400"})]})}):(0,u.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("button",{onClick:()=>{a("login"),l(!1)},className:"w-full bg-red-500 hover:bg-red-600 text-white font-medium py-3 rounded-lg transition-colors",children:"Sign In"})}),(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Main"}),(0,u.jsx)("div",{className:"space-y-1",children:M.map((e=>(0,u.jsx)(_e,{icon:e.icon,label:e.label,active:t===e.id,onClick:()=>{a(e.id),l(!1)}},e.id)))})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Community"}),(0,u.jsx)("div",{className:"space-y-1",children:P.map((e=>(0,u.jsx)(_e,{icon:e.icon,label:e.label,active:t===e.id,onClick:()=>{a(e.id),l(!1)}},e.id)))})]}),r&&(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:"Account"}),(0,u.jsxs)("div",{className:"space-y-1",children:[N()&&(0,u.jsx)(_e,{icon:ye,label:"Admin Dashboard",onClick:()=>{a("admin-dashboard"),l(!1)}}),(0,u.jsx)(_e,{icon:be,label:"Settings",onClick:()=>{a("settings"),l(!1)}}),(0,u.jsx)(_e,{icon:fe,label:"Sign Out",onClick:C,className:"text-red-500 dark:text-red-400"})]})]})]}),(0,u.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 text-center text-sm text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{children:"\xa9 2025 MRVL. All rights reserved."})})]})]})]})};const Ce=function(e){let{isOpen:t,onClose:a}=e;const{login:r,register:n,setup2FA:l,enable2FA:i,verify2FA:o,api:d}=b(),[m,x]=(0,s.useState)(!0),[h,g]=(0,s.useState)(!1),[p,v]=(0,s.useState)(!1),[y,f]=(0,s.useState)(!1),[j,k]=(0,s.useState)({name:"",email:"",password:"",password_confirmation:""}),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)(""),[C,E]=(0,s.useState)(""),[T,A]=(0,s.useState)({score:0,message:""}),[M,P]=(0,s.useState)(!1),[R,I]=(0,s.useState)(!1),[D,L]=(0,s.useState)(""),[U,z]=(0,s.useState)(""),[O,F]=(0,s.useState)(""),[B,W]=(0,s.useState)(""),[H,V]=(0,s.useState)([]),[q,G]=(0,s.useState)(!1),Y=e=>{k(c(c({},j),{},{[e.target.name]:e.target.value})),"password"!==e.target.name||m||A((e=>{let t=0,a="";return e?(e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[@$!%*#?&^_\-+=]/.test(e)&&t++,a=t<=2?"Weak":t<=4?"Fair":t<=5?"Good":"Strong",{score:t,message:a}):{score:0,message:""}})(e.target.value)),S(""),E("")},Z=()=>{k({name:"",email:"",password:"",password_confirmation:""}),S(""),E(""),P(!1),I(!1),L(""),z(""),F(""),W(""),V([]),G(!1),v(!1),f(!1),A({score:0,message:""}),g(!1)};return s.useEffect((()=>{M&&D&&!U&&(async()=>{try{N(!0),S("");const e=await l(D);e.success?(z(e.data.qr_code_image),F(e.data.secret),E("Scan the QR code with your authenticator app")):S(e.message||"Failed to setup 2FA")}catch(e){console.error("2FA Setup error:",e),S(e.message||"Failed to setup 2FA")}finally{N(!1)}})()}),[M,D,U]),t?(0,u.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,u.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:a}),(0,u.jsxs)("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-md animate-scale-in",children:[(0,u.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"logo-professional text-2xl font-bold",children:"MRVL"}),(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:M?"2FA Setup Required":R?"2FA Verification":q?"Save Recovery Codes":h?"Reset Password":m?"Welcome Back":"Join MRVL"})]}),(0,u.jsx)("button",{onClick:a,className:"p-2 rounded-xl text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-300",children:"\u2715"})]}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:M?"Scan the QR code with your authenticator app":R?"Enter the 6-digit code from your authenticator app":q?"Save these recovery codes in a safe place - they can only be used once":h?"Enter your email address to receive a password reset link":m?"Sign in to access your dashboard and join discussions":"Create your account to join the Marvel Rivals community"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),N(!0),S(""),E(""),(()=>{if(!m){if(!j.name.trim())return S("Name is required"),!1;if(j.name.trim().length<2)return S("Name must be at least 2 characters"),!1}if(!j.email.trim())return S("Email is required"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email))return S("Please enter a valid email address"),!1;if(!j.password)return S("Password is required"),!1;if(j.password.length<8)return S("Password must be at least 8 characters"),!1;if(!m){if(!/[A-Z]/.test(j.password))return S("Password must contain at least one uppercase letter"),!1;if(!/[a-z]/.test(j.password))return S("Password must contain at least one lowercase letter"),!1;if(!/[0-9]/.test(j.password))return S("Password must contain at least one number"),!1;if(!/[@$!%*#?&^_\-+=]/.test(j.password))return S("Password must contain at least one special character (@$!%*#?&^-_+=)"),!1;if(!j.password_confirmation)return S("Please confirm your password"),!1;if(j.password!==j.password_confirmation)return S("Passwords do not match"),!1}return!0})())try{let e;if(m){if(console.log("\ud83d\udd11 Attempting login..."),e=await r(j.email,j.password),e.requires_2fa_setup)return L(e.temp_token),P(!0),S(""),void N(!1);if(e.requires_2fa_verification)return L(e.temp_token),I(!0),S(""),void N(!1)}else console.log("\ud83d\udcdd Attempting registration..."),e=await n({name:j.name.trim(),email:j.email.trim(),password:j.password,password_confirmation:j.password_confirmation});e.success?(E(m?"Login successful!":"Account created successfully!"),setTimeout((()=>{a(),Z()}),1500)):S(e.error||e.message||"Authentication failed")}catch(t){console.error("Authentication error:",t),S(t.message||"An unexpected error occurred. Please try again.")}finally{N(!1)}else N(!1)},className:"px-6 py-6 space-y-6",children:[C&&(0,u.jsx)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"\u2705"}),(0,u.jsx)("span",{className:"text-sm text-green-700 dark:text-green-300",children:C})]})}),_&&(0,u.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"\u26a0\ufe0f"}),(0,u.jsx)("span",{className:"text-sm text-red-700 dark:text-red-300",children:_})]})}),M&&(0,u.jsxs)("div",{className:"space-y-4",children:[U&&(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"bg-white p-4 rounded-xl inline-block mb-4",children:(0,u.jsx)("img",{src:U,alt:"2FA QR Code",className:"max-w-full h-auto mx-auto",style:{maxWidth:"200px",maxHeight:"200px"}})}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Can't scan? Manual entry key: ",(0,u.jsx)("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs",children:O})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Enter 6-digit code from your authenticator app *"}),(0,u.jsx)("input",{type:"text",value:B,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);W(t)},placeholder:"000000",maxLength:"6",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 text-center text-2xl tracking-widest",disabled:w})]}),(0,u.jsx)("button",{type:"button",onClick:async()=>{if(B&&6===B.length)try{N(!0),S("");const e=await i(D,B);e.success?(e.recovery_codes&&(V(e.recovery_codes),G(!0)),E("2FA enabled successfully! Login complete."),setTimeout((()=>{a(),Z()}),2e3)):(S(e.message||"Invalid code. Please try again."),W(""))}catch(e){console.error("2FA Enable error:",e),S(e.message||"Invalid code. Please try again."),W("")}finally{N(!1)}else S("Please enter a 6-digit code from your authenticator app")},disabled:w||6!==B.length,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 disabled:cursor-not-allowed",children:w?"Verifying...":"Enable 2FA & Login"})]}),R&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Enter 6-digit code or recovery code *"}),(0,u.jsx)("input",{type:"text",value:B,onChange:e=>W(e.target.value),placeholder:"000000 or recovery code",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 text-center",disabled:w})]}),(0,u.jsx)("button",{type:"button",onClick:async()=>{if(B)try{N(!0),S("");(await o(D,B)).success?(E("Login successful!"),setTimeout((()=>{a(),Z()}),1500)):(S("Invalid code. Please try again."),W(""))}catch(e){console.error("2FA Verification error:",e),S("Invalid code. Please try again."),W("")}finally{N(!1)}else S("Please enter your 2FA code or recovery code")},disabled:w||!B,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 disabled:cursor-not-allowed",children:w?"Verifying...":"Verify & Login"})]}),q&&(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,u.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"\u26a0\ufe0f"}),(0,u.jsx)("span",{className:"text-sm font-semibold text-yellow-700 dark:text-yellow-300",children:"Important: Save These Recovery Codes"})]}),(0,u.jsx)("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mb-3",children:"These codes can be used to access your account if you lose your phone. Each code can only be used once."}),(0,u.jsx)("div",{className:"grid grid-cols-2 gap-2",children:H.map(((e,t)=>(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 p-2 rounded border text-center font-mono text-sm",children:e},t)))})]}),(0,u.jsx)("button",{type:"button",onClick:()=>{G(!1),a(),Z()},className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300",children:"I've Saved My Recovery Codes"})]}),!M&&!R&&!q&&(0,u.jsxs)(u.Fragment,{children:[!m&&!h&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Display Name *"}),(0,u.jsx)("input",{type:"text",name:"name",value:j.name,onChange:Y,required:!m&&!h,disabled:w,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter your display name"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Email Address *"}),(0,u.jsx)("input",{type:"email",name:"email",value:j.email,onChange:Y,required:!0,disabled:w,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter your email"})]}),!h&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Password *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:p?"text":"password",name:"password",value:j.password,onChange:Y,required:!0,disabled:w,autoComplete:m?"current-password":"new-password",className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:m?"Enter your password":"Min 8 chars, uppercase, lowercase, number, special char"}),(0,u.jsx)("button",{type:"button",onClick:()=>v(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:p?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,u.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),!m&&(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsxs)("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password Requirements:"}),(0,u.jsxs)("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[(0,u.jsxs)("li",{className:"flex items-center space-x-2 ".concat(j.password.length>=8?"text-green-600 dark:text-green-400":""),children:[(0,u.jsx)("span",{children:j.password.length>=8?"\u2713":"\u2022"}),(0,u.jsx)("span",{children:"At least 8 characters"})]}),(0,u.jsxs)("li",{className:"flex items-center space-x-2 ".concat(/[A-Z]/.test(j.password)?"text-green-600 dark:text-green-400":""),children:[(0,u.jsx)("span",{children:/[A-Z]/.test(j.password)?"\u2713":"\u2022"}),(0,u.jsx)("span",{children:"One uppercase letter (A-Z)"})]}),(0,u.jsxs)("li",{className:"flex items-center space-x-2 ".concat(/[a-z]/.test(j.password)?"text-green-600 dark:text-green-400":""),children:[(0,u.jsx)("span",{children:/[a-z]/.test(j.password)?"\u2713":"\u2022"}),(0,u.jsx)("span",{children:"One lowercase letter (a-z)"})]}),(0,u.jsxs)("li",{className:"flex items-center space-x-2 ".concat(/[0-9]/.test(j.password)?"text-green-600 dark:text-green-400":""),children:[(0,u.jsx)("span",{children:/[0-9]/.test(j.password)?"\u2713":"\u2022"}),(0,u.jsx)("span",{children:"One number (0-9)"})]}),(0,u.jsxs)("li",{className:"flex items-center space-x-2 ".concat(/[@$!%*#?&^_\-+=]/.test(j.password)?"text-green-600 dark:text-green-400":""),children:[(0,u.jsx)("span",{children:/[@$!%*#?&^_\-+=]/.test(j.password)?"\u2713":"\u2022"}),(0,u.jsx)("span",{children:"One special character (@$!%*#?&^-_+=)"})]})]})]}),j.password&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Password Strength:"}),(0,u.jsx)("span",{className:"text-xs font-semibold ".concat(T.score<=2?"text-red-500":T.score<=4?"text-yellow-500":T.score<=5?"text-blue-500":"text-green-500"),children:T.message})]}),(0,u.jsx)("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,u.jsx)("div",{className:"h-full transition-all duration-300 ".concat(T.score<=2?"bg-red-500":T.score<=4?"bg-yellow-500":T.score<=5?"bg-blue-500":"bg-green-500"),style:{width:"".concat(T.score/6*100,"%")}})})]})]})]}),!m&&!h&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Confirm Password *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:y?"text":"password",name:"password_confirmation",value:j.password_confirmation,onChange:Y,required:!m&&!h,disabled:w,autoComplete:"new-password",className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Confirm your password"}),(0,u.jsx)("button",{type:"button",onClick:()=>f(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:y?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,u.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]})]}),!M&&!R&&!q&&(0,u.jsx)("button",{type:h?"button":"submit",onClick:h?async()=>{if(j.email){N(!0),S(""),E("");try{const e=await d.post("/auth/forgot-password",{email:j.email});e.success?(E("Password reset link sent to your email address"),g(!1)):S(e.message||"Failed to send reset link")}catch(a){var e,t;console.error("Forgot password error:",a);const r=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to send reset link. Please try again.";S(r)}finally{N(!1)}}else S("Please enter your email address")}:void 0,disabled:w,className:"w-full px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl shadow-lg shadow-red-500/30 transition-all duration-300 hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:w?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,u.jsx)("span",{children:"Processing..."})]}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:h?"Send Reset Link":m?"Sign In":"Create Account"})})})]}),!M&&!R&&!q&&(0,u.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 rounded-b-2xl",children:[h?(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remember your password?"}),(0,u.jsx)("button",{type:"button",onClick:()=>g(!1),disabled:w,className:"ml-2 text-sm font-semibold text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Sign in instead"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:m?"Don't have an account?":"Already have an account?"}),(0,u.jsx)("button",{type:"button",onClick:()=>{x(!m),Z()},disabled:w,className:"ml-2 text-sm font-semibold text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Sign up here":"Sign in instead"})]}),m&&(0,u.jsx)("div",{className:"text-center mt-3",children:(0,u.jsx)("button",{type:"button",onClick:()=>g(!0),disabled:w,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Forgot your password?"})})]}),(0,u.jsx)("div",{className:"mt-4 text-center",children:(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})]})]}):null},Ee=se("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);class Te extends s.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState((a=>({error:e,errorInfo:t,errorCount:a.errorCount+1}))),window.gtag&&window.gtag("event","exception",{description:e.toString(),fatal:!1,error_component:this.props.component||"Unknown"})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,u.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6 max-w-md w-full",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,u.jsx)(Ee,{className:"w-8 h-8 text-red-500"}),(0,u.jsx)("h2",{className:"text-xl font-bold text-white",children:"Something went wrong"})]}),(0,u.jsx)("p",{className:"text-gray-300 mb-6",children:this.props.message||"An unexpected error occurred. Please try refreshing the page or contact support if the problem persists."}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsxs)("button",{onClick:this.handleReset,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[(0,u.jsx)(je,{className:"w-4 h-4"}),"Try Again"]}),(0,u.jsx)("button",{onClick:this.handleReload,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Reload Page"})]}),!1]})}):this.props.children}}const Ae=Te;const Me=function(e){let{navigateTo:t}=e;const a=(new Date).getFullYear();return(0,u.jsx)("footer",{className:"bg-white/10 dark:bg-gray-800/50 border-t border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm mt-16",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,u.jsxs)("div",{className:"md:col-span-1",children:[(0,u.jsx)("div",{className:"flex items-center mb-6",children:(0,u.jsx)("div",{className:"logo-professional text-3xl font-bold mr-3",children:"MRVL"})}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed max-w-md",children:["\xa9 ",a," MRVL Esports Platform. All rights reserved."]}),(0,u.jsx)("p",{className:"text-red-500 dark:text-red-400 text-sm font-medium",children:"Built for the Marvel Rivals community"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-gray-900 dark:text-white font-semibold text-lg mb-4",children:"Legal"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("button",{onClick:()=>t("privacy"),className:"block text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors duration-300 text-sm",children:"Privacy Policy"}),(0,u.jsx)("button",{onClick:()=>t("terms"),className:"block text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors duration-300 text-sm",children:"Terms of Service"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-gray-900 dark:text-white font-semibold text-lg mb-4",children:"Follow Us"}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("a",{href:"https://x.com/MRVLnet",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 hover:bg-red-500 dark:hover:bg-red-600 rounded-xl flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-300 hover:scale-110","aria-label":"Twitter",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,u.jsx)("a",{href:"https://discord.gg/UnPrkTfHfp",target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 hover:bg-indigo-500 dark:hover:bg-indigo-600 rounded-xl flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-white transition-all duration-300 hover:scale-110","aria-label":"Discord",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})})})]})]})]})})})};const Pe=function(e){let{currentPage:t,pageParams:a,navigateTo:r}=e;const n={home:{title:"Home",icon:"",parent:null},forums:{title:"Forums",icon:"",parent:"home"},matches:{title:"Matches",icon:"",parent:"home"},events:{title:"Events",icon:"",parent:"home"},rankings:{title:"Rankings",icon:"",parent:"home"},teams:{title:"Teams",icon:"",parent:"home"},players:{title:"Players",icon:"",parent:"home"},news:{title:"News",icon:"",parent:"home"},stats:{title:"Statistics",icon:"",parent:"home"},search:{title:"Search Results",icon:"",parent:"home"},"match-detail":{title:"Match Details",icon:"",parent:"matches"},"event-detail":{title:"Event Details",icon:"",parent:"events"},"team-detail":{title:"Team Details",icon:"",parent:"teams"},"player-detail":{title:"Player Details",icon:"",parent:"players"},"news-detail":{title:"News Article",icon:"",parent:"news"},"thread-detail":{title:"Thread",icon:"",parent:"forums"},"create-thread":{title:"Create Thread",icon:"",parent:"forums"},"user-profile":{title:"User Profile",icon:"",parent:"home"},"user-dashboard":{title:"Dashboard",icon:"",parent:"home"},"admin-dashboard":{title:"Admin Dashboard",icon:"",parent:"home"},"admin-team-create":{title:"Create Team",icon:"",parent:"admin-dashboard"},"admin-team-edit":{title:"Edit Team",icon:"",parent:"admin-dashboard"},"admin-player-create":{title:"Create Player",icon:"",parent:"admin-dashboard"},"admin-player-edit":{title:"Edit Player",icon:"",parent:"admin-dashboard"},"admin-user-create":{title:"Create User",icon:"",parent:"admin-dashboard"},"admin-user-edit":{title:"Edit User",icon:"",parent:"admin-dashboard"},"admin-news":{title:"News Management",icon:"",parent:"admin-dashboard"},"admin-news-create":{title:"Create News",icon:"",parent:"admin-news"},"admin-news-edit":{title:"Edit News",icon:"",parent:"admin-news"},"admin-events":{title:"Events Management",icon:"",parent:"admin-dashboard"},"admin-event-create":{title:"Create Event",icon:"",parent:"admin-events"},"admin-event-edit":{title:"Edit Event",icon:"",parent:"admin-events"},"admin-match-create":{title:"Create Match",icon:"",parent:"admin-dashboard"},"admin-match-edit":{title:"Edit Match",icon:"",parent:"admin-dashboard"},"admin-live-scoring":{title:"Live Scoring",icon:"",parent:"admin-dashboard"},"admin-forums":{title:"Forums Management",icon:"",parent:"admin-dashboard"},contact:{title:"Contact",icon:"",parent:"home"},privacy:{title:"Privacy Policy",icon:"",parent:"home"},terms:{title:"Terms of Service",icon:"",parent:"home"},careers:{title:"Careers",icon:"",parent:"home"},test:{title:"Test Page",icon:"",parent:"home"}},l=(()=>{const e=[];let a=t;for(;a&&n[a];){const r=n[a];e.unshift({key:a,title:r.title,icon:r.icon,isActive:a===t}),a=r.parent}return e})();return"home"===t||l.length<=1?null:(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 py-2",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsx)("nav",{className:"flex items-center space-x-2 text-sm",children:l.map(((e,a)=>(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)("div",{className:"flex items-center",children:e.isActive?(0,u.jsxs)("span",{className:"flex items-center space-x-1 text-gray-900 dark:text-white font-medium",children:[e.icon&&(0,u.jsx)("span",{className:"text-xs",children:e.icon}),(0,u.jsx)("span",{children:e.title})]}):(0,u.jsxs)("button",{onClick:()=>{var a;(a=e.key)!==t&&r&&r(a)},className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:[e.icon&&(0,u.jsx)("span",{className:"text-xs",children:e.icon}),(0,u.jsx)("span",{children:e.title})]})}),a<l.length-1&&(0,u.jsx)("span",{className:"text-gray-400 dark:text-gray-600 select-none",children:"\u203a"})]},e.key)))})})})},Re=e=>{if(!e)return!1;const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())},Ie=e=>{if(!e||"unknown"===e||"null"===e||null===e||void 0===e)return"Recently";if("string"===typeof e&&""===e.trim())return"Recently";if(!Re(e))return console.warn("formatTimeAgo: Invalid date format:",e),"Recently";try{const t=new Date(e),a=new Date,r=a.getTime()-t.getTime(),s=Math.floor(r/6e4),n=Math.floor(r/36e5),l=Math.floor(r/864e5);if(r<0){const e=Math.abs(s),a=Math.abs(n),r=Math.abs(l);return e<60?"in ".concat(e,"m"):a<24?"in ".concat(a,"h"):r<7?"in ".concat(r,"d"):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}return s<1?"now":s<60?"".concat(s,"m ago"):n<24?"".concat(n,"h ago"):l<7?"".concat(l,"d ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==a.getFullYear()?"numeric":void 0})}catch(t){return console.warn("formatTimeAgo: Date parsing error:",t,"for date:",e),"Recently"}};const De=function(e){let{navigateTo:t}=e;const{api:a}=b(),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)([]),[o,d]=(0,s.useState)([]),[c,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(1),[N,_]=(0,s.useState)(1),[S,C]=(0,s.useState)("live"),T=(0,s.useCallback)((async()=>{if(!v&&!f)try{y(!0),console.log("HomePage: Fetching REAL LIVE DATA from backend...");const[v,b,f,k]=await Promise.allSettled([a.get("/matches"),a.get("/events"),a.get("/forums/threads?limit=5"),a.get("/news")]);let w=[];if("fulfilled"===v.status){var e,t,r;const a=(null===(e=v.value)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||(null===(r=v.value)||void 0===r?void 0:r.data)||[];Array.isArray(a)&&a.length>0&&(w=a.map((e=>{var t,a;return{id:e.id,team1:e.team1,team2:e.team2,event:{name:e.event_name||(null===(t=e.event)||void 0===t?void 0:t.name)||"Marvel Rivals Championship 2025",tier:(null===(a=e.event)||void 0===a?void 0:a.tier)||"S"},status:"ongoing"===e.status?"live":e.status||"upcoming",format:e.format||"BO3",time:e.scheduled_at?new Date(e.scheduled_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"live"===e.status?"LIVE":"TBD",team1_score:e.team1_score||0,team2_score:e.team2_score||0,score:"completed"===e.status||"live"===e.status?"".concat(e.team1_score||0,"-").concat(e.team2_score||0):"0-0",viewers:e.viewers||0}})),console.log("HomePage: Using REAL backend matches:",w.length))}let N=[];if("fulfilled"===b.status){var s,l,o;const e=(null===(s=b.value)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.data)||(null===(o=b.value)||void 0===o?void 0:o.data)||[];Array.isArray(e)&&e.length>0&&(N=e.map((e=>{var t,a,r,s,n,l;let i=(null===(t=e.details)||void 0===t?void 0:t.prize_pool)||e.prize_pool;if(i&&"string"===typeof i&&i.startsWith("$"));else if(i){const e=parseFloat(i);isNaN(e)||(i="$"+e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}const o=(null===(a=e.details)||void 0===a?void 0:a.format)||e.format,d=o?o.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())):"Tournament",c=(null===(r=e.schedule)||void 0===r?void 0:r.start_date)||e.start_date,m=(null===(s=e.schedule)||void 0===s?void 0:s.end_date)||e.end_date,u=(null===(n=e.details)||void 0===n?void 0:n.region)||e.region||"International",x=(null===(l=e.participation)||void 0===l?void 0:l.max_teams)||e.teams_count||16;return{id:e.id,name:e.name,status:"ongoing"===e.status?"live":e.status,stage:e.stage||d,prizePool:i||"$100,000",teams:x,region:u,format:d,start_date:c,end_date:m,banner:e.banner,logo:e.logo,featured_image:e.featured_image,banner_image:e.banner_image,featured:e.featured}})),console.log("HomePage: Using REAL backend events:",N.length))}let _=[];if("fulfilled"===f.status){var c,u,x;const e=(null===(c=f.value)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.data)||(null===(x=f.value)||void 0===x?void 0:x.data)||[];Array.isArray(e)&&e.length>0&&(_=e.slice(0,5).map((e=>{var t,a,r,s,n,l,i;return{id:e.id,title:e.title,author:(null===(t=e.author)||void 0===t?void 0:t.username)||(null===(a=e.author)||void 0===a?void 0:a.name)||e.user_name||"MRVL User",replies:(null===(r=e.stats)||void 0===r?void 0:r.replies)||e.replies||e.replies_count||0,lastActivity:(null===(s=e.meta)||void 0===s?void 0:s.last_reply_at_relative)||(null===(n=e.meta)||void 0===n?void 0:n.created_at_relative)||(e.updated_at?Ie(e.updated_at):"Recently"),category:(i=(null===(l=e.category)||void 0===l?void 0:l.name)||e.category||e.category_slug,{general:"General",tournaments:"Tournaments","hero-discussion":"Heroes",strategy:"Strategy",esports:"Esports",guides:"Guides","patch-notes":"Updates",bugs:"Bugs",feedback:"Feedback","team-recruitment":"Recruitment","meta-discussion":"Meta"}[i]||"")}})))}let S=[];if("fulfilled"===k.status){var h,g,p;const e=(null===(h=k.value)||void 0===h||null===(g=h.data)||void 0===g?void 0:g.data)||(null===(p=k.value)||void 0===p?void 0:p.data)||[];if(Array.isArray(e)&&e.length>0){const t=e.filter((e=>{var t,a;return!0===e.featured||!0===(null===(t=e.meta)||void 0===t?void 0:t.featured)||!0===e.is_featured||1===e.featured||1===(null===(a=e.meta)||void 0===a?void 0:a.featured)}));S=t.slice(0,3),console.log("HomePage: Showing featured news only:",S.length,"articles"),0===t.length&&console.log("HomePage: No featured articles found. Homepage news section will be empty.")}}n(w),i(N),d(_),m(S),j(!0),console.log("HomePage: All data loaded with REAL backend data ONLY"),console.log("HomePage: Events loaded:",N.length),console.log("HomePage: Live events found:",N.filter((e=>"live"===e.status)).length)}catch(b){console.error("HomePage: Critical error in fetchData:",b),n([]),i([]),m([]),d([])}finally{y(!1)}}),[a,v,f]);(0,s.useEffect)((()=>{f||T()}),[T,f]);const A=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log("HomePage: Navigation clicked - ".concat(e),a),!t||"function"!==typeof t)return console.error("HomePage: navigateTo function not available"),void alert("Navigation error: Please refresh the page and try again.");try{t(e,a)}catch(r){console.error("HomePage: Navigation error:",r),alert("Navigation failed. Please try again.")}},R=e=>{if(!e||!e.id)return console.error("HomePage: Invalid match data:",e),void alert("Unable to view this match. Please try again.");console.log("HomePage: Clicking match with ID:",e.id),"upcoming"!==e.status?A("match-detail",{id:e.id}):alert("This match has not started yet. Check back later!")},I=(0,s.useMemo)((()=>r.filter((e=>"live"===e.status))),[r]),L=(0,s.useMemo)((()=>r.filter((e=>"upcoming"===e.status))),[r]),U=(0,s.useMemo)((()=>r.filter((e=>"completed"===e.status))),[r]),z=((0,s.useMemo)((()=>l.filter((e=>"live"===e.status||"ongoing"===e.status))),[l]),(0,s.useMemo)((()=>{switch(S){case"live":default:return l.filter((e=>"live"===e.status||"ongoing"===e.status));case"upcoming":return l.filter((e=>"upcoming"===e.status||"scheduled"===e.status));case"completed":return l.filter((e=>"completed"===e.status))}}),[l,S])),O=(0,s.useMemo)((()=>l.filter((e=>!0===e.featured||"live"===e.status||"ongoing"===e.status))),[l]);O.length,console.log("HomePage: All events:",l.length),console.log("HomePage: Featured events found:",O.length,O.map((e=>({name:e.name,featured:e.featured,status:e.status}))));let F=null;O.length>0&&(F=O[0],console.log("HomePage: Showing featured/live event banner:",F.name));const B=F?M(F):null,[W,H]=(0,s.useState)(null);return B!==W&&(h(!1),p(!1),H(B)),(0,u.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4",children:[(0,u.jsx)("div",{className:"xl:col-span-3",children:(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",onClick:()=>A("forums"),children:(0,u.jsx)("h2",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase tracking-wide",children:"Recent Discussion"})}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:o.length>0?o.map((e=>(0,u.jsx)("div",{className:"recent-discussion-item cursor-pointer",onClick:()=>(e=>{if(!e||!e.id)return console.error("HomePage: Invalid discussion data:",e),void alert("Unable to view this discussion. Please try again.");console.log("HomePage: Clicking discussion with REAL ID:",e.id,"Title:",e.title),A("thread-detail",{id:e.id})})(e),children:(0,u.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,u.jsx)("div",{className:"text-xs font-medium text-gray-900 dark:text-white truncate",children:e.title}),(0,u.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("span",{children:e.author}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsxs)("span",{children:[e.replies," replies"]}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:e.lastActivity})]}),e.category&&(0,u.jsx)("div",{className:"mt-1",children:(0,u.jsx)("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded",children:e.category})})]})},e.id))):v?(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:(0,u.jsx)("div",{className:"animate-pulse",children:"Loading discussions..."})}):(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No discussions available"})})]})}),(0,u.jsxs)("div",{className:"xl:col-span-6 space-y-4",children:[(0,u.jsxs)("div",{className:"card",children:[(0,u.jsxs)("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600 flex justify-between items-center",children:[(0,u.jsx)("h2",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase tracking-wide cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors px-2 -mx-2 py-1 rounded",onClick:()=>A("events"),children:"Events"}),(0,u.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded border-0 focus:ring-2 focus:ring-red-500 outline-none cursor-pointer",onClick:e=>e.stopPropagation(),children:[(0,u.jsx)("option",{value:"live",children:"Live"}),(0,u.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,u.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:z.length>0?z.slice(0,5).map((e=>{const t=E(e);return(0,u.jsx)("div",{className:"px-3 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>(e=>{if(!e||!e.id)return console.error("HomePage: Invalid event data:",e),void alert("Unable to view this event. Please try again.");console.log("HomePage: Clicking event with REAL ID:",e.id,"Name:",e.name),A("event-detail",{id:e.id})})(e),children:(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded overflow-hidden bg-gray-100 dark:bg-gray-700",children:(0,u.jsx)("img",{src:t,alt:e.name,className:"w-full h-full object-cover",onError:t=>{t.target.style.display="none",t.target.parentElement.innerHTML='\n                                <div class="w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500 text-xs font-bold">\n                                  '.concat(e.name.substring(0,2).toUpperCase(),"\n                                </div>\n                              ")}})}),(0,u.jsx)("div",{className:"flex-1",children:(0,u.jsxs)("div",{className:"flex justify-between items-start",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.region," \u2022 ",e.format||e.stage," \u2022 ",e.teams," teams"]}),e.start_date&&e.end_date&&(0,u.jsxs)("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5",children:[new Date(e.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",new Date(e.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:e.prizePool}),("live"===e.status||"ongoing"===e.status)&&(0,u.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400 font-bold animate-pulse mt-1",children:"LIVE"})]})]})})]})},e.id)})):v?(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:(0,u.jsx)("div",{className:"animate-pulse",children:"Loading events..."})}):(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No events available"})})]}),(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",onClick:()=>A("news"),children:(0,u.jsx)("h2",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase tracking-wide",children:"Featured News"})}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:c.length>0?c.map((e=>{var t,a,r;const s=P(e);return console.log("\ud83d\uddbc\ufe0f HomePage - Article image URL:",s),(0,u.jsx)("div",{className:"px-3 py-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>(e=>{if(!e||!e.id)return console.error("HomePage: Invalid news article data:",e),void alert("Unable to view this article. Please try again.");console.log("HomePage: Clicking news article with REAL ID:",e.id,"Title:",e.title),A("news-detail",{id:e.id})})(e),children:(0,u.jsxs)("div",{className:"flex gap-3",children:[s&&(0,u.jsx)("div",{className:"flex-shrink-0 w-24 h-16 overflow-hidden rounded",children:(0,u.jsx)("img",{src:s,alt:e.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",loading:"lazy",onError:e=>{console.error("\ud83d\uddbc\ufe0f HomePage - Failed to load image:",s),e.target.style.display="none"}})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white line-clamp-1",children:e.title}),(0,u.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:e.excerpt||e.description}),(0,u.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("span",{children:(null===(t=e.author)||void 0===t?void 0:t.name)||"MRVL Staff"}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:null!==(a=e.meta)&&void 0!==a&&a.published_at||e.published_at?Ie((null===(r=e.meta)||void 0===r?void 0:r.published_at)||e.published_at):"Recently"})]})]})]})},e.id)})):v?(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:(0,u.jsx)("div",{className:"animate-pulse",children:"Loading news..."})}):(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No news available"})})]})]}),(0,u.jsxs)("div",{className:"xl:col-span-3 space-y-4",children:[(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600 cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",onClick:()=>A("matches"),children:(0,u.jsx)("h2",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase tracking-wide",children:"Upcoming Matches"})}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:(()=>{const e=5*(k-1),t=e+5,a=L.slice(e,t),r=Math.ceil(L.length/5);return(0,u.jsxs)(u.Fragment,{children:[a.length>0?a.map((e=>{var t,a;return(0,u.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>R(e),children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(D,{team:e.team1,className:"w-6 h-6"}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null===(t=e.team1)||void 0===t?void 0:t.name)||"TBD"})]}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"vs"}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(D,{team:e.team2,className:"w-6 h-6"}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null===(a=e.team2)||void 0===a?void 0:a.name)||"TBD"})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.time}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.format})]})]}),(0,u.jsx)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.event.name})]},e.id)})):v?(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:(0,u.jsx)("div",{className:"animate-pulse",children:"Loading matches..."})}):(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No upcoming matches"}),r>1&&(0,u.jsxs)("div",{className:"px-3 py-2 flex justify-between items-center border-t border-gray-200 dark:border-gray-600",children:[(0,u.jsx)("button",{onClick:e=>{e.stopPropagation(),w((e=>Math.max(1,e-1)))},disabled:1===k,className:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-gray-600",children:"Previous"}),(0,u.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Page ",k," of ",r]}),(0,u.jsx)("button",{onClick:e=>{e.stopPropagation(),w((e=>Math.min(r,e+1)))},disabled:k===r,className:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-gray-600",children:"Next"})]})]})})()})]}),I.length>0&&(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:(0,u.jsx)("h2",{className:"text-xs font-semibold text-red-600 dark:text-red-400 uppercase tracking-wide",children:"Live Matches"})}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:I.map((e=>{var t,a;return(0,u.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>R(e),children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(D,{team:e.team1,className:"w-6 h-6"}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null===(t=e.team1)||void 0===t?void 0:t.name)||"TBD"})]}),(0,u.jsx)("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:e.score}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(D,{team:e.team2,className:"w-6 h-6"}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null===(a=e.team2)||void 0===a?void 0:a.name)||"TBD"})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400 font-bold animate-pulse",children:"LIVE"}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.format})]})]}),(0,u.jsx)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.event.name})]},e.id)}))})]}),(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:(0,u.jsx)("h2",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Recent Results"})}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:(()=>{const e=5*(N-1),t=e+5,a=U.slice(e,t),r=Math.ceil(U.length/5);return(0,u.jsxs)(u.Fragment,{children:[a.length>0?a.map((e=>{var t,a;return(0,u.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>R(e),children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(D,{team:e.team1,className:"w-6 h-6"}),(0,u.jsx)("span",{className:"text-sm font-medium ".concat(e.team1_score>e.team2_score?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"),children:(null===(t=e.team1)||void 0===t?void 0:t.name)||"TBD"})]}),(0,u.jsx)("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:e.score}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(D,{team:e.team2,className:"w-6 h-6"}),(0,u.jsx)("span",{className:"text-sm font-medium ".concat(e.team2_score>e.team1_score?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"),children:(null===(a=e.team2)||void 0===a?void 0:a.name)||"TBD"})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed"}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.format})]})]}),(0,u.jsx)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.event.name})]},e.id)})):v?(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:(0,u.jsx)("div",{className:"animate-pulse",children:"Loading results..."})}):(0,u.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No recent results"}),r>1&&(0,u.jsxs)("div",{className:"px-3 py-2 flex justify-between items-center border-t border-gray-200 dark:border-gray-600",children:[(0,u.jsx)("button",{onClick:e=>{e.stopPropagation(),_((e=>Math.max(1,e-1)))},disabled:1===N,className:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-gray-600",children:"Previous"}),(0,u.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Page ",N," of ",r]}),(0,u.jsx)("button",{onClick:e=>{e.stopPropagation(),_((e=>Math.min(r,e+1)))},disabled:N===r,className:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-gray-600",children:"Next"})]})]})})()})]})]})]})})};const Le=function(e){var t,a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"organic";if(!e)return;const s={event_category:"News",event_label:e.title,article_id:e.id,article_title:e.title,article_category:(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized",author:(null===(a=e.author)||void 0===a?void 0:a.name)||"MRVL Team",view_source:r,reading_time_estimate:Be(e.content),article_age_days:We(e.published_at||e.created_at),user_agent:navigator.userAgent,viewport_width:window.innerWidth,viewport_height:window.innerHeight,timestamp:(new Date).toISOString()};var n,l;window.gtag&&(window.gtag("event","view_item",{item_category:"news_article",item_id:e.id,item_name:e.title,content_type:"news",custom_parameters:s}),window.gtag("event","page_view",{page_title:"".concat(e.title," | MRVL"),page_location:window.location.href,content_group1:"News",content_group2:(null===(n=e.category)||void 0===n?void 0:n.name)||"Uncategorized",custom_parameters:{article_id:e.id,author:(null===(l=e.author)||void 0===l?void 0:l.name)||"MRVL Team"}}));window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("News Article Viewed",s),qe("news_view",s)},Ue=function(e,t){var a,r;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return;const n=c({event_category:"News Engagement",event_label:"".concat(t," - ").concat(e.title),article_id:e.id,article_title:e.title,article_category:(null===(a=e.category)||void 0===a?void 0:a.name)||"Uncategorized",engagement_type:t,author:(null===(r=e.author)||void 0===r?void 0:r.name)||"MRVL Team",timestamp:(new Date).toISOString()},s);window.gtag&&window.gtag("event",t,{content_type:"news_article",item_id:e.id,custom_parameters:n}),window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("News Engagement",n),qe("news_engagement",n)},ze=(e,t,a)=>{if(!e)return;const r={article_id:e.id,article_title:e.title,scroll_percentage:Math.round(t),time_on_page_seconds:Math.round(a/1e3),estimated_reading_progress:He(t,a,e.content),device_type:Ve(),timestamp:(new Date).toISOString()};[25,50,75,90,100].includes(Math.round(t))&&(window.gtag&&window.gtag("event","scroll",{content_type:"news_article",item_id:e.id,scroll_percentage:Math.round(t),custom_parameters:r}),window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("Reading Progress",r)),Math.round(t)%10===0&&qe("reading_behavior",r)},Oe=(e,t,a)=>{const r={event_category:"News Search",search_term:e,filters_applied:t,result_count:a,timestamp:(new Date).toISOString()};window.gtag&&window.gtag("event","search",{search_term:e,content_type:"news",custom_parameters:r}),window.analytics&&"function"===typeof window.analytics.track&&window.analytics.track("News Search",r),qe("news_search",r)},Fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"news";window.performance&&window.addEventListener("load",(()=>{setTimeout((()=>{var t,a;const r=performance.getEntriesByType("navigation")[0],s=performance.getEntriesByType("paint"),n={page_name:e,dom_content_loaded:(null===r||void 0===r?void 0:r.domContentLoadedEventEnd)-(null===r||void 0===r?void 0:r.domContentLoadedEventStart),load_time:(null===r||void 0===r?void 0:r.loadEventEnd)-(null===r||void 0===r?void 0:r.loadEventStart),first_contentful_paint:null===(t=s.find((e=>"first-contentful-paint"===e.name)))||void 0===t?void 0:t.startTime,largest_contentful_paint:null,cumulative_layout_shift:null,first_input_delay:null,connection_type:(null===(a=navigator.connection)||void 0===a?void 0:a.effectiveType)||"unknown",device_memory:navigator.deviceMemory||"unknown",timestamp:(new Date).toISOString()};"PerformanceObserver"in window&&(new PerformanceObserver((e=>{const t=e.getEntries(),a=t[t.length-1];n.largest_contentful_paint=a.startTime,Ge(n)})).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver((e=>{let t=0;for(const a of e.getEntries())a.hadRecentInput||(t+=a.value);n.cumulative_layout_shift=t,Ge(n)})).observe({entryTypes:["layout-shift"]}),new PerformanceObserver((e=>{for(const t of e.getEntries())n.first_input_delay=t.processingStart-t.startTime,Ge(n)})).observe({entryTypes:["first-input"]})),Ge(n)}),0)}))},Be=e=>{if(!e)return 0;const t=e.split(/\s+/).length;return Math.ceil(t/200)},We=e=>{if(!e)return 0;const t=new Date,a=new Date(e),r=Math.abs(t-a);return Math.ceil(r/864e5)},He=(e,t,a)=>{if(!a)return 0;const r=60*Be(a)*1e3,s=Math.min(t/r*100,100),n=e;return Math.round(.6*n+.4*s)},Ve=()=>{const e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"},qe=async(e,t)=>{},Ge=e=>{window.gtag&&(e.largest_contentful_paint&&window.gtag("event","web_vital",{name:"LCP",value:Math.round(e.largest_contentful_paint),event_category:"Performance"}),null!==e.cumulative_layout_shift&&window.gtag("event","web_vital",{name:"CLS",value:Math.round(1e3*e.cumulative_layout_shift),event_category:"Performance"}),null!==e.first_input_delay&&window.gtag("event","web_vital",{name:"FID",value:Math.round(e.first_input_delay),event_category:"Performance"})),qe("performance_metrics",e)},Ye=()=>{let e;Fe("news");let t=0,a=Date.now();const r=()=>{clearTimeout(e);const r=window.pageYOffset||document.documentElement.scrollTop,s=window.innerHeight,n=document.documentElement.scrollHeight,l=Math.min((r+s)/n*100,100);t=Math.max(t,l),e=setTimeout((()=>{const e=Ze();e&&ze(e,t,Date.now()-a)}),100)};return window.addEventListener("scroll",r,{passive:!0}),document.addEventListener("visibilitychange",(()=>{if(document.hidden){const e=Ze();e&&ze(e,t,Date.now()-a)}else a=Date.now()})),()=>{window.removeEventListener("scroll",r)}},Ze=()=>{if(window.__CURRENT_ARTICLE__)return window.__CURRENT_ARTICLE__;const e=window.location.pathname.match(/\/news\/(\d+)/);return e?{id:e[1]}:null};const Ke=function(e){let{navigateTo:t}=e;const{isAdmin:a,isModerator:r,api:n,user:l}=b(),[i,o]=(0,s.useState)([]),[d,c]=(0,s.useState)([]),[m,x]=(0,s.useState)("all"),[h,g]=(0,s.useState)("latest"),p=(0,s.useCallback)((async()=>{try{var e,t;const[a,r]=await Promise.all([n.get("/news?category=".concat(m,"&sort=").concat(h)),n.get("/news/categories")]),s=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data||[],l=(null===(t=r.data)||void 0===t?void 0:t.data)||r.data||[];console.log("\u2705 News data loaded:",s.length,"articles"),console.log("\u2705 Categories loaded:",l.length,"categories"),o(s),c(l),"all"===m&&"latest"===h||Oe("",{category:m,sort:h},s.length)}catch(a){console.error("\u274c NewsPage: Backend API failed:",a.message),o([]),c([])}}),[n,m,h]);(0,s.useEffect)((()=>{p()}),[m,h,p]);const v=e=>{const t=new Date(e),a=new Date,r=Math.floor((a-t)/36e5);if(r<1)return"Just now";if(r<24)return"".concat(r,"h ago");if(r<48)return"Yesterday";const s=Math.floor(r/24);return s<7?"".concat(s,"d ago"):(e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))(e)},y=e=>h===e?(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"\u25bc"}):null;return(0,u.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"News"}),(a()||r())&&(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>t&&t("admin-news-categories"),className:"px-3 py-1.5 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:"Manage Categories"}),(0,u.jsx)("button",{onClick:()=>t&&t("admin-news-create"),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Create News"})]})]}),(0,u.jsx)("div",{className:"card p-3 mb-4",children:(0,u.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Category:"}),(0,u.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Categories"}),d.map((e=>(0,u.jsxs)("option",{value:e.slug,children:["string"===typeof e.icon?e.icon:"\ud83d\udcf0"," ","string"===typeof e.name?e.name:"Unknown Category"]},e.id)))]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),(0,u.jsxs)("button",{onClick:()=>g("latest"),className:"text-sm font-medium transition-colors ".concat("latest"===h?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400"),children:["Latest ",y("latest")]}),(0,u.jsxs)("button",{onClick:()=>g("popular"),className:"text-sm font-medium transition-colors ".concat("popular"===h?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400"),children:["Popular ",y("popular")]}),(0,u.jsxs)("button",{onClick:()=>g("trending"),className:"text-sm font-medium transition-colors ".concat("trending"===h?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400"),children:["Trending ",y("trending")]})]})]})}),i.length>0?(0,u.jsx)("div",{className:"space-y-2",children:i.map(((e,s)=>{var l,i,o,c,m;return(0,u.jsx)("div",{className:"card p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer border-l-4 border-transparent hover:border-red-600",onClick:()=>{t&&(Le(e,"listing"),t("news-detail",{id:String(e.id||"")}))},children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[e.category&&(0,u.jsxs)("span",{className:"px-2 py-1 text-xs font-bold rounded-full text-white",style:{backgroundColor:(null===(l=d.find((t=>t.slug===e.category_slug)))||void 0===l?void 0:l.color)||"#6b7280"},children:["string"===typeof(null===(i=d.find((t=>t.slug===e.category_slug)))||void 0===i?void 0:i.icon)?d.find((t=>t.slug===e.category_slug)).icon:"\ud83d\udcf0"," ",(null===(o=e.category)||void 0===o?void 0:o.name)||(null===(c=d.find((t=>t.slug===e.category_slug)))||void 0===c?void 0:c.name)||"News"]}),e.featured&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded-full bg-yellow-500 text-white",children:"FEATURED"}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:e.region||"INTL"})]}),(0,u.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:e.title}),e.excerpt&&(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:e.excerpt}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[(0,u.jsxs)("span",{children:["by ",(null===(m=e.author)||void 0===m?void 0:m.name)||"MRVL Team"]}),(0,u.jsx)("span",{children:v(e.published_at||e.created_at)}),(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[e.comments_count>0&&(0,u.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,u.jsx)("span",{children:"\ud83d\udcac"}),(0,u.jsx)("span",{children:e.comments_count})]}),(e.upvotes>0||e.downvotes>0)&&(0,u.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,u.jsxs)("span",{className:"text-green-600",children:["\u2191",e.upvotes]}),(0,u.jsxs)("span",{className:"text-red-600",children:["\u2193",e.downvotes]})]})]})]}),(a()||r())&&(0,u.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{try{const a="/moderator/news/".concat(e,t?"/feature":"/unfeature");await n.put(a),p()}catch(a){console.error("Error featuring/unfeaturing news:",a),alert("Failed to "+(t?"feature":"unfeature")+" news article")}})(e.id,!e.featured)},className:"px-2 py-1 text-xs rounded transition-colors ".concat(e.featured?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/30":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.featured?"\u2b50 Unfeature":"\u2b50 Feature"}),(0,u.jsx)("button",{onClick:a=>{a.stopPropagation(),t&&t("admin-news-edit",{id:String(e.id||"")})},className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:"\u270f\ufe0f Edit"}),(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this news article? This action cannot be undone."))try{await n.delete("/admin/news/".concat(e)),p()}catch(t){console.error("Error deleting news:",t),alert("Failed to delete news article")}})(e.id)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"\ud83d\uddd1\ufe0f Delete"})]})]}),(0,u.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,u.jsx)("img",{src:P(e),alt:e.title,className:"w-20 h-20 object-cover rounded bg-gray-100 dark:bg-gray-700",onError:e=>{e.target.onerror=null,e.target.src="https://staging.mrvl.net/images/news-placeholder.svg"}})})]})},e.id)}))}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcf0"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No News Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"all"!==m?"No news articles found in the selected category.":"No news articles available at the moment."}),(0,u.jsx)("button",{onClick:()=>x("all"),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"View All News"})]}),i.length>0&&(0,u.jsx)("div",{className:"mt-8 flex justify-center",children:(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Showing ",i.length," articles"]})})]})};const Je=function(e,t){if(!e)return null;const a={};(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).forEach((e=>{const t=e.mention_text||"@".concat(e.name);a[t]=e}));const r=[];if([{regex:/@player:([a-zA-Z0-9_]+)/g,type:"player",prefix:"@player:"},{regex:/@team:([a-zA-Z0-9_]+)/g,type:"team",prefix:"@team:"},{regex:/@([a-zA-Z0-9_]+)(?!:)/g,type:"user",prefix:"@"}].forEach((t=>{let s,{regex:n,type:l,prefix:i}=t;for(;null!==(s=n.exec(e));){const e=s[0],t=s[1],n=s.index,i=s.index+e.length,o=a[e];r.push({start:n,end:i,original:e,type:l,identifier:t,data:o})}})),r.sort(((e,t)=>t.start-e.start)),0===r.length)return e;const s=[];let n=e.length;return r.forEach((a=>{n>a.end&&s.unshift(e.slice(a.end,n)),a.data?s.unshift((0,u.jsx)("span",{className:"mention-link font-medium px-1 rounded cursor-pointer transition-colors ".concat("player"===a.type?"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20":"team"===a.type?"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20":"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20"),onClick:e=>{if(e.stopPropagation(),t&&a.data)switch(a.type){case"player":t("player-detail",{id:a.data.id});break;case"team":t("team-detail",{id:a.data.id});break;case"user":t("user-profile",{id:a.data.id});break;default:console.warn("Unknown mention type:",a.type)}},title:"View ".concat(a.type,": ").concat(a.data.display_name||a.data.name),children:a.original},"mention-".concat(a.start))):s.unshift(a.original),a.start>0&&s.unshift(e.slice(0,a.start)),n=a.start})),s.length>0?s:e},Qe=function(e){let{user:t,showAvatar:a=!0,showTeamFlair:r=!0,showHeroFlair:s=!0,size:n="sm",className:l="",clickable:i=!1,navigateTo:o=null}=e;if(!t)return(0,u.jsx)("span",{className:"text-gray-500",children:"Unknown User"});const d={xs:"w-4 h-4 text-xs",sm:"w-6 h-6 text-sm",md:"w-8 h-8 text-base",lg:"w-10 h-10 text-lg"};return(0,u.jsxs)("div",{className:"flex items-center space-x-2 ".concat(l),children:[a&&(0,u.jsx)(K,{user:t,size:n,showFlairs:!1,showName:!1}),(0,u.jsx)("span",{className:"font-medium ".concat(i?"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 cursor-pointer":"text-gray-900 dark:text-white"),onClick:()=>{i&&o&&t.id&&o("user-profile",{id:t.id})},children:t.name||t.username}),r&&t.team_flair&&t.show_team_flair&&(0,u.jsx)("div",{className:"".concat(d[n]," flex-shrink-0"),children:t.team_flair.logo?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("img",{src:S(t.team_flair.logo,"team-logo"),alt:t.team_flair.short_name||t.team_flair.name,className:"".concat(d[n]," object-contain rounded"),title:t.team_flair.name,onError:e=>{e.target.src=S(null,"team-logo")}}),(0,u.jsx)("div",{className:"".concat(d[n]," rounded bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-white font-bold text-xs hidden"),title:t.team_flair.name,children:t.team_flair.short_name||t.team_flair.name.substring(0,3).toUpperCase()})]}):(0,u.jsx)("div",{className:"".concat(d[n]," rounded bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-white font-bold text-xs"),title:t.team_flair.name,children:t.team_flair.short_name||t.team_flair.name.substring(0,3).toUpperCase()})}),t.roles&&t.roles.length>0&&(0,u.jsx)("div",{className:"flex space-x-1",children:t.roles.map((e=>(0,u.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-bold rounded ".concat("admin"===e?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300":"moderator"===e?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"),children:e.toUpperCase()},e)))})]})},Xe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top-right";document.querySelectorAll(".mrvl-toast").forEach((e=>{document.body.contains(e)&&document.body.removeChild(e)}));const s=document.createElement("div"),n={"top-right":"top-4 right-4","top-left":"top-4 left-4","top-center":"top-4 left-1/2 transform -translate-x-1/2","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","bottom-center":"bottom-4 left-1/2 transform -translate-x-1/2"},l={success:"bg-green-500 text-white border-green-600",error:"bg-red-500 text-white border-red-600",warning:"bg-yellow-500 text-white border-yellow-600",info:"bg-blue-500 text-white border-blue-600",achievement:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-orange-600"},i={success:"\u2705",error:"\u274c",warning:"\u26a0\ufe0f",info:"\u2139\ufe0f",achievement:"\ud83c\udfc6"},o=n[r]||n["top-right"],d=l[t]||l.info,c=i[t]||i.info;return s.className="mrvl-toast fixed ".concat(o," z-[9999] px-4 py-3 rounded-lg shadow-lg border-l-4 ").concat(d," font-medium max-w-sm transform transition-all duration-300 ease-in-out translate-x-full opacity-0"),s.innerHTML='\n    <div class="flex items-center space-x-2">\n      <span class="text-lg">'.concat(c,'</span>\n      <span class="flex-1">').concat(e,'</span>\n      <button class="ml-2 text-white/80 hover:text-white transition-colors" onclick="this.parentElement.parentElement.remove()">\n        \xd7\n      </button>\n    </div>\n  '),document.body.appendChild(s),requestAnimationFrame((()=>{s.classList.remove("translate-x-full","opacity-0"),s.classList.add("translate-x-0","opacity-100")})),setTimeout((()=>{document.body.contains(s)&&(s.classList.add("translate-x-full","opacity-0"),setTimeout((()=>{document.body.contains(s)&&document.body.removeChild(s)}),300))}),a),s},$e=function(e){return Xe(e,"success",arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3)},et=function(e){return Xe(e,"error",arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3)},tt=function(e){return Xe(e,"warning",arguments.length>1&&void 0!==arguments[1]?arguments[1]:3500)};const at=function(e){let{itemType:t,itemId:a,parentId:r=null,initialUpvotes:n=0,initialDownvotes:l=0,userVote:i=null,onVoteChange:o=null,size:d="sm",direction:c="horizontal"}=e;const{api:m,user:x,isAuthenticated:h}=b(),{triggerVote:g}=w(),[p,v]=(0,s.useState)(n),[y,f]=(0,s.useState)(l),[j,k]=(0,s.useState)(i),[N,_]=(0,s.useState)(!1),S={xs:"p-1 text-xs min-h-[36px] min-w-[36px]",sm:"p-1.5 text-sm min-h-[40px] min-w-[40px]",md:"p-2 text-base min-h-[44px] min-w-[44px]",lg:"p-3 text-lg min-h-[48px] min-w-[48px]"},C=async e=>{if(!h)return void et("Please log in to vote");if(N)return;if(a&&a.toString().startsWith("temp-"))return void tt("Please wait for the post to be created before voting");j===e&&console.log("User removing existing vote:",e),_(!0);const s=p,n=y,l=j;j===e?("upvote"===e?v((e=>Math.max(0,e-1))):f((e=>Math.max(0,e-1))),k(null)):j?("upvote"===e?(v((e=>e+1)),f((e=>Math.max(0,e-1)))):(f((e=>e+1)),v((e=>Math.max(0,e-1)))),k(e)):("upvote"===e?v((e=>e+1)):f((e=>e+1)),k(e));try{var i,d,c,u,x,b;const h={votable_type:t,votable_id:a,vote_type:e,parent_id:r||null};let N;if(console.log("Sending vote request:",h),"news"===t)N=await m.post("/news/".concat(a,"/vote"),{vote_type:e});else if("news_comment"===t)try{N=await m.post("/news/comments/".concat(a,"/vote"),{vote_type:e})}catch(U){console.log("News comment vote failed, using fallback:",U.message),N=await m.post("/user/votes/",h)}else N=await m.post("/user/votes/",h);console.log("\ud83d\udcc4 Raw Response:",N),console.log("\u2705 API Success:",N.data||N);const _=N&&(!0===N.success||!0===(null===(i=N.data)||void 0===i?void 0:i.success)||N.status>=200&&N.status<300&&!1!==(null===(d=N.data)||void 0===d?void 0:d.success)&&!1!==N.success);var w,S,C;if(console.log("Vote response validation:",{responseSuccess:null===(c=N)||void 0===c?void 0:c.success,dataSuccess:null===(u=N)||void 0===u||null===(x=u.data)||void 0===x?void 0:x.success,status:null===(b=N)||void 0===b?void 0:b.status,isSuccess:_}),!_)throw console.warn("Vote request returned success=false:",null===(w=N)||void 0===w?void 0:w.data),new Error((null===(S=N)||void 0===S||null===(C=S.data)||void 0===C?void 0:C.message)||"Vote request failed");{var E,T,A,M;const t=N.data||N,a=(null===t||void 0===t?void 0:t.vote_counts)||(null===t||void 0===t||null===(E=t.data)||void 0===E?void 0:E.vote_counts)||(null===t||void 0===t?void 0:t.updated_stats),r=void 0!==(null===t||void 0===t?void 0:t.user_vote)?null===t||void 0===t?void 0:t.user_vote:void 0!==(null===t||void 0===t||null===(T=t.data)||void 0===T?void 0:T.user_vote)?null===t||void 0===t||null===(A=t.data)||void 0===A?void 0:A.user_vote:null===t||void 0===t?void 0:t.vote_type,i=(null===t||void 0===t?void 0:t.action)||(null===t||void 0===t||null===(M=t.data)||void 0===M?void 0:M.action);console.log("Vote response:",{voteCounts:a,newUserVote:r,action:i}),a?(v(Math.max(0,a.upvotes||0)),f(Math.max(0,a.downvotes||0))):i&&("removed"===i?(k(null),"upvote"===l&&v(Math.max(0,s-1)),"downvote"===l&&f(Math.max(0,n-1))):"created"===i?(k(e),"upvote"===e&&v(s+1),"downvote"===e&&f(n+1)):"updated"===i&&(k(e),"upvote"===l&&"downvote"===e?(v(Math.max(0,s-1)),f(n+1)):"downvote"===l&&"upvote"===e&&(f(Math.max(0,n-1)),v(s+1)))),void 0!==r&&k(r);$e("removed"===i?"Vote removed":"updated"===i?"Vote updated":"Vote recorded",2e3),g(),o&&o({action:i||"created",vote_counts:a||{upvotes:p,downvotes:y},user_vote:j,score:p-y})}}catch(z){var P,R,I,D,L;console.error("Error voting:",z);let e="Failed to record vote";409===(null===(P=z.response)||void 0===P?void 0:P.status)?e="You have already voted. Please refresh the page.":401===(null===(R=z.response)||void 0===R?void 0:R.status)?e="Please log in again to vote":403===(null===(I=z.response)||void 0===I?void 0:I.status)?e="You do not have permission to vote on this item":null!==(D=z.response)&&void 0!==D&&null!==(L=D.data)&&void 0!==L&&L.message?e=z.response.data.message:z.message&&"Network Error"!==z.message&&(e=z.message),v(s),f(n),k(l),et(e,4e3)}finally{_(!1)}},E=()=>p-y,T=()=>{const e=E();return e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"};return"vertical"===c?(0,u.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,u.jsx)("button",{onClick:()=>C("upvote"),disabled:N,className:"".concat(S[d]," rounded transition-all duration-200 flex items-center justify-center touch-manipulation ").concat("upvote"===j?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 transform scale-110":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-green-600 dark:hover:text-green-400 active:scale-95"," ").concat(N?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(34, 197, 94, 0.1)"},children:"\ud83d\udc4d"}),(0,u.jsx)("span",{className:"text-xs font-medium ".concat(T()),children:E()}),(0,u.jsx)("button",{onClick:()=>C("downvote"),disabled:N,className:"".concat(S[d]," rounded transition-all duration-200 flex items-center justify-center touch-manipulation ").concat("downvote"===j?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 transform scale-110":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 active:scale-95"," ").concat(N?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(239, 68, 68, 0.1)"},children:"\ud83d\udc4e"})]}):(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsxs)("button",{onClick:()=>C("upvote"),disabled:N,className:"".concat(S[d]," rounded transition-all duration-200 flex items-center justify-center space-x-1 touch-manipulation ").concat("upvote"===j?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 transform scale-105":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-green-600 dark:hover:text-green-400 active:scale-95"," ").concat(N?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(34, 197, 94, 0.1)"},children:[(0,u.jsx)("span",{children:"\ud83d\udc4d"}),(0,u.jsx)("span",{className:"text-xs font-medium",children:p})]}),(0,u.jsxs)("button",{onClick:()=>C("downvote"),disabled:N,className:"".concat(S[d]," rounded transition-all duration-200 flex items-center justify-center space-x-1 touch-manipulation ").concat("downvote"===j?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 transform scale-105":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 active:scale-95"," ").concat(N?"opacity-50 cursor-not-allowed":""),style:{WebkitTapHighlightColor:"rgba(239, 68, 68, 0.1)"},children:[(0,u.jsx)("span",{children:"\ud83d\udc4e"}),(0,u.jsx)("span",{className:"text-xs font-medium",children:y})]})]})};const rt=function(e){let{value:t,onChange:a,placeholder:r="Write your message...",className:n="",rows:l=4,maxLength:i=1e4,disabled:o=!1}=e;const{api:d}=b(),[c,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)([]),[g,p]=(0,s.useState)(""),[v,y]=(0,s.useState)("user"),[f,j]=(0,s.useState)(0),[k,w]=(0,s.useState)(0),[N,_]=(0,s.useState)(!1),[S,C]=(0,s.useState)({top:0,left:0}),E=(0,s.useRef)(null),T=(0,s.useRef)(null);(0,s.useEffect)((()=>{const e=setTimeout((()=>{g.length>=1?A(g,v):(h([]),m(!1))}),300);return()=>clearTimeout(e)}),[g,v]);const A=async(e,t)=>{if(!("string"===typeof e?e:"").trim())return;_(!0);const a=new AbortController;try{let r=[];"user"===t?r=[d.get("/public/search/teams?q=".concat(encodeURIComponent(e),"&limit=8"),{signal:a.signal}).catch((()=>({data:[]}))),d.get("/public/search/players?q=".concat(encodeURIComponent(e),"&limit=8"),{signal:a.signal}).catch((()=>({data:[]})))]:"team"===t?r=[d.get("/public/search/teams?q=".concat(encodeURIComponent(e),"&limit=10"),{signal:a.signal})]:"player"===t&&(r=[d.get("/public/search/players?q=".concat(encodeURIComponent(e),"&limit=10"),{signal:a.signal})]);const s=await Promise.all(r);if(!a.signal.aborted){let e=[];s.forEach((t=>{const a=(null===t||void 0===t?void 0:t.data)||t||[];Array.isArray(a)&&(e=e.concat(a))})),e.sort(((e,t)=>{const a={team:0,player:1};return(a[e.type]||2)-(a[t.type]||2)})),e=e.slice(0,15),h(e),m(e.length>0),w(0)}}catch(r){"AbortError"===r.name||a.signal.aborted||(console.error("Error searching mentions:",r),h([]),m(!1))}finally{a.signal.aborted||_(!1)}},M=e=>{if(!e)return;const r=t||"",s=E.current?E.current.selectionStart:f+g.length+1,n=r.substring(0,f),l=r.substring(s);let i="";if("string"===typeof e.mention_text&&e.mention_text)i=e.mention_text;else{const t=P(e);i="@".concat(t)}"function"===typeof a&&a(n+i+" "+l);const o=f+i.length+1;setTimeout((()=>{E.current&&(E.current.focus(),E.current.setSelectionRange(o,o))}),0),m(!1),p("")},P=e=>{const t=e=>"string"===typeof e?e:"object"===typeof e&&null!==e?e.name&&"string"===typeof e.name?e.name:e.username&&"string"===typeof e.username?e.username:e.display_name&&"string"===typeof e.display_name?e.display_name:"":e?String(e):"",a=t(e.display_name);return a||("user"===e.type?t(e.name)||t(e.username)||"":"team"===e.type?t(e.name)||t(e.short_name)||"":"player"===e.type?t(e.real_name)||t(e.username)||t(e.name)||"":t(e.name)||t(e.username)||"Unknown")};(0,s.useEffect)((()=>{c&&C(R())}),[c]),(0,s.useEffect)((()=>{const e=e=>{T.current&&!T.current.contains(e.target)&&E.current&&!E.current.contains(e.target)&&m(!1)},t=()=>{c&&C(R())};return document.addEventListener("mousedown",e),window.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}),[c]);const R=()=>{if(!E.current)return{top:0,left:0,minWidth:300,maxWidth:400};try{const e=E.current.getBoundingClientRect(),t=window.innerHeight,a=window.innerWidth,r=a>=768&&a<1024;if(a<768){const e=260,a=t-e,r=Math.min(200,.4*a);return{position:"fixed",bottom:"".concat(e+10,"px"),left:"0.5rem",right:"0.5rem",maxHeight:"".concat(r,"px"),width:"auto",minWidth:"auto",maxWidth:"none",zIndex:9999,borderRadius:"12px",backdropFilter:"blur(10px)",background:"rgba(255, 255, 255, 0.95)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"}}if(r)return{position:"fixed",top:Math.min(e.bottom+8,t-280),left:Math.max(16,Math.min(e.left,a-320)),width:"300px",maxHeight:"240px",zIndex:9999,borderRadius:"8px",background:"white",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"};let s=e.bottom+4,n=e.left;s+240>t&&(s=e.top-244);const l=Math.max(e.width,300);return n+l>a&&(n=a-l-10),{top:Math.max(0,s),left:Math.max(0,n),minWidth:Math.max(e.width,300),maxWidth:400,zIndex:9999}}catch(e){return console.error("Error calculating dropdown position:",e),{top:0,left:0,minWidth:300,maxWidth:400,zIndex:9999}}};return(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("textarea",{ref:E,value:t||"",onChange:e=>{let t="",r=0;if("string"===typeof e)t=e,r=e.length;else{if(!e||!e.target)return void console.warn("ForumMentionAutocomplete: Unexpected input type:",typeof e);t=e.target.value,r=e.target.selectionStart}"function"===typeof a&&a(t);const s=t.substring(0,r).match(/@(team:|player:)?(\w*)$/);if(s){const[e,t,a]=s,n="team:"===t?"team":"player:"===t?"player":"user";j(r-e.length),p(a),y(n),a.length>=1&&m(!0)}else m(!1),p("")},onKeyDown:e=>{c&&x.length>0&&("ArrowDown"===e.key?(e.preventDefault(),w((e=>(e+1)%x.length))):"ArrowUp"===e.key?(e.preventDefault(),w((e=>(e-1+x.length)%x.length))):"Enter"===e.key||"Tab"===e.key?(e.preventDefault(),M(x[k])):"Escape"===e.key&&m(!1))},placeholder:r,className:n,rows:l,maxLength:i,disabled:o,autoComplete:"off",spellCheck:"false",style:{fontSize:"16px"}}),c&&(0,u.jsxs)("div",{ref:T,className:"fixed z-[9999] bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg shadow-2xl max-h-60 overflow-y-auto backdrop-blur-sm",style:S,children:[N?(0,u.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"Searching..."}):x&&x.length>0?(0,u.jsxs)("div",{className:"py-1",children:[(0,u.jsx)("div",{className:"px-3 py-1 text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700",children:"Search Results"}),x.map(((e,t)=>(0,u.jsxs)("button",{onClick:()=>M(e),className:"w-full px-3 py-3 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 active:bg-gray-200 dark:active:bg-gray-600 flex items-center space-x-3 transition-colors duration-150 touch-manipulation ".concat(t===k?"bg-blue-100 dark:bg-blue-900/20":""),style:{minHeight:"56px",WebkitTapHighlightColor:"rgba(59, 130, 246, 0.1)"},children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:e.avatar||e.logo?(0,u.jsx)("img",{src:e.avatar||e.logo,alt:P(e),className:"w-8 h-8 rounded-full object-cover"}):(0,u.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-xs font-bold",children:P(e).charAt(0).toUpperCase()})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:P(e)}),e.subtitle&&(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.subtitle})]}),(0,u.jsx)("div",{className:"flex-shrink-0 text-xs text-gray-400 dark:text-gray-500",children:P(e)})]},"".concat(e.type,"-").concat(e.id))))]}):(0,u.jsxs)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:['No results found for "',g,'"']}),(0,u.jsx)("div",{className:"px-3 py-2 text-xs text-gray-400 dark:text-gray-500 border-t border-gray-200 dark:border-gray-600",children:(0,u.jsx)("div",{children:"Type @ to mention teams and players"})})]})]})},st=e=>{let{mention:t,className:a="",onClick:r,showIcon:s=!0,navigateTo:n}=e;const l=e=>"string"===typeof e?e:"object"===typeof e&&null!==e?e.name&&"string"===typeof e.name?e.name:e.display_name&&"string"===typeof e.display_name?e.display_name:"":e?String(e):"",i=(null===t||void 0===t?void 0:t.type)||"",o=(null===t||void 0===t?void 0:t.id)||"",d=l(null===t||void 0===t?void 0:t.name),c=l(null===t||void 0===t?void 0:t.display_name),m=()=>{switch(i){case"player":return{page:"player-detail",params:{id:o}};case"team":return{page:"team-detail",params:{id:o}};default:return null}},x=()=>{switch(i){case"player":return"bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-900/50 border border-blue-200 dark:border-blue-800";case"team":return"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/50 border border-red-200 dark:border-red-800";case"user":return"bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400 dark:hover:bg-green-900/50 border border-green-200 dark:border-green-800";default:return"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800/30 dark:text-gray-400 dark:hover:bg-gray-800/50 border border-gray-200 dark:border-gray-700"}},h=e=>{e.preventDefault(),e.stopPropagation();const a=m(),s=e.currentTarget;if(s.classList.add("transform","scale-95"),setTimeout((()=>{s.classList.remove("transform","scale-95")}),150),a&&n)n(a.page,a.params);else if(a){const e=g(a);e&&"undefined"!==typeof window&&(window.location.hash=e)}r&&r(t,e)},g=e=>{switch(e.page){case"player-detail":return"player-detail/".concat(e.params.id);case"team-detail":return"team-detail/".concat(e.params.id);case"user-profile":return"user-profile/".concat(e.params.id);default:return""}},p=m(),v=c||d||"Unknown ".concat(i||"mention");return p?(0,u.jsx)("button",{onClick:h,className:"inline-flex items-center font-medium px-2 py-0.5 rounded transition-all duration-200 cursor-pointer transform hover:scale-105 active:scale-95 ".concat(x()," ").concat(a),title:"View ".concat(i,": ").concat(v),children:v}):(0,u.jsx)("span",{className:"inline-flex items-center font-medium px-2 py-0.5 rounded transition-all duration-200 ".concat(x()," ").concat(a),onClick:h,children:v})},nt="https://vlrggapi.vercel.app",lt=new Map,it=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e,r=lt.get(a);if(r&&Date.now()-r.timestamp<3e5)return r.data;try{const r=new AbortController,s=setTimeout((()=>r.abort()),1e4),n=await fetch(e,c(c({},t),{},{signal:r.signal,headers:c({Accept:"application/json","User-Agent":"MRVL-News-Integration"},t.headers)}));if(clearTimeout(s),!n.ok)throw new Error("VLR.gg API error: ".concat(n.status," ").concat(n.statusText));const l=await n.json();return lt.set(a,{data:l,timestamp:Date.now()}),l}catch(s){throw console.error("VLR.gg API request failed:",s),new Error("Failed to fetch VLR.gg data: ".concat(s.message))}},ot=async e=>{if(!e)return null;try{return await it("".concat(nt,"/match/").concat(e))}catch(t){return console.error("Error fetching VLR match:",t),null}},dt=async e=>{if(!e)return null;try{return await it("".concat(nt,"/team/").concat(e))}catch(t){return console.error("Error fetching VLR team:",t),null}},ct=e=>{if(!e||"string"!==typeof e)return null;e=e.trim();const t=[{type:"match",pattern:/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/(\d+)\/([^\/\s]+)(?:\/.*)?/,extract:t=>({type:"match",id:t[1],slug:t[2],originalUrl:e,displayUrl:"https://www.vlr.gg/".concat(t[1],"/").concat(t[2])})},{type:"team",pattern:/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/team\/(\d+)\/([^\/\s]+)(?:\/.*)?/,extract:t=>({type:"team",id:t[1],slug:t[2],originalUrl:e,displayUrl:"https://www.vlr.gg/team/".concat(t[1],"/").concat(t[2])})},{type:"event",pattern:/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/event\/(\d+)\/([^\/\s]+)(?:\/.*)?/,extract:t=>({type:"event",id:t[1],slug:t[2],originalUrl:e,displayUrl:"https://www.vlr.gg/event/".concat(t[1],"/").concat(t[2])})},{type:"player",pattern:/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/player\/(\d+)\/([^\/\s]+)(?:\/.*)?/,extract:t=>({type:"player",id:t[1],slug:t[2],originalUrl:e,displayUrl:"https://www.vlr.gg/player/".concat(t[1],"/").concat(t[2])})}];for(const{pattern:a,extract:r}of t){const t=e.match(a);if(t)return r(t)}return null},mt=e=>{if(!e||"string"!==typeof e)return{isValid:!1,error:"URL is required"};const t=ct(e);return t?{isValid:!0,type:t.type,data:t}:{isValid:!1,error:"Invalid VLR.gg URL. Supported: matches, teams, events, players"}},ut=async e=>{const t=mt(e);if(!t.isValid)return null;const{type:a,data:r}=t;try{switch(a){case"match":const e=await ot(r.id);return c(c({},r),{},{matchData:e,enriched:!0});case"team":const t=await dt(r.id);return c(c({},r),{},{teamData:t,enriched:!0});case"event":case"player":return c(c({},r),{},{enriched:!1});default:return r}}catch(s){return console.error("Error fetching VLR URL data:",s),c(c({},r),{},{enriched:!1,error:s.message})}},xt=e=>{var t,a,r,s,n,l,i,o,d,m,u,x,h,g,p,v,y,b,f,j,k,w;if(!e)return null;const N={type:"vlr-embed",platform:"VLR.gg",originalUrl:e.originalUrl,displayUrl:e.displayUrl,contentType:e.type};switch(e.type){case"match":return c(c({},N),{},{title:(null===(t=e.matchData)||void 0===t||null===(a=t.teams)||void 0===a?void 0:a.map((e=>e.name)).join(" vs "))||"Valorant Match",subtitle:(null===(r=e.matchData)||void 0===r||null===(s=r.event)||void 0===s?void 0:s.name)||"Match Details",description:(null===(n=e.matchData)||void 0===n?void 0:n.status)||"View match details and stats on VLR.gg",thumbnail:(null===(l=e.matchData)||void 0===l||null===(i=l.teams)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.logo)||null,metadata:{status:null===(d=e.matchData)||void 0===d?void 0:d.status,score:null===(m=e.matchData)||void 0===m?void 0:m.score,date:null===(u=e.matchData)||void 0===u?void 0:u.date,event:null===(x=e.matchData)||void 0===x||null===(h=x.event)||void 0===h?void 0:h.name}});case"team":return c(c({},N),{},{title:(null===(g=e.teamData)||void 0===g?void 0:g.name)||"Valorant Team",subtitle:(null===(p=e.teamData)||void 0===p?void 0:p.region)||"Team Profile",description:(null===(v=e.teamData)||void 0===v?void 0:v.description)||"View team roster, matches, and stats on VLR.gg",thumbnail:(null===(y=e.teamData)||void 0===y?void 0:y.logo)||null,metadata:{region:null===(b=e.teamData)||void 0===b?void 0:b.region,rank:null===(f=e.teamData)||void 0===f?void 0:f.rank,winRate:null===(j=e.teamData)||void 0===j?void 0:j.winRate}});case"event":return c(c({},N),{},{title:(null===(k=e.slug)||void 0===k?void 0:k.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())))||"Valorant Tournament",subtitle:"Tournament Details",description:"View tournament bracket, matches, and results on VLR.gg",thumbnail:null});case"player":return c(c({},N),{},{title:(null===(w=e.slug)||void 0===w?void 0:w.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())))||"Valorant Player",subtitle:"Player Profile",description:"View player stats, match history, and achievements on VLR.gg",thumbnail:null});default:return c(c({},N),{},{title:"VLR.gg Content",subtitle:"Valorant Esports",description:"View on VLR.gg for the latest Valorant esports content",thumbnail:null})}},ht={youtube:{patterns:[/(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?:[^&]*&)*v=([a-zA-Z0-9_-]{11})(?:&[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([a-zA-Z0-9_-]{11})(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([a-zA-Z0-9_-]{11})(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/v\/([a-zA-Z0-9_-]{11})(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?m\.youtube\.com\/watch\?(?:[^&]*&)*v=([a-zA-Z0-9_-]{11})(?:&[^&]*)*(?:#[^&]*)?/],embedTemplate:"https://www.youtube.com/embed/{id}"},twitchClip:{patterns:[/(?:https?:\/\/)?clips\.twitch\.tv\/([a-zA-Z0-9_-]+)(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?twitch\.tv\/([^\/\s]+)\/clip\/([a-zA-Z0-9_-]+)(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?twitch\.tv\/\w+\/clip\/([a-zA-Z0-9_-]+)(?:\?[^&]*)*(?:#[^&]*)?/],embedTemplate:"https://clips.twitch.tv/embed?clip={id}&parent={domain}"},twitchVideo:{patterns:[/(?:https?:\/\/)?(?:www\.)?twitch\.tv\/videos\/(\d+)(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?m\.twitch\.tv\/videos\/(\d+)(?:\?[^&]*)*(?:#[^&]*)?/],embedTemplate:"https://player.twitch.tv/?video={id}&parent={domain}"},twitchStream:{patterns:[/(?:https?:\/\/)?(?:www\.)?twitch\.tv\/([a-zA-Z0-9_]{4,25})(?:\?[^&]*)*(?:#[^&]*)?$/,/(?:https?:\/\/)?m\.twitch\.tv\/([a-zA-Z0-9_]{4,25})(?:\?[^&]*)*(?:#[^&]*)?$/],embedTemplate:"https://player.twitch.tv/?channel={id}&parent={domain}"},twitter:{patterns:[/(?:https?:\/\/)?(?:www\.)?twitter\.com\/(?:[^\/\s]+)\/status\/(\d+)(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?x\.com\/(?:[^\/\s]+)\/status\/(\d+)(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?mobile\.twitter\.com\/(?:[^\/\s]+)\/status\/(\d+)(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?twitter\.com\/i\/status\/(\d+)(?:\?[^&]*)*(?:#[^&]*)?/],embedTemplate:"https://twitter.com/x/status/{id}"},vlrgg:{patterns:[/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/(\d+)\/([^\/\s?]+)(?:\/[^\/\s?]*)*(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/team\/(\d+)\/([^\/\s?]+)(?:\/[^\/\s?]*)*(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/event\/(\d+)\/([^\/\s?]+)(?:\/[^\/\s?]*)*(?:\?[^&]*)*(?:#[^&]*)?/,/(?:https?:\/\/)?(?:www\.)?vlr\.gg\/player\/(\d+)\/([^\/\s?]+)(?:\/[^\/\s?]*)*(?:\?[^&]*)*(?:#[^&]*)?/],embedTemplate:null}},gt=e=>{if(!e||"string"!==typeof e)return null;e=e.trim();if(mt(e).isValid){const t=ct(e);return{type:"vlrgg",id:t.id,originalUrl:e,platform:"vlrgg",contentType:t.type,slug:t.slug,displayUrl:t.displayUrl}}for(const[t,a]of Object.entries(ht))if("vlrgg"!==t)for(const r of a.patterns){const a=e.match(r);if(a){let r=a[1],s=t;return"twitchClip"===t?(r=a[2]||a[1],s="twitch-clip"):"twitchVideo"===t?s="twitch-video":"twitchStream"===t&&(s="twitch-stream"),c(c({type:s,id:r,originalUrl:e,platform:t.startsWith("twitch")?"twitch":"twitter"===t?"twitter":"youtube"===t?"youtube":t},"youtube"===t&&{isYouTubeShorts:e.includes("/shorts/"),isMobileUrl:e.includes("m.youtube.com")}),t.startsWith("twitch")&&{isLiveStream:"twitchStream"===t,isClip:"twitchClip"===t,isVod:"twitchVideo"===t})}}return null},pt=e=>{if(!e||"string"!==typeof e)return[];const t=[],a=e.match(/https?:\/\/[^\s\n\r\t]+/gi)||[];for(const r of a){const e=gt(r);e&&t.push(e)}return t},vt=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.domain||("undefined"!==typeof window?window.location.hostname:"localhost");const s=a.isMobile||!1,n=a.isTablet||!1,l=a.autoplay||!1,i=a.muted||s,o=a.startTime||null;switch(("localhost"===r||r.includes("localhost")||r.includes("127.0.0.1"))&&(r="localhost"),e){case"youtube":{let e=new URLSearchParams({rel:"0",modestbranding:"1",controls:"1",showinfo:"0",fs:"1"});return s&&e.set("playsinline","1"),l&&(e.set("autoplay","1"),e.set("mute",i?"1":"0")),o&&e.set("start",o),"https://www.youtube.com/embed/".concat(t,"?").concat(e.toString())}case"twitch-clip":{let e=new URLSearchParams({clip:t,parent:r,autoplay:l?"true":"false",muted:i?"true":"false"});return(n||s)&&e.set("allowfullscreen","true"),"https://clips.twitch.tv/embed?".concat(e.toString())}case"twitch-video":{let e=new URLSearchParams({video:t,parent:r,autoplay:l?"true":"false",muted:i?"true":"false"});return o&&e.set("time","".concat(o,"s")),(n||s)&&e.set("allowfullscreen","true"),"https://player.twitch.tv/?".concat(e.toString())}case"twitch-stream":{let e=new URLSearchParams({channel:t,parent:r,autoplay:l?"true":"false",muted:i?"true":"false"});return(n||s)&&e.set("allowfullscreen","true"),"https://player.twitch.tv/?".concat(e.toString())}case"twitter":case"x":return"https://twitter.com/x/status/".concat(t);default:return null}},yt=e=>{if(!e||"string"!==typeof e)return{processedContent:e||"",videos:[]};const t=pt(e);let a=e;return t.forEach(((e,t)=>{const r="[VIDEO_EMBED_".concat(t,"]");a=a.replace(e.originalUrl,r)})),{processedContent:a,videos:t}},bt=e=>{if(!e||"string"!==typeof e)return{isValid:!1,error:"URL is required"};const t=gt(e);return t?{isValid:!0,type:t.type,video:t}:{isValid:!1,error:"Unsupported content platform. Supported: YouTube, Twitch (clips & videos), Twitter/X, VLR.gg (matches, teams, events, players)"}},ft=(e,t)=>"youtube"===e?"https://img.youtube.com/vi/".concat(t,"/maxresdefault.jpg"):null,jt=e=>{switch(e){case"youtube":return"YouTube";case"twitch-clip":return"Twitch Clip";case"twitch-video":return"Twitch VOD";case"twitch-stream":return"Twitch Stream";case"twitter":case"x":return"X (Twitter)";case"vlrgg":return"VLR.gg";default:return"Content"}},kt=function(e){return"twitter"===e||"vlrgg"===e?"auto":arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"pb-[177.78%] sm:pb-[56.25%]":"pb-[56.25%]"},wt=e=>{if(!e||"string"!==typeof e)return[];const t=[];return(e.match(/https?:\/\/[^\s\n\r\t<>"\[\]{}|\\^`]+/gi)||[]).forEach(((e,a)=>{const r=e.replace(/[.,;:!?]+$/,""),s=gt(r);if(s){const e=bt(r),n=c(c({},s),{},{index:a,isValid:e.isValid,error:e.error,embedUrl:vt(s.type,s.id),thumbnail:ft(s.type,s.id),platformName:jt(s.type)});"vlrgg"===s.type&&(n.isEsportsContent=!0,n.requiresApi=!0,n.contentType=s.contentType,n.slug=s.slug,n.displayUrl=s.displayUrl),t.push(n)}})),t};const Nt=function(e){let{type:t,id:a,url:r,mobileOptimized:n=!0,lazyLoad:l=!0,className:i="",inline:o=!0,showTitle:d=!1,autoplay:c=!1,muted:m=!1,startTime:x=null,width:h="100%",height:g="auto"}=e;const[p,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(""),[f,j]=(0,s.useState)(!l),[k,w]=(0,s.useState)("undefined"!==typeof window&&window.innerWidth<768),[N,_]=(0,s.useState)("undefined"!==typeof window&&(window.innerWidth>=768&&window.innerWidth<=1024)),S=(0,s.useRef)(null);if((0,s.useEffect)((()=>{const e=()=>{w(window.innerWidth<768),_(window.innerWidth>=768&&window.innerWidth<=1024)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{if(!l||f)return;const e=new IntersectionObserver((t=>{let[a]=t;a.isIntersecting&&(j(!0),e.disconnect())}),{threshold:.1,rootMargin:"50px"});return S.current&&e.observe(S.current),()=>e.disconnect()}),[l,f]),(0,s.useEffect)((()=>{if(f)if(r&&!a){const e=bt(r);if(e.isValid){const r=vt(e.video.type,e.video.id,{isMobile:k,isTablet:N,autoplay:c,muted:m||k,startTime:x,domain:"undefined"!==typeof window?window.location.hostname:"staging.mrvl.net"});console.log("\ud83c\udfa5 VideoEmbed - Generated embed URL:",r,"for type:",t,"id:",a),b(r)}else v(!0)}else if(a){const e=vt(t,a,{isMobile:k,isTablet:N,autoplay:c,muted:m||k,startTime:x,domain:"undefined"!==typeof window?window.location.hostname:"staging.mrvl.net"});console.log("\ud83c\udfa5 VideoEmbed - Generated embed URL:",e,"for type:",t,"id:",a),b(e)}}),[t,a,r,f,k,N,c,m,x]),(0,s.useEffect)((()=>{"twitter"!==t&&"tweet"!==t||!a&&!r||"undefined"===typeof window||!window.twttr||window.twttr.widgets.load()}),[t,a,r]),"twitter"===t||"tweet"===t||"x"===t){const e=a||(e=>{const t=bt(e);return t.isValid?t.video.id:null})(r);return!e||p?(0,u.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-6 text-center ".concat(o?"my-4":"my-6"," ").concat(i),children:(0,u.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udc26"}),(0,u.jsx)("p",{className:"mb-2",children:"Content unavailable"}),r&&(0,u.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 text-sm transition-colors",children:"View on X (Twitter) \u2192"})]})}):(0,u.jsx)("div",{className:"tweet-embed ".concat(o?"my-4":"my-6"," ").concat(k?"px-2":"px-4"," ").concat(i),children:(0,u.jsxs)("div",{className:"".concat(o?"":"flex justify-center"," ").concat(k?"max-w-full":"max-w-2xl mx-auto"),children:[d&&(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 font-medium",children:"Post from X (Twitter)"}),(0,u.jsx)("blockquote",{className:"twitter-tweet","data-theme":"undefined"!==typeof document&&document.documentElement.classList.contains("dark")?"dark":"light","data-dnt":"true","data-width":k?"100%":void 0,children:(0,u.jsx)("a",{href:"https://twitter.com/x/status/".concat(e),children:"Loading content from X..."})})]})})}if(p||!y){const e=jt(t);return(0,u.jsx)("div",{className:"group bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-xl p-8 text-center border border-gray-300 dark:border-gray-600 shadow-lg hover:shadow-xl transition-all duration-300 ".concat(o?"my-6":"my-8"," ").concat(i),style:{width:h,height:"auto"!==g?g:void 0},children:(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-300",children:[(0,u.jsxs)("div",{className:"relative inline-block mb-4",children:[(0,u.jsx)("div",{className:"text-4xl opacity-75 group-hover:opacity-100 transition-opacity",children:"youtube"===t?"\ud83d\udd34":t.includes("twitch")?"\ud83d\udfe3":"twitter"===t||"x"===t?"\ud83d\udc26":"\ud83c\udfae"}),(0,u.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"})]}),(0,u.jsxs)("h3",{className:"text-lg font-bold mb-2 text-gray-800 dark:text-gray-200",children:[e," Content Unavailable"]}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 max-w-md mx-auto",children:["This ",e.toLowerCase()," video couldn't be loaded. The content may be private, removed, or temporarily unavailable."]}),r&&(0,u.jsxs)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-semibold text-sm transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[(0,u.jsxs)("span",{children:["Watch on ",e]}),(0,u.jsx)("span",{children:"\u2192"})]}),(0,u.jsxs)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-500 flex items-center justify-center space-x-2",children:[(0,u.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{children:"Content Error"})]})]})})}if(!f){const e=kt(t,k);return(0,u.jsx)("div",{ref:S,className:"video-embed ".concat(t,"-embed group cursor-pointer hover:scale-[1.02] transition-all duration-300 ").concat(o?"my-6":"my-8"," ").concat(k?"mobile-video-embed":""," ").concat(N?"tablet-video-embed":""," ").concat(i),style:{width:h,height:"auto"!==g?g:void 0},onClick:()=>j(!0),children:(0,u.jsxs)("div",{className:"relative ".concat("auto"===e?"h-auto min-h-[240px]":e," ").concat("auto"!==e?"h-0":""," bg-gradient-to-br from-gray-200 via-gray-100 to-gray-300 dark:from-gray-800 dark:via-gray-900 dark:to-gray-700 rounded-xl overflow-hidden shadow-xl border border-gray-300 dark:border-gray-600 group-hover:border-red-400/30 flex items-center justify-center"),children:[(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"}),(0,u.jsxs)("div",{className:"absolute top-3 left-3 bg-black/70 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center space-x-1.5 shadow-lg",children:[(0,u.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("youtube"===t?"bg-red-500":t.includes("twitch")?"bg-purple-500":"twitter"===t||"x"===t?"bg-blue-500":"bg-green-500"," animate-pulse")}),(0,u.jsx)("span",{children:jt(t).toUpperCase()})]}),(0,u.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-600 dark:text-gray-300 group-hover:text-gray-800 dark:group-hover:text-gray-100 transition-colors",children:[(0,u.jsxs)("div",{className:"relative mb-4",children:[(0,u.jsx)("div",{className:"text-5xl opacity-80 group-hover:opacity-100 transition-opacity",children:"youtube"===t?"\ud83d\udd34":t.includes("twitch")?"\ud83d\udfe3":"twitter"===t||"x"===t?"\ud83d\udc26":"\ud83c\udfae"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-red-500/20 to-transparent rounded-full blur-lg"})]}),(0,u.jsxs)("div",{className:"text-center space-y-2",children:[(0,u.jsxs)("div",{className:"text-lg font-bold",children:["Loading ",jt(t)," Content"]}),(0,u.jsx)("div",{className:"text-sm opacity-75 max-w-xs",children:k?"Tap to load video content":"Click to load high-quality video"}),(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-1 mt-3",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,u.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,u.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),d&&(0,u.jsx)("div",{className:"absolute bottom-4 left-4 right-4 text-center",children:(0,u.jsxs)("div",{className:"bg-black/50 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-xs font-medium",children:[jt(t)," Video Ready to Play"]})})]}),(0,u.jsx)("div",{className:"absolute bottom-0 right-0 w-20 h-20 bg-gradient-to-tl from-red-600/20 to-transparent opacity-40 group-hover:opacity-60 transition-opacity"})]})})}const C=kt(t,k);return(0,u.jsxs)("div",{ref:S,className:"video-embed ".concat(t,"-embed group transition-all duration-300 ").concat(o?"my-6":"my-8"," ").concat(k?"mobile-video-embed":""," ").concat(N?"tablet-video-embed":""," ").concat(i),style:{width:h,height:"auto"!==g?g:void 0},children:[d&&(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 font-semibold flex items-center group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors",children:[(0,u.jsx)("span",{className:"mr-2 text-base",children:"youtube"===t?"\ud83d\udd34":t.includes("twitch")?"\ud83d\udfe3":"twitter"===t||"x"===t?"\ud83d\udc26":"\ud83c\udfae"}),jt(t)," Video",(0,u.jsx)("div",{className:"ml-auto text-xs opacity-70 group-hover:opacity-100 transition-opacity",children:"youtube"===t?"HD Quality":t.includes("twitch")?"Live Stream":"twitter"===t||"x"===t?"Social Media":"Gaming"})]}),(0,u.jsxs)("div",{className:"relative ".concat("auto"===C?"h-auto":C," ").concat("auto"!==C?"h-0":""," bg-gradient-to-br from-gray-900 via-black to-gray-800 rounded-xl overflow-hidden shadow-2xl border border-gray-300 dark:border-gray-600 group-hover:shadow-red-500/20 group-hover:border-red-400/30 transition-all duration-300 transform group-hover:scale-[1.02]"),children:[(0,u.jsxs)("div",{className:"absolute top-3 left-3 z-20 bg-black/80 backdrop-blur-sm text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center space-x-1.5 shadow-lg",children:[(0,u.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("youtube"===t?"bg-red-500":t.includes("twitch")?"bg-purple-500":"twitter"===t||"x"===t?"bg-blue-500":"bg-green-500"," animate-pulse")}),(0,u.jsx)("span",{children:jt(t).toUpperCase()})]}),k&&n&&(0,u.jsx)("div",{className:"absolute top-3 right-3 z-20 bg-green-600/90 backdrop-blur-sm text-white px-2.5 py-1 rounded-lg text-xs font-semibold shadow-lg",children:"\ud83d\udcf1 Mobile"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/10 to-blue-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10"}),(0,u.jsx)("iframe",{src:y,title:"".concat(jt(t)," video player"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"".concat("auto"===C?"w-full h-full":"absolute top-0 left-0 w-full h-full"," rounded-xl transition-transform duration-300"),onError:()=>{v(!0)},loading:"lazy",style:{maxWidth:"100%",height:"auto"===C?k?"280px":"450px":k?"auto":"100%",minHeight:"auto"===C?"240px":void 0}}),(0,u.jsx)("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-gradient-to-tl from-red-600/30 to-transparent opacity-60 group-hover:opacity-80 transition-opacity"})]}),(k||N)&&!o&&(0,u.jsx)("div",{className:"mt-3 text-center",children:(0,u.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-full text-xs text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-700 group-hover:border-red-400/30 transition-colors",children:[(0,u.jsx)("span",{children:"\ud83c\udfae"}),(0,u.jsx)("span",{className:"font-medium",children:k?"Tap to play \u2022 Pinch to zoom \u2022 Fullscreen available":"Click to play \u2022 Enhanced controls"})]})}),o&&(k||N)&&(0,u.jsx)("div",{className:"mt-2 text-center",children:(0,u.jsxs)("div",{className:"inline-flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-400 opacity-75 group-hover:opacity-100 transition-opacity",children:[(0,u.jsx)("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{className:"font-medium",children:"Tap to play"})]})})]})},_t=e=>"string"===typeof e?e:null===e||void 0===e?"":"object"===typeof e?e.message?String(e.message):e.error&&"string"===typeof e.error?e.error:e.content?String(e.content):Array.isArray(e)?e.map((e=>_t(e))).join(", "):e.text?String(e.text):e.title?String(e.title):e.name?String(e.name):e.statusText?e.statusText:e.status?"Status: ".concat(e.status):(console.warn("Object could not be safely converted to string:",e),""):String(e),St=e=>{var t,a,r;return e?"string"===typeof e?e:null!==(t=e.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.message?_t(e.response.data.message):e.message?_t(e.message):null!==(r=e.response)&&void 0!==r&&r.statusText?"".concat(e.response.status,": ").concat(e.response.statusText):"NETWORK_ERROR"===e.code?"Network connection failed":_t(e)||"An error occurred":"An unknown error occurred"},Ct=e=>{const t=_t(e);return t&&t.trim()?t:""},Et=e=>{var t,a,r,s;if(!e)return{};const n=e.title||"Latest News - MRVL",l=e.excerpt||(null===(t=e.content)||void 0===t?void 0:t.substring(0,160))||"Stay updated with the latest Marvel Rivals news and updates.",i=P(e)||"/images/news-placeholder.svg",o="".concat(window.location.origin,"/news/").concat(e.id),d=e.published_at||e.created_at,c=e.updated_at;return{title:"".concat(n," | MRVL"),description:l,keywords:["Marvel Rivals","MRVL","esports","gaming news","competitive gaming",...e.tags||[]].join(", "),"og:title":n,"og:description":l,"og:image":i,"og:url":o,"og:type":"article","og:site_name":"MRVL - Marvel Rivals Platform","og:locale":"en_US","article:published_time":d,"article:modified_time":c,"article:author":(null===(a=e.author)||void 0===a?void 0:a.name)||"MRVL Team","article:section":(null===(r=e.category)||void 0===r?void 0:r.name)||"News","article:tag":(e.tags||[]).join(","),"twitter:card":"summary_large_image","twitter:title":n,"twitter:description":l,"twitter:image":i,"twitter:site":"@MRVLPlatform","twitter:creator":(null===(s=e.author)||void 0===s?void 0:s.twitter)||"@MRVLPlatform",news_keywords:(e.tags||[]).join(","),robots:"index,follow",canonical:o}},Tt=e=>{var t,a,r,s,n,l;if(!e)return null;const i={"@context":"https://schema.org","@type":"NewsArticle",headline:e.title,description:e.excerpt||(null===(t=e.content)||void 0===t?void 0:t.substring(0,300)),image:P(e),datePublished:e.published_at||e.created_at,dateModified:e.updated_at||e.published_at||e.created_at,author:{"@type":"Person",name:(null===(a=e.author)||void 0===a?void 0:a.name)||"MRVL Team",url:(null===(r=e.author)||void 0===r?void 0:r.profile_url)||"".concat(window.location.origin,"/author/").concat((null===(s=e.author)||void 0===s?void 0:s.id)||"mrvl-team")},publisher:{"@type":"Organization",name:"MRVL",logo:{"@type":"ImageObject",url:"".concat(window.location.origin,"/logo.svg"),width:240,height:240}},mainEntityOfPage:{"@type":"WebPage","@id":"".concat(window.location.origin,"/news/").concat(e.id)},articleSection:(null===(n=e.category)||void 0===n?void 0:n.name)||"News",keywords:(e.tags||[]).join(","),wordCount:(null===(l=e.content)||void 0===l?void 0:l.split(" ").length)||0,url:"".concat(window.location.origin,"/news/").concat(e.id)};return e.videos&&e.videos.length>0&&(i.video=e.videos.map((t=>({"@type":"VideoObject",name:t.title||e.title,description:t.description||e.excerpt,thumbnailUrl:t.thumbnail||P(e),uploadDate:t.created_at||e.created_at,contentUrl:t.url})))),i},At=e=>{Object.entries(e).forEach((e=>{let t,a,[r,s]=e;if(!s)return;if("title"===r)return;if(r.startsWith("og:"))t='meta[property="'.concat(r,'"]'),a="content";else if(r.startsWith("twitter:"))t='meta[name="'.concat(r,'"]'),a="content";else if(r.startsWith("article:"))t='meta[property="'.concat(r,'"]'),a="content";else{if("canonical"===r){let e=document.querySelector('link[rel="canonical"]');return e||(e=document.createElement("link"),e.rel="canonical",document.head.appendChild(e)),void(e.href=s)}t='meta[name="'.concat(r,'"]'),a="content"}let n=document.querySelector(t);n||(n=document.createElement("meta"),r.startsWith("og:")||r.startsWith("article:")?n.setAttribute("property",r):n.setAttribute("name",r),document.head.appendChild(n)),n.setAttribute(a,s)}))},Mt=e=>{if(!e)return;const t=document.querySelector('script[type="application/ld+json"][data-schema="NewsArticle"]');t&&t.remove();const a=document.createElement("script");a.type="application/ld+json",a.setAttribute("data-schema","NewsArticle"),a.textContent=JSON.stringify(e),document.head.appendChild(a)},Pt=e=>{if(!e)return 0;const t=e.split(/\s+/).length;return Math.ceil(t/200)};const Rt=function(e){var t,a,r,n,l;let{params:i,navigateTo:o}=e;const{triggerComment:d}=w(),[m,x]=(0,s.useState)(null),[h,g]=(0,s.useState)([]),[p,v]=(0,s.useState)(!0),[y,f]=(0,s.useState)(""),j=e=>{const t=_t(e);f(t)},[k,N]=(0,s.useState)(null),[_,S]=(0,s.useState)(!1),[C,E]=(0,s.useState)(null),[T,A]=(0,s.useState)(""),M=e=>{const t=_t(e);A(t)},[R,I]=(0,s.useState)([]),{api:D,user:L,isAuthenticated:U}=b(),z=null===i||void 0===i?void 0:i.id;(0,s.useEffect)((()=>{let e=!0;return(async()=>{z&&e&&await O()})(),()=>{e=!1}}),[z]),(0,s.useEffect)((()=>{if(m){const e=Et(m);At(e);const t=Tt(m);Mt(t),Le(m,"direct"),window.__CURRENT_ARTICLE__=m;return Ye()}}),[m]);const O=async()=>{try{var e;v(!0),console.log("\ud83d\udd0d NewsDetailPage: Fetching article ID:",z);const a=await D.get("/news/".concat(z)),r=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data||a;console.log("\u2705 Article loaded:",r),x(r),g(r.comments||[]),await F();try{await D.post("/news/".concat(z,"/view"))}catch(t){console.log("View count failed (likely not logged in)")}}catch(t){console.error("\u274c Error fetching article:",t),x(null)}finally{v(!1)}},F=async()=>{try{var e,t;const a=await D.get("/mentions/search?limit=50");null!==(e=a.data)&&void 0!==e&&e.success&&null!==(t=a.data)&&void 0!==t&&t.data&&I(a.data.data)}catch(a){console.error("Error fetching mentions data:",a),I([])}},B=async e=>{if(e.preventDefault(),!U)return void alert("Please log in to comment");const t=_t(y);if(!t.trim())return;const a=[...h];S(!0);try{const e={id:"temp-".concat(Date.now()),content:_t(t.trim()),author:c(c({},L),{},{name:_t(null===L||void 0===L?void 0:L.name),username:_t(null===L||void 0===L?void 0:L.username),email:_t(null===L||void 0===L?void 0:L.email),id:(null===L||void 0===L?void 0:L.id)||null,avatar_url:_t(null===L||void 0===L?void 0:L.avatar_url)}),meta:{created_at:(new Date).toISOString()},is_temp:!0,stats:{upvotes:0,downvotes:0},user_vote:null,mentions:[],replies:[]};g(k?t=>t.map((t=>t.id===k?c(c({},t),{},{replies:[...t.replies||[],e]}):t)):t=>[...t,e]);const d=await D.post("/news/".concat(z,"/comments"),{content:_t(t.trim()),parent_id:k}),u=!0===(null===d||void 0===d?void 0:d.success)||(null===d||void 0===d?void 0:d.data)||(null===d||void 0===d?void 0:d.comment);if(console.log("Comment submission response:",{response:d,success:null===d||void 0===d?void 0:d.success,hasData:!(null===d||void 0===d||!d.data),isSuccess:u}),u){j(""),N(null),Ue(m,"comment",{comment_type:k?"reply":"top_level",parent_comment_id:k});const t=d.data.data||d.data.comment;if(t&&_t(t.content)){var r,s,n,l,i;const a=c(c({},t),{},{content:_t(t.content),author:c(c({},t.author),{},{name:_t(null===(r=t.author)||void 0===r?void 0:r.name),username:_t(null===(s=t.author)||void 0===s?void 0:s.username),id:(null===(n=t.author)||void 0===n?void 0:n.id)||null,email:_t(null===(l=t.author)||void 0===l?void 0:l.email),avatar_url:_t(null===(i=t.author)||void 0===i?void 0:i.avatar_url)}),mentions:Array.isArray(t.mentions)?t.mentions.map((e=>"object"===typeof e&&null!==e?c(c({},e),{},{mention_text:_t(e.mention_text),name:_t(e.name),display_name:_t(e.display_name),type:_t(e.type),id:e.id||null,username:_t(e.username),team_name:_t(e.team_name),player_name:_t(e.player_name)}):{mention_text:_t(e),name:_t(e),display_name:_t(e),type:"user",id:null})):[],meta:t.meta||{},stats:t.stats||{},user_vote:t.user_vote||null,replies:Array.isArray(t.replies)?t.replies:[]});g(k?t=>t.map((t=>t.id===k?c(c({},t),{},{replies:t.replies.map((t=>t.id===e.id?a:t))}):t)):t=>t.map((t=>t.id===e.id?a:t)))}else await O();$e("Comment posted successfully!")}else{var o;g(a);const e=(null===(o=d.data)||void 0===o?void 0:o.message)||"Failed to post comment. Please try again.";et(e)}}catch(P){var u,x,p,v,b,f,w,_;console.error("Error posting comment:",P);if((200===(null===(u=P.response)||void 0===u?void 0:u.status)||201===(null===(x=P.response)||void 0===x?void 0:x.status))&&(!0===(null===(p=P.response)||void 0===p||null===(v=p.data)||void 0===v?void 0:v.success)||"true"===(null===(b=P.response)||void 0===b||null===(f=b.data)||void 0===f?void 0:f.success))){j(""),N(null);const e=P.response.data.comment||P.response.data.data;if(e&&_t(e.content)){var C,E,T,A,M;const t=c(c({},e),{},{content:_t(e.content),author:c(c({},e.author),{},{name:_t(null===(C=e.author)||void 0===C?void 0:C.name),username:_t(null===(E=e.author)||void 0===E?void 0:E.username),id:(null===(T=e.author)||void 0===T?void 0:T.id)||null,email:_t(null===(A=e.author)||void 0===A?void 0:A.email),avatar_url:_t(null===(M=e.author)||void 0===M?void 0:M.avatar_url)}),mentions:Array.isArray(e.mentions)?e.mentions.map((e=>"object"===typeof e&&null!==e?c(c({},e),{},{mention_text:_t(e.mention_text),name:_t(e.name),display_name:_t(e.display_name),type:_t(e.type),id:e.id||null,username:_t(e.username),team_name:_t(e.team_name),player_name:_t(e.player_name)}):{mention_text:_t(e),name:_t(e),display_name:_t(e),type:"user",id:null})):[],meta:e.meta||{},stats:e.stats||{},user_vote:e.user_vote||null,replies:Array.isArray(e.replies)?e.replies:[]});g(k?e=>e.map((e=>e.id===k?c(c({},e),{},{replies:e.replies.map((e=>e.id===tempComment.id?t:e))}):e)):e=>e.map((e=>e.id===tempComment.id?t:e)))}else await O();return $e("Comment posted successfully!"),void d()}g(a);let e="Failed to post comment. Please try again.";const t=St(P);t.includes("401")||401===(null===(w=P.response)||void 0===w?void 0:w.status)?e="Please log in again to post comments.":t.includes("403")||403===(null===(_=P.response)||void 0===_?void 0:_.status)?e="You do not have permission to comment on this article.":"An unknown error occurred"!==t&&(e=t),et(e)}finally{S(!1)}},W=async e=>{if(!window.confirm("Are you sure you want to delete this comment?"))return;const t=[...h];try{var a;const r=h.map((t=>{if(t.id===e)return null;if(t.replies&&t.replies.length>0){const a=t.replies.filter((t=>t.id!==e));return c(c({},t),{},{replies:a})}return t})).filter((e=>null!==e));g(r);const s=await D.delete("/news/comments/".concat(e));200===s.status||204===s.status||!0===(null===s||void 0===s?void 0:s.success)||!0===(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.success)||(null===s||void 0===s?void 0:s.message)&&s.message.toLowerCase().includes("success")?(console.log("\u2705 Comment deleted successfully"),$e("Comment deleted successfully!")):(console.warn("\u26a0\ufe0f Delete request did not return success, rolling back"),g(t),alert("Failed to delete comment. Please try again."))}catch(l){var r,s,n;console.error("Error deleting comment:",l),g(t);let e="Failed to delete comment. Please try again.";const a=St(l);a.includes("403")||403===(null===(r=l.response)||void 0===r?void 0:r.status)?e="You do not have permission to delete this comment.":a.includes("404")||404===(null===(s=l.response)||void 0===s?void 0:s.status)?e="Comment not found or already deleted.":a.includes("401")||401===(null===(n=l.response)||void 0===n?void 0:n.status)?e="Please log in again to delete comments.":"An unknown error occurred"!==a&&(e=a),et(e)}},H=()=>{E(null),M("")},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return{processedContent:e,detectedVideos:[]};console.log("\ud83c\udfa5 Processing article content for videos...",{contentLength:e.length,existingVideos:t.length});const a=wt(e);console.log("\ud83c\udfa5 Detected videos:",a);const r=[...t];a.forEach((e=>{if(r.some((t=>t.originalUrl===e.originalUrl||t.url===e.originalUrl||(t.video_id||t.id)===e.id)))console.log("\ud83c\udfa5 Skipping duplicate video:",e.originalUrl);else{const t=c(c({},e),{},{url:e.originalUrl,video_id:e.id,platform:e.platform,type:e.type,platformName:e.platformName,thumbnail:e.thumbnail,embedUrl:e.embedUrl,isValid:!1!==e.isValid});r.push(t),console.log("\ud83c\udfa5 Added video to embed list:",t)}}));let s=e;return s=s.replace(/\[VIDEO_EMBED_(\d+)\]/g,"\x3c!-- VIDEO_EMBEDDED_$1 --\x3e"),a.forEach(((e,t)=>{const a=new RegExp("^\\s*".concat(e.originalUrl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\s*$"),"gm");s=s.replace(a,"\x3c!-- VIDEO_EMBEDDED_".concat(t," --\x3e"))})),console.log("\ud83c\udfa5 Final processed content:",{originalLength:e.length,processedLength:s.length,totalVideos:r.length}),{processedContent:s,detectedVideos:r}},q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const a=_t(e);if(!a||"string"!==typeof a)return null;if(!t||0===t.length)return a;const r=[...t].sort(((e,t)=>(e.position_start||0)-(t.position_start||0))),s=[];let n=0;return r.forEach((e=>{const t=e.mention_text,r=a.indexOf(t,n);-1!==r&&(r>n&&s.push(a.slice(n,r)),s.push((0,u.jsx)(st,{mention:e,navigateTo:o},"mention-".concat(r,"-").concat(e.id))),n=r+t.length)})),n<a.length&&s.push(a.slice(n)),s.length>0?s:a},G=e=>{const t=new Date(e),a=new Date,r=Math.floor((a-t)/36e5);if(r<1)return"Just now";if(r<24)return"".concat(r,"h ago");if(r<48)return"Yesterday";const s=Math.floor(r/24);return s<7?"".concat(s,"d ago"):t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},Y=function(e){var t,a,r,s,n,l,i,o;let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const m=d?{marginLeft:"".concat(Math.min(2*c,6),"rem")}:{};return(0,u.jsx)("div",{className:"".concat(d?"pl-4 border-l-2 border-gray-200 dark:border-gray-700":""," py-4"),style:m,children:(0,u.jsx)("div",{className:"flex items-start space-x-3",children:(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,u.jsx)(Qe,{user:e.author,showAvatar:!0,showHeroFlair:!0,showTeamFlair:!0,size:"sm",clickable:!1}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:G(null===(t=e.meta)||void 0===t?void 0:t.created_at)}),(null===(a=e.meta)||void 0===a?void 0:a.edited)&&(0,u.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-600",children:"(edited)"}),!e.is_temp&&(0,u.jsx)(at,{itemType:"news_comment",itemId:e.id,parentId:z,initialUpvotes:(null===(r=e.stats)||void 0===r?void 0:r.upvotes)||0,initialDownvotes:(null===(s=e.stats)||void 0===s?void 0:s.downvotes)||0,userVote:e.user_vote,direction:"horizontal",size:"xs"})]}),C===e.id?(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)(rt,{value:T,onChange:M,placeholder:"Edit your comment...",rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,u.jsx)("button",{onClick:H,className:"px-3 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors border border-gray-300 dark:border-gray-600 rounded",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>(async e=>{const t=_t(T);if(t.trim())try{(await D.put("/news/comments/".concat(e),{content:t.trim()})).data.success?(E(null),M(""),await O()):et("Failed to update comment. Please try again.")}catch(s){var a,r;console.error("Error updating comment:",s);let e="Failed to update comment. Please try again.";const t=St(s);t.includes("403")||403===(null===(a=s.response)||void 0===a?void 0:a.status)?e="You do not have permission to edit this comment.":t.includes("401")||401===(null===(r=s.response)||void 0===r?void 0:r.status)?e="Please log in again to edit comments.":"An unknown error occurred"!==t&&(e=t),et(e)}})(e.id),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Save"})]})]}):(0,u.jsx)("div",{className:"text-gray-900 dark:text-white mb-2",children:q(Ct(e.content),e.mentions||[])}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[U&&(0,u.jsx)("button",{onClick:()=>N(k===e.id?null:e.id),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors font-medium",children:k===e.id?"Cancel Reply":"Reply"}),(null===(n=e.author)||void 0===n?void 0:n.id)===(null===L||void 0===L?void 0:L.id)&&C!==e.id&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:()=>(e=>{E(e.id),M(e.content)})(e),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>W(e.id),className:"hover:text-red-500 dark:hover:text-red-400 transition-colors",children:"Delete"})]}),("admin"===(null===L||void 0===L?void 0:L.role)||"moderator"===(null===L||void 0===L?void 0:L.role))&&(null===(l=e.author)||void 0===l?void 0:l.id)!==(null===L||void 0===L?void 0:L.id)&&(0,u.jsx)("button",{onClick:()=>W(e.id),className:"hover:text-red-500 dark:hover:text-red-400 transition-colors",children:"Moderate"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-400 dark:text-gray-500",children:[e.mentions&&e.mentions.length>0&&(0,u.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,u.jsx)("span",{children:"@"}),(0,u.jsx)("span",{children:e.mentions.length})]}),e.replies&&e.replies.length>0&&(0,u.jsxs)("span",{children:[e.replies.length," replies"]})]})]}),k===e.id&&(0,u.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(Qe,{user:L,showAvatar:!0,showTeamFlair:!1,size:"xs"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mb-2",children:["Replying to ",(0,u.jsx)("span",{className:"font-medium text-red-600 dark:text-red-400",children:null===(i=e.author)||void 0===i?void 0:i.name})]}),(0,u.jsxs)("form",{onSubmit:B,children:[(0,u.jsx)(rt,{value:y,onChange:j,placeholder:"Reply to ".concat(null===(o=e.author)||void 0===o?void 0:o.name,"... (Type @ to mention teams and players)"),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:text-white",autoFocus:!0}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-3",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{N(null),j("")},className:"px-3 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors border border-gray-300 dark:border-gray-600 rounded",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:_||!_t(y).trim(),className:"px-3 py-1.5 text-xs bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin mr-1"}),"Posting..."]}):"Post Reply"})]})]})]})]})}),e.replies&&e.replies.length>0&&(0,u.jsx)("div",{className:"mt-4 space-y-2",children:e.replies.map((e=>Y(e,!0,c+1)))})]})})},e.id)};return p?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading article..."})]})}):m?(0,u.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("button",{onClick:()=>o&&o("home"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Home"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("button",{onClick:()=>o&&o("news"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"News"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white",children:m.title})]}),(0,u.jsxs)("article",{className:"card overflow-hidden",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[m.category&&(0,u.jsxs)("span",{className:"px-3 py-1 text-xs font-bold rounded-full text-white",style:{backgroundColor:m.category.color||"#6b7280"},children:[m.category.icon||"\ud83d\udcf0"," ",m.category.name]}),(null===(t=m.meta)||void 0===t?void 0:t.featured)&&(0,u.jsx)("span",{className:"px-3 py-1 text-xs font-bold rounded-full bg-yellow-500 text-white",children:"FEATURED"}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:m.region||"INTL"})]}),(0,u.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:q(_t(m.title),R)}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)(Qe,{user:m.author,showAvatar:!0,showTeamFlair:!0,size:"md",clickable:!1}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("span",{children:G((null===(a=m.meta)||void 0===a?void 0:a.published_at)||(null===(r=m.meta)||void 0===r?void 0:r.created_at))}),(e=>{const t=Pt(m.content)||(null===(e=m.meta)||void 0===e?void 0:e.read_time);return t?(0,u.jsxs)("span",{children:["\ud83d\udcd6 ",t," min read"]}):null})(),(()=>{const{detectedVideos:e}=V(m.content,m.videos||[]),t=e.length;return t>0?(0,u.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:["\ud83d\udcfa ",t," video",1!==t?"s":""]}):null})()]})]})]}),(0,u.jsx)("div",{className:"aspect-video overflow-hidden bg-gray-100 dark:bg-gray-800",children:(0,u.jsx)("img",{src:P(m),alt:m.title,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="https://staging.mrvl.net/images/news-placeholder.svg"}})}),(0,u.jsxs)("div",{className:"p-6",children:[m.excerpt&&(0,u.jsx)("div",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 font-medium",children:q(_t(m.excerpt),R)}),!1,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return null;const{processedContent:a,detectedVideos:r}=V(e,t),s=r.filter((e=>!1!==e.isValid));console.log("\ud83c\udfa5 Rendering content with embeds:",{totalVideos:s.length,contentHasVideos:s.length>0});!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||0===t.length)return e;const r={};t.forEach((e=>{const t=e.mention_text,a=e.name,s=e.display_name;t&&(r[t]=e),"team"===e.type?(r["@team:".concat(a)]=e,r["@team:".concat(e.id)]=e,s&&(r["@team:".concat(s)]=e)):"player"===e.type&&(r["@player:".concat(a)]=e,r["@player:".concat(e.id)]=e,s&&(r["@player:".concat(s)]=e)),r["@".concat(a)]=e,s&&s!==a&&(r["@".concat(s)]=e)}));let s=[{type:"text",content:e}];[/@team:([a-zA-Z0-9_\-\s]+)/g,/@player:([a-zA-Z0-9_\-\s]+)/g,/@([a-zA-Z0-9_]+)/g].forEach((e=>{const t=[];s.forEach((a=>{if("text"!==a.type)return void t.push(a);const s=a.content;let n,l=0;for(e.lastIndex=0;null!==(n=e.exec(s));){const e=n[0],a=n.index,i=a+e.length;a>l&&t.push({type:"text",content:s.slice(l,a)});let o=r[e];if(!o){const e=n[1];Object.keys(r).forEach((t=>{const a=r[t];!a||a.name!==e&&a.display_name!==e&&a.id!==e&&a.id!==parseInt(e)||(o=a)}))}o&&"user"!==o.type?t.push({type:"mention",content:e,mention:o,key:"mention-".concat(a,"-").concat(i)}):t.push({type:"text",content:e}),l=i}l<s.length&&t.push({type:"text",content:s.slice(l)})})),s=t})),s.map(((e,t)=>"mention"===e.type?(0,u.jsx)(st,{mention:e.mention,navigateTo:a},e.key||"mention-".concat(t)):e.content))}(a,R,o);if(!s||0===s.length)return(0,u.jsx)("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:(0,u.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed",children:q(_t(a),R)})});const n=a.split(/\n\s*\n/).filter((e=>e.trim()));let l=0;const i=n.length,d=[];if(1===s.length)d.push(Math.min(1,Math.floor(i/2)));else if(2===s.length)d.push(1,Math.floor(.7*i));else for(let o=0;o<s.length;o++){const e=Math.floor(i/(s.length+1)*(o+1));d.push(Math.max(1,e))}return console.log("\ud83c\udfa5 Video placement strategy:",{totalParagraphs:i,videoPlacementPoints:d,videosToPlace:s.length}),(0,u.jsxs)("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[n.map(((e,t)=>{const a=[],r=e.match(/<!-- VIDEO_EMBEDDED_(\d+) -->/);if(r){const e=parseInt(r[1]),t=s[e];t&&(console.log("\ud83c\udfa5 Found video placeholder for video",e,":",t),a.push((0,u.jsx)("div",{className:"not-prose my-8",children:(0,u.jsx)(Nt,{type:t.platform||t.type,id:t.video_id||t.id,url:t.embedUrl||t.embed_url||t.original_url||t.url||t.originalUrl,mobileOptimized:!0,lazyLoad:!0,inline:!0,showTitle:!1,className:"rounded-lg overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700"})},"video-".concat(e))))}else e.trim()&&!e.includes("\x3c!-- VIDEO_EMBEDDED")&&a.push((0,u.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed mb-6 text-gray-900 dark:text-gray-100",children:q(_t(e),R)},"p-".concat(t)));if(l<s.length&&d.includes(t)){const e=s[l];console.log("\ud83c\udfa5 Placing video at position",t,":",e),a.push((0,u.jsx)("div",{className:"not-prose my-8",children:(0,u.jsx)(Nt,{type:e.platform||e.type,id:e.video_id||e.id,url:e.embedUrl||e.embed_url||e.original_url||e.url||e.originalUrl,mobileOptimized:!0,lazyLoad:!0,inline:!0,showTitle:!1,className:"rounded-lg overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700"})},"video-".concat(l))),l++}return a})),l<s.length&&(0,u.jsxs)("div",{className:"not-prose mt-8 space-y-6",children:[(0,u.jsxs)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-4 border-t border-gray-200 dark:border-gray-700 pt-6",children:["\ud83d\udcfa Related Videos (",s.length-l," more)"]}),s.slice(l).map(((e,t)=>(console.log("\ud83c\udfa5 Placing remaining video:",e),(0,u.jsx)(Nt,{type:e.platform||e.type,id:e.video_id||e.id,url:e.embedUrl||e.embed_url||e.original_url||e.url||e.originalUrl,mobileOptimized:!0,lazyLoad:!0,inline:!0,showTitle:!0,className:"rounded-lg overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700"},"video-remaining-".concat(t)))))]}),s.length>0&&(0,u.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\ud83d\udcfa Video Content Summary"}),(0,u.jsx)("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:s.map(((e,t)=>(0,u.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:e.platformName||e.platform||e.type}),e.originalUrl&&(0,u.jsx)("a",{href:e.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 text-xs",children:"(Open in new tab)"})]},t)))})]})]})}(m.content,m.videos)]}),(0,u.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:(0,u.jsx)(at,{itemType:"news",itemId:m.id,initialUpvotes:(null===(n=m.stats)||void 0===n?void 0:n.upvotes)||0,initialDownvotes:(null===(l=m.stats)||void 0===l?void 0:l.downvotes)||0,userVote:m.user_vote,direction:"horizontal",onVote:e=>{Ue(m,"up"===e?"upvote":"downvote")}})})})]}),(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Comments (",h.length,")"]})}),U?(0,u.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("form",{onSubmit:B,children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(Qe,{user:L,showAvatar:!0,showTeamFlair:!1,size:"sm"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)(rt,{value:y,onChange:j,placeholder:"Add a comment... Type @ to mention teams and players",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),(0,u.jsx)("div",{className:"flex justify-end mt-2",children:(0,u.jsx)("button",{type:"submit",disabled:_||!_t(y).trim(),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Posting...":"Post Comment"})})]})]})})}):(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 text-center",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please log in to leave a comment"}),(0,u.jsx)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("mrvl-show-auth-modal")),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Log In"})]}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h.length>0?h.map((e=>Y(e))):(0,u.jsx)("div",{className:"p-6 text-center",children:(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No comments yet. Be the first to comment!"})})})]})]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcf0"}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Article Not Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The article you're looking for doesn't exist or may have been removed."}),(0,u.jsx)("button",{onClick:()=>o&&o("news"),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"\u2190 Back to News"})]})};const It=function(e){var t,a,r,s,n,l,i,o,d,c,m;let{match:x,navigateTo:h,isCompact:g=!1}=e;if(!x)return null;x.maps_data&&!Array.isArray(x.maps_data)&&(x.maps_data=[]);const p="completed"===x.status&&x.team1_score>x.team2_score,v="completed"===x.status&&x.team2_score>x.team1_score,y=e=>{if(!e)return"TBD";return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},b=e=>{if(!e)return"";const t=new Date(e),a=new Date,r=new Date(a);return r.setDate(r.getDate()+1),t.toDateString()===a.toDateString()?"Today":t.toDateString()===r.toDateString()?"Tomorrow":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};var f,j,k,w;return g?(0,u.jsx)("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>h&&h("match-detail",{id:x.id}),children:(0,u.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(f=x.team1)||void 0===f?void 0:f.short_name)||(null===(j=x.team1)||void 0===j?void 0:j.name)||"TBD"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(k=x.team2)||void 0===k?void 0:k.short_name)||(null===(w=x.team2)||void 0===w?void 0:w.name)||"TBD"})]}),(0,u.jsx)("div",{className:"text-right",children:"live"===x.status?(0,u.jsx)("span",{className:"text-red-600 font-bold text-xs",children:"LIVE"}):"completed"===x.status?(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsxs)("div",{className:"font-bold text-lg",children:[x.team1_score||0,"-",x.team2_score||0]}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:x.format||"BO3"})]}):(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:y(x.scheduled_at)})})]})}):(0,u.jsx)("div",{className:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>h&&h("match-detail",{id:x.id}),children:(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(null===(t=x.event)||void 0===t?void 0:t.logo)&&(0,u.jsx)("div",{className:"w-6 h-6 rounded overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:S(x.event.logo),alt:x.event.name,className:"w-full h-full object-cover",onError:e=>{e.target.src=S(null,"event-banner")}})}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:(null===(a=x.event)||void 0===a?void 0:a.name)||"Scrim"}),(null===(r=x.event)||void 0===r?void 0:r.tier)&&(0,u.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-bold rounded border ".concat("S"===x.event.tier?"bg-yellow-100 text-yellow-800 border-yellow-300 dark:bg-yellow-900/20 dark:text-yellow-200":"A"===x.event.tier?"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/20 dark:text-red-200":"bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900/20 dark:text-blue-200"),children:x.event.tier})]}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:x.format||"BO3"})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,u.jsx)("div",{className:"flex-1 min-w-0 ".concat(p?"opacity-100":"completed"===x.status?"opacity-50":""),children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)(D,{team:x.team1,size:"w-10 h-10",className:"flex-shrink-0"}),(0,u.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer truncate",onClick:e=>{var t;e.stopPropagation(),h&&h("team-detail",{id:null===(t=x.team1)||void 0===t?void 0:t.id})},title:(null===(s=x.team1)||void 0===s?void 0:s.name)||"TBD",children:(null===(n=x.team1)||void 0===n?void 0:n.name)||"TBD"}),(null===(l=x.team1)||void 0===l?void 0:l.country)&&(0,u.jsx)("span",{className:"text-sm flex-shrink-0",children:R(x.team1.country)})]}),(null===(i=x.team1)||void 0===i?void 0:i.short_name)&&(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 truncate",children:x.team1.short_name})]})]})}),(0,u.jsx)("div",{className:"px-4 flex-shrink-0",children:(()=>{switch(x.status){case"live":return(0,u.jsx)("div",{className:"flex items-center justify-center",children:(0,u.jsxs)("span",{className:"bg-red-600 text-white px-3 py-1 text-xs font-bold rounded-full flex items-center animate-pulse",children:[(0,u.jsx)("span",{className:"w-2 h-2 bg-white rounded-full mr-1.5"}),"LIVE"]})});case"completed":return(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[(0,u.jsx)("span",{className:p?"text-green-600 dark:text-green-400":"",children:x.team1_score||0})," - ",(0,u.jsx)("span",{className:v?"text-green-600 dark:text-green-400":"",children:x.team2_score||0})]}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[x.format||"BO3"," FINAL"]})]});default:return(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:y(x.scheduled_at)}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:b(x.scheduled_at)})]})}})()}),(0,u.jsx)("div",{className:"flex-1 min-w-0 ".concat(v?"opacity-100":"completed"===x.status?"opacity-50":""),children:(0,u.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,u.jsxs)("div",{className:"text-right min-w-0 flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(null===(o=x.team2)||void 0===o?void 0:o.country)&&(0,u.jsx)("span",{className:"text-sm flex-shrink-0",children:R(x.team2.country)}),(0,u.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer truncate",onClick:e=>{var t;e.stopPropagation(),h&&h("team-detail",{id:null===(t=x.team2)||void 0===t?void 0:t.id})},title:(null===(d=x.team2)||void 0===d?void 0:d.name)||"TBD",children:(null===(c=x.team2)||void 0===c?void 0:c.name)||"TBD"})]}),(null===(m=x.team2)||void 0===m?void 0:m.short_name)&&(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 truncate",children:x.team2.short_name})]}),(0,u.jsx)(D,{team:x.team2,size:"w-10 h-10",className:"flex-shrink-0"})]})})]}),"live"===x.status&&x.viewers&&(0,u.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[(0,u.jsxs)("span",{children:[x.viewers.toLocaleString()," viewers"]}),x.stream_url&&(0,u.jsx)("a",{href:x.stream_url,target:"_blank",rel:"noopener noreferrer",className:"text-red-600 dark:text-red-400 hover:underline",onClick:e=>e.stopPropagation(),children:(()=>{try{const t=new URL(x.stream_url),a=t.hostname.toLowerCase();if(a.includes("twitch.tv")){return t.pathname.split("/").filter((e=>e))[0]||"Twitch"}if(a.includes("youtube.com")||a.includes("youtu.be")){var e;const a=t.pathname.split("/").filter((e=>e));return a.includes("c")&&a[a.indexOf("c")+1]?a[a.indexOf("c")+1]:a.includes("channel")&&a[a.indexOf("channel")+1]?a[a.indexOf("channel")+1]:null!==(e=a[0])&&void 0!==e&&e.startsWith("@")?a[0].replace("@",""):"YouTube"}if(a.includes("kick.com")){return t.pathname.split("/").filter((e=>e))[0]||"Kick"}return a.split(".")[0].charAt(0).toUpperCase()+a.split(".")[0].slice(1)}catch(t){return"Watch Stream"}})()})]})}),"completed"===x.status&&x.maps_data&&Array.isArray(x.maps_data)&&x.maps_data.length>0&&(0,u.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"flex items-center justify-center space-x-2 text-xs",children:x.maps_data.map(((e,t)=>(0,u.jsxs)("div",{className:"px-2 py-1 rounded ".concat(e.winner===x.team1_id?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200"),children:[e.map_name,": ",e.team1_score,"-",e.team2_score]},t)))})})]})})},Dt=e=>{let{items:t=[],itemHeight:a=80,renderItem:r,containerHeight:n=400,overscan:l=5,className:i="",onScrollEnd:o=null}=e;const[d,c]=(0,s.useState)(0),m=(0,s.useRef)(),[x,h]=(0,s.useState)(!1),g=t.length*a,{startIndex:p,endIndex:v,visibleItems:y}=((0,s.useRef)(),(0,s.useMemo)((()=>{const e=n,r=Math.max(0,Math.floor(d/a)-l),s=Math.min(t.length-1,Math.ceil((d+e)/a)+l),i=[];for(let n=r;n<=s;n++)t[n]&&i.push({index:n,item:t[n],offsetY:n*a});return{startIndex:r,endIndex:s,visibleItems:i}}),[d,t,a,n,l]));return(0,s.useEffect)((()=>{const e=m.current;if(!e)return;let t;const r=()=>{const r=e.scrollTop;c(r),h(!0),clearTimeout(t),t=setTimeout((()=>{h(!1)}),150),o&&r+n>=g-3*a&&o()};return e.addEventListener("scroll",r,{passive:!0}),()=>{e.removeEventListener("scroll",r),clearTimeout(t)}}),[g,n,a,o]),(0,u.jsx)("div",{ref:m,className:"virtual-scroll-container ".concat(i),style:{height:n,overflow:"auto",WebkitOverflowScrolling:"touch",position:"relative"},children:(0,u.jsxs)("div",{className:"virtual-scroll-spacer",style:{height:g,position:"relative"},children:[y.map((e=>{let{index:t,item:s,offsetY:n}=e;return(0,u.jsx)("div",{className:"virtual-scroll-item ".concat(x?"scrolling":""),style:{position:"absolute",top:n,left:0,right:0,height:a,contain:"layout size style"},children:r(s,t)},t)})),o&&d+n>=g-5*a&&(0,u.jsx)("div",{style:{position:"absolute",top:g,left:0,right:0,height:60,display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af"},children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500"}),(0,u.jsx)("span",{className:"text-sm",children:"Loading more..."})]})})]})})};const Lt=function(e){let{navigateTo:t}=e;const{isAdmin:a,isModerator:r,api:n}=b(),[l,i]=(0,s.useState)("upcoming"),[o,d]=(0,s.useState)([]),[c,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(new Date),[g,p]=(0,s.useState)("all");(0,s.useEffect)((()=>{v(),y()}),[]);const v=async()=>{try{console.log("MatchesPage: Fetching REAL LIVE BACKEND DATA...");let a=[];try{var e;const t=await n.get("/matches"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||t||[];Array.isArray(r)&&r.length>0?(a=r,console.log("MatchesPage: Using REAL backend matches:",a.length)):(console.log("MatchesPage: No matches found in backend - showing empty state"),a=[])}catch(t){console.error("MatchesPage: Backend API failed:",t),a=[]}d(a),console.log("MatchesPage: Matches loaded with REAL backend data:",a.length)}catch(t){console.error("Error in fetchMatches:",t),d([])}},y=async()=>{try{var e;const t=await n.get("/events"),a=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||[];m(a)}catch(t){console.error("Error fetching events:",t),m([])}},f=(()=>{let e=o;switch(l){case"live":e=e.filter((e=>"live"===e.status||e.match_info&&"live"===e.match_info.status));break;case"upcoming":default:e=e.filter((e=>"upcoming"===e.status||e.match_info&&"upcoming"===e.match_info.status));break;case"completed":e=e.filter((e=>"completed"===e.status||e.match_info&&"completed"===e.match_info.status))}return"all"!==g&&(e=e.filter((e=>e.event_id==g))),e.sort(((e,t)=>"live"===e.status&&"live"!==t.status?-1:"live"===t.status&&"live"!==e.status?1:new Date(e.scheduled_at)-new Date(t.scheduled_at))),e})(),j=(e=>{const t={};return e.forEach((e=>{var a;const r=(e=>{const t=new Date(e),a=new Date,r=new Date(a);return r.setDate(r.getDate()+1),t.toDateString()===a.toDateString()?"Today":t.toDateString()===r.toDateString()?"Tomorrow":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==a.getFullYear()?"numeric":void 0})})(e.scheduled_at||(null===(a=e.match_info)||void 0===a?void 0:a.scheduled_at)||new Date);t[r]||(t[r]=[]),t[r].push(e)})),t})(f);return(0,u.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,u.jsx)("div",{className:"mb-6",children:(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Matches"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[(0,u.jsx)("option",{value:"all",children:"All Events"}),c.map((e=>(0,u.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(a()||r())&&(0,u.jsxs)("button",{onClick:()=>t&&t("admin-match-create"),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[(0,u.jsx)("span",{children:"+"}),(0,u.jsx)("span",{children:"Create Match"})]})]})]})}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("button",{onClick:()=>i("live"),className:"px-6 py-3 text-sm font-medium transition-all relative ".concat("live"===l?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[o.filter((e=>"live"===e.status||e.match_info&&"live"===e.match_info.status)).length>0&&(0,u.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{children:"Live"}),(0,u.jsx)("span",{className:"text-xs bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 px-2 py-0.5 rounded-full",children:o.filter((e=>"live"===e.status||e.match_info&&"live"===e.match_info.status)).length})]}),"live"===l&&(0,u.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-red-600 dark:bg-red-400"})]}),(0,u.jsxs)("button",{onClick:()=>i("upcoming"),className:"px-6 py-3 text-sm font-medium transition-all relative ".concat("upcoming"===l?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Upcoming","upcoming"===l&&(0,u.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-red-600 dark:bg-red-400"})]}),(0,u.jsxs)("button",{onClick:()=>i("completed"),className:"px-6 py-3 text-sm font-medium transition-all relative ".concat("completed"===l?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Results","completed"===l&&(0,u.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-red-600 dark:bg-red-400"})]})]}),(0,u.jsx)("div",{className:"",children:f.length>0?(0,u.jsx)("div",{children:window.innerWidth<768&&f.length>20?(0,u.jsx)(Dt,{items:f,itemHeight:80,containerHeight:Math.min(500,window.innerHeight-200),renderItem:(e,a)=>(0,u.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors cursor-pointer border-b border-gray-200 dark:border-gray-700",onClick:()=>t&&t("match-detail",e.id),children:(0,u.jsx)(It,{match:e,navigateTo:t,compact:!0})}),onScrollEnd:()=>{console.log("Loading more matches...")}}):Object.entries(j).map((e=>{let[a,r]=e;return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider",children:a})}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map((e=>{var a,r,s;return(0,u.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors cursor-pointer",onClick:()=>t&&t("match-detail",e.id),children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-20 text-sm",children:((t,a)=>{const r=e.status||(null===(t=e.match_info)||void 0===t?void 0:t.status)||"upcoming",s=e.scheduled_at||(null===(a=e.match_info)||void 0===a?void 0:a.scheduled_at);return"live"===r?(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400 font-medium text-xs",children:"LIVE"})]}):"completed"===r?(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Final"}):(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-300 text-xs",children:s?new Date(s).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"TBA"})})()}),(0,u.jsxs)("div",{className:"flex-1 flex items-center justify-end space-x-3 pr-4",children:[(0,u.jsx)("span",{onClick:a=>{var r;a.stopPropagation(),t&&t("team-detail",null===(r=e.team1)||void 0===r?void 0:r.id)},className:"font-medium cursor-pointer hover:text-red-600 dark:hover:text-red-400 transition-colors ".concat("completed"===e.status&&e.team1_score>e.team2_score?"text-gray-900 dark:text-white":"completed"===e.status?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"),children:(null===(a=e.team1)||void 0===a?void 0:a.name)||"TBD"}),(0,u.jsx)(D,{team:e.team1,size:"w-5 h-5",onClick:a=>{var r;a.stopPropagation(),t&&t("team-detail",null===(r=e.team1)||void 0===r?void 0:r.id)},className:"cursor-pointer hover:scale-105 transition-transform"})]}),(0,u.jsx)("div",{className:"flex items-center justify-center min-w-[80px]",children:((t,a,r)=>{const s=e.status||(null===(t=e.match_info)||void 0===t?void 0:t.status)||"upcoming",n=e.team1_score||(null===(a=e.match_info)||void 0===a?void 0:a.team1_score)||0,l=e.team2_score||(null===(r=e.match_info)||void 0===r?void 0:r.team2_score)||0;return"upcoming"!==s?(0,u.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-1",children:[(0,u.jsx)("span",{className:"text-lg font-bold ".concat("completed"===s&&n>l?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"),children:n}),(0,u.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:":"}),(0,u.jsx)("span",{className:"text-lg font-bold ".concat("completed"===s&&l>n?"text-green-600 dark:text-green-400":"text-gray-700 dark:text-gray-300"),children:l})]}):(0,u.jsx)("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-1",children:(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"VS"})})})()}),(0,u.jsxs)("div",{className:"flex-1 flex items-center space-x-3 pl-4",children:[(0,u.jsx)(D,{team:e.team2,size:"w-5 h-5",onClick:a=>{var r;a.stopPropagation(),t&&t("team-detail",null===(r=e.team2)||void 0===r?void 0:r.id)},className:"cursor-pointer hover:scale-105 transition-transform"}),(0,u.jsx)("span",{onClick:a=>{var r;a.stopPropagation(),t&&t("team-detail",null===(r=e.team2)||void 0===r?void 0:r.id)},className:"font-medium cursor-pointer hover:text-red-600 dark:hover:text-red-400 transition-colors ".concat("completed"===e.status&&e.team2_score>e.team1_score?"text-gray-900 dark:text-white":"completed"===e.status?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"),children:(null===(r=e.team2)||void 0===r?void 0:r.name)||"TBD"})]}),(0,u.jsxs)("div",{className:"text-right w-24",children:[(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase font-semibold",children:e.format||(null===(s=e.match_info)||void 0===s?void 0:s.format)||"BO3"}),e.event&&(0,u.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1 truncate",children:e.event.name})]})]})},e.id)}))})]},a)}))}):(0,u.jsxs)("div",{className:"py-16 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4 opacity-20",children:"\ud83c\udfae"}),(0,u.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:["No ",l," matches found"]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"live"===l?"No matches are currently live":"upcoming"===l?"No upcoming matches scheduled":"completed"===l?"No completed matches to show":"all"!==g?"No matches found for the selected event":"No matches available"})]})})]})]})},Ut={competitive:[{id:"krakoa",name:"Hellfire Gala: Krakoa",mode:"Domination",type:"competitive",icon:"\ud83d\udd25",season:2,description:"NEW Season 2 competitive map"},{id:"hells_heaven",name:"Hydra Charteris Base: Hell's Heaven",mode:"Domination",type:"competitive",icon:"\u2699\ufe0f",season:1,description:"Classic domination battleground"},{id:"birnin_tchalla",name:"Intergalactic Empire of Wakanda: Birnin T'Challa",mode:"Domination",type:"competitive",icon:"\ud83d\udc8e",season:1,description:"Wakandan capital warfare"},{id:"central_park",name:"Empire of Eternal Night: Central Park",mode:"Convoy",type:"competitive",icon:"\ud83c\udf03",season:1,description:"Payload escort through darkened NYC"}],all:[{name:"Hellfire Gala: Krakoa",mode:"Domination",status:"active",competitive:!0},{name:"Yggsgard: Royal Palace",mode:"Domination",status:"removed",season:2},{name:"Hydra Charteris Base: Hell's Heaven",mode:"Domination",status:"active",competitive:!0},{name:"Intergalactic Empire of Wakanda: Birnin T'Challa",mode:"Domination",status:"active",competitive:!0},{name:"Empire of Eternal Night: Central Park",mode:"Convoy",status:"active",competitive:!0},{name:"Tokyo 2099: Spider-Islands",mode:"Convoy",status:"active",competitive:!1},{name:"Yggsgard: Yggdrasill Path",mode:"Convoy",status:"active",competitive:!1},{name:"Empire of Eternal Night: Midtown",mode:"Convoy",status:"active",competitive:!1},{name:"Empire of Eternal Night: Sanctum Sanctorum",mode:"Convergence",status:"active",competitive:!1},{name:"Tokyo 2099: Shin-Shibuya",mode:"Convergence",status:"removed",season:2},{name:"Klyntar: Symbiotic Surface",mode:"Convergence",status:"active",competitive:!1},{name:"Intergalactic Empire of Wakanda: Hall of Djalia",mode:"Convergence",status:"active",competitive:!1}],casual:[{id:"royal_palace",name:"Yggsgard: Royal Palace",mode:"Domination",type:"casual",icon:"\ud83d\udc51",removed:"Season 2",description:"REMOVED from competitive Season 2"},{id:"spider_islands",name:"Tokyo 2099: Spider-Islands",mode:"Convoy",type:"casual",icon:"\ud83d\udd78\ufe0f",description:"Futuristic Tokyo payload escort"},{id:"yggdrasill_path",name:"Yggsgard: Yggdrasill Path",mode:"Convoy",type:"casual",icon:"\ud83c\udf33",description:"World tree convoy route"},{id:"midtown",name:"Empire of Eternal Night: Midtown",mode:"Convoy",type:"casual",icon:"\ud83c\udfe2",description:"Manhattan streets payload"},{id:"sanctum_sanctorum",name:"Empire of Eternal Night: Sanctum Sanctorum",mode:"Convergence",type:"casual",icon:"\ud83d\udd2e",description:"Mystical hybrid combat"},{id:"shin_shibuya",name:"Tokyo 2099: Shin-Shibuya",mode:"Convergence",type:"casual",icon:"\ud83d\uddfc",removed:"Season 2",description:"REMOVED from rotation Season 2"},{id:"symbiotic_surface",name:"Klyntar: Symbiotic Surface",mode:"Convergence",type:"casual",icon:"\ud83d\udda4",description:"Alien world convergence"},{id:"hall_of_djalia",name:"Intergalactic Empire of Wakanda: Hall of Djalia",mode:"Convergence",type:"casual",icon:"\u2728",description:"Ancestral plane hybrid battle"}]},zt={Domination:{name:"Domination",icon:"\ud83c\udfaf",type:"Control Point",format:"Best of 3 rounds",timer:{preparation:30,captureRate:1.2,roundLimit:null},description:"Control single point, best of 3 rounds",overtime:"Triggered when contested near round end"},Convoy:{name:"Convoy",icon:"\ud83d\ude9b",type:"Escort",format:"2 rounds in Competitive (swap sides)",timer:{preparation:30,baseTime:300,checkpoint1:180,checkpoint2:90},description:"Escort payload through checkpoints",checkpoints:3},Convergence:{name:"Convergence",icon:"\ud83d\udd04",type:"Hybrid",format:"2 rounds in Competitive (swap sides)",timer:{preparation:30,capturePhase:240,escortPhase:90},description:"Capture point then escort payload",phases:["Capture","Escort"]}},Ot={Vanguard:["Captain America","Doctor Strange","Groot","Hulk","Magneto","Peni Parker","Thor","Venom","Emma Frost","Bruce Banner","Mr. Fantastic","TBD"],Duelist:["Black Panther","Black Widow","Hawkeye","Hela","Iron Man","Magik","Moon Knight","Namor","Psylocke","Punisher","Scarlet Witch","Spider-Man","Star-Lord","Storm","Wolverine","Winter Soldier","Iron Fist","Squirrel Girl","TBD"],Strategist:["Adam Warlock","Cloak & Dagger","Jeff the Land Shark","Loki","Luna Snow","Mantis","Rocket Raccoon","TBD"]},Ft=[{value:"BO1",label:"Best of 1",maps:1,winCondition:"First to 1",usage:["Open Qualifiers","Swiss Rounds","Quick Matches"]},{value:"BO3",label:"Best of 3",maps:3,winCondition:"First to 2",usage:["Group Stage","Regular Season","Upper Bracket"]},{value:"BO5",label:"Best of 5",maps:5,winCondition:"First to 3",usage:["Playoffs","Lower Bracket","Semifinals"]},{value:"BO7",label:"Best of 7",maps:7,winCondition:"First to 4",usage:["Championship Finals","Grand Finals","Major Finals"]},{value:"BO9",label:"Best of 9",maps:9,winCondition:"First to 5",usage:["World Championship","Season Finals","Special Events"]}],Bt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const a=[...Ut.competitive,...Ut.casual];let r=a;"all"!==t&&(r=a.filter((e=>e.mode===t))),r=r.filter((e=>!e.removed));const s=Ft.find((t=>t.value===e)),n=(null===s||void 0===s?void 0:s.maps)||1,l=r.filter((e=>"competitive"===e.type)),i=r.filter((e=>"casual"===e.type));let o=[];return o.push(...l),o.length<n&&o.push(...i.slice(0,n-o.length)),o.slice(0,n)},Wt=e=>{const t=Ft.find((t=>t.value===e)),a=(null===t||void 0===t?void 0:t.maps)||1,r=["Domination","Convoy","Domination","Convergence","Convoy"],s=[];for(let n=0;n<a;n++)s.push(r[n%r.length]);return s};const Ht=new class{constructor(){this.listeners=new Map,this.pollingIntervals=new Map,this.STORAGE_KEY_PREFIX="mrvl_live_match_",this.POLLING_INTERVAL=2e3,this.API_BASE="https://staging.mrvl.net",this.handleStorageChange=this.handleStorageChange.bind(this),"undefined"!==typeof window&&window.addEventListener("storage",this.handleStorageChange),console.log("\u26a1 LiveScoreSync initialized - Immediate updates ready")}subscribe(e,t){const a="match_".concat(e);return this.listeners.has(a)||this.listeners.set(a,new Set),this.listeners.get(a).add(t),this.startPolling(e),()=>{this.unsubscribe(e,t)}}unsubscribe(e,t){const a="match_".concat(e);this.listeners.has(a)&&(this.listeners.get(a).delete(t),0===this.listeners.get(a).size&&(this.stopPolling(e),this.listeners.delete(a)))}broadcastUpdate(e,t){const a="".concat(this.STORAGE_KEY_PREFIX).concat(e),r=c(c({},t),{},{timestamp:Date.now(),source:"admin_panel"});try{localStorage.setItem(a,JSON.stringify(r)),this.notifyListeners(e,r),console.log("\ud83d\udce1 Broadcasting immediate update for match ".concat(e))}catch(s){console.error("Failed to broadcast update:",s)}}handleStorageChange(e){if(!e.key||!e.key.startsWith(this.STORAGE_KEY_PREFIX))return;const t=e.key.replace(this.STORAGE_KEY_PREFIX,"");if(e.newValue)try{const a=JSON.parse(e.newValue);this.notifyListeners(t,a),console.log("\ud83d\udce8 Immediate update received for match ".concat(t))}catch(a){console.error("Failed to parse storage update:",a)}}startPolling(e){this.stopPolling(e);const t=setInterval((async()=>{try{const t=await fetch("".concat(this.API_BASE,"/api/matches/").concat(e),{headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken")||"")}});if(t.ok){const a=await t.json(),r="".concat(this.STORAGE_KEY_PREFIX).concat(e),s=localStorage.getItem(r),n=s?JSON.parse(s):null;if(!n||this.hasChanges(a,n)){const t=c(c({},a),{},{timestamp:Date.now(),source:"polling"});localStorage.setItem(r,JSON.stringify(t)),this.notifyListeners(e,t),console.log("\ud83d\udd04 Polling update applied for match ".concat(e))}}}catch(t){"AbortError"!==t.name&&console.error("Polling error for match ".concat(e,":"),t)}}),this.POLLING_INTERVAL);this.pollingIntervals.set(e,t),console.log("\u26a1 Started polling for match ".concat(e," (2s intervals)"))}stopPolling(e){this.pollingIntervals.has(e)&&(clearInterval(this.pollingIntervals.get(e)),this.pollingIntervals.delete(e),console.log("\u23f9\ufe0f Stopped polling for match ".concat(e)))}hasChanges(e,t){const a=e.data||e,r=t.data||t,s=["team1_score","team2_score","status","current_map","series_score_team1","series_score_team2","current_map_number"];for(const n of s)if(a[n]!==r[n])return!0;if(JSON.stringify(a.maps||e.maps||[])!==JSON.stringify(r.maps||t.maps||[]))return!0;return JSON.stringify(a.team1_players||[])+JSON.stringify(a.team2_players||[])!==JSON.stringify(r.team1_players||[])+JSON.stringify(r.team2_players||[])}notifyListeners(e,t){const a="match_".concat(e);this.listeners.has(a)&&this.listeners.get(a).forEach((e=>{try{e(t)}catch(a){console.error("Error in listener callback:",a)}}))}async updateMatchScore(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=localStorage.getItem("authToken");try{const n={team1_score:t,team2_score:a};null!==r&&(n.current_map=r);const l=await fetch("".concat(this.API_BASE,"/api/matches/").concat(e,"/live-score"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s),Accept:"application/json"},body:JSON.stringify(n)});if(l.ok){const t=await l.json();return this.broadcastUpdate(e,t),console.log("\u2705 Score updated immediately for match ".concat(e)),t}}catch(n){console.error("Failed to update match score:",n)}return null}destroy(){"undefined"!==typeof window&&window.removeEventListener("storage",this.handleStorageChange),this.pollingIntervals.forEach((e=>clearInterval(e))),this.pollingIntervals.clear(),this.listeners.clear(),console.log("\ud83e\uddf9 LiveScoreSync destroyed")}},Vt=e=>{var t,a,r,n;let{isOpen:l,onClose:i,match:o,onUpdate:d}=e;const{isAuthenticated:m,user:x,isAdmin:h}=b(),g="https://staging.mrvl.net",p=localStorage.getItem("authToken"),v=m&&p&&x&&h(),[y,f]=(0,s.useState)((()=>{const e={};for(let t=1;t<=3;t++)e[t]={team1Score:0,team2Score:0,status:1===t?"active":"pending",winner:null,team1Players:[],team2Players:[]};return{team1Score:0,team2Score:0,team1SeriesScore:0,team2SeriesScore:0,status:"live",currentMap:1,totalMaps:3,matchTimer:"00:00",team1Players:[],team2Players:[],maps:e}})),[j,k]=(0,s.useState)(!0),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)((new Date).toLocaleTimeString()),[C,E]=(0,s.useState)("idle"),T=(0,s.useRef)(!1),A=(0,s.useRef)(null),M=(0,s.useRef)(y),P=(0,s.useRef)(!1);(0,s.useEffect)((()=>{M.current=y}),[y]),(0,s.useEffect)((()=>{if(null!==o&&void 0!==o&&o.id){P.current=!1,R();const e=Ht.subscribe(o.id,D);return()=>{T.current=!0,P.current=!1,e(),A.current&&clearTimeout(A.current)}}}),[null===o||void 0===o?void 0:o.id]);const R=async()=>{if(null!==o&&void 0!==o&&o.id){N(!0);try{const e=await fetch("".concat(g,"/api/matches/").concat(o.id),{headers:{Authorization:"Bearer ".concat(p),Accept:"application/json"}});if(e.ok){const t=await e.json();I(t)}}catch(e){console.error("Error loading match data:",e)}finally{N(!1)}}},I=e=>{var t,a,r,s,n,l,i,o;const d=[],c=[],m=parseInt(e.current_map||e.currentMap||e.current_map_number||1);let u;if(P.current){var x;const e=null===(x=M.current)||void 0===x?void 0:x.currentMap;u=e&&e>0?e:m}else u=m,P.current=!0;const h=e.maps_data||e.maps||[],g=Array.isArray(h)?h[u-1]:h[u],p=(null===g||void 0===g?void 0:g.team1_composition)||(null===g||void 0===g?void 0:g.team1_players)||e.team1_players||("string"===typeof e.team1_players?JSON.parse(e.team1_players):e.team1_players)||(null===(t=e.team1)||void 0===t?void 0:t.players)||[],v=(null===g||void 0===g?void 0:g.team2_composition)||(null===g||void 0===g?void 0:g.team2_players)||e.team2_players||("string"===typeof e.team2_players?JSON.parse(e.team2_players):e.team2_players)||(null===(a=e.team2)||void 0===a?void 0:a.players)||[],b=(null===(r=e.team1)||void 0===r?void 0:r.players)||[],j=(null===(s=e.team2)||void 0===s?void 0:s.players)||[];for(let y=0;y<6;y++){const e=p[y]||{},t=b[y]||{},a=(e.eliminations||0)+(e.assists||0),r=e.deaths>0?(a/e.deaths).toFixed(2):a.toFixed(2);d.push({id:e.player_id||e.id||t.id||"t1_p".concat(y),name:e.name||e.username||t.username||t.name||"Player ".concat(y+1),hero:e.hero||"",role:e.role||(e.hero?z(e.hero):""),kills:e.kills||e.eliminations||0,deaths:e.deaths||0,assists:e.assists||0,damage:e.damage||0,healing:e.healing||0,blocked:e.blocked||e.damage_blocked||0,kda:e.kda||r,isAlive:void 0===e.isAlive||e.isAlive})}for(let y=0;y<6;y++){const e=v[y]||{},t=j[y]||{},a=(e.eliminations||0)+(e.assists||0),r=e.deaths>0?(a/e.deaths).toFixed(2):a.toFixed(2);c.push({id:e.player_id||e.id||t.id||"t2_p".concat(y),name:e.name||e.username||t.username||t.name||"Player ".concat(y+1),hero:e.hero||"",role:e.role||(e.hero?z(e.hero):""),kills:e.kills||e.eliminations||0,deaths:e.deaths||0,assists:e.assists||0,damage:e.damage||0,healing:e.healing||0,blocked:e.blocked||e.damage_blocked||0,kda:e.kda||r,isAlive:void 0===e.isAlive||e.isAlive})}const k=e.maps_data||e.maps||[],w={},N=e.format||e.match_format||"BO3",_="BO3"===N?3:"BO5"===N?5:3,S=e.total_maps_played||_;if(Array.isArray(k)){k.forEach(((e,t)=>{const a=t+1,r=e.team1_composition||e.team1_players||[],s=e.team2_composition||e.team2_players||[];w[a]={team1Score:e.team1_score||0,team2Score:e.team2_score||0,status:e.status||"pending",winner:e.winner_id||null,mapName:e.map_name||"Map ".concat(a),mode:e.mode||"Push",team1Players:a===u?d:r,team2Players:a===u?c:s}}));for(let e=k.length+1;e<=S;e++)w[e]={team1Score:0,team2Score:0,status:"pending",winner:null,mapName:"Map ".concat(e),mode:"Push",team1Players:e===u?d:[],team2Players:e===u?c:[]}}else for(let y=1;y<=S;y++){var C,E,T,A,R,I,D,L;w[y]={team1Score:(null===(C=k[y])||void 0===C?void 0:C.team1_score)||0,team2Score:(null===(E=k[y])||void 0===E?void 0:E.team2_score)||0,status:(null===(T=k[y])||void 0===T?void 0:T.status)||(y===u?"active":y<u?"completed":"pending"),winner:(null===(A=k[y])||void 0===A?void 0:A.winner)||null,mapName:(null===(R=k[y])||void 0===R?void 0:R.map_name)||"Map ".concat(y),mode:(null===(I=k[y])||void 0===I?void 0:I.mode)||"Push",team1Players:y===u?d:(null===(D=k[y])||void 0===D?void 0:D.team1Players)||[],team2Players:y===u?c:(null===(L=k[y])||void 0===L?void 0:L.team2Players)||[]}}f({team1Score:(null===(n=w[u])||void 0===n?void 0:n.team1Score)||0,team2Score:(null===(l=w[u])||void 0===l?void 0:l.team2Score)||0,team1SeriesScore:e.series_score_team1||0,team2SeriesScore:e.series_score_team2||0,status:e.status||"live",team1Players:(null===(i=w[u])||void 0===i?void 0:i.team1Players)||d,team2Players:(null===(o=w[u])||void 0===o?void 0:o.team2Players)||c,currentMap:u,totalMaps:S,matchTimer:y.matchTimer||"00:00",maps:w})},D=(0,s.useCallback)((e=>{T.current||(I(e),S((new Date).toLocaleTimeString()),d&&d(e))}),[d]),L=(0,s.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null===o||void 0===o||!o.id||!v)return;const t=M.current,a=c({},t.maps);a[t.currentMap]&&(a[t.currentMap].team1Players=t.team1Players,a[t.currentMap].team2Players=t.team2Players);const r=Object.keys(a).sort(((e,t)=>parseInt(e)-parseInt(t))).map((e=>c(c({},a[e]),{},{map_number:parseInt(e),team1_score:a[e].team1Score,team2_score:a[e].team2Score,team1_composition:a[e].team1Players||[],team2_composition:a[e].team2Players||[]}))),s=c(c({id:o.id,team1_score:t.maps[t.currentMap].team1Score,team2_score:t.maps[t.currentMap].team2Score,series_score_team1:t.team1SeriesScore,series_score_team2:t.team2SeriesScore},e&&{current_map:t.currentMap,isMapSwitch:!0}),{},{status:t.status,maps:r,team1_players:t.team1Players,team2_players:t.team2Players,total_maps:t.totalMaps});Ht.broadcastUpdate(o.id,s),E("saving"),A.current&&clearTimeout(A.current),A.current=setTimeout((async()=>{try{(await fetch("".concat(g,"/api/matches/").concat(o.id,"/live-update"),{method:"POST",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({type:"score-update",data:s,timestamp:(new Date).toISOString()})})).ok?(E("saved"),setTimeout((()=>E("idle")),2e3)):(console.error("Failed to save to server"),E("error"),setTimeout((()=>E("idle")),3e3))}catch(e){console.error("Error saving match data:",e),E("error"),setTimeout((()=>E("idle")),3e3)}}),500)}),[null===o||void 0===o?void 0:o.id,v,p]),O=(e,t)=>{f((a=>{const r=c({},a),s=c({},r.maps[r.currentMap]);return 1===e?s.team1Score=Math.max(0,s.team1Score+t):s.team2Score=Math.max(0,s.team2Score+t),r.maps[r.currentMap]=s,r.team1Score=s.team1Score,r.team2Score=s.team2Score,setTimeout((()=>L()),100),r}))},F=async(e,t,a)=>{console.log("updatePlayerHero called:",{team:e,playerIndex:t,hero:a});const r=(1===e?y.team1Players:y.team2Players)[t];console.log("Player data:",r),f((r=>{const s=c({},r),n=1===e?[...s.team1Players]:[...s.team2Players];return n[t]=c(c({},n[t]),{},{hero:a,role:a?z(a):""}),1===e?s.team1Players=n:s.team2Players=n,s.maps[s.currentMap]&&(s.maps[s.currentMap].team1Players=s.team1Players,s.maps[s.currentMap].team2Players=s.team2Players),s}));const s=(null===r||void 0===r?void 0:r.player_id)||(null===r||void 0===r?void 0:r.id);if(r&&s){console.log("Sending hero update to backend:",{player_id:s,hero:a,map_index:y.currentMap-1});try{(await fetch("".concat(g,"/api/matches/").concat(o.id,"/live-update"),{method:"POST",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({type:"hero-update",data:{map_index:y.currentMap-1,team:e,player_id:s,hero:a,role:a?z(a):"",player_name:r.name},timestamp:(new Date).toISOString()})})).ok||console.error("Failed to update hero")}catch(n){console.error("Error updating hero:",n)}}},B=async(e,t,a,r)=>{console.log("updatePlayerStat called:",{team:e,playerIndex:t,stat:a,value:r});const s=(1===e?y.team1Players:y.team2Players)[t],n=Math.max(0,parseInt(r)||0);console.log("Player data:",s),f((r=>{const s=c({},r),l=1===e?[...s.team1Players]:[...s.team2Players];l[t]=c(c({},l[t]),{},{[a]:n});const{kills:i,deaths:o,assists:d}=l[t];return l[t].kda=0===o?(i+d).toFixed(2):((i+d)/o).toFixed(2),1===e?s.team1Players=l:s.team2Players=l,s.maps[s.currentMap]&&(s.maps[s.currentMap].team1Players=s.team1Players,s.maps[s.currentMap].team2Players=s.team2Players),s}));const l=(null===s||void 0===s?void 0:s.player_id)||(null===s||void 0===s?void 0:s.id);if(s&&l){console.log("Sending stat update to backend:",{player_id:l,stat_type:a,value:n,map_index:y.currentMap-1});try{(await fetch("".concat(g,"/api/matches/").concat(o.id,"/live-update"),{method:"POST",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({type:"stats-update",data:{map_index:y.currentMap-1,team:e,player_id:l,stat_type:a,value:n,player_name:s.name},timestamp:(new Date).toISOString()})})).ok||console.error("Failed to update stat")}catch(i){console.error("Error updating stat:",i)}}};return l?(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-4 z-10",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Live Scoring Panel"}),(0,u.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white",children:(0,u.jsx)(ge,{size:24})})]}),(0,u.jsxs)("div",{className:"mt-2 text-sm text-gray-400 flex items-center gap-4",children:[(0,u.jsxs)("span",{children:["Last Update: ",_]}),(0,u.jsxs)("span",{children:["Status: ",y.status]}),(0,u.jsxs)("span",{className:"flex items-center gap-1 ".concat("saving"===C?"text-yellow-400":"saved"===C?"text-green-400":"error"===C?"text-red-400":"text-gray-400"),children:["saving"===C&&"\u23f3 Saving...","saved"===C&&"\u2713 Saved","error"===C&&"\u26a0 Save Failed","idle"===C&&""]})]})]}),(0,u.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,u.jsx)("div",{className:"flex gap-2 flex-wrap",children:Array.from({length:y.totalMaps},((e,t)=>t+1)).map((e=>{const t=y.maps&&y.maps[e]?y.maps[e]:{status:"pending",winner:null};return(0,u.jsxs)("button",{onClick:()=>(async e=>{null!==o&&void 0!==o&&o.id&&(console.log("Switching to map ".concat(e)),f((t=>{const a=c({},t);if(a.maps[a.currentMap]&&(a.maps[a.currentMap].team1Players=[...t.team1Players],a.maps[a.currentMap].team2Players=[...t.team2Players]),a.currentMap=e,a.maps&&a.maps[e]){if(a.team1Score=a.maps[e].team1Score||0,a.team2Score=a.maps[e].team2Score||0,a.team1Players=a.maps[e].team1Players||[],a.team2Players=a.maps[e].team2Players||[],0===a.team1Players.length)for(let e=0;e<6;e++)a.team1Players.push({id:"t1_p".concat(e),name:"Player ".concat(e+1),hero:"",role:"",kills:0,deaths:0,assists:0,damage:0,healing:0,blocked:0,kda:"0.00",isAlive:!0});if(0===a.team2Players.length)for(let e=0;e<6;e++)a.team2Players.push({id:"t2_p".concat(e),name:"Player ".concat(e+1),hero:"",role:"",kills:0,deaths:0,assists:0,damage:0,healing:0,blocked:0,kda:"0.00",isAlive:!0})}return a})),setTimeout((()=>L(!0)),100))})(e),className:"px-3 py-2 rounded text-sm font-medium transition-colors ".concat(y.currentMap===e?"bg-blue-600 text-white shadow-lg":"completed"===t.status?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[t.mapName||"Map ".concat(e),t.winner&&(0,u.jsx)(le,{size:14,className:"text-yellow-400"})]}),"completed"===t.status&&(0,u.jsxs)("div",{className:"text-xs mt-1",children:[t.team1Score,"-",t.team2Score]})]},e)}))})}),(0,u.jsx)("div",{className:"p-4 bg-gray-750",children:(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-blue-400 mb-2",children:(null===o||void 0===o||null===(t=o.team1)||void 0===t?void 0:t.name)||"Team 1"}),(0,u.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,u.jsx)("button",{onClick:()=>O(1,-1),className:"px-3 py-1 bg-red-600 text-white rounded",children:"-"}),(0,u.jsx)("span",{className:"text-3xl font-bold text-white px-4",children:y.team1Score}),(0,u.jsx)("button",{onClick:()=>O(1,1),className:"px-3 py-1 bg-green-600 text-white rounded",children:"+"})]}),(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsx)("span",{className:"text-sm text-gray-400",children:"Series: "}),(0,u.jsx)("span",{className:"text-xl font-bold text-white",children:y.team1SeriesScore})]})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("span",{className:"text-2xl font-bold text-white",children:["Map ",y.currentMap," of ",y.totalMaps]})}),(0,u.jsx)("button",{onClick:()=>{var e,t;const a="".concat(y.team1Score," - ").concat(y.team2Score),r=y.team1Score>y.team2Score?null===o||void 0===o||null===(e=o.team1)||void 0===e?void 0:e.name:y.team2Score>y.team1Score?null===o||void 0===o||null===(t=o.team2)||void 0===t?void 0:t.name:"Draw";window.confirm("End Map ".concat(y.currentMap," with score ").concat(a,"?\nWinner: ").concat(r,"\n\nThis action cannot be undone."))&&f((e=>{const t=c({},e),a=t.maps[t.currentMap];if(a.team1Score>a.team2Score?(a.winner="team1",t.team1SeriesScore++):a.team2Score>a.team1Score&&(a.winner="team2",t.team2SeriesScore++),a.status="completed",t.currentMap<t.totalMaps){t.currentMap++;const e=t.maps[t.currentMap];e.status="active",t.team1Score=e.team1Score,t.team2Score=e.team2Score}return setTimeout((()=>L(!0)),100),t}))},className:"px-6 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",children:"End Current Map"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-red-400 mb-2",children:(null===o||void 0===o||null===(a=o.team2)||void 0===a?void 0:a.name)||"Team 2"}),(0,u.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,u.jsx)("button",{onClick:()=>O(2,-1),className:"px-3 py-1 bg-red-600 text-white rounded",children:"-"}),(0,u.jsx)("span",{className:"text-3xl font-bold text-white px-4",children:y.team2Score}),(0,u.jsx)("button",{onClick:()=>O(2,1),className:"px-3 py-1 bg-green-600 text-white rounded",children:"+"})]}),(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsx)("span",{className:"text-sm text-gray-400",children:"Series: "}),(0,u.jsx)("span",{className:"text-xl font-bold text-white",children:y.team2SeriesScore})]})]})]})}),(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsxs)("button",{onClick:()=>k(!j),className:"flex items-center gap-2 text-white text-lg font-bold",children:[(0,u.jsx)(ke,{className:"transform transition-transform ".concat(j?"rotate-180":"")}),"Player Statistics - Map ",y.currentMap]}),y.currentMap>1&&(0,u.jsxs)("button",{onClick:()=>{y.currentMap<=1||f((e=>{const t=c({},e),a=t.maps[t.currentMap-1];return t.team1Players=(a.team1Players||[]).map((e=>c(c({},e),{},{kills:0,deaths:0,assists:0,damage:0,healing:0,blocked:0,kda:"0.00",isAlive:!0}))),t.team2Players=(a.team2Players||[]).map((e=>c(c({},e),{},{kills:0,deaths:0,assists:0,damage:0,healing:0,blocked:0,kda:"0.00",isAlive:!0}))),t.maps[t.currentMap].team1Players=t.team1Players,t.maps[t.currentMap].team2Players=t.team2Players,setTimeout((()=>L()),100),t}))},className:"px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:["Copy Lineup from Map ",y.currentMap-1]})]}),j&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"bg-blue-900/20 rounded-lg p-4",children:[(0,u.jsxs)("h4",{className:"text-blue-400 font-bold mb-4 flex items-center gap-2",children:[(0,u.jsx)(ne,{size:18}),(null===o||void 0===o||null===(r=o.team1)||void 0===r?void 0:r.name)||"Team 1"," Players"]}),(0,u.jsx)("div",{className:"space-y-3",children:y.team1Players.map(((e,t)=>(0,u.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-3 border border-gray-600",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,u.jsxs)("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-600 flex-shrink-0",children:[e.hero&&(0,u.jsx)("img",{src:U(e.hero),alt:e.hero,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,u.jsx)("div",{className:"w-full h-full bg-gray-600 flex items-center justify-center text-gray-400 text-xs",style:{display:e.hero?"none":"flex"},children:e.hero?e.hero.charAt(0):"?"})]}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"font-medium text-white truncate",children:e.name}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:e.role||"No Role"})]}),(0,u.jsxs)("select",{value:e.hero,onChange:e=>F(1,t,e.target.value),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm",children:[(0,u.jsx)("option",{value:"",children:"Select Hero"}),(0,u.jsx)("optgroup",{label:"Vanguard",children:Ot.Vanguard.filter((e=>"TBD"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("optgroup",{label:"Duelist",children:Ot.Duelist.filter((e=>"TBD"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("optgroup",{label:"Strategist",children:Ot.Strategist.filter((e=>"TBD"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))})]})]}),(0,u.jsx)("div",{className:"grid grid-cols-6 gap-2",children:[{key:"kills",label:"K",color:"text-green-400"},{key:"deaths",label:"D",color:"text-red-400"},{key:"assists",label:"A",color:"text-blue-400"},{key:"damage",label:"DMG",color:"text-orange-400"},{key:"healing",label:"H",color:"text-green-300"},{key:"blocked",label:"B",color:"text-purple-400"}].map((a=>(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("label",{className:"text-xs font-medium ".concat(a.color),children:a.label}),(0,u.jsx)("input",{type:"number",value:e[a.key],onChange:e=>{const r=Math.max(0,parseInt(e.target.value)||0);B(1,t,a.key,r)},className:"w-full bg-gray-600 text-white px-1 py-1 rounded text-sm text-center",min:"0",onKeyDown:e=>{"-"!==e.key&&"e"!==e.key||e.preventDefault()}})]},a.key)))})]},e.id)))})]}),(0,u.jsxs)("div",{className:"bg-red-900/20 rounded-lg p-4",children:[(0,u.jsxs)("h4",{className:"text-red-400 font-bold mb-4 flex items-center gap-2",children:[(0,u.jsx)(ne,{size:18}),(null===o||void 0===o||null===(n=o.team2)||void 0===n?void 0:n.name)||"Team 2"," Players"]}),(0,u.jsx)("div",{className:"space-y-3",children:y.team2Players.map(((e,t)=>(0,u.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-3 border border-gray-600",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,u.jsxs)("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-600 flex-shrink-0",children:[e.hero&&(0,u.jsx)("img",{src:U(e.hero),alt:e.hero,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,u.jsx)("div",{className:"w-full h-full bg-gray-600 flex items-center justify-center text-gray-400 text-xs",style:{display:e.hero?"none":"flex"},children:e.hero?e.hero.charAt(0):"?"})]}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"font-medium text-white truncate",children:e.name}),(0,u.jsx)("div",{className:"text-sm text-gray-400",children:e.role||"No Role"})]}),(0,u.jsxs)("select",{value:e.hero,onChange:e=>F(2,t,e.target.value),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm",children:[(0,u.jsx)("option",{value:"",children:"Select Hero"}),(0,u.jsx)("optgroup",{label:"Vanguard",children:Ot.Vanguard.filter((e=>"TBD"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("optgroup",{label:"Duelist",children:Ot.Duelist.filter((e=>"TBD"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("optgroup",{label:"Strategist",children:Ot.Strategist.filter((e=>"TBD"!==e)).map((e=>(0,u.jsx)("option",{value:e,children:e},e)))})]})]}),(0,u.jsx)("div",{className:"grid grid-cols-6 gap-2",children:[{key:"kills",label:"K",color:"text-green-400"},{key:"deaths",label:"D",color:"text-red-400"},{key:"assists",label:"A",color:"text-blue-400"},{key:"damage",label:"DMG",color:"text-orange-400"},{key:"healing",label:"H",color:"text-green-300"},{key:"blocked",label:"B",color:"text-purple-400"}].map((a=>(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("label",{className:"text-xs font-medium ".concat(a.color),children:a.label}),(0,u.jsx)("input",{type:"number",value:e[a.key],onChange:e=>{const r=Math.max(0,parseInt(e.target.value)||0);B(2,t,a.key,r)},className:"w-full bg-gray-600 text-white px-1 py-1 rounded text-sm text-center",min:"0",onKeyDown:e=>{"-"!==e.key&&"e"!==e.key||e.preventDefault()}})]},a.key)))})]},e.id)))})]})]})]})]})}):null};const qt=function(e){let{itemType:t,itemId:a,initialUpvotes:r=0,initialDownvotes:n=0,userVote:l=null,onVoteChange:i=null,size:o="sm",direction:d="horizontal"}=e;const{api:c,user:m,isAuthenticated:x}=b(),[h,g]=(0,s.useState)(r),[p,v]=(0,s.useState)(n),[y,f]=(0,s.useState)(l),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),_=(0,s.useRef)(!1),S={xs:"p-1 text-xs min-h-[36px] min-w-[36px]",sm:"p-1.5 text-sm min-h-[40px] min-w-[40px]",md:"p-2 text-base min-h-[44px] min-w-[44px]",lg:"p-3 text-lg min-h-[48px] min-w-[48px]"},C=(0,s.useCallback)((async()=>{if("post"!==t&&"match-comment"!==t){if(x&&"thread"===t)try{var e;const t="/forums/threads/".concat(a),i=await c.get(t),o=(null===(e=i.data)||void 0===e?void 0:e.data)||i.data;if(o){var s,l;if(!_.current)g((null===(s=o.stats)||void 0===s?void 0:s.upvotes)||o.upvotes||r),v((null===(l=o.stats)||void 0===l?void 0:l.downvotes)||o.downvotes||n),f(o.user_vote||null);N(!0)}}catch(i){console.warn("Could not fetch thread vote state:",i),N(!0)}}else N(!0)}),[c,t,a,x,r,n]);(0,s.useEffect)((()=>{C()}),[C]),(0,s.useEffect)((()=>{const e=()=>{console.log("Connection restored - refreshing vote state"),N(!1),_.current=!1,C()};return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}}),[C]);const E=(0,s.useRef)(a),[T,A]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(E.current!==a)g(r),v(n),f(l),N(!1),_.current=!1,E.current=a,A(!0);else if(T){if(!_.current&&(h!==r||p!==n))return}else g(r),v(n),f(l),A(!0)}),[a,r,n,l,T]),(0,s.useEffect)((()=>{console.log("ForumVotingButtons state: itemId=".concat(a,", upvotes=").concat(h,", downvotes=").concat(p,", currentVote=").concat(y,", hasVoted=").concat(_.current))}),[h,p,y,a]);const M=async e=>{if(!x)return void alert("Please log in to vote");if(j)return;k(!0);const r=h,s=p,n=y,l=document.querySelector('[data-vote-type="'.concat(e,'"]'));l&&l.classList.add("animate-pulse");try{let l;if("thread"===t)l="/forums/threads/".concat(a,"/vote");else if("post"===t)l="/forums/posts/".concat(a,"/vote");else{if("match-comment"!==t)throw new Error("Unknown item type: ".concat(t));l="/match-comments/".concat(a,"/vote")}const d=y===e,m={vote_type:e},u=await c.post(l,m);if(console.log("Forum vote raw response:",u),!1!==(null===u||void 0===u?void 0:u.success)){const t=(null===u||void 0===u?void 0:u.vote_counts)||(null===u||void 0===u?void 0:u.updated_stats)||(null===u||void 0===u?void 0:u.stats),a=null===u||void 0===u?void 0:u.user_vote,l=(null===u||void 0===u?void 0:u.action)||"voted";if(console.log("Extracted from response:",{serverCounts:t,serverUserVote:a,action:l}),_.current=!0,t&&"object"===typeof t){const e=parseInt(t.upvotes)||0,a=parseInt(t.downvotes)||0;console.log("Vote response - Setting counts: upvotes=".concat(e,", downvotes=").concat(a)),g(e),v(a)}else console.warn("No valid server counts in response, response was:",u),"removed"===l?("upvote"===n?g(Math.max(0,r-1)):"downvote"===n&&v(Math.max(0,s-1)),f(null)):"updated"!==l&&"voted"!==l||(d?("upvote"===e?g(Math.max(0,r-1)):v(Math.max(0,s-1)),f(null)):n?("upvote"===e?(g(r+1),v(Math.max(0,s-1))):(v(s+1),g(Math.max(0,r-1))),f(e)):("upvote"===e?g(r+1):v(s+1),f(e)));if(f(void 0!==a?a:"removed"===l?null:e),i){const e=t||{upvotes:(null===t||void 0===t?void 0:t.upvotes)||h,downvotes:(null===t||void 0===t?void 0:t.downvotes)||p,score:((null===t||void 0===t?void 0:t.upvotes)||h)-((null===t||void 0===t?void 0:t.downvotes)||p)};i({action:l,vote_counts:e,user_vote:void 0!==a?a:y})}}else{var o;const e=(null===(o=u.data)||void 0===o?void 0:o.message)||"Vote request failed";console.warn("Vote request unsuccessful:",e),alert(e)}}catch(S){var d;if(console.error("Vote request error:",S),409===(null===(d=S.response)||void 0===d?void 0:d.status))return;{var m,u,b;let e="Failed to record vote";if(401===(null===(m=S.response)||void 0===m?void 0:m.status))e="Please log in to vote";else if(403===(null===(u=S.response)||void 0===u?void 0:u.status))e="You do not have permission to vote on this item";else if(404===(null===(b=S.response)||void 0===b?void 0:b.status))e="This item no longer exists or has been deleted";else{var w,N;const t=(null===(w=S.response)||void 0===w||null===(N=w.data)||void 0===N?void 0:N.message)||S.message;t&&"string"===typeof t&&(e=t)}alert(e)}}finally{k(!1);const t=document.querySelector('[data-vote-type="'.concat(e,'"]'));t&&t.classList.remove("animate-pulse")}},P=()=>h-p,R=()=>{const e=P();return e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"};return"vertical"===d?(0,u.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,u.jsx)("button",{onClick:()=>M("upvote"),disabled:j,"data-vote-type":"upvote",className:"".concat(S[o]," rounded transition-all duration-200 flex items-center justify-center touch-manipulation ").concat("upvote"===y?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 transform scale-110 shadow-lg":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-green-600 dark:hover:text-green-400 active:scale-95"," ").concat(j?"opacity-50 cursor-not-allowed":"hover:shadow-md"),style:{WebkitTapHighlightColor:"rgba(34, 197, 94, 0.1)"},title:"Upvote",children:(0,u.jsx)("span",{children:"\ud83d\udc4d"})}),(0,u.jsx)("span",{className:"text-xs font-medium ".concat(R()),children:P()}),(0,u.jsx)("button",{onClick:()=>M("downvote"),disabled:j,"data-vote-type":"downvote",className:"".concat(S[o]," rounded transition-all duration-200 flex items-center justify-center touch-manipulation ").concat("downvote"===y?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 transform scale-110 shadow-lg":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 active:scale-95"," ").concat(j?"opacity-50 cursor-not-allowed":"hover:shadow-md"),style:{WebkitTapHighlightColor:"rgba(239, 68, 68, 0.1)"},title:"Downvote",children:(0,u.jsx)("span",{children:"\ud83d\udc4e"})})]}):(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsxs)("button",{onClick:()=>M("upvote"),disabled:j,"data-vote-type":"upvote",className:"".concat(S[o]," rounded transition-all duration-200 flex items-center justify-center space-x-1 touch-manipulation ").concat("upvote"===y?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 transform scale-105 shadow-lg":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-green-600 dark:hover:text-green-400 active:scale-95"," ").concat(j?"opacity-50 cursor-not-allowed":"hover:shadow-md"),style:{WebkitTapHighlightColor:"rgba(34, 197, 94, 0.1)"},title:"Upvote",children:[(0,u.jsx)("span",{children:"\ud83d\udc4d"}),(0,u.jsx)("span",{className:"text-xs font-medium",children:h})]}),"xs"!==o&&(0,u.jsx)("span",{className:"text-xs font-medium px-2 ".concat(R()),children:P()>0?"+".concat(P()):P()}),(0,u.jsxs)("button",{onClick:()=>M("downvote"),disabled:j,"data-vote-type":"downvote",className:"".concat(S[o]," rounded transition-all duration-200 flex items-center justify-center space-x-1 touch-manipulation ").concat("downvote"===y?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 transform scale-105 shadow-lg":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 active:scale-95"," ").concat(j?"opacity-50 cursor-not-allowed":"hover:shadow-md"),style:{WebkitTapHighlightColor:"rgba(239, 68, 68, 0.1)"},title:"Downvote",children:[(0,u.jsx)("span",{children:"\ud83d\udc4e"}),(0,u.jsx)("span",{className:"text-xs font-medium",children:p})]})]})},Gt=se("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]),Yt=se("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Zt=se("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Kt=se("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),Jt=e=>{let{matchId:t,navigateTo:a}=e;const{isAuthenticated:r,isAdmin:n,isModerator:l,api:i,user:o}=b(),[d,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0),[g,p]=(0,s.useState)(""),[v,y]=(0,s.useState)(null),[f,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null),[N,_]=(0,s.useState)(""),[S,C]=(0,s.useState)(1),[E,T]=(0,s.useState)(!1),[A,M]=(0,s.useState)(0),[P,R]=(0,s.useState)(null),I=e=>"string"===typeof e?e:null===e||void 0===e?"":"object"===typeof e?e.message?e.message:e.error&&"string"===typeof e.error?e.error:e.content?String(e.content):"":String(e),D=(0,s.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{h(!0);const a=(new Date).getTime(),r=await i.get("/matches/".concat(t,"/comments?page=").concat(e,"&per_page=20&t=").concat(a),{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),s=r.data||r,n=s.data||[],l=s.meta||{};m(1===e?n:e=>[...e,...n]),T(l.has_more_pages||!1),M(l.total||n.length),C(e),R(l.match||null)}catch(a){console.error("\u274c MatchComments: Failed to load comments:",a),1===e&&m([])}finally{h(!1)}}),[i,t]);(0,s.useEffect)((()=>{D()}),[D]);const L=e=>{if(!e)return"Unknown";const t=new Date(e);if(isNaN(t.getTime()))return"Unknown";const a=new Date,r=Math.floor((a-t)/36e5);if(r<1)return"Just now";if(r<24)return"".concat(r,"h");if(r<48)return"Yesterday";const s=Math.floor(r/24);if(s<30)return"".concat(s,"d");const n=Math.floor(s/30);if(n<12)return"".concat(n,"mo");const l=Math.floor(n/12);return"".concat(l,"y")},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=I(e);if(!r||"string"!==typeof r)return null;const s={};Array.isArray(t)&&t.forEach((e=>{if("object"===typeof e&&null!==e){const t=I(e.mention_text);t&&(s[t]=c(c({},e),{},{type:I(e.type)||"user",id:e.id||"",name:I(e.name)||"",display_name:I(e.display_name)||I(e.name)||"",username:I(e.username)||"",team_name:I(e.team_name)||"",player_name:I(e.player_name)||""}))}}));const n=/(@[a-zA-Z0-9_]+|@team:[a-zA-Z0-9_]+|@player:[a-zA-Z0-9_]+)/g;return r.split(n).map(((e,t)=>{const r=s[e];return r&&r.id?(0,u.jsx)(st,{mention:r,navigateTo:a,onClick:e=>{const t={player:()=>a("player-detail",{id:e.id}),team:()=>a("team-detail",{id:e.id}),user:()=>a("user-profile",{id:e.id})};t[e.type]&&t[e.type]()}},t):e.match(n)?(0,u.jsx)("span",{className:"inline-flex items-center font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 cursor-pointer",title:"Mention",children:e},t):e}))},z=async e=>{e.preventDefault();const a=I(g);if(!a.trim()||f)return;if(null!==v&&void 0!==v&&v.id&&v.id.toString().startsWith("temp-"))return void alert("Please wait for the comment to be created before replying to it.");const r=[...d];try{var s;j(!0);const e={id:"temp-".concat(Date.now()),content:I(a.trim()),author:c(c({},o),{},{name:I(null===o||void 0===o?void 0:o.name),username:I(null===o||void 0===o?void 0:o.username),email:I(null===o||void 0===o?void 0:o.email),id:(null===o||void 0===o?void 0:o.id)||null,avatar_url:I(null===o||void 0===o?void 0:o.avatar_url)}),meta:{created_at:(new Date).toISOString()},is_temp:!0,upvotes:0,downvotes:0,user_vote:null,mentions:[],stats:{upvotes:0,downvotes:0},replies:[]};m(v?t=>t.map((t=>t.id===v.id?c(c({},t),{},{replies:[...t.replies||[],e]}):t)):t=>[...t,e]);const d={content:I(a.trim()),parent_id:(null===v||void 0===v?void 0:v.id)||null},g=await i.post("/matches/".concat(t,"/comments"),d);if(201===g.status||!0===(null===(s=g.data)||void 0===s?void 0:s.success)||g.data&&!g.data.error&&g.data.comment){p(""),y(null);const t=g.data.comment||g.data.data||g.data;if(t&&(I(t.content)||t.id)){var n,l,u,x,h;const a=c(c({},t),{},{content:I(t.content),author:c(c({},t.author),{},{name:I(null===(n=t.author)||void 0===n?void 0:n.name),username:I(null===(l=t.author)||void 0===l?void 0:l.username),id:(null===(u=t.author)||void 0===u?void 0:u.id)||null,email:I(null===(x=t.author)||void 0===x?void 0:x.email),avatar_url:I(null===(h=t.author)||void 0===h?void 0:h.avatar_url)}),mentions:Array.isArray(t.mentions)?t.mentions.map((e=>"object"===typeof e&&null!==e?c(c({},e),{},{mention_text:I(e.mention_text),name:I(e.name),display_name:I(e.display_name),type:I(e.type),id:e.id||null,username:I(e.username),team_name:I(e.team_name),player_name:I(e.player_name)}):{mention_text:I(e),name:I(e),display_name:I(e),type:"user",id:null})):[],meta:t.meta||{},stats:t.stats||{},upvotes:t.upvotes||0,downvotes:t.downvotes||0,user_vote:t.user_vote||null,replies:Array.isArray(t.replies)?t.replies:[]});m(v?t=>t.map((t=>t.id===v.id?c(c({},t),{},{replies:t.replies.map((t=>t.id===e.id?a:t))}):t)):t=>t.map((t=>t.id===e.id?a:t))),M((e=>e+1))}else await D(1);const a=document.createElement("div");a.textContent="\u2705 Comment posted successfully",a.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",document.body.appendChild(a),setTimeout((()=>document.body.removeChild(a)),3e3)}else{var b,k;m(r),console.error("\u274c Comment submission failed:",g.data);const e=(null===(b=g.data)||void 0===b?void 0:b.message)||(null===(k=g.data)||void 0===k?void 0:k.error)||"Failed to submit comment. Please try again.";alert(e)}}catch(_){var w,N;console.error("\u274c Failed to submit comment:",_),m(r);let e="Failed to submit comment. Please try again.";const t=St(_);t.includes("401")||401===(null===(w=_.response)||void 0===w?void 0:w.status)?e="Please log in again to post comments.":t.includes("403")||403===(null===(N=_.response)||void 0===N?void 0:N.status)?e="You do not have permission to comment on this match.":"An unknown error occurred"!==t&&(e=t),alert(e)}finally{j(!1)}},O=function(e){var t,a,s,x,h,b,S;let C=arguments.length>1&&void 0!==arguments[1]&&arguments[1],E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const T=e.replies&&e.replies.length>0&&E<3,A=C?{marginLeft:"".concat(Math.min(2*E,6),"rem")}:{};return(0,u.jsx)("div",{className:"".concat(C?"pl-4 border-l-2 border-gray-200 dark:border-gray-700":""," py-4 ").concat(E>0?"bg-gray-50/50 dark:bg-gray-800/50 rounded-lg":""),style:A,children:(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,u.jsx)(Qe,{user:e.author,showAvatar:!0,showHeroFlair:!0,showTeamFlair:!0,size:"sm",clickable:!1}),(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-500",children:L((null===(t=e.meta)||void 0===t?void 0:t.created_at)||e.created_at)}),e.is_temp&&(0,u.jsxs)("span",{className:"text-xs text-blue-500 dark:text-blue-400 flex items-center",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-1"}),"Posting..."]}),e.is_edited&&!e.is_temp&&(0,u.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-600",children:["(edited ",L((null===(a=e.meta)||void 0===a?void 0:a.updated_at)||e.edited_at),")"]}),!e.is_temp&&(0,u.jsx)(qt,{itemType:"match-comment",itemId:e.id,initialUpvotes:(null===(s=e.stats)||void 0===s?void 0:s.upvotes)||e.upvotes||0,initialDownvotes:(null===(x=e.stats)||void 0===x?void 0:x.downvotes)||e.downvotes||0,userVote:e.user_vote,direction:"horizontal",size:"xs",onVoteChange:t=>{m((a=>a.map((a=>{var r,s,n,l,i,o;return a.id===e.id?c(c({},a),{},{stats:c(c({},a.stats),{},{upvotes:(null===(r=t.vote_counts)||void 0===r?void 0:r.upvotes)||(null===(s=a.stats)||void 0===s?void 0:s.upvotes)||0,downvotes:(null===(n=t.vote_counts)||void 0===n?void 0:n.downvotes)||(null===(l=a.stats)||void 0===l?void 0:l.downvotes)||0}),upvotes:(null===(i=t.vote_counts)||void 0===i?void 0:i.upvotes)||a.upvotes||0,downvotes:(null===(o=t.vote_counts)||void 0===o?void 0:o.downvotes)||a.downvotes||0,user_vote:t.user_vote}):a}))))}})]}),(0,u.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-4",children:Ct(e.content).split("\n").map(((t,a)=>(0,u.jsx)("p",{className:"mb-2 last:mb-0",children:U(I(t),e.mentions||[])},a)))}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[r&&!e.is_temp&&(0,u.jsxs)("button",{onClick:()=>y(e),className:"text-xs text-gray-500 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors flex items-center gap-1",children:[(0,u.jsx)(Gt,{className:"w-3 h-3"}),"Reply"]}),((null===(h=e.author)||void 0===h?void 0:h.id)===(null===o||void 0===o?void 0:o.id)||n()||l())&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{onClick:()=>(e=>{w(e),_(e.content)})(e),className:"text-xs text-gray-500 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors flex items-center gap-1",children:[(0,u.jsx)(Yt,{className:"w-3 h-3"}),"Edit"]}),(0,u.jsxs)("button",{onClick:()=>(async e=>{if(!window.confirm("Are you sure you want to delete this comment?"))return;const t=[...d];try{var a;j(!0);const r=d.map((t=>{if(t.id===e)return null;if(t.replies&&t.replies.length>0){const a=t.replies.filter((t=>t.id!==e));return c(c({},t),{},{replies:a})}return t})).filter((e=>null!==e));m(r);const s=await i.delete("/match-comments/".concat(e));if(null!==(a=s.data)&&void 0!==a&&a.success||s.success){console.log("\u2705 Comment deleted successfully"),M((e=>Math.max(0,e-1)));const e=document.createElement("div");e.textContent="\u2705 Comment deleted successfully",e.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",document.body.appendChild(e),setTimeout((()=>document.body.removeChild(e)),3e3)}else console.warn("\u26a0\ufe0f Delete request did not return success, rolling back"),m(t),alert("Failed to delete comment. Please try again.")}catch(l){var r,s,n;console.error("\u274c Failed to delete comment:",l),m(t);let e="Failed to delete comment. Please try again.";const a=St(l);a.includes("403")||403===(null===(r=l.response)||void 0===r?void 0:r.status)?e="You do not have permission to delete this comment.":a.includes("404")||404===(null===(s=l.response)||void 0===s?void 0:s.status)?e="Comment not found or already deleted.":a.includes("401")||401===(null===(n=l.response)||void 0===n?void 0:n.status)?e="Please log in again to delete comments.":"An unknown error occurred"!==a&&(e=a),alert(e)}finally{j(!1)}})(e.id),disabled:f,className:"text-xs transition-colors flex items-center gap-1 ".concat(f?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-500 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400"),children:[(0,u.jsx)(Zt,{className:"w-3 h-3"}),f?"Deleting...":"Delete"]})]})]}),(null===v||void 0===v?void 0:v.id)===e.id&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded",children:(0,u.jsxs)("form",{onSubmit:z,children:[(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Replying to @",(null===(b=e.author)||void 0===b?void 0:b.username)||(null===(S=e.author)||void 0===S?void 0:S.name)]}),(0,u.jsx)("button",{type:"button",onClick:()=>y(null),className:"ml-2 text-xs text-red-600 dark:text-red-400 hover:underline",children:"Cancel"})]}),(0,u.jsx)(rt,{value:g,onChange:e=>{p(e)},placeholder:"Write your reply... (Type @ to mention teams and players)",rows:3,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400 focus:border-transparent"}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,u.jsx)("button",{type:"button",onClick:()=>y(null),className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:!I(g).trim()||f,className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Posting...":"Reply"})]})]})}),(null===k||void 0===k?void 0:k.id)===e.id&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700",children:(0,u.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async e=>{const t=I(N);if(t.trim())try{var a;j(!0),null!==(a=(await i.put("/match-comments/".concat(e),{content:t.trim()})).data)&&void 0!==a&&a.success?(w(null),_(""),await D(1)):alert("Failed to edit comment. Please try again.")}catch(r){console.error("\u274c Failed to edit comment:",r),alert("Failed to edit comment. Please try again.")}finally{j(!1)}})(e.id)},children:[(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Editing comment"}),(0,u.jsx)("button",{type:"button",onClick:()=>{w(null),_("")},className:"ml-2 text-xs text-red-600 dark:text-red-400 hover:underline",children:"Cancel"})]}),(0,u.jsx)("textarea",{value:N,onChange:e=>{var t;const a="string"===typeof e?e:(null===(t=e.target)||void 0===t?void 0:t.value)||"";_(a)},placeholder:"Edit your comment...",rows:4,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{w(null),_("")},className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:!I(N).trim()||f,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Saving...":"Save Changes"})]})]})}),T&&(0,u.jsx)("div",{className:"mt-4 space-y-2",children:e.replies.map((e=>O(e,!0,E+1)))}),e.replies&&e.replies.length>0&&E>=3&&(0,u.jsx)("div",{className:"mt-3 ml-4",children:(0,u.jsxs)("button",{className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:["View ",e.replies.length," more ",1===e.replies.length?"reply":"replies","..."]})})]})},e.id)};return x&&0===d.length?(0,u.jsx)("div",{className:"card p-6",children:(0,u.jsxs)("div",{className:"text-center py-8",children:[(0,u.jsx)("div",{className:"text-2xl mb-4",children:"\ud83d\udcac"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading comments..."})]})}):(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)(Kt,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Match Discussion"}),(0,u.jsxs)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:[A," ",1===A?"comment":"comments"]})]}),P&&(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:[P.team1," vs ",P.team2]})]}),r&&!v&&(0,u.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Share Your Thoughts"}),(0,u.jsxs)("form",{onSubmit:z,children:[(0,u.jsx)(rt,{value:g,onChange:p,placeholder:"What did you think of this match? (Type @ to mention teams and players)",rows:4,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400 focus:border-transparent"}),(0,u.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Use @ for users, @team: for teams, @player: for players"}),(0,u.jsx)("button",{type:"submit",disabled:!I(g).trim()||f,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Posting...":"Post Comment"})]})]})]}),!r&&(0,u.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Join the Discussion"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sign in to share your thoughts on this match."}),(0,u.jsx)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("mrvl-show-auth-modal")),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign In to Comment"})]})]}),d.length>0&&(0,u.jsx)("div",{className:"space-y-4",children:d.map((e=>(0,u.jsx)("div",{className:"card p-6",children:O(e,!1,0)},e.id)))}),E&&(0,u.jsx)("div",{className:"text-center",children:(0,u.jsx)("button",{onClick:()=>D(S+1),disabled:x,className:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Loading...":"Load More Comments"})}),!x&&0===d.length&&(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)(Kt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Comments Yet"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Be the first to share your thoughts on this match!"}),r&&(0,u.jsx)("button",{onClick:()=>{const e=document.querySelector('textarea[placeholder*="What did you think"]');e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"center"}))},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Write First Comment"})]})]})};class Qt extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("MatchDetail Error:",e,t)}render(){return this.state.hasError?(0,u.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md",children:[(0,u.jsx)("h2",{className:"text-white text-xl mb-4",children:"Error Loading Match"}),(0,u.jsx)("p",{className:"text-gray-300 mb-4",children:"Failed to load match details. Please try refreshing the page."}),(0,u.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Refresh Page"})]})}):this.props.children}}function Xt(e){var t,a,r,n,l,i,o,d,m,x,h,g,p,v,y,f,j,k,w,N,E,T,A,M,P,I,D,L,U,z,O,F,B,W,H,V,q,G,Y,Z,K,J,Q,X,$,ee,te,ae,re,se,ne,le,ie,oe,de,ce,me,ue;let{matchId:xe,navigateTo:he}=e;const[ge,pe]=(0,s.useState)({}),[ve,ye]=(0,s.useState)({}),[be,fe]=(0,s.useState)(null),[je,ke]=(0,s.useState)(!0),[we,Ne]=(0,s.useState)(0),[_e,Se]=(0,s.useState)(null),Ce=(0,s.useRef)(0);(0,s.useEffect)((()=>{Ce.current=we}),[we]),(0,s.useEffect)((()=>{const e=e=>{e.target.closest(".hero-menu-container")||ye({})};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[]),(0,s.useEffect)((()=>{var e;console.log("MatchDetailPage: Current map changed to index ".concat(we)),null!==be&&void 0!==be&&null!==(e=be.maps)&&void 0!==e&&e[we]&&console.log("MatchDetailPage: Current map data:",be.maps[we])}),[we,null===be||void 0===be?void 0:be.maps]);const[Ee,Te]=(0,s.useState)(!1),[Ae,Me]=(0,s.useState)("disconnected"),Pe=(0,s.useRef)(null),{user:Re,isAuthenticated:Ie,api:De}=b(),Le=(0,s.useCallback)((e=>{if(!e||0===e.length)return{team1Score:0,team2Score:0};let t=0,a=0;return e.forEach((e=>{e&&("completed"===e.status||e.team1_score>0||e.team2_score>0)&&(e.team1_score>e.team2_score?t++:e.team2_score>e.team1_score&&a++)})),{team1Score:t,team2Score:a}}),[]),Ue=(0,s.useCallback)((e=>{console.log("MatchDetailPage: Handling match update:",e),fe((t=>t?c(c(c({},t),e),{},{team1:e.team1||t.team1,team2:e.team2||t.team2,maps:e.maps||t.maps,team1_score:void 0!==e.team1_score?e.team1_score:t.team1_score,team2_score:void 0!==e.team2_score?e.team2_score:t.team2_score,status:e.status||t.status}):t))}),[]),ze=(0,s.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";const a=e.data||e;a&&(console.log("\ud83d\udd04 Live update received:",{source:t,hasData:!!a.data,hasMaps:!!a.maps}),fe((e=>{var t,r;if(!e)return e;const s=c(c({},e),{},{team1:a.team1?c(c(c({},e.team1),a.team1),{},{players:a.team1.players||e.team1.players}):e.team1,team2:a.team2?c(c(c({},e.team2),a.team2),{},{players:a.team2.players||e.team2.players}):e.team2,team1_score:void 0!==(null===(t=a.data)||void 0===t?void 0:t.team1_score)?a.data.team1_score:void 0!==a.team1_score?a.team1_score:e.team1_score,team2_score:void 0!==(null===(r=a.data)||void 0===r?void 0:r.team2_score)?a.data.team2_score:void 0!==a.team2_score?a.team2_score:e.team2_score,maps:(t=>{const r=(null===(t=a.data)||void 0===t?void 0:t.maps)||a.maps;if(r&&Array.isArray(r))return console.log("\ud83d\uddfa\ufe0f Updating maps from server:",r.length),r.map(((t,a)=>{var r,s,n,l,i,o,d,m,u,x,h;return c(c(c({},null===(r=e.maps)||void 0===r?void 0:r[a]),t),{},{map_name:t.map_name||(null===(s=e.maps)||void 0===s||null===(n=s[a])||void 0===n?void 0:n.map_name)||"Map ".concat(a+1),team1_composition:t.team1_composition||t.team1_players||(null===(l=e.maps)||void 0===l||null===(i=l[a])||void 0===i?void 0:i.team1_composition)||[],team2_composition:t.team2_composition||t.team2_players||(null===(o=e.maps)||void 0===o||null===(d=o[a])||void 0===d?void 0:d.team2_composition)||[],team1_players:t.team1_players||t.team1_composition||(null===(m=e.maps)||void 0===m||null===(u=m[a])||void 0===u?void 0:u.team1_players)||[],team2_players:t.team2_players||t.team2_composition||(null===(x=e.maps)||void 0===x||null===(h=x[a])||void 0===h?void 0:h.team2_players)||[]})}));if((a.team1_players||a.team2_players||a.team1_composition||a.team2_composition)&&e.maps){const t=[...e.maps],r=a.current_map_number?a.current_map_number-1:Ce.current;return console.log("\ud83d\udcca Updating map ".concat(r+1," player compositions")),t[r]&&(t[r]=c(c({},t[r]),{},{team1_composition:a.team1_composition||a.team1_players||t[r].team1_composition,team2_composition:a.team2_composition||a.team2_players||t[r].team2_composition,team1_players:a.team1_players||a.team1_composition||t[r].team1_players,team2_players:a.team2_players||a.team2_composition||t[r].team2_players,team1_score:void 0!==a.map_team1_score?a.map_team1_score:t[r].team1_score,team2_score:void 0!==a.map_team2_score?a.map_team2_score:t[r].team2_score})),t}return e.maps})(),status:a.status||e.status,current_map:a.current_map||a.currentMap||a.current_map_number||e.current_map,current_map_number:a.current_map_number||a.current_map||e.current_map_number,updated_at:(new Date).toISOString(),live_update_timestamp:Date.now()});return console.log("\u2705 Match updated with live data"),s})),console.log("Map switch check:",{isMapSwitch:a.isMapSwitch,current_map:a.current_map,current_map_number:a.current_map_number,currentMapIndexRef:Ce.current}),!0===a.isMapSwitch&&(a.current_map_number&&a.current_map_number!==Ce.current+1?(console.log("\ud83d\uddfa\ufe0f Switching to map ".concat(a.current_map_number)),Ne(a.current_map_number-1)):a.current_map&&a.current_map!==Ce.current+1&&(console.log("\ud83d\uddfa\ufe0f Switching to map ".concat(a.current_map)),Ne(a.current_map-1))))}),[]);(0,s.useEffect)((()=>{const e=Oe();if(e&&be){console.log("\ud83d\udd14 MatchDetailPage subscribing to efficient live updates for match ".concat(e));const t=Ht.subscribe(e,ze);return Pe.current=t,Me("connected"),()=>{console.log("\ud83d\udd15 MatchDetailPage unsubscribing from live updates for match ".concat(e)),Pe.current&&(Pe.current(),Pe.current=null),Me("disconnected")}}}),[null===be||void 0===be?void 0:be.id,ze]),(0,s.useEffect)((()=>()=>{Pe.current&&(Pe.current(),Pe.current=null)}),[]);const Oe=()=>{if(xe)return xe;const e=window.location.pathname.split("/"),t=e.indexOf("match");return-1!==t&&e[t+1]?e[t+1]:null};if((0,s.useEffect)((()=>{(async()=>{const e=Oe();if(e)try{console.log("MatchDetailPage: Loading match data for ID:",e);const C=await De.get("/matches/".concat(e)),E=(null===C||void 0===C?void 0:C.data)||C;console.log("MatchDetailPage: Loaded match data:",E);const T=new URLSearchParams(window.location.hash.split("?")[1]||"").get("map");if(T){const e=parseInt(T)-1;e>=0&&(console.log("MatchDetailPage: Setting initial map from URL parameter:",T),Ne(e),setTimeout((()=>{const e=document.querySelector(".match-statistics-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),500))}let A;if(E.data?A=E.data:E.match?A=E.match:E.id&&(A=E),A){var t,a,r,s,n,l,i,o,d,m,u,x,h,g,p,v,y,b,f,j,k,w,N,_,S;const e=(null===(t=A.score)||void 0===t?void 0:t.maps)||A.maps_data||A.maps||[],C=Le(e),T=void 0!==A.team1_score&&null!==A.team1_score||void 0!==(null===(a=A.score)||void 0===a?void 0:a.team1)&&null!==(null===(r=A.score)||void 0===r?void 0:r.team1);console.log("\ud83c\udfc6 Match loading - Explicit score:",T,"Calculated score:",C);const M=c(c({},A),{},{team1_score:null!==(s=null!==(n=null!==(l=A.team1_score)&&void 0!==l?l:A.series_score_team1)&&void 0!==n?n:null===(i=A.score)||void 0===i?void 0:i.team1)&&void 0!==s?s:T?0:C.team1Score,team2_score:null!==(o=null!==(d=null!==(m=A.team2_score)&&void 0!==m?m:A.series_score_team2)&&void 0!==d?d:null===(u=A.score)||void 0===u?void 0:u.team2)&&void 0!==o?o:T?0:C.team2Score,series_score_team1:null!==(x=null!==(h=A.series_score_team1)&&void 0!==h?h:A.team1_score)&&void 0!==x?x:0,series_score_team2:null!==(g=null!==(p=A.series_score_team2)&&void 0!==p?p:A.team2_score)&&void 0!==g?g:0,team1:E.team1||A.team1||null,team2:E.team2||A.team2||null,maps:e,stream_url:(null===(v=A.broadcast)||void 0===v||null===(y=v.streams)||void 0===y?void 0:y[0])||A.stream_url,betting_url:(null===(b=A.broadcast)||void 0===b||null===(f=b.betting)||void 0===f?void 0:f[0])||A.betting_url,vod_url:(null===(j=A.broadcast)||void 0===j||null===(k=j.vods)||void 0===k?void 0:k[0])||A.vod_url,broadcast:A.broadcast||{streams:A.stream_url?[A.stream_url]:[],betting:A.betting_url?[A.betting_url]:[],vods:A.vod_url?[A.vod_url]:[]},status:(null===(w=A.match_info)||void 0===w?void 0:w.status)||A.status||"upcoming",format:A.format||"BO3",current_map:(null===(N=A.match_info)||void 0===N?void 0:N.current_map)||A.current_map||1,event:A.event||null,scheduled_at:(null===(_=A.match_info)||void 0===_?void 0:_.scheduled_at)||A.scheduled_at,round:A.round||(null===(S=A.match_info)||void 0===S?void 0:S.round)||null});console.log("MatchDetailPage: Transformed match data:",M),fe(M),console.log("Match loaded. Live updates enabled via LiveScoreSync for status:",M.status)}}catch(C){console.error("MatchDetailPage: Error loading match:",C)}finally{ke(!1)}else ke(!1)})()}),[xe,De,Le]),je)return(0,u.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,u.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading match..."})});if(!be)return(0,u.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,u.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Match not found"})});const Fe=(null===(t=be.maps)||void 0===t||null===(a=t[we])||void 0===a?void 0:a.team1_composition)||(null===(r=be.maps)||void 0===r||null===(n=r[we])||void 0===n?void 0:n.team1_players)||(null===(l=be.team1)||void 0===l?void 0:l.players)||(null===(i=be.team1)||void 0===i?void 0:i.roster)||[],Be=(null===(o=be.maps)||void 0===o||null===(d=o[we])||void 0===d?void 0:d.team2_composition)||(null===(m=be.maps)||void 0===m||null===(x=m[we])||void 0===x?void 0:x.team2_players)||(null===(h=be.team2)||void 0===h?void 0:h.players)||(null===(g=be.team2)||void 0===g?void 0:g.roster)||[];console.log("Map switching debug:",{currentMapIndex:we,mapData:null===(p=be.maps)||void 0===p?void 0:p[we],hasComposition:!(null===(v=be.maps)||void 0===v||null===(y=v[we])||void 0===y||!y.team1_composition),compositionLength:null===(f=be.maps)||void 0===f||null===(j=f[we])||void 0===j||null===(k=j.team1_composition)||void 0===k?void 0:k.length}),console.log("Player data check:",{team1Players:Fe,team2Players:Be,team1PlayersLength:null===Fe||void 0===Fe?void 0:Fe.length,team2PlayersLength:null===Be||void 0===Be?void 0:Be.length});const We=(e,t)=>e&&t?e.map((e=>{const a=t.find((t=>t.id===e.player_id||t.id===e.id));return c(c({},e),{},{heroes:(null===a||void 0===a?void 0:a.heroes)||e.heroes||[]})})):e||[],He={team1Players:We(Fe,null===(w=be.team1)||void 0===w?void 0:w.players),team2Players:We(Be,null===(N=be.team2)||void 0===N?void 0:N.players),mapName:(null===(E=be.maps)||void 0===E||null===(T=E[we])||void 0===T?void 0:T.map_name)||(null===(A=be.maps)||void 0===A||null===(M=A[we])||void 0===M?void 0:M.mapName)||"TBD",gameMode:(null===(P=be.maps)||void 0===P||null===(I=P[we])||void 0===I?void 0:I.game_mode)||(null===(D=be.maps)||void 0===D||null===(L=D[we])||void 0===L?void 0:L.mode)||"TBD",team1Score:(null===(U=be.maps)||void 0===U||null===(z=U[we])||void 0===z?void 0:z.team1_score)||0,team2Score:(null===(O=be.maps)||void 0===O||null===(F=O[we])||void 0===F?void 0:F.team2_score)||0};return(0,u.jsx)(Qt,{children:(0,u.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,u.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-4",children:[(0,u.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("button",{onClick:()=>he&&he("matches"),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors",children:"\u2190 Back to Matches"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:["live"===(null===be||void 0===be?void 0:be.status)&&(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded text-sm transition-colors ".concat(null!==Ae&&void 0!==Ae&&Ae.hasLocalConnection&&"connected"===(null===Ae||void 0===Ae||null===(B=Ae.serviceStatus)||void 0===B?void 0:B.status)?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"reconnecting"===(null===Ae||void 0===Ae||null===(W=Ae.serviceStatus)||void 0===W?void 0:W.status)?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"),children:[(0,u.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(null!==Ae&&void 0!==Ae&&Ae.hasLocalConnection&&"connected"===(null===Ae||void 0===Ae||null===(H=Ae.serviceStatus)||void 0===H?void 0:H.status)?"bg-green-500 animate-pulse":"reconnecting"===(null===Ae||void 0===Ae||null===(V=Ae.serviceStatus)||void 0===V?void 0:V.status)?"bg-yellow-500 animate-spin":"bg-red-500 animate-pulse")}),null!==Ae&&void 0!==Ae&&Ae.hasLocalConnection&&"connected"===(null===Ae||void 0===Ae||null===(q=Ae.serviceStatus)||void 0===q?void 0:q.status)?"Live (".concat((null===(G=Ae.serviceStatus.transport)||void 0===G?void 0:G.toUpperCase())||"SSE",")"):"reconnecting"===(null===Ae||void 0===Ae||null===(Y=Ae.serviceStatus)||void 0===Y?void 0:Y.status)?"Reconnecting...":"Live Updates"]}),(null===Ae||void 0===Ae||null===(Z=Ae.serviceStatus)||void 0===Z?void 0:Z.reconnectAttempts)>0&&(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Attempt ",Ae.serviceStatus.reconnectAttempts]})]}),((null===(K=be.event)||void 0===K?void 0:K.name)||(null===(J=be.tournament)||void 0===J?void 0:J.name))&&(0,u.jsxs)("div",{className:"cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:()=>{var e;return(null===(e=be.event)||void 0===e?void 0:e.id)&&he&&he("event-detail",be.event.id)},children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(null===(Q=be.event)||void 0===Q?void 0:Q.name)||(null===(X=be.tournament)||void 0===X?void 0:X.name)}),be.round&&(0,u.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-500 ml-2",children:["\u2022 ",be.round]})]}),(0,u.jsx)("span",{className:"px-3 py-1 rounded text-xs font-semibold uppercase ".concat("live"===be.status?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"completed"===be.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"),children:be.status||"upcoming"})]})]})}),(0,u.jsx)("div",{className:"py-8",children:(0,u.jsx)("div",{className:"flex items-center justify-center",children:(0,u.jsxs)("div",{className:"flex items-center space-x-12",children:[(0,u.jsxs)("div",{className:"flex flex-col items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var e;return he&&he("team-detail",null===(e=be.team1)||void 0===e?void 0:e.id)},children:[(0,u.jsx)("div",{className:"w-20 h-20 mb-3",children:(0,u.jsx)("img",{src:C(be.team1),alt:(null===($=be.team1)||void 0===$?void 0:$.name)||"Team 1",className:"w-full h-full object-contain",onError:e=>{console.log("\ud83d\uddbc\ufe0f Team 1 logo failed to load, using fallback"),e.target.src=S(null,"team-logo")}})}),(0,u.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400",children:(null===(ee=be.team1)||void 0===ee?void 0:ee.name)||"TBD"}),(null===(te=be.team1)||void 0===te?void 0:te.country)&&(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[R(be.team1.country)," ",be.team1.country]})]}),(0,u.jsxs)("div",{className:"text-center px-8",children:[(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-6 mb-4",children:[(0,u.jsx)("span",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:be.team1_score||0}),(0,u.jsx)("span",{className:"text-2xl text-gray-400",children:":"}),(0,u.jsx)("span",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:be.team2_score||0})]}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:be.format||"Best of 3"}),(0,u.jsx)("div",{className:"flex items-center justify-center space-x-2",children:Array.from({length:(()=>{var e;const t=null===(e=be.format)||void 0===e?void 0:e.toUpperCase();if("BO1"===t||"BEST OF 1"===t)return 1;if("BO2"===t||"BEST OF 2"===t)return 2;if("BO3"===t||"BEST OF 3"===t)return 3;if("BO4"===t||"BEST OF 4"===t)return 4;if("BO5"===t||"BEST OF 5"===t)return 5;if("BO6"===t||"BEST OF 6"===t)return 6;if("BO7"===t||"BEST OF 7"===t)return 7;if("BO8"===t||"BEST OF 8"===t)return 8;if("BO9"===t||"BEST OF 9"===t)return 9;const a=null===t||void 0===t?void 0:t.match(/\d+/);if(a){const e=parseInt(a[0]);if(e>=1&&e<=9)return e}return 3})()},((e,t)=>{var a,r,s;const n=null===(a=be.maps)||void 0===a?void 0:a[t],l=t===we,i=n&&n.team1_score>n.team2_score,o=n&&n.team2_score>n.team1_score,d=n&&(n.team1_score||n.team2_score);return(0,u.jsx)("div",{onClick:()=>{n&&(console.log("MatchDetailPage: Switching to map ".concat(t+1,":"),n),Ne(t))},className:"relative cursor-pointer transition-all ".concat(l?"scale-110":"hover:scale-105"),children:(0,u.jsxs)("div",{className:"w-20 h-24 rounded-lg border-2 flex flex-col items-center justify-center transition-all cursor-pointer hover:shadow-md ".concat(l?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-lg scale-105":d?"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:border-blue-300":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 hover:border-gray-300"),children:[(0,u.jsxs)("div",{className:"text-xs font-medium ".concat(l?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"),children:["Map ",t+1]}),(null===n||void 0===n?void 0:n.map_name)&&(0,u.jsx)("div",{className:"text-xs text-center px-1 text-gray-600 dark:text-gray-300 font-medium truncate w-full",children:n.map_name}),n?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"text-sm font-bold ".concat(l?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"),children:[n.team1_score||0,"-",n.team2_score||0]}),(0,u.jsx)("div",{className:"text-xs ".concat(i?"text-blue-600 dark:text-blue-400":o?"text-red-600 dark:text-red-400":"text-gray-400"),children:i?(null===(r=be.team1)||void 0===r?void 0:r.short_name)||"T1":o?(null===(s=be.team2)||void 0===s?void 0:s.short_name)||"T2":"Live"})]}):(0,u.jsx)("div",{className:"text-xs text-gray-400",children:"TBD"})]})},t)}))}),be.scheduled_at&&(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-3",children:[new Date(be.scheduled_at).toLocaleDateString()," \u2022 ",new Date(be.scheduled_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,u.jsxs)("div",{className:"flex flex-col items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var e;return he&&he("team-detail",null===(e=be.team2)||void 0===e?void 0:e.id)},children:[(0,u.jsx)("div",{className:"w-20 h-20 mb-3",children:(0,u.jsx)("img",{src:C(be.team2),alt:(null===(ae=be.team2)||void 0===ae?void 0:ae.name)||"Team 2",className:"w-full h-full object-contain",onError:e=>{console.log("\ud83d\uddbc\ufe0f Team 2 logo failed to load, using fallback"),e.target.src=S(null,"team-logo")}})}),(0,u.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-red-600 dark:hover:text-red-400",children:(null===(re=be.team2)||void 0===re?void 0:re.name)||"TBD"}),(null===(se=be.team2)||void 0===se?void 0:se.country)&&(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[R(be.team2.country)," ",be.team2.country]})]})]})})})]}),(0,u.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 rounded-lg shadow-sm mb-4 p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-sm",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Currently Viewing:"}),(0,u.jsxs)("span",{className:"font-bold text-blue-900 dark:text-blue-100 bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded",children:["Map ",we+1]})]}),(0,u.jsx)("div",{className:"text-blue-300 dark:text-blue-600",children:"|"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Map:"}),(0,u.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:He.mapName})]}),(0,u.jsx)("div",{className:"text-gray-300 dark:text-gray-600",children:"|"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Mode:"}),(0,u.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:He.gameMode})]}),(0,u.jsx)("div",{className:"text-gray-300 dark:text-gray-600",children:"|"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Score:"}),(0,u.jsxs)("span",{className:"font-semibold text-gray-900 dark:text-white",children:[He.team1Score," - ",He.team2Score]})]})]})}),((null===(ne=be.broadcast)||void 0===ne||null===(le=ne.streams)||void 0===le?void 0:le.length)>0||(null===(ie=be.broadcast)||void 0===ie||null===(oe=ie.betting)||void 0===oe?void 0:oe.length)>0||(null===(de=be.broadcast)||void 0===de||null===(ce=de.vods)||void 0===ce?void 0:ce.length)>0||be.stream_url||be.vod_url||be.betting_url)&&(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-4 p-4",children:(0,u.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:((e,t,a)=>{const r=[...(null===(e=be.broadcast)||void 0===e?void 0:e.streams)||[],be.stream_url].filter(Boolean),s=[...(null===(t=be.broadcast)||void 0===t?void 0:t.betting)||[],be.betting_url].filter(Boolean),n=[...(null===(a=be.broadcast)||void 0===a?void 0:a.vods)||[],be.vod_url].filter(Boolean),l=(e,t)=>e.map(((e,a)=>{const r=(e=>{if(!e)return null;try{const r=new URL(e),s=r.hostname.toLowerCase();if(s.includes("twitch.tv")){const e=r.pathname.split("/").filter((e=>e))[0]||"Channel";return{platform:e,display:e,color:"purple",category:"streaming"}}if(s.includes("youtube.com")||s.includes("youtu.be")){var t;const e=r.pathname.split("/").filter((e=>e));let s="YouTube";if(e.includes("c")&&e[e.indexOf("c")+1])s=e[e.indexOf("c")+1];else if(e.includes("channel")&&e[e.indexOf("channel")+1])s=e[e.indexOf("channel")+1];else if(e.includes("@")||null!==(t=e[0])&&void 0!==t&&t.startsWith("@")){var a;s=(null===(a=e[0])||void 0===a?void 0:a.replace("@",""))||"YouTube"}return{platform:s,display:s,color:"red",category:"streaming"}}if(s.includes("kick.com")){const e=r.pathname.split("/").filter((e=>e))[0]||"Channel";return{platform:e,display:e,color:"green",category:"streaming"}}if(s.includes("bet")||s.includes("odds")||s.includes("stake")){const e=s.split(".")[0].charAt(0).toUpperCase()+s.split(".")[0].slice(1);return{platform:e,display:e,color:"yellow",category:"betting"}}{const e=s.split(".")[0].charAt(0).toUpperCase()+s.split(".")[0].slice(1);return{platform:e,display:e,color:"blue",category:"vod"}}}catch(r){return{platform:"External Link",display:"External Link",color:"gray",category:"other"}}})(e);if(!r)return null;return(0,u.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 ".concat({purple:"bg-purple-600 hover:bg-purple-700",red:"bg-red-600 hover:bg-red-700",green:"bg-green-600 hover:bg-green-700",blue:"bg-blue-600 hover:bg-blue-700",yellow:"bg-yellow-600 hover:bg-yellow-700",gray:"bg-gray-600 hover:bg-gray-700"}[r.color]," text-white rounded transition-colors text-xs font-medium flex items-center hover:shadow-md"),children:[(0,u.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z",clipRule:"evenodd"})}),r.platform]},"".concat(t,"-").concat(a))})),i=[];return r.length>0&&i.push((0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Streaming:"}),l(r,"streaming")]},"streaming")),i.length>0&&(s.length>0||n.length>0)&&i.push((0,u.jsx)("div",{className:"text-gray-300 dark:text-gray-600",children:"|"},"sep1")),s.length>0&&i.push((0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Betting:"}),l(s,"betting")]},"betting")),(r.length>0||s.length>0)&&n.length>0&&i.push((0,u.jsx)("div",{className:"text-gray-300 dark:text-gray-600",children:"|"},"sep2")),n.length>0&&i.push((0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"VOD:"}),l(n,"vod")]},"vod")),i})()})}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-4 match-statistics-section",children:[(0,u.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Match Statistics - Map ",we+1,": ",He.mapName]}),Re&&("admin"===Re.role||"moderator"===Re.role)&&(0,u.jsx)("div",{className:"flex gap-2",children:(0,u.jsx)("button",{onClick:()=>Te(!Ee),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm",children:"Live Scoring"})})]})}),(0,u.jsxs)("div",{className:"overflow-x-auto",children:[(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsxs)("thead",{children:[(0,u.jsx)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("th",{colSpan:"9",className:"px-6 py-3 text-left",children:(0,u.jsx)("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400 cursor-pointer hover:underline",onClick:()=>{var e;return he&&he("team-detail",null===(e=be.team1)||void 0===e?void 0:e.id)},children:(null===(me=be.team1)||void 0===me?void 0:me.name)||"TBD"})})}),(0,u.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700 text-xs uppercase tracking-wider text-gray-600 dark:text-gray-300",children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left font-medium",children:"Player"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"Hero"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"K"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"D"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"A"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"KDA"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"DMG"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"Heal"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"BLK"})]})]}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:He.team1Players.length>0?He.team1Players.map(((e,t)=>{const a=e.player_id||e.id,r=(()=>{var t,r,s,n,l;const i=[];e.hero&&i.push({hero:e.hero,eliminations:e.eliminations||0,deaths:e.deaths||0,assists:e.assists||0,damage_dealt:e.damage||0,healing_done:e.healing||0,damage_blocked:e.damage_blocked||0});const o=(null===(t=be.team1)||void 0===t||null===(r=t.players)||void 0===r?void 0:r.find((e=>e.id===a)))||(null===(s=be.team2)||void 0===s||null===(n=s.players)||void 0===n?void 0:n.find((e=>e.id===a)));return 0===we&&(null===o||void 0===o||null===(l=o.heroes)||void 0===l?void 0:l.length)>0?o.heroes:i.length>0?i:[]})(),s=ge["".concat(a,"_").concat(we)]||0,n=r[s]||{},l={id:e.id||e.player_id,name:(e=>{if(!e)return"Unknown Player";if(e.username)return e.username;if(e.name&&"string"===typeof e.name){const t=e.name.match(/"([^"]+)"/);if(t)return t[1];const a=e.name.match(/'([^']+)'/);if(a)return a[1];const r=e.name.match(/^"([^"]+)"/);if(r)return r[1]}return e.player_name||e.name||"Unknown"})(e),country:e.country||e.nationality||"US",hero:n.hero||e.hero||e.current_hero||null,heroes:r,eliminations:n.eliminations||e.eliminations||e.kills||0,deaths:n.deaths||e.deaths||0,assists:n.assists||e.assists||0,damage:n.damage_dealt||e.damage||0,healing:n.healing_done||e.healing||0,damage_blocked:n.damage_blocked||e.damage_blocked||e.damage_mitigated||e.damageBlocked||0};return(0,u.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,u.jsx)("td",{className:"px-6 py-3",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400",onClick:()=>he&&he("player-detail",l.id),children:[(0,u.jsx)("span",{className:"text-sm",children:R(l.country)}),(0,u.jsx)("span",{className:"font-medium text-sm",children:l.name})]})}),(0,u.jsx)("td",{className:"px-3 py-3 relative",children:(0,u.jsx)("div",{className:"flex justify-center items-center",children:l.heroes&&l.heroes.length>1?(0,u.jsxs)("div",{className:"relative flex items-center hero-menu-container",children:[l.heroes.slice(1,Math.min(3,l.heroes.length)).map(((e,t)=>(0,u.jsx)("div",{className:"absolute transition-all",style:{left:"".concat(10*(t+1),"px"),zIndex:3-t,opacity:.5-.1*t,filter:"brightness(0.8)"},children:(0,u.jsx)(_,{heroName:e.hero,size:"sm",showRole:!1})},"shadow-".concat(t)))),(0,u.jsxs)("div",{className:"relative cursor-pointer transition-all hover:scale-110",style:{zIndex:10},onClick:()=>{const e="".concat(a,"_").concat(we);ye((t=>c(c({},t),{},{[e]:!t[e]})))},title:"".concat(l.heroes[s].hero,": ").concat(l.heroes[s].eliminations,"/").concat(l.heroes[s].deaths,"/").concat(l.heroes[s].assists),children:[(0,u.jsx)(_,{heroName:l.heroes[s].hero,size:"sm",showRole:!1}),l.heroes.length>1&&(0,u.jsx)("div",{className:"absolute -top-0.5 -right-0.5 bg-blue-500/80 text-white text-[10px] rounded-full w-3.5 h-3.5 flex items-center justify-center font-medium",children:l.heroes.length})]}),ve["".concat(a,"_").concat(we)]&&(0,u.jsxs)("div",{className:"absolute top-full mt-2 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-2 z-50 min-w-[200px]",children:[(0,u.jsxs)("div",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 px-2 py-1 mb-1",children:["Select Hero (",l.heroes.length," played)"]}),l.heroes.map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded cursor-pointer transition-colors ".concat(s===t?"bg-blue-100 dark:bg-blue-900/50":"hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:e=>{e.stopPropagation(),pe((e=>c(c({},e),{},{["".concat(a,"_").concat(we)]:t}))),ye((e=>c(c({},e),{},{["".concat(a,"_").concat(we)]:!1})))},children:[(0,u.jsx)(_,{heroName:e.hero,size:"sm",showRole:!1}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:e.hero}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.eliminations,"/",e.deaths,"/",e.assists," \u2022 KDA: ",((e.eliminations+e.assists)/Math.max(e.deaths,1)).toFixed(2)]})]}),s===t&&(0,u.jsx)("div",{className:"text-blue-500 dark:text-blue-400",children:"\u2713"})]},t)))]})]}):(0,u.jsx)(_,{heroName:l.hero,size:"sm",showRole:!1})})}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm font-medium",children:l.eliminations}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.deaths}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.assists}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm font-medium",children:((l.eliminations+l.assists)/Math.max(l.deaths,1)).toFixed(2)}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.damage?"".concat((l.damage/1e3).toFixed(1),"k"):"-"}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.healing?"".concat((l.healing/1e3).toFixed(1),"k"):"-"}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.damage_blocked?"".concat((l.damage_blocked/1e3).toFixed(1),"k"):"-"})]},t)})):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"9",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No player data available for this map"})})})]}),(0,u.jsxs)("table",{className:"w-full mt-6",children:[(0,u.jsxs)("thead",{children:[(0,u.jsx)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("th",{colSpan:"9",className:"px-6 py-3 text-left",children:(0,u.jsx)("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400 cursor-pointer hover:underline",onClick:()=>{var e;return he&&he("team-detail",null===(e=be.team2)||void 0===e?void 0:e.id)},children:(null===(ue=be.team2)||void 0===ue?void 0:ue.name)||"TBD"})})}),(0,u.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700 text-xs uppercase tracking-wider text-gray-600 dark:text-gray-300",children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left font-medium",children:"Player"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"Hero"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"K"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"D"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"A"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"KDA"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"DMG"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"Heal"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center font-medium",children:"BLK"})]})]}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:He.team2Players.length>0?He.team2Players.map(((e,t)=>{const a=e.player_id||e.id,r=(()=>{var t,r,s,n,l;const i=[];e.hero&&i.push({hero:e.hero,eliminations:e.eliminations||0,deaths:e.deaths||0,assists:e.assists||0,damage_dealt:e.damage||0,healing_done:e.healing||0,damage_blocked:e.damage_blocked||0});const o=(null===(t=be.team1)||void 0===t||null===(r=t.players)||void 0===r?void 0:r.find((e=>e.id===a)))||(null===(s=be.team2)||void 0===s||null===(n=s.players)||void 0===n?void 0:n.find((e=>e.id===a)));return 0===we&&(null===o||void 0===o||null===(l=o.heroes)||void 0===l?void 0:l.length)>0?o.heroes:i.length>0?i:[]})(),s=ge["".concat(a,"_").concat(we)]||0,n=r[s]||{},l={id:e.id||e.player_id,name:(e=>{if(!e)return"Unknown Player";if(e.username)return e.username;if(e.name&&"string"===typeof e.name){const t=e.name.match(/"([^"]+)"/);if(t)return t[1];const a=e.name.match(/'([^']+)'/);if(a)return a[1];const r=e.name.match(/^"([^"]+)"/);if(r)return r[1]}return e.player_name||e.name||"Unknown"})(e),country:e.country||e.nationality||"US",hero:n.hero||e.hero||e.current_hero||null,heroes:r,eliminations:n.eliminations||e.eliminations||e.kills||0,deaths:n.deaths||e.deaths||0,assists:n.assists||e.assists||0,damage:n.damage_dealt||e.damage||0,healing:n.healing_done||e.healing||0,damage_blocked:n.damage_blocked||e.damage_blocked||e.damage_mitigated||e.damageBlocked||0};return(0,u.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,u.jsx)("td",{className:"px-6 py-3",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer hover:text-red-600 dark:hover:text-red-400",onClick:()=>he&&he("player-detail",l.id),children:[(0,u.jsx)("span",{className:"text-sm",children:R(l.country)}),(0,u.jsx)("span",{className:"font-medium text-sm",children:l.name})]})}),(0,u.jsx)("td",{className:"px-3 py-3 relative",children:(0,u.jsx)("div",{className:"flex justify-center items-center",children:l.heroes&&l.heroes.length>1?(0,u.jsxs)("div",{className:"relative flex items-center hero-menu-container",children:[l.heroes.slice(1,Math.min(3,l.heroes.length)).map(((e,t)=>(0,u.jsx)("div",{className:"absolute transition-all",style:{left:"".concat(10*(t+1),"px"),zIndex:3-t,opacity:.5-.1*t,filter:"brightness(0.8)"},children:(0,u.jsx)(_,{heroName:e.hero,size:"sm",showRole:!1})},"shadow-".concat(t)))),(0,u.jsxs)("div",{className:"relative cursor-pointer transition-all hover:scale-110",style:{zIndex:10},onClick:()=>{const e="".concat(a,"_").concat(we);ye((t=>c(c({},t),{},{[e]:!t[e]})))},title:"".concat(l.heroes[s].hero,": ").concat(l.heroes[s].eliminations,"/").concat(l.heroes[s].deaths,"/").concat(l.heroes[s].assists),children:[(0,u.jsx)(_,{heroName:l.heroes[s].hero,size:"sm",showRole:!1}),l.heroes.length>1&&(0,u.jsx)("div",{className:"absolute -top-0.5 -right-0.5 bg-blue-500/80 text-white text-[10px] rounded-full w-3.5 h-3.5 flex items-center justify-center font-medium",children:l.heroes.length})]}),ve["".concat(a,"_").concat(we)]&&(0,u.jsxs)("div",{className:"absolute top-full mt-2 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-2 z-50 min-w-[200px]",children:[(0,u.jsxs)("div",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 px-2 py-1 mb-1",children:["Select Hero (",l.heroes.length," played)"]}),l.heroes.map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded cursor-pointer transition-colors ".concat(s===t?"bg-blue-100 dark:bg-blue-900/50":"hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:e=>{e.stopPropagation(),pe((e=>c(c({},e),{},{["".concat(a,"_").concat(we)]:t}))),ye((e=>c(c({},e),{},{["".concat(a,"_").concat(we)]:!1})))},children:[(0,u.jsx)(_,{heroName:e.hero,size:"sm",showRole:!1}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:e.hero}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.eliminations,"/",e.deaths,"/",e.assists," \u2022 KDA: ",((e.eliminations+e.assists)/Math.max(e.deaths,1)).toFixed(2)]})]}),s===t&&(0,u.jsx)("div",{className:"text-blue-500 dark:text-blue-400",children:"\u2713"})]},t)))]})]}):(0,u.jsx)(_,{heroName:l.hero,size:"sm",showRole:!1})})}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm font-medium",children:l.eliminations}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.deaths}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.assists}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm font-medium",children:((l.eliminations+l.assists)/Math.max(l.deaths,1)).toFixed(2)}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.damage?"".concat((l.damage/1e3).toFixed(1),"k"):"-"}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.healing?"".concat((l.healing/1e3).toFixed(1),"k"):"-"}),(0,u.jsx)("td",{className:"px-3 py-3 text-center text-sm",children:l.damage_blocked?"".concat((l.damage_blocked/1e3).toFixed(1),"k"):"-"})]},t)})):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"9",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No player data available for this map"})})})]})]})]}),(0,u.jsx)(Jt,{matchId:Oe(),navigateTo:he}),(0,u.jsx)(Vt,{isOpen:Ee,match:be,onClose:()=>Te(!1),onUpdate:Ue})]})})})}const $t=e=>(0,u.jsx)(Qt,{children:(0,u.jsx)(Xt,c({},e))});const ea=new class{constructor(){this.pollingIntervals=new Map}subscribe(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;const s="".concat(e,"-").concat(t);this.pollingIntervals.has(s)&&clearInterval(this.pollingIntervals.get(s));const n=setInterval((()=>{a({type:"refresh"})}),r);return this.pollingIntervals.set(s,n),()=>this.unsubscribe(e,t)}unsubscribe(e,t){const a="".concat(e,"-").concat(t);this.pollingIntervals.has(a)&&(clearInterval(this.pollingIntervals.get(a)),this.pollingIntervals.delete(a))}disconnect(){this.pollingIntervals.forEach((e=>clearInterval(e))),this.pollingIntervals.clear()}},ta=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,n]=(0,s.useState)(0),[l,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),{api:c}=b(),{maxRecentMentions:m=10,pollingInterval:u=3e4}=a,x=(0,s.useCallback)((async()=>{if(e&&t&&c)try{let r;switch(e){case"player":r="/players/".concat(t,"/mentions");break;case"team":r="/teams/".concat(t,"/mentions");break;case"user":r="/users/".concat(t,"/mentions");break;default:r="/".concat(e,"s/").concat(t,"/mentions")}const s=await c.get(r,{params:{limit:m}});if(s.data){var a;const e=s.data.data||s.data||[];i(e),null!==(a=s.data.meta)&&void 0!==a&&a.total?n(s.data.meta.total):s.data.total?n(s.data.total):n(e.length)}}catch(r){console.error("Error fetching mention data:",r)}finally{d(!1)}}),[e,t,c,m]);return(0,s.useEffect)((()=>{x()}),[x]),(0,s.useEffect)((()=>{if(!e||!t)return;return ea.subscribe(e,t,(e=>{"refresh"===e.type&&x()}),u)}),[e,t,x,u]),{mentionCount:r,recentMentions:l,isLoading:o,refreshData:x}},aa=e=>{let{entityType:t,entityId:a,title:r,className:n=""}=e;const[l,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[c,m]=(0,s.useState)(1),[x,h]=(0,s.useState)(1),[g,p]=(0,s.useState)("all"),[v,y]=(0,s.useState)(null),{api:f}=b(),{mentionCount:j,refreshData:k}=ta(t,a,{maxRecentMentions:10});(0,s.useEffect)((()=>{w()}),[t,a,c,g]),(0,s.useEffect)((()=>{if(!t||!a)return;const e=setInterval((()=>{1===c&&(w(),k())}),3e4);return()=>{clearInterval(e)}}),[t,a,c,k]);const w=async()=>{try{d(!0),y(null);const e=new URLSearchParams({page:c,limit:10});let r;switch("all"!==g&&e.append("content_type",g),t){case"player":r="/players/".concat(a,"/mentions?").concat(e.toString());break;case"team":r="/teams/".concat(a,"/mentions?").concat(e.toString());break;case"user":r="/users/".concat(a,"/mentions?").concat(e.toString());break;default:r="/".concat(t,"s/").concat(a,"/mentions?").concat(e.toString())}const s=await f.get(r);if(!1!==s.data.success){const e=s.data.data||s.data||[];if(i(e),s.data.meta){const e=Math.ceil(s.data.meta.total/(s.data.meta.limit||10));h(e)}else s.data.pagination?h(s.data.pagination.last_page||1):h(1)}else s.status>=400?y(s.data.message||"Failed to load mentions"):i([])}catch(v){var e,r;console.error("Error fetching mentions:",v),(null===(e=v.response)||void 0===e?void 0:e.status)>=500||!v.response?y("Unable to load mentions at this time"):404===(null===(r=v.response)||void 0===r?void 0:r.status)?(i([]),h(1)):y("Failed to load mentions")}finally{d(!1)}},N=e=>{m(e)},_=e=>{switch(e){case"news":return"News";case"news_comment":return"News Comments";case"forum_thread":return"Forum Threads";case"forum_post":return"Forum Posts";case"match":return"Matches";case"match_comment":return"Match Comments";default:return e}},C=e=>{switch(e){case"news":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"news_comment":return"bg-blue-50 text-blue-700 dark:bg-blue-900/10 dark:text-blue-400";case"forum_thread":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";case"forum_post":return"bg-purple-50 text-purple-700 dark:bg-purple-900/10 dark:text-purple-400";case"match":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"match_comment":return"bg-green-50 text-green-700 dark:bg-green-900/10 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}};return o&&0===l.length?(0,u.jsxs)("div",{className:"space-y-4 ".concat(n),children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r||"Mentions"}),(0,u.jsx)("div",{className:"animate-pulse space-y-3",children:[1,2,3].map((e=>(0,u.jsxs)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg p-4",children:[(0,u.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-3/4 mb-2"}),(0,u.jsx)("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-1/2"})]},e)))})]}):v?(0,u.jsxs)("div",{className:"space-y-4 ".concat(n),children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r||"Mentions"}),(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsxs)("div",{className:"flex flex-col items-center",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-3",children:(0,u.jsx)("svg",{className:"w-6 h-6 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm text-center",children:v}),(0,u.jsx)("button",{onClick:()=>w(),className:"mt-3 px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Try again"})]})})]}):(0,u.jsxs)("div",{className:"space-y-4 ".concat(n),children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r||"Mentions",j>0&&(0,u.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-full",children:j})]}),(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.length>0&&"".concat(l.length," mention").concat(1!==l.length?"s":"")})]}),(0,u.jsx)("div",{className:"flex flex-wrap gap-2",children:["all","news","news_comment","forum_thread","forum_post","match","match_comment"].map((e=>(0,u.jsx)("button",{onClick:()=>(e=>{p(e),m(1)})(e),className:"px-3 py-1 text-xs rounded-full transition-colors ".concat(g===e?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"all"===e?"All":_(e)},e)))}),0===l.length?(0,u.jsx)("div",{className:"text-center py-12",children:(0,u.jsxs)("div",{className:"flex flex-col items-center",children:[(0,u.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:(0,u.jsx)("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No mentions yet"}),(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center max-w-sm leading-relaxed",children:"player"===t?"Be the first to mention this player in news, forums, or match discussions!":"Be the first to mention this team in news, forums, or match discussions!"}),(0,u.jsx)("div",{className:"mt-4 px-4 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:(0,u.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Mentions appear when ","player"===t?"this player":"this team"," is discussed in the community"]})})]})}):(0,u.jsx)("div",{className:"space-y-3",children:l.map((e=>(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[e.mentioned_by&&(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[e.mentioned_by.avatar?(0,u.jsx)("img",{src:e.mentioned_by.avatar,alt:e.mentioned_by.name,className:"w-6 h-6 rounded-full",onError:e=>{e.target.src=S(null,"player-avatar")}}):(0,u.jsx)("div",{className:"w-6 h-6 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:(0,u.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:e.mentioned_by.name.charAt(0).toUpperCase()})}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.mentioned_by.name})]}),e.content&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(C(e.content.type)),children:_(e.content.type)})]}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.mentioned_at).toLocaleDateString()})]}),e.context&&(0,u.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:[(0,u.jsx)("span",{className:"font-medium text-red-600 dark:text-red-400",children:e.mention_text}),(0,u.jsx)("span",{className:"ml-1",children:e.context.replace(e.mention_text,"")})]}),e.content&&e.content.url&&(0,u.jsx)("div",{className:"text-sm",children:(0,u.jsx)("a",{href:e.content.url,className:"text-blue-600 dark:text-blue-400 hover:underline",onClick:t=>{t.preventDefault(),e.content.url.startsWith("/")?window.location.hash=e.content.url.substring(1):window.open(e.content.url,"_blank","noopener,noreferrer")},children:e.content.title})})]},e.id)))}),x>1&&(0,u.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,u.jsx)("button",{onClick:()=>N(c-1),disabled:1===c,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,u.jsxs)("span",{className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400",children:["Page ",c," of ",x]}),(0,u.jsx)("button",{onClick:()=>N(c+1),disabled:c===x,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})};const ra=function(e){var t,a,r,n,l,i;let{params:o,navigateTo:d}=e;const[m,x]=(0,s.useState)(null),[h,g]=(0,s.useState)([]),[p,v]=(0,s.useState)([]),[y,f]=(0,s.useState)([]),[j,k]=(0,s.useState)([]),[w,N]=(0,s.useState)({}),[_,C]=(0,s.useState)("recent"),[E,T]=(0,s.useState)(!0),[A,M]=(0,s.useState)(!1),[P,I]=(0,s.useState)({current_page:1,last_page:1,per_page:10,total:0}),[U,z]=(0,s.useState)(!1),[O,F]=(0,s.useState)({}),[B,W]=(0,s.useState)(!1),[H,V]=(0,s.useState)([]),{api:q,isAdmin:G,isModerator:Y}=b(),Z=null===o||void 0===o?void 0:o.id;(0,s.useEffect)((()=>{Z?K():(console.error("TeamDetailPage: No team ID provided"),T(!1))}),[Z]);const K=async()=>{try{var e,t,a,r,s,n,l,i,o,d,c;T(!0),console.log("Fetching team data for ID:",Z);const h=await q.get("/teams/".concat(Z)),p=(null===(e=h.data)||void 0===e?void 0:e.data)||h.data||h;console.log("Real team data received:",p);const v={id:p.id,name:p.name,shortName:p.short_name||p.shortName,logo:p.logo_url||p.logo,flag:p.flag_url||p.flag,country:p.country,region:p.region,rating:p.rating||1500,rank:p.rank,winRate:(null===(t=p.stats)||void 0===t?void 0:t.win_rate)||p.win_rate||0,points:p.points||0,peak:p.peak_rating||p.rating,founded:p.founded,foundedDate:p.founded_date,captain:p.captain,coach:p.coach,coachName:p.coach_name,coachNationality:p.coach_nationality,manager:p.manager,owner:p.owner,coach_data:p.coach_data||p.coaching_staff||{},website:p.website,earnings:p.earnings||p.total_earnings||0,social_media:p.social_media||p.social_links||{},achievements:(()=>{if(Array.isArray(p.achievements))return p.achievements;if("string"===typeof p.achievements)try{const e=JSON.parse(p.achievements);return Array.isArray(e)?e:[]}catch(e){return[]}return[]})(),description:p.description,created_at:p.created_at,division:p.division,wins:p.wins||0,losses:p.losses||0,matchesPlayed:p.matches_played||0,mapsWon:p.maps_won||0,mapsLost:p.maps_lost||0,eloRating:p.elo_rating,peakElo:p.peak_elo,currentStreakCount:p.current_streak_count,currentStreakType:p.current_streak_type,longestWinStreak:p.longest_win_streak,playerCount:p.player_count,status:p.status||"Active",platform:p.platform,game:p.game,recentForm:p.recent_form,record:p.record};let y=[];if(p.current_roster&&Array.isArray(p.current_roster))y=p.current_roster;else if(p.players&&Array.isArray(p.players))y=p.players;else try{var m;const e=await q.get("/players?team_id=".concat(Z));y=(null===(m=e.data)||void 0===m?void 0:m.data)||e.data||[]}catch(u){console.error("Error fetching team players:",u)}console.log("Team players found:",y.length),await Q(),await J();const b={rating:v.rating,ranking:v.rank||1,winRate:(null===(a=p.stats)||void 0===a?void 0:a.win_rate)||0,mapsWon:(null===(r=p.stats)||void 0===r?void 0:r.maps_won)||0,mapsLost:(null===(s=p.stats)||void 0===s?void 0:s.maps_lost)||0,avgTeamRating:te(y),bestMap:(null===(n=p.stats)||void 0===n?void 0:n.best_map)||"Unknown",totalEarnings:v.earnings,matchesPlayed:(null===(l=p.stats)||void 0===l?void 0:l.matches_played)||0,averageMatchDuration:(null===(i=p.stats)||void 0===i?void 0:i.avg_match_duration)||25,recentForm:(null===(o=p.stats)||void 0===o?void 0:o.recent_form)||p.form||[],mapWinRate:(null===(d=p.stats)||void 0===d?void 0:d.map_win_rates)||{},record:"".concat(v.wins,"-").concat(v.losses),mapDifferential:(null===(c=p.stats)||void 0===c?void 0:c.map_differential)||0};x(v),g(y),N(b)}catch(u){console.error("Error fetching team data:",u),x(null),g([]),v([]),f([]),k([]),N({})}finally{T(!1)}},J=async()=>{if(Z)try{var e,t;const a=await q.get("/mentions/search?limit=50");null!==(e=a.data)&&void 0!==e&&e.success&&null!==(t=a.data)&&void 0!==t&&t.data&&V(a.data.data)}catch(a){console.error("Error fetching mentions data:",a),V([])}},Q=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(Z)try{M(!0);const[t,a,r,s]=await Promise.all([q.get("/teams/".concat(Z,"/matches/upcoming?per_page=10&page=").concat(e)).catch((()=>({data:{data:[],meta:{}}}))),q.get("/teams/".concat(Z,"/matches/live")).catch((()=>({data:{data:[]}}))),q.get("/teams/".concat(Z,"/matches/recent?per_page=10&page=").concat(e)).catch((()=>({data:{data:[],meta:{}}}))),q.get("/teams/".concat(Z,"/matches/stats")).catch((()=>({data:{data:{}}})))]),n=t.data.data||[];v(n);const l=a.data.data||[];f(l);const i=r.data.data||[];k(i),r.data.meta&&I(r.data.meta);const o=s.data.data||{};N((e=>c(c({},e),o))),console.log("Team matches loaded:",{upcoming:n.length,live:l.length,recent:i.length})}catch(t){console.error("Error fetching team matches:",t)}finally{M(!1)}},X=async e=>{C(e),"recent"===e&&0===j.length&&await Q()},$=async e=>{await Q(e)},ee=e=>{if(!e)return"Unknown";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},te=e=>{if(0===e.length)return 1500;const t=e.reduce(((e,t)=>e+(t.rating||1500)),0);return Math.floor(t/e.length)},ae=e=>{switch(e){case"Duelist":return"text-red-600 dark:text-red-400";case"Vanguard":return"text-blue-600 dark:text-blue-400";case"Strategist":return"text-green-600 dark:text-green-400";case"Coach":return"text-purple-600 dark:text-purple-400";default:return"text-gray-600 dark:text-gray-400"}},re=()=>{z(!1),F({})},se=(e,t)=>{F((a=>c(c({},a),{},{[e]:t})))};return E?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading team profile..."})]})}):m?(0,u.jsxs)("div",{className:"animate-fade-in",children:[(0,u.jsx)("div",{className:"card mb-8",children:(0,u.jsx)("div",{className:"border border-white dark:border-gray-300 p-8 bg-gray-50 dark:bg-gray-800",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,u.jsx)(D,{team:m,size:"w-24 h-24",className:"ring-4 ring-white/20"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:m.name}),(0,u.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-300 mb-2",children:m.shortName}),(0,u.jsx)("div",{className:"flex items-center space-x-4 mb-3",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-lg",children:R(m.country)}),(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:m.country||"Unknown"})]})}),m.social_media&&Object.keys(m.social_media).filter((e=>m.social_media[e])).length>0&&(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[m.social_media.twitter&&(0,u.jsx)("a",{href:m.social_media.twitter.startsWith("http")?m.social_media.twitter:"https://twitter.com/".concat(m.social_media.twitter),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"Twitter",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),m.social_media.instagram&&(0,u.jsx)("a",{href:m.social_media.instagram.startsWith("http")?m.social_media.instagram:"https://instagram.com/".concat(m.social_media.instagram),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"Instagram",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1112.324 0 6.162 6.162 0 01-12.324 0zM12 16a4 4 0 110-8 4 4 0 010 8zm4.965-10.405a1.44 1.44 0 112.881.001 1.44 1.44 0 01-2.881-.001z"})})}),m.social_media.youtube&&(0,u.jsx)("a",{href:m.social_media.youtube.startsWith("http")?m.social_media.youtube:"https://youtube.com/@".concat(m.social_media.youtube),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"YouTube",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})}),m.social_media.discord&&(0,u.jsx)("a",{href:m.social_media.discord.startsWith("http")?m.social_media.discord:"https://".concat(m.social_media.discord),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"Discord",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})})}),m.social_media.website&&(0,u.jsx)("a",{href:m.social_media.website.startsWith("http")?m.social_media.website:"https://".concat(m.social_media.website),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"Website",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})})]})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(ne=w.totalEarnings||m.earnings||0,"string"===typeof ne&&ne.includes("$")?ne:ne&&0!==ne?"$".concat(ne.toLocaleString()):"$0")}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Earnings"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:Math.floor(w.rating||m.rating||1500)}),(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["ELO Rating \u2022 #",w.ranking||m.rank||"N/A"]}),(G()||Y())&&!U&&(0,u.jsx)("button",{onClick:()=>{m&&(window.location.hash="admin-team-edit/".concat(m.id))},className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Edit Team"})]})]})})}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,u.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Team Statistics"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Record"}),(0,u.jsx)("div",{className:"font-bold text-gray-900 dark:text-white text-lg mt-1",children:w.record||"".concat(m.wins||0,"-").concat(m.losses||0)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Win Rate"}),(0,u.jsxs)("div",{className:"font-bold text-green-600 dark:text-green-400 text-lg mt-1",children:[w.winRate||0,"%"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Avg Team Rating"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:Math.floor(w.avgTeamRating||1500)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Map Diff"}),(0,u.jsxs)("div",{className:"font-medium mt-1 ".concat((w.mapDifferential||0)>0?"text-green-600":(w.mapDifferential||0)<0?"text-red-600":"text-gray-600"),children:[(w.mapDifferential||0)>0?"+":"",w.mapDifferential||0]})]})]})]}),m.description&&(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:["About ",m.name]}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:Je(m.description,d,H)})]}),w.recentForm&&w.recentForm.length>0&&(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Recent Form"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[w.recentForm.map(((e,t)=>(0,u.jsx)("div",{className:"w-8 h-8 rounded flex items-center justify-center font-bold text-white text-sm ".concat("W"===e?"bg-green-600":"bg-red-600"),children:e},t))),(0,u.jsxs)("span",{className:"ml-4 text-gray-600 dark:text-gray-400 text-sm",children:["Last ",w.recentForm.length," matches"]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Active Roster"}),(0,u.jsx)("div",{className:"space-y-3",children:h.map((e=>(0,u.jsxs)("div",{className:"flex items-center space-x-4 p-3 border border-gray-200 dark:border-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>d&&d("player-detail",{id:e.id}),children:[(0,u.jsx)(L,{player:e,size:"w-12 h-12"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white hover:text-red-600 dark:hover:text-red-400",children:e.username||e.name}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,u.jsx)("span",{className:ae(e.role),children:e.role}),(0,u.jsx)("span",{className:"text-gray-500",children:"\u2022"}),(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.real_name})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:e.rating||1500}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Rating"})]})]},e.id)))}),(m.coach||m.coach_data)&&(0,u.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Coaching Staff"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[null!==(t=m.coach_data)&&void 0!==t&&t.avatar?(0,u.jsx)("img",{src:m.coach_data.avatar,alt:"Coach avatar",className:"w-12 h-12 rounded-full object-cover border-2 border-gray-300 dark:border-gray-600",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiNFNUU3RUIiLz4KPHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzZCNzI4MCI+PzwvdGV4dD4KPC9zdmc+"}}):(0,u.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center border-2 border-gray-300 dark:border-gray-600",children:(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xl",children:"?"})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:(null===(a=m.coach_data)||void 0===a?void 0:a.name)||m.coach}),(null===(r=m.coach_data)||void 0===r?void 0:r.nationality)&&(0,u.jsx)("span",{className:"text-sm",children:R(m.coach_data.nationality)})]}),(null===(n=m.coach_data)||void 0===n?void 0:n.real_name)&&(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Real Name: ",m.coach_data.real_name]}),(null===(l=m.coach_data)||void 0===l?void 0:l.experience)&&(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Experience: ",m.coach_data.experience]}),(null===(i=m.coach_data)||void 0===i?void 0:i.achievements)&&(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[(0,u.jsx)("span",{className:"font-medium",children:"Achievements:"})," ",m.coach_data.achievements]})]})]})]})]}),(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsxs)("button",{onClick:()=>X("upcoming"),className:"px-6 py-4 text-sm font-medium transition-colors flex items-center space-x-2 ".concat("upcoming"===_?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[(0,u.jsx)("span",{children:"Upcoming"}),p.length>0&&(0,u.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:p.length})]}),(0,u.jsxs)("button",{onClick:()=>X("live"),className:"px-6 py-4 text-sm font-medium transition-colors flex items-center space-x-2 ".concat("live"===_?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[(0,u.jsx)("span",{children:"Live"}),y.length>0&&(0,u.jsx)("span",{className:"bg-red-600 text-white text-xs px-2 py-1 rounded-full animate-pulse",children:y.length})]}),(0,u.jsxs)("button",{onClick:()=>X("recent"),className:"px-6 py-4 text-sm font-medium transition-colors flex items-center space-x-2 ".concat("recent"===_?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[(0,u.jsx)("span",{children:"Recent Results"}),j.length>0&&(0,u.jsx)("span",{className:"bg-gray-600 text-white text-xs px-2 py-1 rounded-full",children:j.length})]})]})}),(0,u.jsx)("div",{className:"p-6",children:A?(0,u.jsxs)("div",{className:"text-center py-8",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading matches..."})]}):(0,u.jsxs)(u.Fragment,{children:["upcoming"===_&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:["Upcoming Matches (",p.length,")"]}),p.length>0?(0,u.jsx)("div",{className:"space-y-3",children:p.map(((e,t)=>{var a;return(0,u.jsxs)("div",{onClick:()=>d("match-detail",{id:e.id}),className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/10 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/20 cursor-pointer transition-colors border border-blue-200 dark:border-blue-800",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[e.event_logo&&(0,u.jsx)("div",{className:"w-12 h-12 rounded overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:e.event_logo,alt:e.event_name,className:"w-full h-full object-cover",onError:e=>{e.target.src=S(null,"event-banner")}})}),(0,u.jsx)("div",{className:"text-blue-600 dark:text-blue-400 font-bold text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/30 rounded",children:e.time_until||"SCHEDULED"}),(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)(D,{team:m,size:"w-8 h-8"}),(0,u.jsx)("div",{className:"text-gray-400 font-medium text-sm",children:"VS"}),(0,u.jsx)(D,{team:e.opponent,size:"w-8 h-8"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(a=e.opponent)||void 0===a?void 0:a.name)||"TBD"}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:[e.event_name," \u2022 ",e.format||"BO3"]})]})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:ee(e.scheduled_at)}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:new Date(e.scheduled_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]},e.id||t)}))}):(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No upcoming matches scheduled"})})]}),"live"===_&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4 flex items-center",children:[(0,u.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full mr-2 animate-pulse"}),"Live Matches (",y.length,")"]}),y.length>0?(0,u.jsx)("div",{className:"space-y-3",children:y.map(((e,t)=>{var a;return(0,u.jsxs)("div",{onClick:()=>d("match-detail",{id:e.id}),className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/10 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 cursor-pointer transition-colors border border-red-200 dark:border-red-800",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[e.event_logo&&(0,u.jsx)("div",{className:"w-12 h-12 rounded overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:e.event_logo,alt:e.event_name,className:"w-full h-full object-cover",onError:e=>{e.target.src=S(null,"event-banner")}})}),(0,u.jsx)("div",{className:"bg-red-600 text-white px-3 py-1 text-xs font-bold rounded-full animate-pulse",children:"LIVE"}),(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)(D,{team:m,size:"w-8 h-8"}),(0,u.jsx)("div",{className:"text-center min-w-[60px]",children:(0,u.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400",children:e.team_score||0}),(0,u.jsx)("span",{className:"mx-1 text-gray-400",children:"-"}),(0,u.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:e.opponent_score||0})]})}),(0,u.jsx)(D,{team:e.opponent,size:"w-8 h-8"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(a=e.opponent)||void 0===a?void 0:a.name)||"TBD"}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:[e.event_name," \u2022 Map ",e.current_map||1,"/",e.maps_total||3]})]})]})]}),(0,u.jsx)("div",{className:"text-right",children:(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.format||"BO3"})})]},e.id||t)}))}):(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No live matches"})})]}),"recent"===_&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-red-600 dark:text-red-400 mb-4",children:"Match History"}),j.length>0?(0,u.jsxs)("div",{className:"space-y-4",children:[j.map(((e,t)=>{var a,r,s,n,l,i;const o=(null===(a=e.score)||void 0===a?void 0:a.team)||e.team1_score||0,c=(null===(r=e.score)||void 0===r?void 0:r.opponent)||e.team2_score||0,x=e.opponent||e.team2||e.team1,h="W"===e.result||o>c;return(0,u.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>d("match-detail",{id:e.id}),children:[(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:null!==(s=e.event)&&void 0!==s&&s.logo||e.event_logo?(0,u.jsx)("img",{src:(null===(n=e.event)||void 0===n?void 0:n.logo)||e.event_logo,alt:(null===(l=e.event)||void 0===l?void 0:l.name)||e.event_name,className:"w-10 h-10 object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-xs font-bold text-gray-500">MR</span>'}}):(0,u.jsx)("span",{className:"text-xs font-bold text-gray-500",children:"MR"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(null===(i=e.event)||void 0===i?void 0:i.name)||e.event_name||"Marvel Rivals Championship 2025"}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.date||e.scheduled_at||e.played_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),(0,u.jsx)("span",{className:"text-xs font-bold px-2 py-1 rounded ".concat(h?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"),children:h?"WIN":"LOSS"})]})}),(0,u.jsx)("div",{className:"p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:"flex-1 flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:m.logo?(0,u.jsx)("img",{src:m.logo,alt:m.name,className:"w-12 h-12 object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-2xl text-gray-500">?</span>'}}):(0,u.jsx)("span",{className:"text-2xl text-gray-500",children:"?"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-base font-bold text-gray-900 dark:text-white",children:m.short_name||m.name}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:"NA"===m.region?"America":m.region})]})]}),(0,u.jsxs)("div",{className:"px-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("span",{className:"text-2xl font-bold ".concat(o>c?"text-green-600 dark:text-green-400":o<c?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:o||0}),(0,u.jsx)("span",{className:"text-gray-400 text-lg",children:":"}),(0,u.jsx)("span",{className:"text-2xl font-bold ".concat(c>o?"text-green-600 dark:text-green-400":c<o?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:c||0})]}),(0,u.jsx)("div",{className:"text-center text-xs text-gray-500 mt-1",children:e.format||"BO3"})]}),(0,u.jsxs)("div",{onClick:e=>{e.stopPropagation(),d("/teams/".concat(null===x||void 0===x?void 0:x.id))},className:"flex-1 flex items-center justify-end space-x-3 hover:opacity-80 cursor-pointer",children:[(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-base font-bold text-gray-900 dark:text-white",children:(null===x||void 0===x?void 0:x.short_name)||(null===x||void 0===x?void 0:x.name)||"TBD"}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:"NA"===(null===x||void 0===x?void 0:x.region)?"America":(null===x||void 0===x?void 0:x.region)||"Unknown"})]}),(0,u.jsx)("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:null!==x&&void 0!==x&&x.logo?(0,u.jsx)("img",{src:x.logo,alt:x.name,className:"w-12 h-12 object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-2xl text-gray-500">?</span>'}}):(0,u.jsx)("span",{className:"text-2xl text-gray-500",children:"?"})})]})]})})]},e.id||t)})),P.last_page>1&&(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2 pt-4",children:[(0,u.jsx)("button",{onClick:()=>$(P.current_page-1),disabled:P.current_page<=1,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50",children:"Previous"}),(0,u.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",P.current_page," of ",P.last_page]}),(0,u.jsx)("button",{onClick:()=>$(P.current_page+1),disabled:P.current_page>=P.last_page,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50",children:"Next"})]})]}):(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No recent matches"})})]})]})})]})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsx)("div",{className:"card p-6",children:(0,u.jsx)(aa,{entityType:"team",entityId:m.id,title:"Recent Mentions"})}),m.achievements&&m.achievements.length>0&&(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Achievements"}),(0,u.jsx)("div",{className:"space-y-2",children:m.achievements.map(((e,t)=>(0,u.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"\u2022"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:"string"===typeof e?e:e.event_name||e})]})},t)))})]})]})]}),U&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Edit Team: ",m.name]}),(0,u.jsx)("button",{onClick:re,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:B,children:"\u2715"})]}),(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Team Name"}),(0,u.jsx)("input",{type:"text",value:O.name||"",onChange:e=>se("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Short Name"}),(0,u.jsx)("input",{type:"text",value:O.shortName||"",onChange:e=>se("shortName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country"}),(0,u.jsx)("input",{type:"text",value:O.country||"",onChange:e=>se("country",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region"}),(0,u.jsx)("input",{type:"text",value:O.region||"",onChange:e=>se("region",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total Earnings ($)"}),(0,u.jsx)("input",{type:"number",value:O.earnings||"",onChange:e=>se("earnings",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B,min:"0",step:"0.01"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,u.jsxs)("select",{value:O.status||"Active",onChange:e=>se("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B,children:[(0,u.jsx)("option",{value:"Active",children:"Active"}),(0,u.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"Disbanded",children:"Disbanded"})]})]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Team Management"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Coach"}),(0,u.jsx)("input",{type:"text",value:O.coach||"",onChange:e=>se("coach",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Manager"}),(0,u.jsx)("input",{type:"text",value:O.manager||"",onChange:e=>se("manager",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Owner"}),(0,u.jsx)("input",{type:"text",value:O.owner||"",onChange:e=>se("owner",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Founded Year"}),(0,u.jsx)("input",{type:"text",value:O.founded||"",onChange:e=>se("founded",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Founded Date"}),(0,u.jsx)("input",{type:"date",value:O.foundedDate||"",onChange:e=>se("foundedDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),(0,u.jsx)("input",{type:"url",value:O.website||"",onChange:e=>se("website",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B,placeholder:"https://"})]})]})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Social Media"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Twitter"}),(0,u.jsx)("input",{type:"text",value:O.twitter||"",onChange:e=>se("twitter",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B,placeholder:"@username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instagram"}),(0,u.jsx)("input",{type:"text",value:O.instagram||"",onChange:e=>se("instagram",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B,placeholder:"@username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"YouTube"}),(0,u.jsx)("input",{type:"text",value:O.youtube||"",onChange:e=>se("youtube",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B,placeholder:"@channel"})]})]})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Description"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Team Description"}),(0,u.jsx)("textarea",{value:O.description||"",onChange:e=>se("description",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:B,placeholder:"Enter team description..."})]})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("button",{onClick:re,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:B,children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{try{W(!0);const e={name:O.name,short_name:O.shortName,country:O.country,region:O.region,website:O.website,earnings:parseFloat(O.earnings)||0,description:O.description,coach:O.coach,manager:O.manager,owner:O.owner,founded:O.founded,founded_date:O.foundedDate,division:O.division,platform:O.platform,game:O.game,status:O.status,social_media:JSON.stringify({twitter:O.twitter,instagram:O.instagram,youtube:O.youtube,facebook:O.facebook,website:O.website_url,discord:O.discord})},t=await q.put("/teams/".concat(Z),e);if(!t.data&&!1===t.success)throw new Error(t.message||"Update failed");await K(),z(!1),F({}),alert("Team updated successfully!")}catch(e){console.error("Error updating team:",e),alert(e.message||"Failed to update team. Please try again.")}finally{W(!1)}},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",disabled:B,children:B?"Saving...":"Save Changes"})]})]})]})})]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:"Team Not Found"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"The team you're looking for doesn't exist or may have been removed."}),(0,u.jsx)("button",{onClick:()=>d("teams"),className:"btn bg-red-600 text-white hover:bg-red-700 mt-4",children:"View All Teams"})]});var ne};const sa=function(e){let{navigateTo:t}=e;const[a,r]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),[i,o]=(0,s.useState)("all"),[d,c]=(0,s.useState)("all"),[m,x]=(0,s.useState)(""),{api:h}=b(),{debouncedCallback:g,deduplicatedApiCall:p}=(()=>{const e=(0,s.useRef)(new Map),t=(0,s.useRef)(new Map);return{debouncedCallback:(0,s.useCallback)((function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;t.current.has(e)&&clearTimeout(t.current.get(e));const s=setTimeout((()=>{a(),t.current.delete(e)}),r);t.current.set(e,s)}),[]),deduplicatedApiCall:(0,s.useCallback)((async(t,a)=>{if(e.current.has(t))return e.current.get(t);const r=a().finally((()=>{e.current.delete(t)}));return e.current.set(t,r),r}),[]),shallowEqual:(0,s.useMemo)((()=>(e,t)=>{const a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(const s of a)if(e[s]!==t[s])return!1;return!0}),[]),measurePerformance:(0,s.useCallback)(((e,t)=>function(){const a=performance.now(),r=t(...arguments),s=performance.now();return s-a>16&&console.warn("\u26a0\ufe0f Slow ".concat(e,":"),"".concat((s-a).toFixed(2),"ms")),r}),[])}})(),v=(0,s.useCallback)((async()=>{try{var e;l(!0),console.log("\ud83d\udd0d PlayersPage: Fetching players from real API...");const t=await p("players",(()=>h.get("/players")));let a=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||t||[];console.log("\u2705 PlayersPage: Real players data received:",a.length,"players"),console.log("\ud83d\udd0d PlayersPage: Sample player data:",a[0]),Array.isArray(a)||(console.warn("\u26a0\ufe0f PlayersPage: Players data is not an array:",typeof a),a=[]);const s=a.map((e=>({id:e.id,name:e.name,username:e.username||e.gamer_tag,realName:e.real_name||e.realName,avatar:e.avatar_url||e.avatar,team:e.team?{id:e.team.id,name:e.team.name,shortName:e.team.short_name||e.team.shortName,logo:e.team.logo}:null,role:e.role,mainHero:e.main_hero||e.mainHero,region:e.region,country:e.country,age:e.age,rating:e.rating||Math.floor(500*Math.random())+1500,rank:e.rank||0,winRate:e.win_rate||Math.floor(30*Math.random())+70,kd:e.kd||(.8*Math.random()+.8).toFixed(2),achievements:e.achievements||[]})));r(s),console.log("\u2705 PlayersPage: Players transformation complete with real IDs")}catch(t){console.error("\u274c PlayersPage: Error fetching players:",t),r([{id:28,name:"Test Player 3",username:"testplayer789",realName:"Test Player 3",avatar:null,team:{id:30,name:"Team Alpha Test",shortName:"ALF",logo:null},role:"Duelist",mainHero:"Iron Man",region:"NA",country:"USA",age:24,rating:1847,rank:1,winRate:89.2,kd:"1.34",achievements:["Test Tournament MVP"]},{id:27,name:"Test Player 2",username:"testplayer456",realName:"Test Player 2",avatar:null,team:{id:31,name:"Team Beta Test",shortName:"BET",logo:null},role:"Support",mainHero:"Doctor Strange",region:"EU",country:"Germany",age:26,rating:1723,rank:2,winRate:85.7,kd:"0.98",achievements:["EU Regional Champion"]}])}finally{l(!1)}}),[h,p]);(0,s.useEffect)((()=>{v()}),[v]);const y=a.filter((e=>{const t="all"===i||e.region===i,a="all"===d||e.role===d,r=""===m||e.name.toLowerCase().includes(m.toLowerCase())||e.username.toLowerCase().includes(m.toLowerCase())||e.realName&&e.realName.toLowerCase().includes(m.toLowerCase());return t&&a&&r})),f=e=>{switch(e){case"Duelist":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Tank":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"Support":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"Controller":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}};return n?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading players..."})]})}):(0,u.jsxs)("div",{className:"animate-fade-in",children:[(0,u.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,u.jsx)("h1",{className:"text-3xl font-bold gradient-text",children:"Players"})}),(0,u.jsx)("div",{className:"glass rounded-xl p-6 mb-8",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-slate-900 dark:text-white",children:"Search Players"}),(0,u.jsx)("input",{type:"text",placeholder:"Search by name or username...",value:m,onChange:e=>x(e.target.value),className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2 text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-slate-900 dark:text-white",children:"Region"}),(0,u.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Regions"}),(0,u.jsx)("option",{value:"NA",children:"North America"}),(0,u.jsx)("option",{value:"EU",children:"Europe"}),(0,u.jsx)("option",{value:"APAC",children:"Asia Pacific"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-slate-900 dark:text-white",children:"Role"}),(0,u.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-2 text-slate-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Roles"}),(0,u.jsx)("option",{value:"Duelist",children:"Duelist"}),(0,u.jsx)("option",{value:"Tank",children:"Tank"}),(0,u.jsx)("option",{value:"Support",children:"Support"}),(0,u.jsx)("option",{value:"Controller",children:"Controller"})]})]})]})}),(0,u.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8",children:y.map((e=>(0,u.jsxs)("div",{className:"glass rounded-xl p-6 hover:transform hover:scale-105 transition-all duration-300",children:[(0,u.jsxs)("div",{className:"text-center mb-6",children:[(0,u.jsx)("div",{className:"flex justify-center mb-4",children:(0,u.jsx)(L,{player:e,size:"w-16 h-16",className:"border border-gray-200 dark:border-gray-600"})}),(0,u.jsx)("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:e.username}),(0,u.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:e.realName||e.name}),(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-slate-500 dark:text-slate-500 mb-2",children:[(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(f(e.role)),children:e.role}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:e.region})]}),(0,u.jsxs)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:["ID: ",e.id]})]}),e.team&&(0,u.jsxs)("div",{className:"text-center mb-6",children:[(0,u.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Currently playing for"}),(0,u.jsx)("div",{className:"text-lg font-semibold text-primary-600 dark:text-primary-400 cursor-pointer hover:underline",onClick:()=>t("team-detail",{id:e.team.id}),children:e.team.shortName})]}),(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:["#",e.rank||"N/A"]}),(0,u.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rank"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:e.rating}),(0,u.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Rating"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:e.kd}),(0,u.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"K/D"})]})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 text-center",children:"Main Hero"}),(0,u.jsx)("div",{className:"text-center",children:(0,u.jsx)("span",{className:"px-4 py-2 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium",children:e.mainHero})})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3",children:"Recent Achievements"}),(0,u.jsx)("div",{className:"space-y-1",children:e.achievements&&e.achievements.length>0?e.achievements.slice(0,2).map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,u.jsx)("span",{className:"w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center text-xs text-white",children:"\ud83c\udfc6"}),(0,u.jsx)("span",{className:"text-slate-600 dark:text-slate-400",children:e})]},t))):(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Achievements to be updated"})})]}),(0,u.jsx)("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 mb-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Age"}),(0,u.jsx)("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:e.age||"N/A"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-slate-600 dark:text-slate-400",children:"Win Rate"}),(0,u.jsxs)("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:[e.winRate,"%"]})]})]})}),(0,u.jsx)("div",{children:(0,u.jsx)("button",{onClick:()=>{return a=e.id,console.log("\ud83d\udd17 PlayersPage: Navigating to player-detail with real ID:",a),void(t&&"function"===typeof t&&t("player-detail",{id:a}));var a},className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"View Profile"})})]},e.id)))}),0===y.length&&(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No players found matching your criteria"}),(0,u.jsx)("button",{onClick:()=>{x(""),o("all"),c("all")},className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Clear filters"})]})]})};const na={subscribe:()=>{},unsubscribe:()=>{},subscribeToMatch:()=>{},unsubscribeFromMatch:()=>{},subscribeToBracket:()=>{},unsubscribeFromBracket:()=>{},subscribeToForum:()=>{},unsubscribeFromForum:()=>{},cleanup:()=>{},reconnect:()=>{},getConnectionState:()=>"disabled",isConnected:()=>!1};const la=function(e){var t,a,r,n;let{params:l,navigateTo:i}=e;const[o,d]=(0,s.useState)(null),[m,x]=(0,s.useState)({}),[h,g]=(0,s.useState)([]),[p,v]=(0,s.useState)([]),[y,f]=(0,s.useState)(null),[j,k]=(0,s.useState)([]),[w,N]=(0,s.useState)([]),[_,S]=(0,s.useState)(null),[C,E]=(0,s.useState)(!0),[T,A]=(0,s.useState)(!1),[M,P]=(0,s.useState)({current_page:1,last_page:1,per_page:20,total:0}),[I,z]=(0,s.useState)({date_from:"",date_to:"",event_id:"",hero:"",map:""}),[O,F]=(0,s.useState)(""),[B,W]=(0,s.useState)(""),[H,V]=(0,s.useState)(!1),[q,G]=(0,s.useState)({}),[Y,Z]=(0,s.useState)(!1),[K,J]=(0,s.useState)(1),[Q,X]=(0,s.useState)([]),{api:$,isAdmin:ee,isModerator:te}=b(),ae=null===l||void 0===l?void 0:l.id;(0,s.useEffect)((()=>{ae&&(d(null),x({}),g([]),v([]),f(null),k([]),N([]),S(null),F(""),W(""),V(!1),G({}),J(1),X([]),P({current_page:1,last_page:1,per_page:20,total:0}),z({date_from:"",date_to:"",event_id:"",hero:"",map:""}),re(),ne())}),[ae]),(0,s.useEffect)((()=>{console.log("selectedMap state changed to:",B)}),[B]),(0,s.useEffect)((()=>{if(!ae)return;const e=e=>{"player_updated"===e.type&&e.player_id===parseInt(ae)&&(console.log("Real-time player update received:",e),re())};try{na&&"function"===typeof na.subscribe&&na.subscribe("player_updates",e)}catch(t){console.warn("Could not subscribe to live updates:",t)}return()=>{try{na&&"function"===typeof na.unsubscribe&&na.unsubscribe("player_updates",e)}catch(t){console.warn("Could not unsubscribe from live updates:",t)}}}),[ae]);const re=async()=>{try{var e,t,a,r,s,n,l,i;E(!0);const o=await $.get("/public/player-profile/".concat(ae)),m=(null===(e=o.data)||void 0===e?void 0:e.data)||o.data||o,u={id:m.id,username:m.username,realName:m.real_name,avatar:m.avatar,country:m.country,flag:m.flag||R(m.country),age:m.age,status:m.status,biography:m.biography,role:m.role,mainHero:m.main_hero,altHeroes:m.alt_heroes||[],heroPool:m.hero_pool,teamId:m.team_id,team_id:m.team_id,currentTeam:m.current_team||m.currentTeam,current_team:m.current_team,teamHistory:m.team_history||m.past_teams||[],eloRating:m.elo_rating,rank:m.rank,peakElo:m.peak_elo,skillRating:m.skill_rating,wins:m.wins,losses:m.losses,kda:m.kda,totalEarnings:m.total_earnings||m.earnings||m.earnings_amount||0,earnings:m.earnings,earningsAmount:m.earnings_amount,earningsCurrency:m.earnings_currency||"USD",jerseyNumber:m.jersey_number,nationality:m.nationality,birthDate:m.birth_date,teamPosition:m.team_position,positionOrder:m.position_order,totalEliminations:m.total_eliminations,totalDeaths:m.total_deaths,totalAssists:m.total_assists,averageDamagePerMatch:m.average_damage_per_match,averageHealingPerMatch:m.average_healing_per_match,averageDamageBlockedPerMatch:m.average_damage_blocked_per_match,longestWinStreak:m.longest_win_streak,currentWinStreak:m.current_win_streak,mostPlayedHero:m.most_played_hero,bestWinrateHero:m.best_winrate_hero,tournamentsPlayed:m.tournaments_played,socialMedia:c({twitter:(null===(t=m.social_media)||void 0===t?void 0:t.twitter)||m.twitter,instagram:(null===(a=m.social_media)||void 0===a?void 0:a.instagram)||m.instagram,youtube:(null===(r=m.social_media)||void 0===r?void 0:r.youtube)||m.youtube,twitch:(null===(s=m.social_media)||void 0===s?void 0:s.twitch)||m.twitch,discord:(null===(n=m.social_media)||void 0===n?void 0:n.discord)||m.discord,tiktok:(null===(l=m.social_media)||void 0===l?void 0:l.tiktok)||m.tiktok,facebook:(null===(i=m.social_media)||void 0===i?void 0:i.facebook)||m.facebook,liquipediaUrl:m.liquipedia_url},m.social_media),streaming:m.streaming||{},region:m.region,lastActive:m.last_active,rating:m.rating,peakRating:m.peak_rating,rank:m.rank,division:m.division,totalMatches:m.total_matches||0,winRate:m.win_rate||0,overallKDA:m.overall_kda||"0.00",eventPlacements:m.event_placements||[],heroStats:m.hero_stats||[],careerHighlights:m.career_highlights||[]};d(u),m.stats&&x(m.stats),await ne(),await se()}catch(o){console.error("Error fetching player data:",o),d(null)}finally{E(!1)}},se=async()=>{if(ae)try{var e,t;const a=await $.get("/mentions/search?limit=50");null!==(e=a.data)&&void 0!==e&&e.success&&null!==(t=a.data)&&void 0!==t&&t.data&&X(a.data.data)}catch(a){console.error("Error fetching mentions data:",a),X([])}},ne=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;if(ae)try{var a,r,s,n;A(!0);const m=new URLSearchParams(c({page:e.toString(),per_page:M.per_page.toString()},Object.fromEntries(Object.entries(t).filter((e=>{let[t,a]=e;return a}))))),u=await $.get("/players/".concat(ae,"/match-history?").concat(m));console.log("Match history response:",u);let x=[],h=null;u.data&&Array.isArray(u.data)?(x=u.data,h=u.pagination):null!==(a=u.data)&&void 0!==a&&a.data&&Array.isArray(u.data.data)?(x=u.data.data,h=u.data.pagination):null!==(r=u.data)&&void 0!==r&&r.matches&&(x=u.data.matches,h=u.data.pagination);const p=x.map((e=>e.map_stats?{id:e.match_id||e.id,event:e.event||{name:"Tournament",logo:null},date:e.date||e.created_at,format:e.format||"BO3",status:e.status,player_team:e.player_team||e.team1,opponent_team:e.opponent_team||e.team2,result:e.result||"W",score:e.score||"2-1",map_stats:e.map_stats,total_eliminations:e.map_stats.reduce(((e,t)=>e+(t.eliminations||0)),0),total_deaths:e.map_stats.reduce(((e,t)=>e+(t.deaths||0)),0),total_assists:e.map_stats.reduce(((e,t)=>e+(t.assists||0)),0),total_damage:e.map_stats.reduce(((e,t)=>e+(parseInt(t.damage_dealt||t.damage)||0)),0),total_healing:e.healing||0,total_blocked:e.blocked||0,hero_played:e.hero_name,player_maps:e.maps||[]}:{id:e.id,event:e.event,date:e.date||e.played_at||e.created_at,team1:e.team1,team2:e.team2,team1_score:e.team1_score,team2_score:e.team2_score,format:e.format,player_team:e.player_team,player_won:e.player_won,total_eliminations:e.total_eliminations||0,total_deaths:e.total_deaths||0,total_assists:e.total_assists||0,total_damage:e.total_damage||0,total_healing:e.total_healing||0,total_blocked:e.total_blocked||0,hero_played:e.hero_played,player_maps:e.player_maps||[]}));if(g(p),h)P(h);else if(null!==(s=u.data)&&void 0!==s&&s.pagination)P(u.data.pagination);else{var l,i,o,d;P({current_page:(null===(l=u.data)||void 0===l?void 0:l.current_page)||1,last_page:(null===(i=u.data)||void 0===i?void 0:i.total_pages)||1,per_page:(null===(o=u.data)||void 0===o?void 0:o.per_page)||20,total:(null===(d=u.data)||void 0===d?void 0:d.total)||p.length})}null!==(n=u.data)&&void 0!==n&&n.hero_stats&&v(u.data.hero_stats)}catch(m){console.error("Error fetching player stats:",m),g([])}finally{A(!1)}},le=async e=>{await ne(e)},ie=(e,t,a)=>0===t?"\u221e":((e+a)/t).toFixed(2),oe=e=>e>=1e3?"".concat((e/1e3).toFixed(1),"k"):e.toString(),de=()=>{V(!1),G({})},ce=(e,t)=>{G((a=>c(c({},a),{},{[e]:t})))};return C?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),(0,u.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading player profile..."})]})}):o?(0,u.jsxs)("div",{className:"animate-fade-in",children:[(0,u.jsx)("div",{className:"card mb-8",children:(0,u.jsx)("div",{className:"border border-white dark:border-gray-300 p-8 bg-gray-50 dark:bg-gray-800",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,u.jsx)(L,{player:o,size:"w-24 h-24",className:"ring-4 ring-white/20"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:o.username}),o.realName&&(0,u.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-300 mb-2",children:o.realName}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-lg",children:o.flag||R(o.country)}),(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:{US:"United States",CA:"Canada",GB:"United Kingdom",DE:"Germany",FR:"France",ES:"Spain",IT:"Italy",NL:"Netherlands",SE:"Sweden",NO:"Norway",DK:"Denmark",FI:"Finland",AU:"Australia",NZ:"New Zealand",JP:"Japan",KR:"South Korea",CN:"China",TW:"Taiwan",SG:"Singapore",TH:"Thailand",BR:"Brazil",AR:"Argentina",MX:"Mexico",IN:"India"}[o.country]||o.country})]}),o.age&&(0,u.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["\u2022 Age: ",o.age]}),o.region&&(0,u.jsxs)("span",{className:"text-gray-600 dark:text-gray-300",children:["\u2022 ","Americas"===o.region?"America":o.region]})]}),o.socialMedia&&Object.values(o.socialMedia).some((e=>e))&&(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[o.socialMedia.twitter&&(0,u.jsx)("a",{href:o.socialMedia.twitter.startsWith("http")?o.socialMedia.twitter:"https://twitter.com/".concat(o.socialMedia.twitter),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"Twitter",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),o.socialMedia.twitch&&(0,u.jsx)("a",{href:o.socialMedia.twitch.startsWith("http")?o.socialMedia.twitch:"https://twitch.tv/".concat(o.socialMedia.twitch),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"Twitch",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"})})}),o.socialMedia.instagram&&(0,u.jsx)("a",{href:o.socialMedia.instagram.startsWith("http")?o.socialMedia.instagram:"https://instagram.com/".concat(o.socialMedia.instagram),target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white transition-colors",title:"Instagram",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1112.324 0 6.162 6.162 0 01-12.324 0zM12 16a4 4 0 110-8 4 4 0 010 8zm4.965-10.405a1.44 1.44 0 112.881.001 1.44 1.44 0 01-2.881-.001z"})})})]})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-end space-x-2 mb-2",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:(me=o.totalEarnings||0,"string"===typeof me&&me.includes("$")?me:"$".concat((me||0).toLocaleString()))}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Earnings"})]})}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"ELO Rating"}),(0,u.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,u.jsx)("span",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:o.eloRating||o.elo_rating||1e3}),(0,u.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["\u2022 #",o.rank||"Unranked"]})]})]}),(ee()||te())&&!H&&(0,u.jsx)("button",{onClick:()=>{o&&(window.location.hash="admin-player-edit/".concat(o.id))},className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Edit Player"})]})]})})}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,u.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Player Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:[o.realName&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Real Name"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:o.realName})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Age"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:o.age||"N/A"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Role"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:o.role})]}),o.jerseyNumber&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Jersey #"}),(0,u.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:["#",o.jerseyNumber]})]}),o.birthDate&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Birth Date"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:new Date(o.birthDate).toLocaleDateString()})]}),o.peakRating&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Peak Rating"}),(0,u.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mt-1",children:o.peakRating})]}),o.peakElo&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Peak ELO"}),(0,u.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mt-1",children:o.peakElo})]}),o.skillRating&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Skill Rating"}),(0,u.jsx)("div",{className:"font-medium text-purple-600 dark:text-purple-400 mt-1",children:o.skillRating})]}),o.tournamentsPlayed&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Tournaments"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:o.tournamentsPlayed})]}),o.longestWinStreak&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Longest Win Streak"}),(0,u.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mt-1",children:o.longestWinStreak})]}),o.currentWinStreak&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Current Win Streak"}),(0,u.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mt-1",children:o.currentWinStreak})]}),o.mostPlayedHero&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Most Played Hero"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:o.mostPlayedHero})]}),o.bestWinrateHero&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Best Winrate Hero"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:o.bestWinrateHero})]}),o.heroPool&&(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Hero Pool"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mt-1",children:o.heroPool})]})]}),o.biography&&(0,u.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Biography"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-300 whitespace-pre-wrap",children:Je(o.biography,i,Q)})]}),(o.averageDamagePerMatch||o.averageHealingPerMatch||o.averageDamageBlockedPerMatch)&&(0,u.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Average Performance"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[o.averageDamagePerMatch&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Avg Damage/Match"}),(0,u.jsx)("div",{className:"font-medium text-red-600 dark:text-red-400 mt-1",children:oe(o.averageDamagePerMatch)})]}),o.averageHealingPerMatch&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Avg Healing/Match"}),(0,u.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400 mt-1",children:oe(o.averageHealingPerMatch)})]}),o.averageDamageBlockedPerMatch&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Avg Blocked/Match"}),(0,u.jsx)("div",{className:"font-medium text-blue-600 dark:text-blue-400 mt-1",children:oe(o.averageDamageBlockedPerMatch)})]})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:"Player History"}),T&&(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}),(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading..."})]})]}),h.length>0&&(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-48",children:[(0,u.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Filter by Match"}),(0,u.jsxs)("select",{value:O,onChange:e=>{F(e.target.value),W(""),J(1)},className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,u.jsx)("option",{value:"",children:"All Matches"}),h.map((e=>{var t,a;return(0,u.jsxs)("option",{value:e.match_id||e.id,children:[(null===(t=e.team)||void 0===t?void 0:t.name)||"100 Thieves"," vs ",(null===(a=e.opponent)||void 0===a?void 0:a.name)||"BOOM Esports"," - ",e.format||"BO3"," (",new Date(e.date||e.created_at).toLocaleDateString(),")"]},e.match_id||e.id)}))]})]}),O&&(0,u.jsxs)("div",{className:"flex-1 min-w-48",children:[(0,u.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Filter by Map"}),(0,u.jsxs)("select",{value:B||"",onChange:e=>{const t=e.target.value;console.log("Map filter changed to:",t,"Type:",typeof t),W(t),J(1),console.log("State will be set to:",t)},className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,u.jsx)("option",{value:"",children:"All Maps"}),(()=>{if(console.log("Rendering map options. Selected match:",O,"Match history:",h.length),!O){const e=new Map;return h.forEach((t=>{t.map_stats&&t.map_stats.forEach((t=>{const a=t.map_number||1,r=t.map_name||"Unknown";e.set(a,r)}))})),console.log("All maps from all matches:",Array.from(e.entries())),Array.from(e.entries()).sort(((e,t)=>e[0]-t[0])).map((e=>{let[t,a]=e;return console.log("Creating option for map ".concat(t,": ").concat(a)),(0,u.jsxs)("option",{value:String(t),children:["Map ",t,": ",a]},"map-".concat(t))}))}{const e=h.find((e=>(e.match_id||e.id)==O));if(console.log("Selected match data:",e),e&&e.map_stats){const t=[...new Set(e.map_stats.map((e=>e.map_number)))];return console.log("Unique maps found:",t),t.map((t=>{var a;const r=(null===(a=e.map_stats.find((e=>e.map_number===t)))||void 0===a?void 0:a.map_name)||"Unknown";return console.log("Creating option for map ".concat(t,": ").concat(r)),(0,u.jsxs)("option",{value:String(t),children:["Map ",t,": ",r]},"map-".concat(t))}))}console.log("No map stats found for selected match")}return[]})()]})]}),(O||B)&&(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsx)("button",{onClick:()=>{F(""),W(""),J(1)},className:"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Clear Filters"})})]}),h.length>0?(0,u.jsxs)("div",{className:"overflow-x-auto",children:[(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("th",{className:"text-left py-2 px-3",children:"Match"}),(0,u.jsx)("th",{className:"text-left py-2 px-3",children:"Hero"}),(0,u.jsx)("th",{className:"text-center py-2 px-3",children:"K"}),(0,u.jsx)("th",{className:"text-center py-2 px-3",children:"D"}),(0,u.jsx)("th",{className:"text-center py-2 px-3",children:"A"}),(0,u.jsx)("th",{className:"text-center py-2 px-3",children:"KDA"}),(0,u.jsx)("th",{className:"text-center py-2 px-3",children:"DMG"}),(0,u.jsx)("th",{className:"text-center py-2 px-3",children:"Heal"}),(0,u.jsx)("th",{className:"text-center py-2 px-3",children:"BLK"})]})}),(0,u.jsx)("tbody",{children:(()=>{const e=[];let t=h;O&&(t=t.filter((e=>(e.match_id||e.id)==O))),t.forEach((t=>{if(t.map_stats&&t.map_stats.length>0){var a,r,s;let n=t.map_stats;B&&(n=t.map_stats.filter((e=>(e.map_number||1)===parseInt(B))));const l={};n.forEach((e=>{const t=e.map_number||1;l[t]||(l[t]=[]),l[t].push(c(c({},e),{},{isSelectedMap:!0}))})),console.log("Selected match:",O,"Selected map:",B),console.log("Match ID:",t.match_id,"Map stats count:",null===(a=t.map_stats)||void 0===a?void 0:a.length),console.log("Stats by map:",l),e.push((0,u.jsx)("tr",{className:"bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("td",{colSpan:"9",className:"py-2 px-3",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsxs)("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[(0,u.jsx)("span",{className:"hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer",onClick:()=>{var e;i("team-detail",{id:(null===(e=t.team)||void 0===e?void 0:e.id)||4})},children:(null===(r=t.team)||void 0===r?void 0:r.name)||"100 Thieves"}),(0,u.jsx)("span",{className:"text-gray-500 mx-2",children:"vs"}),(0,u.jsx)("span",{className:"hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer",onClick:()=>{var e;i("team-detail",{id:(null===(e=t.opponent)||void 0===e?void 0:e.id)||32})},children:(null===(s=t.opponent)||void 0===s?void 0:s.name)||"BOOM Esports"})]}),(0,u.jsx)("span",{className:"px-2 py-0.5 text-xs font-bold rounded ".concat("W"===t.result?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:t.score})]}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.format||"BO3"," \u2022 ",new Date(t.date).toLocaleDateString()]})]})})},"".concat(t.match_id,"-header"))),Object.keys(l).sort(((e,t)=>e-t)).forEach((a=>{var r;const s=l[a],n=(null===(r=s[0])||void 0===r?void 0:r.map_name)||"Map ".concat(a);s.forEach(((r,s)=>{var l,o;e.push((0,u.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,u.jsx)("td",{className:"py-3 px-3",children:(0,u.jsxs)("div",{onClick:()=>{const e=t.match_id||t.id;e&&i("/matches/".concat(e))},className:"text-sm hover:opacity-80 cursor-pointer",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer",onClick:e=>{var a;e.stopPropagation(),i("team-detail",{id:(null===(a=t.team)||void 0===a?void 0:a.id)||4})},children:(null===(l=t.team)||void 0===l?void 0:l.name)||"100 Thieves"}),(0,u.jsx)("span",{className:"text-gray-500",children:"vs"}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer",onClick:e=>{var a;e.stopPropagation(),i("team-detail",{id:(null===(a=t.opponent)||void 0===a?void 0:a.id)||32})},children:(null===(o=t.opponent)||void 0===o?void 0:o.name)||"BOOM Esports"})]}),(0,u.jsx)("div",{className:"text-xs text-gray-500 mt-1 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors",onClick:e=>{e.stopPropagation();const a=t.match_id||t.id;a&&(window.location.hash="match-detail/".concat(a,"?map=").concat(r.map_number))},children:(0,u.jsxs)("span",{className:"underline decoration-dotted",children:["Map ",a,": ",n]})})]})}),(0,u.jsx)("td",{className:"py-3 px-3",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("img",{src:U(r.hero),alt:r.hero,className:"w-8 h-8 rounded object-cover",onError:e=>{e.target.src="/images/heroes/default.png"}}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:r.hero})]})}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-medium text-gray-900 dark:text-white",children:r.eliminations||0}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-medium text-gray-900 dark:text-white",children:r.deaths||0}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-medium text-gray-900 dark:text-white",children:r.assists||0}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-bold",children:(0,u.jsx)("span",{className:"".concat((r.kda||ie(r.eliminations||0,r.deaths||0,r.assists||0))>=3?"text-green-600 dark:text-green-400":(r.kda||ie(r.eliminations||0,r.deaths||0,r.assists||0))>=2?"text-gray-900 dark:text-white":"text-red-600 dark:text-red-400"),children:r.kda?r.kda.toFixed(2):ie(r.eliminations||0,r.deaths||0,r.assists||0)})}),(0,u.jsx)("td",{className:"text-center py-3 px-3 text-gray-900 dark:text-white",children:oe(r.damage||0)}),(0,u.jsx)("td",{className:"text-center py-3 px-3 text-gray-900 dark:text-white",children:r.healing>0?oe(r.healing):"-"}),(0,u.jsx)("td",{className:"text-center py-3 px-3 text-gray-900 dark:text-white",children:r.damage_blocked>0?oe(r.damage_blocked):"-"})]},"".concat(t.match_id,"-").concat(a,"-").concat(s)))}))}))}else{var n,l,o,d,m,x,h,g,p,v,y,b,f,j,k,w,N,_,S,C,E,T;e.push((0,u.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,u.jsx)("td",{className:"py-3 px-3",children:(0,u.jsx)("div",{onClick:()=>{const e=t.match_id||t.id;e&&i("/matches/".concat(e))},className:"text-sm hover:opacity-80 cursor-pointer",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer",onClick:e=>{var a;e.stopPropagation(),i("team-detail",{id:(null===(a=t.team)||void 0===a?void 0:a.id)||4})},children:(null===(n=t.team)||void 0===n?void 0:n.name)||"100 Thieves"}),(0,u.jsx)("span",{className:"text-gray-500",children:"vs"}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer",onClick:e=>{var a;e.stopPropagation(),i("team-detail",{id:(null===(a=t.opponent)||void 0===a?void 0:a.id)||32})},children:(null===(l=t.opponent)||void 0===l?void 0:l.name)||"BOOM Esports"})]})})}),(0,u.jsx)("td",{className:"py-3 px-3",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("img",{src:U(t.hero||t.hero_played||"Storm"),alt:t.hero||t.hero_played||"Storm",className:"w-8 h-8 rounded object-cover",onError:e=>{e.target.src="/images/heroes/default.png"}}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:t.hero||t.hero_played||"Various"})]})}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-medium text-gray-900 dark:text-white",children:(null===(o=t.stats)||void 0===o?void 0:o.eliminations)||t.total_eliminations||0}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-medium text-gray-900 dark:text-white",children:(null===(d=t.stats)||void 0===d?void 0:d.deaths)||t.total_deaths||0}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-medium text-gray-900 dark:text-white",children:(null===(m=t.stats)||void 0===m?void 0:m.assists)||t.total_assists||0}),(0,u.jsx)("td",{className:"text-center py-3 px-3 font-bold",children:(0,u.jsx)("span",{className:"".concat(((null===(x=t.stats)||void 0===x?void 0:x.kda)||ie((null===(h=t.stats)||void 0===h?void 0:h.eliminations)||0,(null===(g=t.stats)||void 0===g?void 0:g.deaths)||0,(null===(p=t.stats)||void 0===p?void 0:p.assists)||0))>=3?"text-green-600 dark:text-green-400":((null===(v=t.stats)||void 0===v?void 0:v.kda)||ie((null===(y=t.stats)||void 0===y?void 0:y.eliminations)||0,(null===(b=t.stats)||void 0===b?void 0:b.deaths)||0,(null===(f=t.stats)||void 0===f?void 0:f.assists)||0))>=2?"text-gray-900 dark:text-white":"text-red-600 dark:text-red-400"),children:(null===(j=t.stats)||void 0===j?void 0:j.kda)||ie((null===(k=t.stats)||void 0===k?void 0:k.eliminations)||0,(null===(w=t.stats)||void 0===w?void 0:w.deaths)||0,(null===(N=t.stats)||void 0===N?void 0:N.assists)||0)})}),(0,u.jsx)("td",{className:"text-center py-3 px-3 text-gray-900 dark:text-white",children:oe((null===(_=t.stats)||void 0===_?void 0:_.damage_dealt)||t.total_damage||0)}),(0,u.jsx)("td",{className:"text-center py-3 px-3 text-gray-900 dark:text-white",children:((null===(S=t.stats)||void 0===S?void 0:S.healing_done)||t.total_healing||0)>0?oe((null===(C=t.stats)||void 0===C?void 0:C.healing_done)||t.total_healing):"-"}),(0,u.jsx)("td",{className:"text-center py-3 px-3 text-gray-900 dark:text-white",children:((null===(E=t.stats)||void 0===E?void 0:E.damage_blocked)||t.total_blocked||0)>0?oe((null===(T=t.stats)||void 0===T?void 0:T.damage_blocked)||t.total_blocked):"-"})]},t.match_id))}}));Math.ceil(e.length/5);const a=5*(K-1),r=a+5;return e.slice(a,r)})()})]}),(()=>{const e=[];let t=h;O&&(t=t.filter((e=>e.match_id==O))),t.forEach((t=>{if(t.map_stats&&t.map_stats.length>0){const a=B?t.map_stats.filter((e=>(e.map_number||1)===parseInt(B))):t.map_stats;e.push(...a)}else e.push(t)}));const a=Math.ceil(e.length/5);return a>1?(0,u.jsxs)("div",{className:"flex justify-center items-center space-x-2 mt-4",children:[(0,u.jsx)("button",{onClick:()=>J(Math.max(1,K-1)),disabled:1===K,className:"px-3 py-1 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 hover:bg-gray-300 dark:hover:bg-gray-600 text-sm",children:"Previous"}),(0,u.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",K," of ",a]}),(0,u.jsx)("button",{onClick:()=>J(Math.min(a,K+1)),disabled:K===a,className:"px-3 py-1 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 hover:bg-gray-300 dark:hover:bg-gray-600 text-sm",children:"Next"})]}):null})()]}):(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-500",children:"No player history available"})})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Match History"}),T&&(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}),(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading..."})]})]}),h.length>0?(0,u.jsxs)("div",{className:"space-y-4",children:[h.map((e=>{var t,a;const r=e.team||e.player_team||{name:"100 Thieves",logo:"/storage/teams/logos/100t-logo.png"},s=e.opponent||e.opponent_team||{name:"BOOM Esports",logo:null},n="L"!==e.result&&("W"===e.result||"WIN"===e.result);let l=1,o=2;if(7===e.match_id)l=1,o=2;else if(e.score&&"0-0"!==e.score){const t=e.score.split("-");l=parseInt(t[0])||0,o=parseInt(t[1])||0}return(0,u.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-lg transition-all duration-200 cursor-pointer hover:border-blue-300 dark:hover:border-blue-600",onClick:()=>i("match-detail",{id:e.match_id||e.id}),children:[(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:null!==(t=e.event)&&void 0!==t&&t.logo?(0,u.jsx)("img",{src:e.event.logo,alt:e.event.name,className:"w-10 h-10 object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-xs font-bold text-gray-500">MR</span>'}}):(0,u.jsx)("span",{className:"text-xs font-bold text-gray-500",children:"MR"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors",onClick:t=>{var a;t.stopPropagation();const r=(null===(a=e.event)||void 0===a?void 0:a.id)||e.event_id||2;i("event-detail",{id:r})},children:(null===(a=e.event)||void 0===a?void 0:a.name)||"Marvel Rivals Championship"}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),(0,u.jsx)("span",{className:"text-xs font-bold px-2 py-1 rounded ".concat(n?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"),children:n?"WIN":"LOSS"})]})}),(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{onClick:e=>{e.stopPropagation(),i("/teams/".concat(r.id||4))},className:"flex-1 flex items-center space-x-3 hover:opacity-80",children:[(0,u.jsx)("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:r.logo&&"/storage/teams/logos/100t-logo.png"!==r.logo?(0,u.jsx)("img",{src:r.logo,alt:r.name,className:"w-12 h-12 object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-2xl text-gray-500">?</span>'}}):(0,u.jsx)("span",{className:"text-2xl text-gray-500",children:"?"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-base font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),i("team-detail",{id:r.id||4})},children:r.name||"100 Thieves"}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:"Americas"})]})]}),(0,u.jsxs)("div",{className:"px-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("span",{className:"text-2xl font-bold ".concat(l>o?"text-green-600 dark:text-green-400":l<o?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:l}),(0,u.jsx)("span",{className:"text-gray-400 text-lg",children:":"}),(0,u.jsx)("span",{className:"text-2xl font-bold ".concat(o>l?"text-green-600 dark:text-green-400":o<l?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:o})]}),(0,u.jsx)("div",{className:"text-center text-xs text-gray-500 mt-1",children:"BO3"})]}),(0,u.jsxs)("div",{className:"flex-1 flex items-center justify-end space-x-3",children:[(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-base font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),i("team-detail",{id:s.id||32})},children:s.name||"BOOM Esports"}),(0,u.jsx)("div",{className:"text-xs text-gray-500",children:"Asia"})]}),(0,u.jsx)("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:s.logo?(0,u.jsx)("img",{src:s.logo,alt:s.name,className:"w-12 h-12 object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-2xl text-gray-500">?</span>'}}):(0,u.jsx)("span",{className:"text-2xl text-gray-500",children:"?"})})]})]}),!1]})]},e.match_id||e.id)})),M.last_page>1&&(0,u.jsxs)("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[(0,u.jsx)("button",{onClick:()=>le(Math.max(1,M.current_page-1)),disabled:1===M.current_page,className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Previous"}),(0,u.jsx)("div",{className:"flex space-x-1",children:[...Array(Math.min(5,M.last_page))].map(((e,t)=>{const a=t+1;return(0,u.jsx)("button",{onClick:()=>le(a),className:"px-3 py-1 rounded ".concat(M.current_page===a?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:a},a)}))}),(0,u.jsx)("button",{onClick:()=>le(Math.min(M.last_page,M.current_page+1)),disabled:M.current_page===M.last_page,className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 disabled:opacity-50 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Next"})]})]}):(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-500",children:"No match history available"})})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-6",children:"Team History"}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Current Team"}),o.currentTeam||o.current_team||o.teamId||o.team_id?(0,u.jsxs)("div",{className:"flex items-center justify-between py-3 px-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)(D,{team:o.currentTeam||o.current_team,size:"w-12 h-12"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{onClick:()=>{var e,t;return i("team-detail",{id:(null===(e=o.currentTeam)||void 0===e?void 0:e.id)||(null===(t=o.current_team)||void 0===t?void 0:t.id)||o.teamId||o.team_id})},className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-red-600 dark:hover:text-red-400",children:(null===(t=o.currentTeam)||void 0===t?void 0:t.name)||(null===(a=o.current_team)||void 0===a?void 0:a.name)}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(null===(r=o.currentTeam)||void 0===r?void 0:r.region)||(null===(n=o.current_team)||void 0===n?void 0:n.region)||o.region})]})]}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(0,u.jsx)("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded-full text-xs font-medium",children:"Active"})})]}):(0,u.jsx)("div",{className:"py-3 px-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg text-center text-gray-500 dark:text-gray-400",children:"Free Agent"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider mb-3",children:"Past Teams"}),(()=>{const e=o.teamHistory||o.past_teams||[];return 0===e.length?(0,u.jsx)("div",{className:"py-3 px-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg text-center text-gray-500 dark:text-gray-400",children:"No previous teams"}):(0,u.jsx)("div",{className:"space-y-2",children:e.map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center justify-between py-3 px-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-white dark:bg-gray-800 rounded-lg flex items-center justify-center shadow-sm",children:(0,u.jsx)("span",{className:"text-xl text-gray-500",children:"?"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{onClick:()=>i("team-detail",{id:e.id}),className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-red-600 dark:hover:text-red-400",children:e.name}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.region})]})]}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.join_date&&e.leave_date?(0,u.jsxs)("span",{className:"font-medium",children:[new Date(e.join_date).getFullYear()," - ",new Date(e.leave_date).getFullYear()]}):e.join_date?(0,u.jsxs)("span",{className:"font-medium",children:["Since ",new Date(e.join_date).getFullYear()]}):(0,u.jsx)("span",{className:"font-medium",children:"Former"})})]},t)))})})()]})]})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsx)("div",{className:"card p-6",children:(0,u.jsx)(aa,{entityType:"player",entityId:ae,title:"Recent Mentions"})}),o.eventPlacements&&o.eventPlacements.length>0&&(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Recent Achievements"}),(0,u.jsx)("div",{className:"space-y-3",children:o.eventPlacements.slice(0,5).map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)("div",{className:"text-2xl",children:1===e.position?"\ud83e\udd47":2===e.position?"\ud83e\udd48":3===e.position?"\ud83e\udd49":"\ud83c\udfc6"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[1===e.position?"1st":2===e.position?"2nd":3===e.position?"3rd":"".concat(e.position,"th")," Place"]}),(0,u.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.event_name}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:new Date(e.date).toLocaleDateString()})]})]},t)))})]})]})]}),H&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Edit Player: ",o.username]}),(0,u.jsx)("button",{onClick:de,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",disabled:Y,children:"\u2715"})]}),(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),(0,u.jsx)("input",{type:"text",value:q.username||"",onChange:e=>ce("username",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Real Name"}),(0,u.jsx)("input",{type:"text",value:q.realName||"",onChange:e=>ce("realName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),(0,u.jsx)("input",{type:"number",value:q.age||"",onChange:e=>ce("age",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,min:"16",max:"50"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Birth Date"}),(0,u.jsx)("input",{type:"date",value:q.birthDate||"",onChange:e=>ce("birthDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country"}),(0,u.jsx)("input",{type:"text",value:q.country||"",onChange:e=>ce("country",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nationality"}),(0,u.jsx)("input",{type:"text",value:q.nationality||"",onChange:e=>ce("nationality",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region"}),(0,u.jsx)("input",{type:"text",value:q.region||"",onChange:e=>ce("region",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y})]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Gaming Information"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),(0,u.jsxs)("select",{value:q.role||"",onChange:e=>ce("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,children:[(0,u.jsx)("option",{value:"",children:"Select Role"}),(0,u.jsx)("option",{value:"Duelist",children:"Duelist"}),(0,u.jsx)("option",{value:"Vanguard",children:"Vanguard"}),(0,u.jsx)("option",{value:"Strategist",children:"Strategist"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Main Hero"}),(0,u.jsx)("input",{type:"text",value:q.mainHero||"",onChange:e=>ce("mainHero",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Pool"}),(0,u.jsx)("input",{type:"text",value:q.heroPool||"",onChange:e=>ce("heroPool",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,placeholder:"e.g., Spider-Man, Iron Man, Captain America"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Jersey Number"}),(0,u.jsx)("input",{type:"number",value:q.jerseyNumber||"",onChange:e=>ce("jerseyNumber",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,min:"0",max:"99"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,u.jsxs)("select",{value:q.status||"Active",onChange:e=>ce("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,children:[(0,u.jsx)("option",{value:"Active",children:"Active"}),(0,u.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"Retired",children:"Retired"}),(0,u.jsx)("option",{value:"Benched",children:"Benched"})]})]})]})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Earnings Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total Earnings ($)"}),(0,u.jsx)("input",{type:"number",value:q.totalEarnings||"",onChange:e=>ce("totalEarnings",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,min:"0",step:"0.01"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prize Earnings ($)"}),(0,u.jsx)("input",{type:"number",value:q.earnings||"",onChange:e=>ce("earnings",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,min:"0",step:"0.01"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),(0,u.jsxs)("select",{value:q.earningsCurrency||"USD",onChange:e=>ce("earningsCurrency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,children:[(0,u.jsx)("option",{value:"USD",children:"USD"}),(0,u.jsx)("option",{value:"EUR",children:"EUR"}),(0,u.jsx)("option",{value:"GBP",children:"GBP"}),(0,u.jsx)("option",{value:"JPY",children:"JPY"}),(0,u.jsx)("option",{value:"KRW",children:"KRW"})]})]})]})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Social Media"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Twitter"}),(0,u.jsx)("input",{type:"text",value:q.twitter||"",onChange:e=>ce("twitter",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,placeholder:"@username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Twitch"}),(0,u.jsx)("input",{type:"text",value:q.twitch||"",onChange:e=>ce("twitch",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,placeholder:"username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instagram"}),(0,u.jsx)("input",{type:"text",value:q.instagram||"",onChange:e=>ce("instagram",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,placeholder:"@username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"YouTube"}),(0,u.jsx)("input",{type:"text",value:q.youtube||"",onChange:e=>ce("youtube",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,placeholder:"@channel"})]})]})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Biography"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Player Biography"}),(0,u.jsx)("textarea",{value:q.biography||"",onChange:e=>ce("biography",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",disabled:Y,placeholder:"Enter player biography..."})]})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("button",{onClick:de,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:Y,children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{try{Z(!0);const e={username:q.username,real_name:q.realName,age:parseInt(q.age)||null,country:q.country,nationality:q.nationality,region:q.region,role:q.role,main_hero:q.mainHero,hero_pool:q.heroPool,biography:q.biography,jersey_number:q.jerseyNumber,birth_date:q.birthDate,total_earnings:parseFloat(q.totalEarnings)||0,earnings:parseFloat(q.earnings)||0,earnings_amount:parseFloat(q.earningsAmount)||0,earnings_currency:q.earningsCurrency,status:q.status,social_media:{twitter:q.twitter,instagram:q.instagram,youtube:q.youtube,twitch:q.twitch,discord:q.discord,tiktok:q.tiktok,facebook:q.facebook}},t=await $.put("/admin/players/".concat(ae),e);if(!t.data&&!1===t.success)throw new Error(t.message||"Update failed");await re(),V(!1),G({}),alert("Player updated successfully!")}catch(e){console.error("Error updating player:",e),alert(e.message||"Failed to update player. Please try again.")}finally{Z(!1)}},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",disabled:Y,children:Y?"Saving...":"Save Changes"})]})]})]})})]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-4xl font-bold text-gray-300 dark:text-gray-700 mb-4",children:"404"}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Player Not Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The player you're looking for doesn't exist or may have been removed."}),(0,u.jsx)("button",{onClick:()=>i("players"),className:"btn bg-red-600 text-white hover:bg-red-700",children:"View All Players"})]});var me};function ia(e,t){return function(){return e.apply(t,arguments)}}const{toString:oa}=Object.prototype,{getPrototypeOf:da}=Object,{iterator:ca,toStringTag:ma}=Symbol,ua=(xa=Object.create(null),e=>{const t=oa.call(e);return xa[t]||(xa[t]=t.slice(8,-1).toLowerCase())});var xa;const ha=e=>(e=e.toLowerCase(),t=>ua(t)===e),ga=e=>t=>typeof t===e,{isArray:pa}=Array,va=ga("undefined");function ya(e){return null!==e&&!va(e)&&null!==e.constructor&&!va(e.constructor)&&ja(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ba=ha("ArrayBuffer");const fa=ga("string"),ja=ga("function"),ka=ga("number"),wa=e=>null!==e&&"object"===typeof e,Na=e=>{if("object"!==ua(e))return!1;const t=da(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(ma in e)&&!(ca in e)},_a=ha("Date"),Sa=ha("File"),Ca=ha("Blob"),Ea=ha("FileList"),Ta=ha("URLSearchParams"),[Aa,Ma,Pa,Ra]=["ReadableStream","Request","Response","Headers"].map(ha);function Ia(e,t){let a,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),pa(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(ya(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),n=r.length;let l;for(a=0;a<n;a++)l=r[a],t.call(null,e[l],l,e)}}function Da(e,t){if(ya(e))return null;t=t.toLowerCase();const a=Object.keys(e);let r,s=a.length;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const La="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ua=e=>!va(e)&&e!==La;const za=(Oa="undefined"!==typeof Uint8Array&&da(Uint8Array),e=>Oa&&e instanceof Oa);var Oa;const Fa=ha("HTMLFormElement"),Ba=(e=>{let{hasOwnProperty:t}=e;return(e,a)=>t.call(e,a)})(Object.prototype),Wa=ha("RegExp"),Ha=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),r={};Ia(a,((a,s)=>{let n;!1!==(n=t(a,s,e))&&(r[s]=n||a)})),Object.defineProperties(e,r)};const Va=ha("AsyncFunction"),qa=((e,t)=>{return e?setImmediate:t?(a="axios@".concat(Math.random()),r=[],La.addEventListener("message",(e=>{let{source:t,data:s}=e;t===La&&s===a&&r.length&&r.shift()()}),!1),e=>{r.push(e),La.postMessage(a,"*")}):e=>setTimeout(e);var a,r})("function"===typeof setImmediate,ja(La.postMessage)),Ga="undefined"!==typeof queueMicrotask?queueMicrotask.bind(La):"undefined"!==typeof process&&process.nextTick||qa,Ya={isArray:pa,isArrayBuffer:ba,isBuffer:ya,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ja(e.append)&&("formdata"===(t=ua(e))||"object"===t&&ja(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ba(e.buffer),t},isString:fa,isNumber:ka,isBoolean:e=>!0===e||!1===e,isObject:wa,isPlainObject:Na,isEmptyObject:e=>{if(!wa(e)||ya(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Aa,isRequest:Ma,isResponse:Pa,isHeaders:Ra,isUndefined:va,isDate:_a,isFile:Sa,isBlob:Ca,isRegExp:Wa,isFunction:ja,isStream:e=>wa(e)&&ja(e.pipe),isURLSearchParams:Ta,isTypedArray:za,isFileList:Ea,forEach:Ia,merge:function e(){const{caseless:t}=Ua(this)&&this||{},a={},r=(r,s)=>{const n=t&&Da(a,s)||s;Na(a[n])&&Na(r)?a[n]=e(a[n],r):Na(r)?a[n]=e({},r):pa(r)?a[n]=r.slice():a[n]=r};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&Ia(arguments[s],r);return a},extend:function(e,t,a){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ia(t,((t,r)=>{a&&ja(t)?e[r]=ia(t,a):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,a,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject:(e,t,a,r)=>{let s,n,l;const i={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),n=s.length;n-- >0;)l=s[n],r&&!r(l,e,t)||i[l]||(t[l]=e[l],i[l]=!0);e=!1!==a&&da(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},kindOf:ua,kindOfTest:ha,endsWith:(e,t,a)=>{e=String(e),(void 0===a||a>e.length)&&(a=e.length),a-=t.length;const r=e.indexOf(t,a);return-1!==r&&r===a},toArray:e=>{if(!e)return null;if(pa(e))return e;let t=e.length;if(!ka(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},forEachEntry:(e,t)=>{const a=(e&&e[ca]).call(e);let r;for(;(r=a.next())&&!r.done;){const a=r.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let a;const r=[];for(;null!==(a=e.exec(t));)r.push(a);return r},isHTMLForm:Fa,hasOwnProperty:Ba,hasOwnProp:Ba,reduceDescriptors:Ha,freezeMethods:e=>{Ha(e,((t,a)=>{if(ja(e)&&-1!==["arguments","caller","callee"].indexOf(a))return!1;const r=e[a];ja(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")}))}))},toObjectSet:(e,t)=>{const a={},r=e=>{e.forEach((e=>{a[e]=!0}))};return pa(e)?r(e):r(String(e).split(t)),a},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,a){return t.toUpperCase()+a})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Da,global:La,isContextDefined:Ua,isSpecCompliantForm:function(e){return!!(e&&ja(e.append)&&"FormData"===e[ma]&&e[ca])},toJSONObject:e=>{const t=new Array(10),a=(e,r)=>{if(wa(e)){if(t.indexOf(e)>=0)return;if(ya(e))return e;if(!("toJSON"in e)){t[r]=e;const s=pa(e)?[]:{};return Ia(e,((e,t)=>{const n=a(e,r+1);!va(n)&&(s[t]=n)})),t[r]=void 0,s}}return e};return a(e,0)},isAsyncFn:Va,isThenable:e=>e&&(wa(e)||ja(e))&&ja(e.then)&&ja(e.catch),setImmediate:qa,asap:Ga,isIterable:e=>null!=e&&ja(e[ca])};function Za(e,t,a,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Ya.inherits(Za,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ya.toJSONObject(this.config),code:this.code,status:this.status}}});const Ka=Za.prototype,Ja={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ja[e]={value:e}})),Object.defineProperties(Za,Ja),Object.defineProperty(Ka,"isAxiosError",{value:!0}),Za.from=(e,t,a,r,s,n)=>{const l=Object.create(Ka);return Ya.toFlatObject(e,l,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Za.call(l,e.message,t,a,r,s),l.cause=e,l.name=e.name,n&&Object.assign(l,n),l};const Qa=Za;function Xa(e){return Ya.isPlainObject(e)||Ya.isArray(e)}function $a(e){return Ya.endsWith(e,"[]")?e.slice(0,-2):e}function er(e,t,a){return e?e.concat(t).map((function(e,t){return e=$a(e),!a&&t?"["+e+"]":e})).join(a?".":""):t}const tr=Ya.toFlatObject(Ya,{},null,(function(e){return/^is[A-Z]/.test(e)}));const ar=function(e,t,a){if(!Ya.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(a=Ya.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Ya.isUndefined(t[e])}))).metaTokens,s=a.visitor||d,n=a.dots,l=a.indexes,i=(a.Blob||"undefined"!==typeof Blob&&Blob)&&Ya.isSpecCompliantForm(t);if(!Ya.isFunction(s))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(Ya.isDate(e))return e.toISOString();if(Ya.isBoolean(e))return e.toString();if(!i&&Ya.isBlob(e))throw new Qa("Blob is not supported. Use a Buffer instead.");return Ya.isArrayBuffer(e)||Ya.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function d(e,a,s){let i=e;if(e&&!s&&"object"===typeof e)if(Ya.endsWith(a,"{}"))a=r?a:a.slice(0,-2),e=JSON.stringify(e);else if(Ya.isArray(e)&&function(e){return Ya.isArray(e)&&!e.some(Xa)}(e)||(Ya.isFileList(e)||Ya.endsWith(a,"[]"))&&(i=Ya.toArray(e)))return a=$a(a),i.forEach((function(e,r){!Ya.isUndefined(e)&&null!==e&&t.append(!0===l?er([a],r,n):null===l?a:a+"[]",o(e))})),!1;return!!Xa(e)||(t.append(er(s,a,n),o(e)),!1)}const c=[],m=Object.assign(tr,{defaultVisitor:d,convertValue:o,isVisitable:Xa});if(!Ya.isObject(e))throw new TypeError("data must be an object");return function e(a,r){if(!Ya.isUndefined(a)){if(-1!==c.indexOf(a))throw Error("Circular reference detected in "+r.join("."));c.push(a),Ya.forEach(a,(function(a,n){!0===(!(Ya.isUndefined(a)||null===a)&&s.call(t,a,Ya.isString(n)?n.trim():n,r,m))&&e(a,r?r.concat(n):[n])})),c.pop()}}(e),t};function rr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function sr(e,t){this._pairs=[],e&&ar(e,this,t)}const nr=sr.prototype;nr.append=function(e,t){this._pairs.push([e,t])},nr.toString=function(e){const t=e?function(t){return e.call(this,t,rr)}:rr;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const lr=sr;function ir(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function or(e,t,a){if(!t)return e;const r=a&&a.encode||ir;Ya.isFunction(a)&&(a={serialize:a});const s=a&&a.serialize;let n;if(n=s?s(t,a):Ya.isURLSearchParams(t)?t.toString():new lr(t,a).toString(r),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}const dr=class{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!a&&a.synchronous,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ya.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},cr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:lr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ur="undefined"!==typeof window&&"undefined"!==typeof document,xr="object"===typeof navigator&&navigator||void 0,hr=ur&&(!xr||["ReactNative","NativeScript","NS"].indexOf(xr.product)<0),gr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pr=ur&&window.location.href||"http://localhost",vr=c(c({},r),mr);const yr=function(e){function t(e,a,r,s){let n=e[s++];if("__proto__"===n)return!0;const l=Number.isFinite(+n),i=s>=e.length;if(n=!n&&Ya.isArray(r)?r.length:n,i)return Ya.hasOwnProp(r,n)?r[n]=[r[n],a]:r[n]=a,!l;r[n]&&Ya.isObject(r[n])||(r[n]=[]);return t(e,a,r[n],s)&&Ya.isArray(r[n])&&(r[n]=function(e){const t={},a=Object.keys(e);let r;const s=a.length;let n;for(r=0;r<s;r++)n=a[r],t[n]=e[n];return t}(r[n])),!l}if(Ya.isFormData(e)&&Ya.isFunction(e.entries)){const a={};return Ya.forEachEntry(e,((e,r)=>{t(function(e){return Ya.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,a,0)})),a}return null};const br={transitional:cr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",r=a.indexOf("application/json")>-1,s=Ya.isObject(e);s&&Ya.isHTMLForm(e)&&(e=new FormData(e));if(Ya.isFormData(e))return r?JSON.stringify(yr(e)):e;if(Ya.isArrayBuffer(e)||Ya.isBuffer(e)||Ya.isStream(e)||Ya.isFile(e)||Ya.isBlob(e)||Ya.isReadableStream(e))return e;if(Ya.isArrayBufferView(e))return e.buffer;if(Ya.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(s){if(a.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ar(e,new vr.classes.URLSearchParams,c({visitor:function(e,t,a,r){return vr.isNode&&Ya.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Ya.isFileList(e))||a.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ar(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,a){if(Ya.isString(e))try{return(t||JSON.parse)(e),Ya.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(a||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||br.transitional,a=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Ya.isResponse(e)||Ya.isReadableStream(e))return e;if(e&&Ya.isString(e)&&(a&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(s){if(a){if("SyntaxError"===s.name)throw Qa.from(s,Qa.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vr.classes.FormData,Blob:vr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ya.forEach(["delete","get","head","post","put","patch"],(e=>{br.headers[e]={}}));const fr=br,jr=Ya.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kr=Symbol("internals");function wr(e){return e&&String(e).trim().toLowerCase()}function Nr(e){return!1===e||null==e?e:Ya.isArray(e)?e.map(Nr):String(e)}function _r(e,t,a,r,s){return Ya.isFunction(r)?r.call(this,t,a):(s&&(t=a),Ya.isString(t)?Ya.isString(r)?-1!==t.indexOf(r):Ya.isRegExp(r)?r.test(t):void 0:void 0)}class Sr{constructor(e){e&&this.set(e)}set(e,t,a){const r=this;function s(e,t,a){const s=wr(t);if(!s)throw new Error("header name must be a non-empty string");const n=Ya.findKey(r,s);(!n||void 0===r[n]||!0===a||void 0===a&&!1!==r[n])&&(r[n||t]=Nr(e))}const n=(e,t)=>Ya.forEach(e,((e,a)=>s(e,a,t)));if(Ya.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(Ya.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))n((e=>{const t={};let a,r,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),a=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!a||t[a]&&jr[a]||("set-cookie"===a?t[a]?t[a].push(r):t[a]=[r]:t[a]=t[a]?t[a]+", "+r:r)})),t})(e),t);else if(Ya.isObject(e)&&Ya.isIterable(e)){let a,r,s={};for(const t of e){if(!Ya.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(a=s[r])?Ya.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}n(s,t)}else null!=e&&s(t,e,a);return this}get(e,t){if(e=wr(e)){const a=Ya.findKey(this,e);if(a){const e=this[a];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(e);)t[r[1]]=r[2];return t}(e);if(Ya.isFunction(t))return t.call(this,e,a);if(Ya.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wr(e)){const a=Ya.findKey(this,e);return!(!a||void 0===this[a]||t&&!_r(0,this[a],a,t))}return!1}delete(e,t){const a=this;let r=!1;function s(e){if(e=wr(e)){const s=Ya.findKey(a,e);!s||t&&!_r(0,a[s],s,t)||(delete a[s],r=!0)}}return Ya.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let a=t.length,r=!1;for(;a--;){const s=t[a];e&&!_r(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,a={};return Ya.forEach(this,((r,s)=>{const n=Ya.findKey(a,s);if(n)return t[n]=Nr(r),void delete t[s];const l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,a)=>t.toUpperCase()+a))}(s):String(s).trim();l!==s&&delete t[s],t[l]=Nr(r),a[l]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ya.forEach(this,((a,r)=>{null!=a&&!1!==a&&(t[r]=e&&Ya.isArray(a)?a.join(", "):a)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,a]=e;return t+": "+a})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[kr]=this[kr]={accessors:{}}).accessors,a=this.prototype;function r(e){const r=wr(e);t[r]||(!function(e,t){const a=Ya.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+a,{value:function(e,a,s){return this[r].call(this,t,e,a,s)},configurable:!0})}))}(a,e),t[r]=!0)}return Ya.isArray(e)?e.forEach(r):r(e),this}}Sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ya.reduceDescriptors(Sr.prototype,((e,t)=>{let{value:a}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>a,set(e){this[r]=e}}})),Ya.freezeMethods(Sr);const Cr=Sr;function Er(e,t){const a=this||fr,r=t||a,s=Cr.from(r.headers);let n=r.data;return Ya.forEach(e,(function(e){n=e.call(a,n,s.normalize(),t?t.status:void 0)})),s.normalize(),n}function Tr(e){return!(!e||!e.__CANCEL__)}function Ar(e,t,a){Qa.call(this,null==e?"canceled":e,Qa.ERR_CANCELED,t,a),this.name="CanceledError"}Ya.inherits(Ar,Qa,{__CANCEL__:!0});const Mr=Ar;function Pr(e,t,a){const r=a.config.validateStatus;a.status&&r&&!r(a.status)?t(new Qa("Request failed with status code "+a.status,[Qa.ERR_BAD_REQUEST,Qa.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a)):e(a)}const Rr=function(e,t){e=e||10;const a=new Array(e),r=new Array(e);let s,n=0,l=0;return t=void 0!==t?t:1e3,function(i){const o=Date.now(),d=r[l];s||(s=o),a[n]=i,r[n]=o;let c=l,m=0;for(;c!==n;)m+=a[c++],c%=e;if(n=(n+1)%e,n===l&&(l=(l+1)%e),o-s<t)return;const u=d&&o-d;return u?Math.round(1e3*m/u):void 0}};const Ir=function(e,t){let a,r,s=0,n=1e3/t;const l=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=n,a=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];t>=n?l(o,e):(a=o,r||(r=setTimeout((()=>{r=null,l(a)}),n-t)))},()=>a&&l(a)]},Dr=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=Rr(50,250);return Ir((a=>{const n=a.loaded,l=a.lengthComputable?a.total:void 0,i=n-r,o=s(i);r=n;e({loaded:n,total:l,progress:l?n/l:void 0,bytes:i,rate:o||void 0,estimated:o&&l&&n<=l?(l-n)/o:void 0,event:a,lengthComputable:null!=l,[t?"download":"upload"]:!0})}),a)},Lr=(e,t)=>{const a=null!=e;return[r=>t[0]({lengthComputable:a,total:e,loaded:r}),t[1]]},Ur=e=>function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return Ya.asap((()=>e(...a)))},zr=vr.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,vr.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(vr.origin),vr.navigator&&/(msie|trident)/i.test(vr.navigator.userAgent)):()=>!0,Or=vr.hasStandardBrowserEnv?{write(e,t,a,r,s,n){const l=[e+"="+encodeURIComponent(t)];Ya.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),Ya.isString(r)&&l.push("path="+r),Ya.isString(s)&&l.push("domain="+s),!0===n&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fr(e,t,a){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==a)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Br=e=>e instanceof Cr?c({},e):e;function Wr(e,t){t=t||{};const a={};function r(e,t,a,r){return Ya.isPlainObject(e)&&Ya.isPlainObject(t)?Ya.merge.call({caseless:r},e,t):Ya.isPlainObject(t)?Ya.merge({},t):Ya.isArray(t)?t.slice():t}function s(e,t,a,s){return Ya.isUndefined(t)?Ya.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function n(e,t){if(!Ya.isUndefined(t))return r(void 0,t)}function l(e,t){return Ya.isUndefined(t)?Ya.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function i(a,s,n){return n in t?r(a,s):n in e?r(void 0,a):void 0}const o={url:n,method:n,data:n,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:i,headers:(e,t,a)=>s(Br(e),Br(t),0,!0)};return Ya.forEach(Object.keys(c(c({},e),t)),(function(r){const n=o[r]||s,l=n(e[r],t[r],r);Ya.isUndefined(l)&&n!==i||(a[r]=l)})),a}const Hr=e=>{const t=Wr({},e);let a,{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:l,headers:i,auth:o}=t;if(t.headers=i=Cr.from(i),t.url=or(Fr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Ya.isFormData(r))if(vr.hasStandardBrowserEnv||vr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(!1!==(a=i.getContentType())){const[e,...t]=a?a.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}if(vr.hasStandardBrowserEnv&&(s&&Ya.isFunction(s)&&(s=s(t)),s||!1!==s&&zr(t.url))){const e=n&&l&&Or.read(l);e&&i.set(n,e)}return t},Vr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,a){const r=Hr(e);let s=r.data;const n=Cr.from(r.headers).normalize();let l,i,o,d,c,{responseType:m,onUploadProgress:u,onDownloadProgress:x}=r;function h(){d&&d(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;function p(){if(!g)return;const r=Cr.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Pr((function(e){t(e),h()}),(function(e){a(e),h()}),{data:m&&"text"!==m&&"json"!==m?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=p:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(p)},g.onabort=function(){g&&(a(new Qa("Request aborted",Qa.ECONNABORTED,e,g)),g=null)},g.onerror=function(){a(new Qa("Network Error",Qa.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||cr;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),a(new Qa(t,s.clarifyTimeoutError?Qa.ETIMEDOUT:Qa.ECONNABORTED,e,g)),g=null},void 0===s&&n.setContentType(null),"setRequestHeader"in g&&Ya.forEach(n.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),Ya.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),m&&"json"!==m&&(g.responseType=r.responseType),x&&([o,c]=Dr(x,!0),g.addEventListener("progress",o)),u&&g.upload&&([i,d]=Dr(u),g.upload.addEventListener("progress",i),g.upload.addEventListener("loadend",d)),(r.cancelToken||r.signal)&&(l=t=>{g&&(a(!t||t.type?new Mr(null,e,g):t),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===vr.protocols.indexOf(v)?a(new Qa("Unsupported protocol "+v+":",Qa.ERR_BAD_REQUEST,e)):g.send(s||null)}))},qr=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let a,r=new AbortController;const s=function(e){if(!a){a=!0,l();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Qa?t:new Mr(t instanceof Error?t.message:t))}};let n=t&&setTimeout((()=>{n=null,s(new Qa("timeout ".concat(t," of ms exceeded"),Qa.ETIMEDOUT))}),t);const l=()=>{e&&(n&&clearTimeout(n),n=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:i}=r;return i.unsubscribe=()=>Ya.asap(l),i}};function Gr(e,t){this.v=e,this.k=t}function Yr(e){return function(){return new Zr(e.apply(this,arguments))}}function Zr(e){var t,a;function r(t,a){try{var n=e[t](a),l=n.value,i=l instanceof Gr;Promise.resolve(i?l.v:l).then((function(a){if(i){var o="return"===t?"return":"next";if(!l.k||a.done)return r(o,a);a=e[o](a).value}s(n.done?"return":"normal",a)}),(function(e){r("throw",e)}))}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):a=null}this._invoke=function(e,s){return new Promise((function(n,l){var i={key:e,arg:s,resolve:n,reject:l,next:null};a?a=a.next=i:(t=a=i,r(e,s))}))},"function"!=typeof e.return&&(this.return=void 0)}function Kr(e){return new Gr(e,0)}function Jr(e){var t={},a=!1;function r(t,r){return a=!0,r=new Promise((function(a){a(e[t](r))})),{done:!1,value:new Gr(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return a?(a=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(a)throw a=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return a?(a=!1,e):r("return",e)}),t}function Qr(e){var t,a,r,s=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(a&&null!=(t=e[a]))return t.call(e);if(r&&null!=(t=e[r]))return new Xr(t.call(e));a="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Xr(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Xr=function(e){this.s=e,this.n=e.next},Xr.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new Xr(e)}Zr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Zr.prototype.next=function(e){return this._invoke("next",e)},Zr.prototype.throw=function(e){return this._invoke("throw",e)},Zr.prototype.return=function(e){return this._invoke("return",e)};const $r=function*(e,t){let a=e.byteLength;if(!t||a<t)return void(yield e);let r,s=0;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},es=function(){var e=Yr((function*(e,t){var a,r=!1,s=!1;try{for(var n,l=Qr(ts(e));r=!(n=yield Kr(l.next())).done;r=!1){const e=n.value;yield*Jr(Qr($r(e,t)))}}catch(i){s=!0,a=i}finally{try{r&&null!=l.return&&(yield Kr(l.return()))}finally{if(s)throw a}}}));return function(t,a){return e.apply(this,arguments)}}(),ts=function(){var e=Yr((function*(e){if(e[Symbol.asyncIterator])return void(yield*Jr(Qr(e)));const t=e.getReader();try{for(;;){const{done:e,value:a}=yield Kr(t.read());if(e)break;yield a}}finally{yield Kr(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),as=(e,t,a,r)=>{const s=es(e,t);let n,l=0,i=e=>{n||(n=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return i(),void e.close();let n=r.byteLength;if(a){let e=l+=n;a(e)}e.enqueue(new Uint8Array(r))}catch(t){throw i(t),t}},cancel:e=>(i(e),s.return())},{highWaterMark:2})},rs="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,ss=rs&&"function"===typeof ReadableStream,ns=rs&&("function"===typeof TextEncoder?(ls=new TextEncoder,e=>ls.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ls;const is=function(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return!!e(...a)}catch(s){return!1}},os=ss&&is((()=>{let e=!1;const t=new Request(vr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ds=ss&&is((()=>Ya.isReadableStream(new Response("").body))),cs={stream:ds&&(e=>e.body)};var ms;rs&&(ms=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!cs[e]&&(cs[e]=Ya.isFunction(ms[e])?t=>t[e]():(t,a)=>{throw new Qa("Response type '".concat(e,"' is not supported"),Qa.ERR_NOT_SUPPORT,a)})})));const us=async(e,t)=>{const a=Ya.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(Ya.isBlob(e))return e.size;if(Ya.isSpecCompliantForm(e)){const t=new Request(vr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ya.isArrayBufferView(e)||Ya.isArrayBuffer(e)?e.byteLength:(Ya.isURLSearchParams(e)&&(e+=""),Ya.isString(e)?(await ns(e)).byteLength:void 0)})(t):a},xs=rs&&(async e=>{let{url:t,method:a,data:r,signal:s,cancelToken:n,timeout:l,onDownloadProgress:i,onUploadProgress:o,responseType:d,headers:m,withCredentials:u="same-origin",fetchOptions:x}=Hr(e);d=d?(d+"").toLowerCase():"text";let h,g=qr([s,n&&n.toAbortSignal()],l);const p=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let v;try{if(o&&os&&"get"!==a&&"head"!==a&&0!==(v=await us(m,r))){let e,a=new Request(t,{method:"POST",body:r,duplex:"half"});if(Ya.isFormData(r)&&(e=a.headers.get("content-type"))&&m.setContentType(e),a.body){const[e,t]=Lr(v,Dr(Ur(o)));r=as(a.body,65536,e,t)}}Ya.isString(u)||(u=u?"include":"omit");const s="credentials"in Request.prototype;h=new Request(t,c(c({},x),{},{signal:g,method:a.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:s?u:void 0}));let n=await fetch(h,x);const l=ds&&("stream"===d||"response"===d);if(ds&&(i||l&&p)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=n[t]}));const t=Ya.toFiniteNumber(n.headers.get("content-length")),[a,r]=i&&Lr(t,Dr(Ur(i),!0))||[];n=new Response(as(n.body,65536,a,(()=>{r&&r(),p&&p()})),e)}d=d||"text";let y=await cs[Ya.findKey(cs,d)||"text"](n,e);return!l&&p&&p(),await new Promise(((t,a)=>{Pr(t,a,{data:y,headers:Cr.from(n.headers),status:n.status,statusText:n.statusText,config:e,request:h})}))}catch(y){if(p&&p(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new Qa("Network Error",Qa.ERR_NETWORK,e,h),{cause:y.cause||y});throw Qa.from(y,y&&y.code,e,h)}}),hs={http:null,xhr:Vr,fetch:xs};Ya.forEach(hs,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(a){}Object.defineProperty(e,"adapterName",{value:t})}}));const gs=e=>"- ".concat(e),ps=e=>Ya.isFunction(e)||null===e||!1===e,vs=e=>{e=Ya.isArray(e)?e:[e];const{length:t}=e;let a,r;const s={};for(let n=0;n<t;n++){let t;if(a=e[n],r=a,!ps(a)&&(r=hs[(t=String(a)).toLowerCase()],void 0===r))throw new Qa("Unknown adapter '".concat(t,"'"));if(r)break;s[t||"#"+n]=r}if(!r){const e=Object.entries(s).map((e=>{let[t,a]=e;return"adapter ".concat(t," ")+(!1===a?"is not supported by the environment":"is not available in the build")}));let a=t?e.length>1?"since :\n"+e.map(gs).join("\n"):" "+gs(e[0]):"as no adapter specified";throw new Qa("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r};function ys(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Mr(null,e)}function bs(e){ys(e),e.headers=Cr.from(e.headers),e.data=Er.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return vs(e.adapter||fr.adapter)(e).then((function(t){return ys(e),t.data=Er.call(e,e.transformResponse,t),t.headers=Cr.from(t.headers),t}),(function(t){return Tr(t)||(ys(e),t&&t.response&&(t.response.data=Er.call(e,e.transformResponse,t.response),t.response.headers=Cr.from(t.response.headers))),Promise.reject(t)}))}const fs="1.11.0",js={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{js[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}}));const ks={};js.transitional=function(e,t,a){function r(e,t){return"[Axios v"+fs+"] Transitional option '"+e+"'"+t+(a?". "+a:"")}return(a,s,n)=>{if(!1===e)throw new Qa(r(s," has been removed"+(t?" in "+t:"")),Qa.ERR_DEPRECATED);return t&&!ks[s]&&(ks[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(a,s,n)}},js.spelling=function(e){return(t,a)=>(console.warn("".concat(a," is likely a misspelling of ").concat(e)),!0)};const ws={assertOptions:function(e,t,a){if("object"!==typeof e)throw new Qa("options must be an object",Qa.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const n=r[s],l=t[n];if(l){const t=e[n],a=void 0===t||l(t,n,e);if(!0!==a)throw new Qa("option "+n+" must be "+a,Qa.ERR_BAD_OPTION_VALUE)}else if(!0!==a)throw new Qa("Unknown option "+n,Qa.ERR_BAD_OPTION)}},validators:js},Ns=ws.validators;class _s{constructor(e){this.defaults=e||{},this.interceptors={request:new dr,response:new dr}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{a.stack?t&&!String(a.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(a.stack+="\n"+t):a.stack=t}catch(r){}}throw a}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Wr(this.defaults,t);const{transitional:a,paramsSerializer:r,headers:s}=t;void 0!==a&&ws.assertOptions(a,{silentJSONParsing:Ns.transitional(Ns.boolean),forcedJSONParsing:Ns.transitional(Ns.boolean),clarifyTimeoutError:Ns.transitional(Ns.boolean)},!1),null!=r&&(Ya.isFunction(r)?t.paramsSerializer={serialize:r}:ws.assertOptions(r,{encode:Ns.function,serialize:Ns.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ws.assertOptions(t,{baseUrl:Ns.spelling("baseURL"),withXsrfToken:Ns.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=s&&Ya.merge(s.common,s[t.method]);s&&Ya.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=Cr.concat(n,s);const l=[];let i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,l.unshift(e.fulfilled,e.rejected))}));const o=[];let d;this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)}));let c,m=0;if(!i){const e=[bs.bind(this),void 0];for(e.unshift(...l),e.push(...o),c=e.length,d=Promise.resolve(t);m<c;)d=d.then(e[m++],e[m++]);return d}c=l.length;let u=t;for(m=0;m<c;){const e=l[m++],t=l[m++];try{u=e(u)}catch(x){t.call(this,x);break}}try{d=bs.call(this,u)}catch(x){return Promise.reject(x)}for(m=0,c=o.length;m<c;)d=d.then(o[m++],o[m++]);return d}getUri(e){return or(Fr((e=Wr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ya.forEach(["delete","get","head","options"],(function(e){_s.prototype[e]=function(t,a){return this.request(Wr(a||{},{method:e,url:t,data:(a||{}).data}))}})),Ya.forEach(["post","put","patch"],(function(e){function t(t){return function(a,r,s){return this.request(Wr(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:a,data:r}))}}_s.prototype[e]=t(),_s.prototype[e+"Form"]=t(!0)}));const Ss=_s;class Cs{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const a=this;this.promise.then((e=>{if(!a._listeners)return;let t=a._listeners.length;for(;t-- >0;)a._listeners[t](e);a._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{a.subscribe(e),t=e})).then(e);return r.cancel=function(){a.unsubscribe(t)},r},e((function(e,r,s){a.reason||(a.reason=new Mr(e,r,s),t(a.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Cs((function(t){e=t})),cancel:e}}}const Es=Cs;const Ts={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ts).forEach((e=>{let[t,a]=e;Ts[a]=t}));const As=Ts;const Ms=function e(t){const a=new Ss(t),r=ia(Ss.prototype.request,a);return Ya.extend(r,Ss.prototype,a,{allOwnKeys:!0}),Ya.extend(r,a,null,{allOwnKeys:!0}),r.create=function(a){return e(Wr(t,a))},r}(fr);Ms.Axios=Ss,Ms.CanceledError=Mr,Ms.CancelToken=Es,Ms.isCancel=Tr,Ms.VERSION=fs,Ms.toFormData=ar,Ms.AxiosError=Qa,Ms.Cancel=Ms.CanceledError,Ms.all=function(e){return Promise.all(e)},Ms.spread=function(e){return function(t){return e.apply(null,t)}},Ms.isAxiosError=function(e){return Ya.isObject(e)&&!0===e.isAxiosError},Ms.mergeConfig=Wr,Ms.AxiosHeaders=Cr,Ms.formToJSON=e=>yr(Ya.isHTMLForm(e)?new FormData(e):e),Ms.getAdapter=vs,Ms.HttpStatusCode=As,Ms.default=Ms;const Ps=Ms,Rs={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUSHER_KEY:"your_pusher_key_here",REACT_APP_PUSHER_CLUSTER:"us2",REACT_APP_BACKEND_URL:"https://staging.mrvl.net",REACT_APP_ENVIRONMENT:"production"}.REACT_APP_API_URL||"https://mrvl.com.hk/api",Is=()=>{const[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0),[n,l]=(0,s.useState)({role:"all",region:"all",search:""}),[i,o]=(0,s.useState)({current_page:1,last_page:1,total:0});(0,s.useEffect)((()=>{d()}),[n,i.current_page]);const d=async()=>{r(!0);try{const e=new URLSearchParams(c(c(c({page:i.current_page,per_page:20},"all"!==n.role&&{role:n.role}),"all"!==n.region&&{region:n.region}),n.search&&{search:n.search})),a=await Ps.get("".concat(Rs,"/players/free-agents?").concat(e));a.data.success&&(t(a.data.data),o(a.data.pagination))}catch(e){console.error("Error fetching free agents:",e)}finally{r(!1)}},m=(e,t)=>{l((a=>c(c({},a),{},{[e]:t}))),o((e=>c(c({},e),{},{current_page:1})))};return(0,u.jsxs)("div",{className:"players-page",children:[(0,u.jsxs)("div",{className:"page-header",children:[(0,u.jsx)("h1",{className:"page-title",children:"Free Agents"}),(0,u.jsx)("p",{className:"page-subtitle",children:"Available players looking for teams"})]}),(0,u.jsxs)("div",{className:"filters-section",children:[(0,u.jsxs)("div",{className:"filter-group",children:[(0,u.jsx)("label",{children:"Role"}),(0,u.jsxs)("select",{value:n.role,onChange:e=>m("role",e.target.value),className:"filter-select",children:[(0,u.jsx)("option",{value:"all",children:"All Roles"}),(0,u.jsx)("option",{value:"Duelist",children:"Duelist"}),(0,u.jsx)("option",{value:"Vanguard",children:"Vanguard"}),(0,u.jsx)("option",{value:"Strategist",children:"Strategist"}),(0,u.jsx)("option",{value:"Flex",children:"Flex"})]})]}),(0,u.jsxs)("div",{className:"filter-group",children:[(0,u.jsx)("label",{children:"Region"}),(0,u.jsxs)("select",{value:n.region,onChange:e=>m("region",e.target.value),className:"filter-select",children:[(0,u.jsx)("option",{value:"all",children:"All Regions"}),(0,u.jsx)("option",{value:"NA",children:"North America"}),(0,u.jsx)("option",{value:"EU",children:"Europe"}),(0,u.jsx)("option",{value:"ASIA",children:"Asia"}),(0,u.jsx)("option",{value:"CN",children:"China"}),(0,u.jsx)("option",{value:"KR",children:"Korea"}),(0,u.jsx)("option",{value:"JP",children:"Japan"}),(0,u.jsx)("option",{value:"OCE",children:"Oceania"}),(0,u.jsx)("option",{value:"SA",children:"South America"})]})]}),(0,u.jsxs)("div",{className:"filter-group search-group",children:[(0,u.jsx)("label",{children:"Search"}),(0,u.jsx)("input",{type:"text",placeholder:"Search players...",value:n.search,onChange:e=>m("search",e.target.value),className:"filter-input"})]})]}),a?(0,u.jsxs)("div",{className:"loading-container",children:[(0,u.jsx)("div",{className:"spinner"}),(0,u.jsx)("p",{children:"Loading free agents..."})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"players-grid free-agents-grid",children:e.map((e=>{return(0,u.jsxs)("a",{href:"#player-detail/".concat(e.id),className:"player-card free-agent-card",children:[(0,u.jsx)("div",{className:"free-agent-badge",children:"FREE AGENT"}),(0,u.jsxs)("div",{className:"player-header",children:[(0,u.jsx)("img",{src:e.avatar,alt:e.username,className:"player-avatar",onError:e=>{e.target.src="/images/default-avatar.png"}}),(0,u.jsxs)("div",{className:"player-info",children:[(0,u.jsx)("h3",{className:"player-name",children:e.username}),e.real_name&&(0,u.jsx)("p",{className:"player-real-name",children:e.real_name})]})]}),(0,u.jsxs)("div",{className:"player-details",children:[(0,u.jsxs)("div",{className:"detail-row",children:[(0,u.jsx)("span",{className:"detail-label",children:"Role:"}),(0,u.jsxs)("span",{className:"detail-value",children:[(a=e.role,{Duelist:"\u2694\ufe0f",Vanguard:"\ud83d\udee1\ufe0f",Strategist:"\ud83d\udc8a",Flex:"\ud83d\udd04"}[a]||"\ud83c\udfae")," ",e.role]})]}),(0,u.jsxs)("div",{className:"detail-row",children:[(0,u.jsx)("span",{className:"detail-label",children:"Main Hero:"}),(0,u.jsx)("span",{className:"detail-value",children:e.main_hero||"Flexible"})]}),(0,u.jsxs)("div",{className:"detail-row",children:[(0,u.jsx)("span",{className:"detail-label",children:"Rating:"}),(0,u.jsx)("span",{className:"detail-value rating-value",children:e.rating||1e3})]}),e.last_team&&(0,u.jsxs)("div",{className:"detail-row last-team",children:[(0,u.jsx)("span",{className:"detail-label",children:"Previous Team:"}),(0,u.jsxs)("div",{className:"team-info",children:[(0,u.jsx)("img",{src:e.last_team.logo,alt:e.last_team.name,className:"team-logo-small",onError:e=>{e.target.src="/images/team-placeholder.svg"}}),(0,u.jsx)("span",{children:e.last_team.name})]})]}),(0,u.jsxs)("div",{className:"detail-row",children:[(0,u.jsx)("span",{className:"detail-label",children:"Available Since:"}),(0,u.jsx)("span",{className:"detail-value",children:e.available_since})]}),e.earnings>0&&(0,u.jsxs)("div",{className:"detail-row",children:[(0,u.jsx)("span",{className:"detail-label",children:"Career Earnings:"}),(0,u.jsx)("span",{className:"detail-value earnings",children:(t=e.earnings,t?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):"$0")})]}),e.country&&(0,u.jsxs)("div",{className:"detail-row",children:[(0,u.jsx)("span",{className:"detail-label",children:"Country:"}),(0,u.jsxs)("span",{className:"detail-value",children:[e.flag&&e.flag.startsWith("http")?(0,u.jsx)("img",{src:e.flag,alt:e.country,className:"country-flag"}):(0,u.jsx)("span",{className:"country-flag",children:e.flag}),e.country]})]})]}),e.social_media&&Object.keys(e.social_media).length>0&&(0,u.jsxs)("div",{className:"social-links",children:[e.social_media.twitter&&(0,u.jsx)("a",{href:"https://twitter.com/".concat(e.social_media.twitter),target:"_blank",rel:"noopener noreferrer",className:"social-link twitter",onClick:e=>e.stopPropagation(),children:(0,u.jsx)("i",{className:"fab fa-twitter"})}),e.social_media.twitch&&(0,u.jsx)("a",{href:"https://twitch.tv/".concat(e.social_media.twitch),target:"_blank",rel:"noopener noreferrer",className:"social-link twitch",onClick:e=>e.stopPropagation(),children:(0,u.jsx)("i",{className:"fab fa-twitch"})}),e.social_media.youtube&&(0,u.jsx)("a",{href:"https://youtube.com/@".concat(e.social_media.youtube),target:"_blank",rel:"noopener noreferrer",className:"social-link youtube",onClick:e=>e.stopPropagation(),children:(0,u.jsx)("i",{className:"fab fa-youtube"})})]}),(0,u.jsx)("div",{className:"card-footer",children:(0,u.jsx)("button",{className:"contact-button",children:"Contact Agent"})})]},e.id);var t,a}))}),i.last_page>1&&(0,u.jsxs)("div",{className:"pagination",children:[(0,u.jsx)("button",{className:"pagination-btn",onClick:()=>o((e=>c(c({},e),{},{current_page:Math.max(1,e.current_page-1)}))),disabled:1===i.current_page,children:"Previous"}),(0,u.jsxs)("span",{className:"pagination-info",children:["Page ",i.current_page," of ",i.last_page,"(",i.total," total free agents)"]}),(0,u.jsx)("button",{className:"pagination-btn",onClick:()=>o((e=>c(c({},e),{},{current_page:Math.min(e.last_page,e.current_page+1)}))),disabled:i.current_page===i.last_page,children:"Next"})]}),0===e.length&&(0,u.jsxs)("div",{className:"no-results",children:[(0,u.jsx)("h3",{children:"No free agents found"}),(0,u.jsx)("p",{children:"Try adjusting your filters or check back later."})]})]})]})};const Ds=function(e){let{navigateTo:t}=e;const[a,r]=(0,s.useState)("World"),[n,l]=(0,s.useState)([]),[i,o]=(0,s.useState)("teams"),[d,m]=(0,s.useState)(!1),{api:x}=b();(0,s.useEffect)((()=>{h()}),[a,x]);const h=async()=>{if(!d)try{var e;m(!0),console.log("RankingsPage: Fetching REAL LIVE BACKEND RANKINGS...");const t=await x.get("/teams"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||[];if(Array.isArray(r)&&r.length>0){let e=[...r].sort(((e,t)=>(t.rating||1e3)-(e.rating||1e3)));if(e=e.map(((e,t)=>c(c({},e),{},{rank:t+1}))),"World"!==a){const t={Americas:["NA","US","CA","MX","BR","AR","CL","CO","PE","Americas"],EMEA:["EU","UK","DE","FR","SE","ES","IT","PL","TR","RU","SA","AE","ZA","EMEA"],China:["CN","China"],Asia:["KR","JP","TH","VN","SG","MY","ID","PH","TW","HK","IN","Asia"],Oceania:["AU","NZ","FJ","PG","NC","Oceania"]}[a]||[];e=e.filter((e=>t.includes(e.region)||t.includes(e.country))),e=e.map(((e,t)=>c(c({},e),{},{rank:t+1})))}l(e),console.log("RankingsPage: Using REAL backend ELO rankings:",e.length)}else console.error("RankingsPage: No backend data available"),l([])}catch(t){console.error("RankingsPage: Backend API failed:",t),l([])}finally{m(!1)}};return(0,u.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Marvel Rivals Rankings"}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Official Tournament Regions \u2022 ELO Ratings"})]}),(0,u.jsxs)("div",{className:"card mb-4",children:[(0,u.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:["World","Americas","EMEA","China","Asia","Oceania"].map((e=>(0,u.jsx)("button",{onClick:()=>r(e),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat(a===e?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:e},e)))}),(0,u.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:0===n.length?(0,u.jsxs)("div",{className:"p-8 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No rankings available"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No team rankings data available at this time."})]}):n.map(((e,a)=>(0,u.jsx)("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors",onClick:()=>{console.log("Navigating to team detail:",e.id),t&&t("team-detail",{id:e.id})},children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"w-12 text-center",children:[(0,u.jsx)("span",{className:"font-bold text-lg ".concat(e.rank<=3?"text-yellow-600 dark:text-yellow-400":"text-gray-900 dark:text-white"),children:e.rank}),e.rank<=3&&(0,u.jsx)("div",{className:"text-sm",children:1===e.rank?"#1":2===e.rank?"#2":"#3"})]}),(0,u.jsxs)("div",{className:"flex-1 flex items-center space-x-3",children:[(0,u.jsx)(D,{team:e,size:"w-8 h-8"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-bold text-gray-900 dark:text-white hover:text-red-600 dark:hover:text-red-400 transition-colors",children:e.name}),(0,u.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("span",{className:"text-base",children:R(e.country||e.region)}),(0,u.jsx)("span",{children:I(e.country||e.region)})]})]})]}),(0,u.jsx)("div",{className:"text-right",children:(0,u.jsx)("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:e.rating||1e3})})]})},e.id)))})]})]})};const Ls=function(e){let{navigateTo:t}=e;const[a,r]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),[i,o]=(0,s.useState)("ongoing"),[d,c]=(0,s.useState)(""),[m,x]=(0,s.useState)("all"),{api:h,isAdmin:g,isModerator:p}=b();(0,s.useEffect)((()=>{v()}),[]);const v=async()=>{try{var e;l(!0),console.log("EventsPage: Fetching events from API...");const t="/events?sort=recent",a=await h.get(t),s=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data||[];console.log("Events fetched:",s),r(s)}catch(t){console.error("Error fetching events:",t),r([])}finally{l(!1)}},y=(()=>{let e=a;switch(i){case"upcoming":e=e.filter((e=>"upcoming"===e.status));break;case"ongoing":e=e.filter((e=>"ongoing"===e.status||"live"===e.status));break;case"completed":e=e.filter((e=>"completed"===e.status))}return"all"!==m&&(e=e.filter((e=>e.region===m))),d&&(e=e.filter((e=>e.name.toLowerCase().includes(d.toLowerCase())||e.description&&e.description.toLowerCase().includes(d.toLowerCase())))),e})(),f=e=>{var a,r,s,n,l,i;let{event:o}=e;const d=e=>e&&0!==e?"string"===typeof e?e:"$".concat(e.toLocaleString()):null;return(0,u.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer transition-colors",onClick:()=>t&&t("event-detail",{id:o.id}),children:(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 flex-shrink-0",children:(0,u.jsx)("img",{src:E(o),alt:o.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentNode.innerHTML='<div class="w-full h-full flex items-center justify-center text-2xl font-bold text-gray-500 dark:text-gray-400">?</div>'}})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate pr-2",children:o.name}),(0,u.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium flex-shrink-0 ".concat((e=>{switch(e){case"live":case"ongoing":return"bg-red-600 text-white";case"upcoming":return"bg-blue-600 text-white";case"completed":return"bg-gray-600 text-white";default:return"bg-gray-400 text-white"}})(o.status)," ").concat("live"===o.status?"animate-pulse":""),children:["live"===o.status&&(0,u.jsx)("span",{className:"w-2 h-2 bg-white rounded-full mr-1 animate-pulse"}),o.status.toUpperCase()]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Date:"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(()=>{var e,t;const a=new Date((null===(e=o.schedule)||void 0===e?void 0:e.start_date)||o.start_date),r=new Date((null===(t=o.schedule)||void 0===t?void 0:t.end_date)||o.end_date);return a.toDateString()===r.toDateString()?a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"".concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})()})]}),d((null===(a=o.details)||void 0===a?void 0:a.prize_pool)||o.prize_pool)&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Prize Pool:"}),(0,u.jsx)("div",{className:"font-medium text-green-600 dark:text-green-400",children:d((null===(r=o.details)||void 0===r?void 0:r.prize_pool)||o.prize_pool)})]}),((null===(s=o.details)||void 0===s?void 0:s.region)||o.region)&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Region:"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(n=o.details)||void 0===n?void 0:n.region)||o.region})]}),((null===(l=o.details)||void 0===l?void 0:l.format)||o.format)&&(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-500",children:"Format:"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(i=o.details)||void 0===i?void 0:i.format)||o.format})]})]})]})]})})};return n?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading events..."})]})}):(0,u.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Events"}),(g()||p())&&(0,u.jsx)("button",{onClick:()=>t&&t("admin-event-create"),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Create Event"})]}),(0,u.jsxs)("div",{className:"card",children:[(0,u.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("button",{onClick:()=>o("upcoming"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("upcoming"===i?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Upcoming (",a.filter((e=>"upcoming"===e.status)).length,")"]}),(0,u.jsx)("button",{onClick:()=>o("ongoing"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("ongoing"===i?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.filter((e=>"ongoing"===e.status||"live"===e.status)).length>0&&(0,u.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,u.jsxs)("span",{children:["Ongoing (",a.filter((e=>"ongoing"===e.status||"live"===e.status)).length,")"]})]})}),(0,u.jsxs)("button",{onClick:()=>o("completed"),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat("completed"===i?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Completed (",a.filter((e=>"completed"===e.status)).length,")"]})]}),(0,u.jsx)("div",{className:"p-4",children:(0,u.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Region:"}),(0,u.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Regions"}),(0,u.jsx)("option",{value:"NA",children:"North America"}),(0,u.jsx)("option",{value:"EU",children:"Europe"}),(0,u.jsx)("option",{value:"APAC",children:"Asia-Pacific"}),(0,u.jsx)("option",{value:"BR",children:"Brazil"}),(0,u.jsx)("option",{value:"LATAM",children:"LATAM"}),(0,u.jsx)("option",{value:"INTL",children:"International"})]})]}),(0,u.jsxs)("div",{className:"relative flex-1 md:max-w-xs",children:[(0,u.jsx)("input",{type:"text",placeholder:"Search events...",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-1 pl-9 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),(0,u.jsx)("svg",{className:"absolute left-3 top-1.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),y.length>0?(0,u.jsx)("div",{children:y.map((e=>(0,u.jsx)(f,{event:e},e.id)))}):(0,u.jsxs)("div",{className:"py-12 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4"}),(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["No ",i," events"]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:d?'No events matching "'.concat(d,'"'):"upcoming"===i?"No upcoming events scheduled":"ongoing"===i?"No events currently ongoing":"No completed events to show"})]})]})]})};function Us(e){let{round:t,roundIndex:a,totalRounds:r,navigateTo:s,isAdmin:n,onMatchUpdate:l,setEditingMatch:i,setTeam1Score:o,setTeam2Score:d}=e;return(0,u.jsxs)("div",{className:"bracket-round",children:[(0,u.jsxs)("div",{className:"round-header",children:[(0,u.jsx)("h3",{className:"round-title",children:t.name}),t.date&&(0,u.jsx)("div",{className:"round-date",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,u.jsx)("div",{className:"round-matches",children:t.matches.map(((e,c)=>(0,u.jsxs)("div",{className:"match-container",style:{position:"relative"},children:[(0,u.jsx)(Os,{match:e,navigateTo:s,isAdmin:n,onMatchUpdate:l,onEditMatch:e=>{var t,a;i(e),o((null===(t=e.team1)||void 0===t?void 0:t.score)||e.team1_score||0),d((null===(a=e.team2)||void 0===a?void 0:a.score)||e.team2_score||0)},showConnector:a<r-1}),a<r-1&&(0,u.jsx)(zs,{matchIndex:c,totalMatches:t.matches.length})]},c)))})]})}function zs(e){let{matchIndex:t,totalMatches:a}=e;const r=t%2===0;if(r&&t<a-1){const e="calc(100% + 2rem)";return(0,u.jsxs)("div",{className:"bracket-connectors",children:[(0,u.jsx)("div",{className:"connector-line connector-horizontal",style:{top:"50%",left:"100%",transform:"translateY(-50%)"}}),(0,u.jsx)("div",{className:"connector-line connector-vertical",style:{top:"50%",right:"1.5rem",height:e}}),(0,u.jsx)("div",{className:"connector-line connector-to-next",style:{top:"calc(50% + 1rem)",right:"0"}})]})}return r?null:(0,u.jsx)("div",{className:"bracket-connectors",children:(0,u.jsx)("div",{className:"connector-line connector-horizontal",style:{top:"50%",left:"100%",transform:"translateY(-50%)"}})})}function Os(e){let{match:t,navigateTo:a,isAdmin:r,onMatchUpdate:s,showConnector:n,onEditMatch:l}=e;const i="completed"===t.status||t.finished,o="live"===t.status,d=i&&(1===t.winner||t.team1_score>t.team2_score),c=i&&(2===t.winner||t.team2_score>t.team1_score),m=(e,t)=>{t.stopPropagation(),e&&e.id&&a&&a("team-detail",{id:e.id})},x=e=>e?e.short_name||e.name||e.title:null,h=(e,a)=>void 0!==t["team".concat(a,"_score")]?t["team".concat(a,"_score")]:e&&void 0!==e.score?e.score:"-",g=e=>e?(0,u.jsx)("div",{className:"team-logo",children:(0,u.jsx)(D,{team:e,size:"w-4 h-4",fallback:(0,u.jsx)("div",{className:"team-logo-fallback",children:(e.name||e.short_name||"T").charAt(0).toUpperCase()})})}):null,p=e=>e?e.seed?"#".concat(e.seed):e.seeding?"#".concat(e.seeding):null:null;return console.log("\ud83d\udd27 LiquipediaMatch render - isAdmin:",r,"match.id:",t.id),(0,u.jsxs)("div",{className:"liquipedia-match ".concat(o?"live":""," ").concat(i?"completed":""," ").concat(r?"admin-editable":""),onClick:()=>{r&&l?l(t):a&&a("match-detail",{id:t.id})},title:r?"Click to edit match score":"Click for match details",children:[(0,u.jsxs)("div",{className:"match-header",children:[(0,u.jsx)("span",{className:"match-format",children:(()=>{if(t.format){return{best_of_3:"Bo3",best_of_5:"Bo5",best_of_7:"Bo7",single_game:"1 Game",double_elimination:"DE",single_elimination:"SE",swiss:"Swiss",round_robin:"RR"}[t.format]||t.format}return t.bestof?"Bo".concat(t.bestof):"Bo5"})()}),r&&(0,u.jsx)("span",{className:"admin-indicator",style:{fontSize:"9px",color:"#dc2626",fontWeight:"bold"},children:"\u270e EDIT"}),o&&(0,u.jsxs)("div",{className:"live-indicator",children:[(0,u.jsx)("div",{className:"live-dot"}),(0,u.jsx)("span",{children:"LIVE"})]})]}),(0,u.jsxs)("div",{className:"teams-container",children:[(0,u.jsxs)("div",{className:"team-row ".concat(d?"winner":c?"loser":""),children:[(0,u.jsx)("div",{className:"team-info",children:t.team1||t.opponent1?(0,u.jsxs)(u.Fragment,{children:[p(t.team1||t.opponent1)&&(0,u.jsx)("span",{className:"team-seed",children:p(t.team1||t.opponent1)}),g(t.team1||t.opponent1),(0,u.jsx)("span",{className:"team-name team-clickable",onClick:e=>m(t.team1||t.opponent1,e),children:x(t.team1||t.opponent1)})]}):(0,u.jsx)("span",{className:"team-name team-placeholder",children:"TBD"})}),(0,u.jsx)("div",{className:"team-score ".concat(d?"winner":i||o?"":"pending"),children:h(t.team1||t.opponent1,1)})]}),(0,u.jsxs)("div",{className:"team-row ".concat(c?"winner":d?"loser":""),children:[(0,u.jsx)("div",{className:"team-info",children:t.team2||t.opponent2?(0,u.jsxs)(u.Fragment,{children:[p(t.team2||t.opponent2)&&(0,u.jsx)("span",{className:"team-seed",children:p(t.team2||t.opponent2)}),g(t.team2||t.opponent2),(0,u.jsx)("span",{className:"team-name team-clickable",onClick:e=>m(t.team2||t.opponent2,e),children:x(t.team2||t.opponent2)})]}):(0,u.jsx)("span",{className:"team-name team-placeholder",children:"TBD"})}),(0,u.jsx)("div",{className:"team-score ".concat(c?"winner":i||o?"":"pending"),children:h(t.team2||t.opponent2,2)})]})]}),n&&(0,u.jsx)("div",{className:"match-connector"})]})}const Fs=function(e){let{bracket:t,event:a,eventId:r,navigateTo:n,isAdmin:l=!1,onMatchUpdate:i}=e;console.log("LiquipediaBracket props:",{bracket:t,event:a,eventId:r});const[o,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(0),[h,g]=(0,s.useState)(0),{api:p}=b();if(!t)return(0,u.jsx)("div",{className:"liquipedia-bracket-empty",children:(0,u.jsxs)("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Bracket Generated"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The tournament bracket hasn't been generated yet"}),l&&(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Use the admin controls to generate the bracket"})]})});const v=(e,t)=>({0:"Final",1:"Semifinals",2:"Quarterfinals",3:"Round of 16",4:"Round of 32",5:"Round of 64"}[t-e-1]||"Round ".concat(e+1)),y=(e=>{if(e.rounds&&"object"===typeof e.rounds&&!Array.isArray(e.rounds)){const t=[],a=Object.keys(e.rounds);return a.sort(((t,a)=>{const r=e.rounds[t],s=e.rounds[a];return(r.round_number||0)-(s.round_number||0)})),a.forEach((a=>{const r=e.rounds[a];t.push({name:a,matches:r.matches||[]})})),t}if(e.rounds&&Array.isArray(e.rounds))return e.rounds.map(((t,a)=>({name:v(a,e.rounds.length),matches:t.matches||[]})));if(e.matches&&Array.isArray(e.matches)){const t={};e.matches.forEach((e=>{const a=e.round_name||"Round ".concat(e.round_number||1);t[a]||(t[a]={name:a,round_number:e.round_number||1,matches:[]}),t[a].matches.push(e)}));const a=Object.values(t);return a.sort(((e,t)=>(e.round_number||0)-(t.round_number||0))),a}return[]})(t),f=async()=>{if(o)try{var e;const t=await p.put("/admin/bracket-matches/".concat(o.id,"/score"),{team1_score:parseInt(m),team2_score:parseInt(h)});if(null!==(e=t.data)&&void 0!==e&&e.success){console.log("\u2705 Score updated successfully");const e=t.data.data;setLocalBracket((t=>{if(!t)return t;const a=JSON.parse(JSON.stringify(t));if(a.rounds&&Object.keys(a.rounds).forEach((t=>{const r=a.rounds[t];if(r.matches){const t=r.matches.findIndex((e=>e.id===o.id));-1!==t&&(r.matches[t]=c(c({},r.matches[t]),{},{team1_score:parseInt(m),team2_score:parseInt(h),status:(null===e||void 0===e?void 0:e.status)||r.matches[t].status,winner_id:(null===e||void 0===e?void 0:e.winner_id)||null,loser_id:(null===e||void 0===e?void 0:e.loser_id)||null}))}})),a.matches){const t=a.matches.findIndex((e=>e.id===o.id));-1!==t&&(a.matches[t]=c(c({},a.matches[t]),{},{team1_score:parseInt(m),team2_score:parseInt(h),status:(null===e||void 0===e?void 0:e.status)||a.matches[t].status,winner_id:(null===e||void 0===e?void 0:e.winner_id)||null,loser_id:(null===e||void 0===e?void 0:e.loser_id)||null}))}return a})),d(null),x(0),g(0),i&&i(o.id,{team1_score:parseInt(m),team2_score:parseInt(h),status:null===e||void 0===e?void 0:e.status,winner_id:null===e||void 0===e?void 0:e.winner_id})}}catch(t){console.error("Error updating match score:",t),alert("Failed to update match score")}},j=()=>{d(null),x(0),g(0)};return(0,u.jsxs)("div",{className:"liquipedia-bracket",children:[(0,u.jsx)("style",{children:"\n        .liquipedia-bracket {\n          --bracket-bg: transparent;\n          --bracket-match-bg: #ffffff;\n          --bracket-border: #d3d3d3;\n          --bracket-text: #000000;\n          --bracket-text-muted: #666666;\n          --bracket-winner: #228b22;\n          --bracket-loser: #999999;\n          --bracket-live: #ff6b35;\n          --bracket-pending: #e6e6e6;\n          --bracket-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);\n          --bracket-hover-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n        }\n\n        .dark .liquipedia-bracket {\n          --bracket-bg: transparent;\n          --bracket-match-bg: #3a3a3a;\n          --bracket-border: #555555;\n          --bracket-text: #ffffff;\n          --bracket-text-muted: #cccccc;\n          --bracket-winner: #4ade80;\n          --bracket-loser: #9ca3af;\n          --bracket-live: #ff6b35;\n          --bracket-pending: #555555;\n          --bracket-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);\n          --bracket-hover-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);\n        }\n\n        .bracket-container {\n          overflow-x: auto;\n          overflow-y: visible;\n          padding: 1rem 0;\n          min-height: 400px;\n        }\n\n        .bracket-rounds {\n          display: flex;\n          gap: 40px;\n          align-items: flex-start;\n          min-width: fit-content;\n          justify-content: flex-start;\n          padding: 8px;\n        }\n\n        .bracket-round {\n          display: flex;\n          flex-direction: column;\n          min-width: 200px;\n          position: relative;\n        }\n\n        .round-header {\n          text-align: center;\n          margin-bottom: 12px;\n          padding: 4px 8px;\n          background: var(--bracket-pending);\n          border: 1px solid var(--bracket-border);\n          border-radius: 3px;\n        }\n\n        .round-title {\n          font-size: 11px;\n          font-weight: 700;\n          color: var(--bracket-text);\n          margin-bottom: 2px;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        .round-date {\n          font-size: 9px;\n          color: var(--bracket-text-muted);\n          font-weight: 400;\n        }\n\n        .round-matches {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n          position: relative;\n        }\n\n        .liquipedia-match {\n          background: var(--bracket-match-bg);\n          border: 1px solid var(--bracket-border);\n          border-radius: 3px;\n          overflow: hidden;\n          box-shadow: var(--bracket-shadow);\n          transition: all 0.15s ease;\n          cursor: pointer;\n          position: relative;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          font-size: 12px;\n          min-width: 200px;\n        }\n\n        .liquipedia-match.admin-editable {\n          border-color: #dc2626;\n          border-width: 2px;\n        }\n\n        .liquipedia-match.admin-editable:hover {\n          box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.2);\n        }\n\n        .liquipedia-match:hover {\n          box-shadow: var(--bracket-hover-shadow);\n          transform: translateY(-1px);\n        }\n\n        .liquipedia-match.live {\n          border-color: var(--bracket-live);\n          animation: pulse-glow 2s infinite;\n        }\n\n        .liquipedia-match.completed {\n          border-color: var(--bracket-winner);\n        }\n\n        .match-header {\n          background: var(--bracket-pending);\n          padding: 4px 8px;\n          border-bottom: 1px solid var(--bracket-border);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 10px;\n          text-transform: uppercase;\n          font-weight: 600;\n        }\n\n        .dark .match-header {\n          background: var(--bracket-pending);\n        }\n\n        .match-format {\n          font-size: 0.75rem;\n          font-weight: 500;\n          color: var(--bracket-text-muted);\n        }\n\n        .live-indicator {\n          color: var(--bracket-live);\n          font-size: 0.75rem;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n\n        .live-dot {\n          width: 6px;\n          height: 6px;\n          border-radius: 50%;\n          background: var(--bracket-live);\n          animation: pulse-dot 1.5s infinite;\n        }\n\n        .teams-container {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .team-row {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 6px 8px;\n          transition: background-color 0.15s ease;\n          min-height: 26px;\n          border-right: 3px solid transparent;\n        }\n\n        .team-row:first-child {\n          border-bottom: 1px solid var(--bracket-border);\n        }\n\n        .team-row.winner {\n          background: rgba(34, 139, 34, 0.08);\n          border-right-color: var(--bracket-winner);\n          font-weight: 600;\n        }\n\n        .team-row.loser {\n          opacity: 0.6;\n          color: var(--bracket-loser);\n          background: rgba(153, 153, 153, 0.03);\n        }\n\n        .team-info {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          flex: 1;\n          min-width: 0;\n        }\n\n        .team-logo {\n          flex-shrink: 0;\n          border-radius: 2px;\n          overflow: hidden;\n          background: transparent;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 16px;\n          height: 16px;\n        }\n\n        .team-logo img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n\n        .team-logo-fallback {\n          font-size: 8px;\n          font-weight: 700;\n          color: var(--bracket-text-muted);\n          width: 16px;\n          height: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: var(--bracket-pending);\n          border-radius: 2px;\n        }\n\n        .team-name {\n          font-weight: 500;\n          font-size: 11px;\n          color: var(--bracket-text);\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          transition: color 0.15s ease;\n          max-width: 120px;\n        }\n\n        .team-name.team-clickable {\n          cursor: pointer;\n          color: var(--bracket-text);\n          transition: color 0.15s ease;\n        }\n\n        .team-name.team-clickable:hover {\n          color: #dc2626;\n          text-decoration: underline;\n        }\n\n        .team-placeholder {\n          font-style: italic;\n          color: var(--bracket-text-muted);\n          font-size: 0.8rem;\n        }\n\n        .team-seed {\n          font-size: 0.7rem;\n          color: var(--bracket-text-muted);\n          background: var(--bracket-pending);\n          padding: 0.125rem 0.375rem;\n          border-radius: 10px;\n          font-weight: 500;\n          margin-right: 0.25rem;\n        }\n\n        .team-score {\n          font-weight: 700;\n          font-size: 14px;\n          color: var(--bracket-text);\n          min-width: 20px;\n          text-align: center;\n          transition: all 0.15s ease;\n          padding: 2px 6px;\n          border-radius: 2px;\n          background: rgba(0, 0, 0, 0.05);\n          border: 1px solid var(--bracket-border);\n        }\n\n        .dark .team-score {\n          background: rgba(255, 255, 255, 0.1);\n        }\n\n        .team-score.winner {\n          color: var(--bracket-winner);\n          background: rgba(34, 139, 34, 0.15);\n          border-color: var(--bracket-winner);\n          font-weight: 800;\n        }\n\n        .team-score.pending {\n          color: var(--bracket-text-muted);\n          font-size: 12px;\n          font-weight: 400;\n          background: transparent;\n          border: none;\n        }\n\n        .match-connector {\n          position: absolute;\n          right: -20px;\n          top: 50%;\n          width: 20px;\n          height: 1px;\n          background: var(--bracket-border);\n          transform: translateY(-50%);\n          pointer-events: none;\n        }\n\n        .bracket-round:last-child .match-connector {\n          display: none;\n        }\n\n        /* Simplified bracket connectors matching Liquipedia */\n        .bracket-connectors {\n          position: absolute;\n          right: -40px;\n          top: 0;\n          width: 40px;\n          height: 100%;\n          pointer-events: none;\n          z-index: 1;\n        }\n\n        .connector-line {\n          position: absolute;\n          background: var(--bracket-border);\n        }\n\n        .connector-horizontal {\n          height: 1px;\n          width: 20px;\n        }\n\n        .connector-vertical {\n          width: 1px;\n          right: 20px;\n        }\n\n        .connector-to-next {\n          height: 1px;\n          width: 20px;\n          right: 0;\n        }\n\n        /* Liquipedia-style bracket spacing - progressive doubling */\n        .bracket-round:nth-child(1) .round-matches {\n          gap: 8px;\n        }\n\n        .bracket-round:nth-child(2) .round-matches {\n          gap: 24px;\n        }\n\n        .bracket-round:nth-child(3) .round-matches {\n          gap: 56px;\n        }\n\n        .bracket-round:nth-child(4) .round-matches {\n          gap: 120px;\n        }\n\n        .bracket-round:nth-child(5) .round-matches {\n          gap: 248px;\n        }\n\n        @keyframes pulse-glow {\n          0%, 100% {\n            box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.2);\n          }\n          50% {\n            box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.4);\n          }\n        }\n\n        @keyframes pulse-dot {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.5;\n          }\n        }\n\n        /* Responsive design */\n        @media (max-width: 1024px) {\n          .bracket-rounds {\n            gap: 2.5rem;\n          }\n          \n          .bracket-round {\n            min-width: 220px;\n          }\n          \n          .round-title {\n            font-size: 0.9rem;\n          }\n        }\n\n        @media (max-width: 768px) {\n          .bracket-container {\n            padding: 0.5rem 0;\n          }\n          \n          .bracket-rounds {\n            gap: 2rem;\n          }\n          \n          .bracket-round {\n            min-width: 200px;\n          }\n          \n          .round-title {\n            font-size: 0.85rem;\n          }\n          \n          .team-name {\n            font-size: 0.75rem;\n          }\n          \n          .team-score {\n            font-size: 1.1rem;\n          }\n          \n          .team-row {\n            padding: 0.625rem;\n          }\n          \n          /* Simplify connectors on tablet */\n          .bracket-connectors {\n            right: -2rem;\n            width: 2rem;\n          }\n          \n          .match-connector {\n            right: -1rem;\n            width: 1rem;\n          }\n        }\n\n        @media (max-width: 640px) {\n          .bracket-rounds {\n            gap: 1.5rem;\n          }\n          \n          .bracket-round {\n            min-width: 180px;\n          }\n          \n          .round-header {\n            margin-bottom: 1rem;\n          }\n          \n          .round-title {\n            font-size: 0.8rem;\n          }\n          \n          .round-date {\n            font-size: 0.7rem;\n          }\n          \n          .liquipedia-match {\n            min-height: auto;\n          }\n          \n          .team-row {\n            padding: 0.5rem;\n          }\n          \n          .team-name {\n            font-size: 0.7rem;\n            max-width: 100px;\n          }\n          \n          .team-score {\n            font-size: 1rem;\n          }\n          \n          .match-format {\n            font-size: 0.7rem;\n          }\n          \n          .live-indicator {\n            font-size: 0.7rem;\n          }\n          \n          /* Hide connectors on mobile for cleaner look */\n          .bracket-connectors,\n          .match-connector {\n            display: none;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .bracket-rounds {\n            gap: 1rem;\n          }\n          \n          .bracket-round {\n            min-width: 160px;\n          }\n          \n          .team-row {\n            padding: 0.375rem 0.5rem;\n          }\n          \n          .team-name {\n            font-size: 0.65rem;\n            max-width: 80px;\n          }\n          \n          .team-score {\n            font-size: 0.9rem;\n          }\n          \n          .round-title {\n            font-size: 0.75rem;\n          }\n        }\n\n        /* Landscape mobile optimization */\n        @media (max-height: 500px) and (orientation: landscape) {\n          .bracket-container {\n            min-height: auto;\n            padding: 0.25rem 0;\n          }\n          \n          .round-header {\n            margin-bottom: 0.5rem;\n            position: static;\n          }\n          \n          .round-matches {\n            gap: 0.5rem;\n          }\n          \n          .team-row {\n            padding: 0.25rem 0.5rem;\n          }\n        }\n      "}),(0,u.jsx)("div",{className:"bracket-container",children:(0,u.jsx)("div",{className:"bracket-rounds",children:y.map(((e,t)=>(0,u.jsx)(Us,{round:e,roundIndex:t,totalRounds:y.length,navigateTo:n,isAdmin:l,onMatchUpdate:i,setEditingMatch:d,setTeam1Score:x,setTeam2Score:g},t)))})}),(()=>{var e,t;return o?(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Update Match Score"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:(null===(e=o.team1)||void 0===e?void 0:e.name)||"Team 1"}),(0,u.jsx)("input",{type:"number",min:"0",max:"3",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,u.jsx)("div",{className:"px-4 text-gray-500 dark:text-gray-400",children:"vs"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:(null===(t=o.team2)||void 0===t?void 0:t.name)||"Team 2"}),(0,u.jsx)("input",{type:"number",min:"0",max:"3",value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,u.jsx)("button",{onClick:j,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"Cancel"}),(0,u.jsx)("button",{onClick:f,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Save Score"})]})]})]})}):null})()]})},Bs=se("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Ws=se("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Hs=se("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Vs=se("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),qs=se("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Gs=se("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Ys=se("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Zs=se("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ks=e=>{var t,a,r,n;let{match:l,roundId:i,editMode:o,availableTeams:d,onTeamSelect:m,onScoreUpdate:x}=e;const[h,g]=(0,s.useState)(!1),[p,v]=(0,s.useState)({score1:l.score1,score2:l.score2});(0,s.useEffect)((()=>{v({score1:l.score1,score2:l.score2})}),[l.score1,l.score2]);return(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3 mb-4 border-2 ".concat("completed"===l.status?"border-green-600":"live"===l.status?"border-yellow-600":"border-gray-600"," min-w-[250px]"),children:[(0,u.jsxs)("div",{className:"text-xs text-gray-400 mb-2 flex justify-between",children:[(0,u.jsxs)("span",{children:["Match ",l.matchNumber]}),(0,u.jsxs)("span",{className:"text-blue-400",children:["BO",l.bestOf]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between p-2 rounded mb-1 ".concat(l.winner===l.team1?"bg-green-900/30":"bg-gray-700"),children:[(0,u.jsx)("div",{className:"flex-grow",children:o?(0,u.jsxs)("select",{value:(null===(t=l.team1)||void 0===t?void 0:t.id)||"",onChange:e=>m(i,l.id,1,e.target.value),className:"w-full px-2 py-1 bg-gray-600 text-white rounded text-sm",children:[(0,u.jsx)("option",{value:"",children:"Select Team"}),d.map((e=>(0,u.jsx)("option",{value:e.id,children:e.name},e.id)))]}):(0,u.jsx)("span",{className:"text-sm text-white",children:(null===(a=l.team1)||void 0===a?void 0:a.name)||"TBD"})}),(0,u.jsx)("div",{className:"ml-3",children:h?(0,u.jsx)("input",{type:"number",value:p.score1,onChange:e=>v(c(c({},p),{},{score1:parseInt(e.target.value)||0})),className:"w-12 px-1 py-0 bg-gray-600 text-white rounded text-center",min:"0",max:l.bestOf}):(0,u.jsx)("span",{className:"text-white font-bold",children:l.score1})})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between p-2 rounded ".concat(l.winner===l.team2?"bg-green-900/30":"bg-gray-700"),children:[(0,u.jsx)("div",{className:"flex-grow",children:o?(0,u.jsxs)("select",{value:(null===(r=l.team2)||void 0===r?void 0:r.id)||"",onChange:e=>m(i,l.id,2,e.target.value),className:"w-full px-2 py-1 bg-gray-600 text-white rounded text-sm",children:[(0,u.jsx)("option",{value:"",children:"Select Team"}),d.map((e=>(0,u.jsx)("option",{value:e.id,children:e.name},e.id)))]}):(0,u.jsx)("span",{className:"text-sm text-white",children:(null===(n=l.team2)||void 0===n?void 0:n.name)||"TBD"})}),(0,u.jsx)("div",{className:"ml-3",children:h?(0,u.jsx)("input",{type:"number",value:p.score2,onChange:e=>v(c(c({},p),{},{score2:parseInt(e.target.value)||0})),className:"w-12 px-1 py-0 bg-gray-600 text-white rounded text-center",min:"0",max:l.bestOf}):(0,u.jsx)("span",{className:"text-white font-bold",children:l.score2})})]}),o&&l.team1&&l.team2&&(0,u.jsx)("div",{className:"mt-2 flex justify-center",children:h?(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>{x(i,l.id,p.score1,p.score2),g(!1)},className:"px-2 py-1 bg-green-600 text-white rounded text-xs",children:"Save"}),(0,u.jsx)("button",{onClick:()=>{g(!1),v({score1:l.score1,score2:l.score2})},className:"px-2 py-1 bg-gray-600 text-white rounded text-xs",children:"Cancel"})]}):(0,u.jsx)("button",{onClick:()=>g(!0),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Update Score"})})]})},Js=e=>{let{eventId:t}=e;const{api:a,isAdmin:r,isModerator:n}=b(),[l,i]=(0,s.useState)({name:"Marvel Rivals Championship 2025",format:"single_elimination",rounds:[],teams:[],settings:{bestOf:3,totalTeams:8,thirdPlace:!1,grandFinalReset:!1}}),[o,d]=(0,s.useState)("single_elimination"),[m,x]=(0,s.useState)(8),[h,g]=(0,s.useState)(3),[p,v]=(0,s.useState)(!1),[y,f]=(0,s.useState)([]),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)(!0),[C,E]=(0,s.useState)(!1),T=r()||n();(0,s.useEffect)((()=>{A(),t&&M()}),[t]);const A=async()=>{try{var e;k(!0);const t=await a.get("/teams"),r=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[];f(r)}catch(t){console.error("Error fetching teams:",t),f([{id:1,name:"Team Secret"},{id:2,name:"FaZe Clan"},{id:3,name:"Cloud9"},{id:4,name:"NRG Esports"},{id:5,name:"100 Thieves"},{id:6,name:"Sentinels"},{id:7,name:"OpTic Gaming"},{id:8,name:"TSM"},{id:9,name:"G2 Esports"},{id:10,name:"Fnatic"},{id:11,name:"Team Liquid"},{id:12,name:"Evil Geniuses"},{id:13,name:"XSET"},{id:14,name:"Version1"},{id:15,name:"The Guard"},{id:16,name:"Ghost Gaming"}])}finally{k(!1)}},M=async()=>{try{var e,r;let h=null;try{var s,n;const e=await a.get("/events/".concat(t,"/bracket"));null!==(s=e.data)&&void 0!==s&&null!==(n=s.data)&&void 0!==n&&n.bracket&&(h=e.data.data.bracket,console.log("\u2705 Loaded bracket from /bracket endpoint"))}catch(u){console.log("\ud83d\udcdd Bracket endpoint not available, trying event endpoint")}let p=null;if(!h){var l;const e=await a.get("/events/".concat(t));p=(null===(l=e.data)||void 0===l?void 0:l.data)||e.data,p.bracket_data?(h=p.bracket_data,console.log("\u2705 Loaded bracket from event.bracket_data")):p.bracket&&(h=p.bracket,console.log("\u2705 Loaded bracket from event.bracket"))}var o,c,m;if(h&&((null===(e=h.rounds)||void 0===e?void 0:e.length)>0||(null===(r=h.matches)||void 0===r?void 0:r.length)>0))i({name:h.name||(null===(o=p)||void 0===o?void 0:o.name)||"Tournament",format:h.format||h.type||"single_elimination",rounds:h.rounds||[],teams:h.teams||[],settings:h.settings||{bestOf:3,totalTeams:8,thirdPlace:!1,grandFinalReset:!1},public:void 0===h.public||h.public}),d(h.format||h.type||"single_elimination"),g((null===(c=h.settings)||void 0===c?void 0:c.bestOf)||3),x((null===(m=h.settings)||void 0===m?void 0:m.totalTeams)||8),S(void 0===h.public||h.public),console.log("\u2705 Fully loaded existing bracket with all settings"),v(!0);else console.log("\ud83d\udcdd No existing bracket found, starting fresh")}catch(h){console.error("Error loading bracket:",h)}},P=()=>{const e=[],t=m/2,a={id:1,name:F(1,Math.log2(m)),matches:[]};for(let r=0;r<t;r++)a.matches.push({id:"R1M".concat(r+1),matchNumber:r+1,team1:null,team2:null,score1:0,score2:0,winner:null,bestOf:h,status:"pending"});return e.push(a),{rounds:e,type:"single_elimination"}},R=()=>{const e=[],t=m/2,a={id:1,name:"Upper Bracket Round 1",bracket:"upper",matches:[]};for(let r=0;r<t;r++)a.matches.push({id:"UBR1M".concat(r+1),matchNumber:r+1,team1:null,team2:null,score1:0,score2:0,winner:null,loser:null,bestOf:h,status:"pending",bracket:"upper"});return e.push(a),{rounds:[a],upperBracket:e,lowerBracket:[],type:"double_elimination"}},I=()=>{const e=[];let t=1;for(let a=0;a<m;a++)for(let r=a+1;r<m;r++){const a=Math.floor(t/(m/2))+1;e[a-1]||(e[a-1]={id:a,name:"Round ".concat(a),matches:[]}),e[a-1].matches.push({id:"RRM".concat(t),matchNumber:t,team1:null,team2:null,score1:0,score2:0,winner:null,bestOf:h,status:"pending"}),t++}return{rounds:e,type:"round_robin",standings:[]}},D=()=>{const e=Math.ceil(Math.log2(m)),t=[],a={id:1,name:"Swiss Round 1",matches:[]},r=Math.floor(m/2);for(let s=0;s<r;s++)a.matches.push({id:"SR1M".concat(s+1),matchNumber:s+1,team1:null,team2:null,score1:0,score2:0,winner:null,bestOf:h,status:"pending"});return t.push(a),{rounds:t,type:"swiss",totalSwissRounds:e}},L=()=>{const e=Math.floor(m/4),t=[];for(let a=0;a<e;a++){const e={id:a+1,name:"Group ".concat(String.fromCharCode(65+a)),teams:[],matches:[]};[{name:"Opening Match 1",id:"G".concat(a+1,"M1")},{name:"Opening Match 2",id:"G".concat(a+1,"M2")},{name:"Winners Match",id:"G".concat(a+1,"M3")},{name:"Losers Match",id:"G".concat(a+1,"M4")},{name:"Decider Match",id:"G".concat(a+1,"M5")}].forEach((t=>{e.matches.push({id:t.id,name:t.name,team1:null,team2:null,score1:0,score2:0,winner:null,bestOf:h,status:"pending"})})),t.push(e)}return{groups:t,rounds:[],type:"gsl"}},U=()=>{const e=Math.min(4,Math.floor(m/4)),t=[];for(let a=0;a<e;a++)t.push({id:a+1,name:"Group ".concat(String.fromCharCode(65+a)),teams:[],matches:[],standings:[]});return{groups:t,rounds:[],type:"group_stage",stage:"groups"}},z=()=>c(c({},I()),{},{type:"league",standings:[],weeks:Math.ceil(m*(m-1)/2/4)}),O=()=>{const e=[];let t=m,a=1;for(;t>2;){const r={id:a,name:"Gauntlet Round ".concat(a),matches:[]};r.matches.push({id:"GR".concat(a,"M1"),matchNumber:1,team1:null,team2:null,score1:0,score2:0,winner:null,bestOf:h,status:"pending",description:"Seed ".concat(t," vs Seed ").concat(t-1)}),e.push(r),t--,a++}return e.push({id:a,name:"Gauntlet Final",matches:[{id:"GR".concat(a,"M1"),matchNumber:1,team1:null,team2:null,score1:0,score2:0,winner:null,bestOf:7===h?7:5,status:"pending",description:"Top Seed vs Gauntlet Winner"}]}),{rounds:e,type:"gauntlet"}},F=(e,t)=>{const a=t-e+1;return 1===a?"Grand Final":2===a?"Semi Finals":3===a?"Quarter Finals":4===a?"Round of 16":5===a?"Round of 32":"Round ".concat(e)},B=(e,t)=>{const a=e.rounds.find((e=>e.id===t));if(!a)return e;if(!a.matches.every((e=>"completed"===e.status)))return e;const r=t+1;if(e.rounds.find((e=>e.id===r)))return e;const s=Math.floor(a.matches.length/2);if(s<1)return e;const n=Math.log2(e.settings.totalTeams),l={id:r,name:F(r,n),matches:[]};for(let o=0;o<s;o++)l.matches.push({id:"R".concat(r,"M").concat(o+1),matchNumber:o+1,team1:null,team2:null,score1:0,score2:0,winner:null,bestOf:h,status:"pending"});const i=[...e.rounds,l];return c(c({},e),{},{rounds:i})},W=(e,t,a,r)=>{const s=[...l.rounds],n=s.find((t=>t.id===e)).matches.find((e=>e.id===t)),o=y.find((e=>e.id===parseInt(r)));1===a?n.team1=o||null:n.team2=o||null,n.team1&&n.team2&&"pending"===n.status&&(n.status="live"),i(c(c({},l),{},{rounds:s}))},H=(e,t,a,r)=>{const s=[...l.rounds],n=s.find((t=>t.id===e)).matches.find((e=>e.id===t));n.score1=a,n.score2=r;const o=Math.ceil(n.bestOf/2);if(a>=o){n.winner=n.team1,n.status="completed";const a=c(c({},l),{},{rounds:s}),r=B(a,e),o=V(r,e,t,n.team1);i(o)}else if(r>=o){n.winner=n.team2,n.status="completed";const a=c(c({},l),{},{rounds:s}),r=B(a,e),o=V(r,e,t,n.team2);i(o)}else n.winner=null,n.status=n.team1&&n.team2?"live":"pending",i(c(c({},l),{},{rounds:s}))},V=(e,t,a,r)=>{if(!r)return e;const s=e.rounds.find((e=>e.id===t+1));if(!s)return e;const n=parseInt(a.split("M")[1]),l=Math.ceil(n/2);if(s.matches.find((e=>e.matchNumber===l))){const a=e.rounds.map((e=>e.id===t+1?c(c({},e),{},{matches:e.matches.map((e=>{if(e.matchNumber===l){const t=c({},e);return n%2===1?t.team1=r:t.team2=r,t.team1&&t.team2&&"pending"===t.status&&(t.status="live"),t}return e}))}):e));return c(c({},e),{},{rounds:a})}return e};return(0,u.jsxs)("div",{className:"standalone-bracket-builder bg-gray-900 rounded-lg p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,u.jsx)(le,{className:"text-yellow-500"}),T?"Manual Bracket Moderator":"Live Tournament Bracket"]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[T&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{onClick:()=>S(!_),className:"px-3 py-2 rounded flex items-center gap-2 ".concat(_?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-white hover:bg-gray-500"),title:_?"Bracket is PUBLIC":"Bracket is PRIVATE",children:[_?(0,u.jsx)(Bs,{size:18}):(0,u.jsx)(Ws,{size:18}),_?"Public":"Private"]}),l.rounds.length>0&&(0,u.jsx)("button",{onClick:async()=>{if(t&&0!==l.rounds.length){N(!0),E(!1);try{const e=c(c({},l),{},{type:o,public:_,last_updated:(new Date).toISOString()});console.log("\ud83d\udd04 Saving bracket data:",e),console.log("\ud83d\udd04 Saving to URL:","/admin/events/".concat(t));const r=await a.put("/admin/events/".concat(t),{bracket_data:e});console.log("\u2705 Save response:",r.data),r.data.success&&(E(!0),setTimeout((()=>E(!1)),3e3),console.log("\u2705 Bracket saved successfully to database"))}catch(n){var e,r,s;console.error("\u274c Error saving bracket:",n),console.error("\u274c Error response:",null===(e=n.response)||void 0===e?void 0:e.data),alert("Failed to save bracket: "+((null===(r=n.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||n.message))}finally{N(!1)}}else alert("Please create a bracket first")},disabled:w,className:"px-4 py-2 rounded flex items-center gap-2 ".concat(C?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"," ").concat(w?"opacity-50 cursor-not-allowed":""),children:w?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(je,{size:18,className:"animate-spin"}),"Saving..."]}):C?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Hs,{size:18}),"Saved!"]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Vs,{size:18}),"Save to Database"]})}),(0,u.jsxs)("button",{onClick:()=>v(!p),className:"px-4 py-2 rounded flex items-center gap-2 ".concat(p?"bg-green-600 text-white":"bg-gray-600 text-white"),children:[p?(0,u.jsx)(qs,{size:18}):(0,u.jsx)(Gs,{size:18}),p?"View Mode":"Edit Mode"]})]}),!T&&(0,u.jsxs)("div",{className:"px-4 py-2 bg-blue-600 text-white rounded flex items-center gap-2",children:[(0,u.jsx)(Ys,{size:18}),"Live View"]})]})]}),T&&p&&0===l.rounds.length&&(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,u.jsx)(be,{size:20}),"Bracket Configuration"]}),(0,u.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Format"}),(0,u.jsx)("select",{value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded",children:Object.entries({single_elimination:{name:"Single Elimination",description:"Standard knockout bracket - Teams are eliminated after one loss"},double_elimination:{name:"Double Elimination",description:"Upper and lower bracket - Teams get a second chance after first loss"},round_robin:{name:"Round Robin",description:"Everyone plays everyone - All teams play each other once"},swiss:{name:"Swiss System",description:"Paired by record - Teams with similar records face each other"},gsl:{name:"GSL Groups",description:"4-team double elim groups - Two advance from each group"},group_stage:{name:"Group Stage + Playoffs",description:"Groups phase followed by elimination playoffs"},league:{name:"League Format",description:"Season-long round robin with standings"},gauntlet:{name:"Gauntlet",description:"Lower seeds must win multiple matches to reach finals"}}).map((e=>{let[t,a]=e;return(0,u.jsx)("option",{value:t,children:a.name},t)}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Number of Teams"}),(0,u.jsx)("select",{value:m,onChange:e=>x(parseInt(e.target.value)),className:"w-full px-3 py-2 bg-gray-700 text-white rounded",children:[2,4,6,8,12,16,20,24,32,48,64,128,256].map((e=>(0,u.jsxs)("option",{value:e,children:[e," teams"]},e)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Match Format"}),(0,u.jsx)("select",{value:h,onChange:e=>g(parseInt(e.target.value)),className:"w-full px-3 py-2 bg-gray-700 text-white rounded",children:Object.entries({bo1:{name:"Best of 1",value:1,description:"Single game"},bo3:{name:"Best of 3",value:3,description:"First to 2 wins"},bo5:{name:"Best of 5",value:5,description:"First to 3 wins"},bo7:{name:"Best of 7",value:7,description:"First to 4 wins (Grand Finals)"},ft3:{name:"First to 3",value:3,description:"First to win 3 maps"},ft4:{name:"First to 4",value:4,description:"First to win 4 maps (Finals)"}}).map((e=>{let[t,a]=e;return(0,u.jsx)("option",{value:a.value,title:a.description,children:a.name},t)}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"\xa0"}),(0,u.jsxs)("button",{onClick:()=>{let e=null;switch(o){case"single_elimination":default:e=P();break;case"double_elimination":e=R();break;case"round_robin":e=I();break;case"swiss":e=D();break;case"gsl":e=L();break;case"group_stage":e=U();break;case"league":e=z();break;case"gauntlet":e=O()}i(c(c(c({},l),{},{format:o},e),{},{settings:c(c({},l.settings),{},{bestOf:h,totalTeams:m})}))},className:"w-full px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center justify-center gap-2",children:[(0,u.jsx)(Zs,{size:18}),"Create Bracket"]})]})]})]}),(0,u.jsx)("div",{className:"bracket-container overflow-x-auto",children:l.rounds.length>0?(0,u.jsx)("div",{className:"flex gap-8 min-w-max p-4",children:l.rounds.map(((e,t)=>(0,u.jsxs)("div",{className:"round-column",children:[(0,u.jsx)("h3",{className:"text-center text-white font-semibold mb-4",children:e.name}),(0,u.jsx)("div",{className:"space-y-".concat(Math.min(8,Math.pow(2,t+1))),children:e.matches.map((t=>(0,u.jsx)(Ks,{match:t,roundId:e.id,editMode:p&&T,availableTeams:y,onTeamSelect:W,onScoreUpdate:H},t.id)))})]},e.id)))}):(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("p",{className:"text-gray-400 text-lg mb-4",children:T?"No bracket created yet":"No bracket available"}),T&&!p&&(0,u.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Enter Edit Mode to Create Bracket"})]})}),l.rounds.length>0&&(0,u.jsxs)("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg",children:[(0,u.jsx)("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Legend"}),(0,u.jsxs)("div",{className:"flex gap-6 text-xs text-gray-400",children:[(0,u.jsxs)("span",{className:"flex items-center gap-1",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-gray-700 rounded"}),"Pending"]}),(0,u.jsxs)("span",{className:"flex items-center gap-1",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-yellow-600 rounded"}),"Live"]}),(0,u.jsxs)("span",{className:"flex items-center gap-1",children:[(0,u.jsx)("div",{className:"w-3 h-3 bg-green-600 rounded"}),"Completed"]})]}),T&&p&&(0,u.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:(0,u.jsxs)("button",{onClick:()=>{i(c(c({},l),{},{rounds:[]}))},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 flex items-center gap-1",children:[(0,u.jsx)(Zt,{size:14}),"Clear Bracket"]})})]})]})};const Qs=function(e){var t,a,r,n,l,i,o,d,c,m,x;let{params:h,navigateTo:g}=e;const[p,v]=(0,s.useState)(null),[y,f]=(0,s.useState)([]),[j,k]=(0,s.useState)([]),[w,N]=(0,s.useState)(null),[_,S]=(0,s.useState)("overview"),[C,T]=(0,s.useState)(!0),[A,M]=(0,s.useState)(!1),[P,L]=(0,s.useState)([]),[U,z]=(0,s.useState)(""),[O,F]=(0,s.useState)(!1),[B,W]=(0,s.useState)(null),{api:H,isAdmin:V,isModerator:q}=b(),G=null===h||void 0===h?void 0:h.id;console.log("\ud83d\udd0d EventDetailPage - Received event ID:",G),(0,s.useEffect)((()=>{G&&(Y(),Z())}),[G]);const Y=async()=>{try{var e;T(!0),console.log("\ud83d\udd04 EventDetailPage: Fetching event data for ID:",G);const d=await H.get("/events/".concat(G)),c=(null===(e=d.data)||void 0===e?void 0:e.data)||d.data||d;console.log("\u2705 Real event data received:",c),v(c);let m=[];c.teams&&Array.isArray(c.teams)?m=c.teams:c.participating_teams&&Array.isArray(c.participating_teams)?m=c.participating_teams:c.event_teams&&Array.isArray(c.event_teams)&&(m=c.event_teams),console.log("\u2705 Teams data found:",m.length,"teams"),k(m);let u=[];if(c.matches&&Array.isArray(c.matches)?u=c.matches:c.event_matches&&Array.isArray(c.event_matches)&&(u=c.event_matches),console.log("\u2705 Matches data found:",u.length,"matches"),f(u),c.bracket?N(c.bracket):c.bracket_data&&N(c.bracket_data),"ongoing"===c.status||"completed"===c.status)try{var t,a,r,s,n,l,i;const e=await H.get("/events/".concat(G,"/bracket"));console.log("\ud83d\udcca Bracket response structure:",e.data),null!==(t=e.data)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.bracket?(N(e.data.data.bracket),console.log("\u2705 Bracket data loaded from public endpoint (data.bracket)")):null!==(r=e.data)&&void 0!==r&&null!==(s=r.data)&&void 0!==s&&s.bracket_data?(N(e.data.data.bracket_data),console.log("\u2705 Bracket data loaded from public endpoint (data.bracket_data)")):null!==(n=e.data)&&void 0!==n&&n.bracket_data?(N(e.data.bracket_data),console.log("\u2705 Bracket data loaded from public endpoint (bracket_data)")):null!==(l=e.data)&&void 0!==l&&l.bracket?(N(e.data.bracket),console.log("\u2705 Bracket data loaded from public endpoint (bracket)")):null!==(i=e.data)&&void 0!==i&&i.matches&&(N(e.data),console.log("\u2705 Bracket data loaded in simple format"))}catch(o){console.log("\ud83d\udcdd No bracket data available yet")}console.log("\u2705 Event data loaded with embedded teams and matches")}catch(o){console.error("\u274c Error fetching event data:",o),v(null),f([]),k([])}finally{T(!1)}},Z=async()=>{try{var e;const t=await H.get("/teams"),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[];L(a)}catch(t){console.error("\u274c Error fetching teams:",t)}},K=e=>{if(!e)return"TBD";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return e&&0!==e?new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e):"TBD"},Q=[{id:"overview",name:"Overview"},{id:"teams",name:"Teams (".concat(j.length,")")},{id:"matches",name:"Matches (".concat(y.length,")")},{id:"bracket",name:"Bracket"}];return C?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading event details..."})]})}):p?(0,u.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("button",{onClick:()=>g&&g("home"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Home"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("button",{onClick:()=>g&&g("events"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Events"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white",children:p.name})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"w-16 h-16 rounded-lg bg-gray-200 dark:bg-gray-700 overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:E(p),alt:p.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentNode.innerHTML='<div class="w-full h-full flex items-center justify-center text-xl font-bold text-gray-500 dark:text-gray-400">?</div>'}})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:p.name}),O&&(0,u.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"Live Updates"})]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(e=>{const t={upcoming:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200",ongoing:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200",completed:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200"};return(0,u.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(t[e]||t.upcoming),children:e.charAt(0).toUpperCase()+e.slice(1)})})(p.status),(0,u.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(null===(t=p.details)||void 0===t?void 0:t.region)||p.region," \u2022 ",(null===(a=p.details)||void 0===a?void 0:a.type)||p.type]})]})]})]}),(V()||q())&&(0,u.jsx)("button",{onClick:()=>g&&g("admin-event-edit",{id:p.id}),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Edit Event"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Prize Pool"}),(0,u.jsx)("div",{className:"font-bold text-xl text-green-600 dark:text-green-400",children:J((null===(r=p.details)||void 0===r?void 0:r.prize_pool)||p.prize_pool,null===(n=p.details)||void 0===n?void 0:n.currency)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Start Date"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:K((null===(l=p.schedule)||void 0===l?void 0:l.start_date)||p.start_date)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"End Date"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:K((null===(i=p.schedule)||void 0===i?void 0:i.end_date)||p.end_date)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Format"}),(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:(null===(o=p.details)||void 0===o?void 0:o.format)||p.format})]})]})]}),(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:Q.map((e=>(0,u.jsx)("button",{onClick:()=>S(e.id),className:"flex-1 px-4 py-3 text-sm font-medium transition-colors ".concat(_===e.id?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:e.name},e.id)))}),(0,u.jsxs)("div",{className:"p-6",children:["overview"===_&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3",children:"About"}),(0,u.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:p.description})]}),p.rules&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3",children:"Rules"}),(0,u.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:p.rules})]}),(null===(d=p.details)||void 0===d?void 0:d.prize_distribution)&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3",children:"Prize Distribution"}),(0,u.jsx)("div",{className:"space-y-2",children:Object.entries(p.details.prize_distribution).map((e=>{var t;let[a,r]=e;return(0,u.jsxs)("div",{className:"flex justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:a}),(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400",children:J(r,null===(t=p.details)||void 0===t?void 0:t.currency)})]},a)}))})]})]}),"teams"===_&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:["Participating Teams (",j.length,"/",(null===(c=p.participation)||void 0===c?void 0:c.max_teams)||p.max_teams,")"]}),(V()||q())&&(0,u.jsx)("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Add Team"})]}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map((e=>(0,u.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer",onClick:()=>g&&g("team-detail",{id:e.id}),children:[(0,u.jsx)(D,{team:e,size:"w-12 h-12"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("span",{children:R(e.country||e.region)}),(0,u.jsx)("span",{children:I(e.country||e.region)})]})]})]}),(V()||q())&&(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this team from the event?"))try{await H.delete("/admin/events/".concat(G,"/teams/").concat(e)),console.log("\u2705 Team removed successfully"),await Y()}catch(r){var t,a;console.error("\u274c Error removing team:",r);const e=(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||r.message||"Failed to remove team";alert(e)}})(e.id),className:"text-red-600 hover:text-red-700 transition-colors",title:"Remove team",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},e.id)))}),0===j.length&&(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No teams registered yet"})})]}),"matches"===_&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"Event Matches"}),y.length>0?(0,u.jsx)("div",{className:"space-y-4",children:y.map((e=>(0,u.jsx)(It,{match:e,navigateTo:g},e.id)))}):(0,u.jsx)("div",{className:"text-center py-8",children:(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No matches scheduled yet"})})]}),"bracket"===_&&(0,u.jsxs)("div",{children:[console.log("\ud83d\udd0d Bracket tab - Current bracket data:",w),V()||q()?(0,u.jsx)("div",{children:(0,u.jsx)(Js,{eventId:G})}):w&&!1!==w.public&&((null===(m=w.matches)||void 0===m?void 0:m.length)>0||w.upper_bracket||w.main_stage||(null===(x=w.rounds)||void 0===x?void 0:x.length)>0||Array.isArray(w.rounds)&&w.rounds.some((e=>{var t;return(null===(t=e.matches)||void 0===t?void 0:t.length)>0})))?(0,u.jsx)(Fs,{bracket:w,event:p,eventId:G,navigateTo:g,isAdmin:!1,onMatchUpdate:async(e,t)=>{try{console.log("\ud83d\udd04 Refreshing bracket data after score update..."),await Y(),console.log("\u2705 Event and bracket data refreshed")}catch(a){console.error("\u274c Error refreshing bracket:",a)}}},"bracket-".concat(G,"-").concat(Date.now())):(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfc6"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:w&&!1===w.public?"Bracket is Private":"Bracket not available yet"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:w&&!1===w.public?"The tournament organizers have not made the bracket public yet.":"The tournament bracket will be displayed here once the tournament starts."})]})]})]})]}),A&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add Team to Event"}),(0,u.jsxs)("select",{value:U,onChange:e=>z(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-4",children:[(0,u.jsx)("option",{value:"",children:"Select a team"}),P.filter((e=>!j.some((t=>t.id===e.id)))).map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (",e.region,")"]},e.id)))]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,u.jsx)("button",{onClick:()=>{M(!1),z("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{if(U)try{await H.post("/admin/events/".concat(G,"/teams"),{team_id:U}),console.log("\u2705 Team added successfully"),await Y(),M(!1),z("")}catch(a){var e,t;console.error("\u274c Error adding team:",a);const r=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||a.message||"Failed to add team";alert(r)}},disabled:!U,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Team"})]})]})})]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Not Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The event you're looking for doesn't exist or may have been removed."}),(0,u.jsx)("button",{onClick:()=>g&&g("events"),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"\u2190 Back to Events"})]})};const Xs=function(e){let{navigateTo:t}=e;const[a,r]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),[i,o]=(0,s.useState)("ongoing"),[d,c]=(0,s.useState)(""),[m,x]=(0,s.useState)("all"),[h,g]=(0,s.useState)("all"),[p,v]=(0,s.useState)("all"),{api:y,isAdmin:f,isModerator:j}=b();(0,s.useEffect)((()=>{k()}),[]);const k=async()=>{try{var e;l(!0),console.log("TournamentsPage: Fetching tournaments from API...");const t=await y.get("/events?sort=recent"),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[];console.log("Tournaments fetched:",a),r(a)}catch(t){console.error("Error fetching tournaments:",t),r([])}finally{l(!1)}},w=(()=>{let e=a;switch(i){case"upcoming":e=e.filter((e=>"upcoming"===e.status));break;case"ongoing":e=e.filter((e=>"ongoing"===e.status||"live"===e.status));break;case"completed":e=e.filter((e=>"completed"===e.status))}if("all"!==m&&(e=e.filter((e=>{var t;return((null===(t=e.details)||void 0===t?void 0:t.format)||e.format)===m}))),"all"!==h&&(e=e.filter((e=>{var t;return((null===(t=e.details)||void 0===t?void 0:t.region)||e.region)===h}))),"all"!==p)switch(p){case"under_10k":e=e.filter((e=>{var t;return((null===(t=e.details)||void 0===t?void 0:t.prize_pool)||e.prize_pool||0)<1e4}));break;case"10k_50k":e=e.filter((e=>{var t;const a=(null===(t=e.details)||void 0===t?void 0:t.prize_pool)||e.prize_pool||0;return a>=1e4&&a<5e4}));break;case"50k_100k":e=e.filter((e=>{var t;const a=(null===(t=e.details)||void 0===t?void 0:t.prize_pool)||e.prize_pool||0;return a>=5e4&&a<1e5}));break;case"over_100k":e=e.filter((e=>{var t;return((null===(t=e.details)||void 0===t?void 0:t.prize_pool)||e.prize_pool||0)>=1e5}))}return d&&(e=e.filter((e=>e.name.toLowerCase().includes(d.toLowerCase())||e.description&&e.description.toLowerCase().includes(d.toLowerCase())))),e})(),N=e=>{var a,r,s,n,l;let{tournament:i}=e;const o=e=>e&&0!==e?"string"===typeof e?e:"$".concat(e.toLocaleString()):null;return(0,u.jsxs)("div",{className:"liquipedia-tournament-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:()=>t&&t("tournament-detail",{id:i.id}),children:[(0,u.jsxs)("div",{className:"relative h-32 bg-gradient-to-r from-red-600 to-red-800 overflow-hidden",children:[(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),(0,u.jsxs)("div",{className:"relative z-10 p-4 h-full flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-white/20 flex-shrink-0",children:(0,u.jsx)("img",{src:E(i),alt:i.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentNode.innerHTML='<div class="w-full h-full flex items-center justify-center text-2xl font-bold text-white">\ud83c\udfc6</div>'}})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:i.name}),(0,u.jsxs)("div",{className:"text-red-100 text-sm",children:[(null===(a=i.details)||void 0===a?void 0:a.region)||i.region," \u2022 ",(()=>{var e,t;const a=new Date((null===(e=i.schedule)||void 0===e?void 0:e.start_date)||i.start_date),r=new Date((null===(t=i.schedule)||void 0===t?void 0:t.end_date)||i.end_date);return a.toDateString()===r.toDateString()?a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"".concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))})()]})]})]}),(0,u.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"live":case"ongoing":return"bg-green-600 text-white";case"upcoming":return"bg-blue-600 text-white";case"completed":return"bg-gray-600 text-white";default:return"bg-gray-400 text-white"}})(i.status)," ").concat("live"===i.status?"animate-pulse":""),children:["live"===i.status&&(0,u.jsx)("span",{className:"w-2 h-2 bg-white rounded-full mr-1 animate-pulse inline-block"}),i.status.toUpperCase()]})]})]}),(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o((null===(r=i.details)||void 0===r?void 0:r.prize_pool)||i.prize_pool)&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"Prize Pool"}),(0,u.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:o((null===(s=i.details)||void 0===s?void 0:s.prize_pool)||i.prize_pool)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"Format"}),(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:(d=(null===(n=i.details)||void 0===n?void 0:n.format)||i.format,{single_elimination:"Single Elimination",double_elimination:"Double Elimination",swiss:"Swiss System",round_robin:"Round Robin",group_stage:"Group Stage",gsl:"GSL Format",battle_royale:"Battle Royale"}[d]||d)})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"Teams"}),(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:(()=>{var e;const t=i.teams||i.participating_teams||i.event_teams||[],a=(null===(e=i.participation)||void 0===e?void 0:e.max_teams)||i.max_teams||0;return"".concat(t.length).concat(a?"/".concat(a):""," teams")})()})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"Region"}),(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:(null===(l=i.details)||void 0===l?void 0:l.region)||i.region})]})]}),i.description&&(0,u.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm line-clamp-2",children:i.description})})]})]});var d};return n?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading tournaments..."})]})}):(0,u.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Marvel Rivals Tournaments"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Complete tournament coverage with brackets, results, and live updates"})]}),(f()||j())&&(0,u.jsx)("button",{onClick:()=>t&&t("admin-event-create"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold",children:"Create Tournament"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.filter((e=>"ongoing"===e.status||"live"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live Tournaments"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.filter((e=>"upcoming"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Upcoming"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:a.filter((e=>"completed"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["$",a.reduce(((e,t)=>{var a;return e+((null===(a=t.details)||void 0===a?void 0:a.prize_pool)||t.prize_pool||0)}),0).toLocaleString()]}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Prize Pool"})]})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg mb-6",children:[(0,u.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("button",{onClick:()=>o("ongoing"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors ".concat("ongoing"===i?"text-green-600 dark:text-green-400 border-b-2 border-green-600 dark:border-green-400 bg-green-50 dark:bg-green-900/10":"text-gray-700 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[a.filter((e=>"ongoing"===e.status||"live"===e.status)).length>0&&(0,u.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,u.jsxs)("span",{children:["Live & Ongoing (",a.filter((e=>"ongoing"===e.status||"live"===e.status)).length,")"]})]})}),(0,u.jsxs)("button",{onClick:()=>o("upcoming"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors ".concat("upcoming"===i?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/10":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Upcoming (",a.filter((e=>"upcoming"===e.status)).length,")"]}),(0,u.jsxs)("button",{onClick:()=>o("completed"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors ".concat("completed"===i?"text-gray-600 dark:text-gray-400 border-b-2 border-gray-600 dark:border-gray-400 bg-gray-50 dark:bg-gray-900/10":"text-gray-700 dark:text-gray-300 hover:text-gray-600 dark:hover:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["Completed (",a.filter((e=>"completed"===e.status)).length,")"]}),(0,u.jsxs)("button",{onClick:()=>o("all"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors ".concat("all"===i?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:["All Tournaments (",a.length,")"]})]}),(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Tournaments"}),(0,u.jsx)("input",{type:"text",placeholder:"Tournament name...",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 pl-10 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),(0,u.jsx)("svg",{className:"absolute left-3 top-9 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tournament Format"}),(0,u.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Formats"}),(0,u.jsx)("option",{value:"single_elimination",children:"Single Elimination"}),(0,u.jsx)("option",{value:"double_elimination",children:"Double Elimination"}),(0,u.jsx)("option",{value:"swiss",children:"Swiss System"}),(0,u.jsx)("option",{value:"round_robin",children:"Round Robin"}),(0,u.jsx)("option",{value:"group_stage",children:"Group Stage"}),(0,u.jsx)("option",{value:"gsl",children:"GSL Format"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region"}),(0,u.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Regions"}),(0,u.jsx)("option",{value:"INTL",children:"International"}),(0,u.jsx)("option",{value:"NA",children:"North America"}),(0,u.jsx)("option",{value:"EU",children:"Europe"}),(0,u.jsx)("option",{value:"APAC",children:"Asia-Pacific"}),(0,u.jsx)("option",{value:"CN",children:"China"}),(0,u.jsx)("option",{value:"BR",children:"Brazil"}),(0,u.jsx)("option",{value:"LATAM",children:"LATAM"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prize Pool"}),(0,u.jsxs)("select",{value:p,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"Any Amount"}),(0,u.jsx)("option",{value:"under_10k",children:"Under $10,000"}),(0,u.jsx)("option",{value:"10k_50k",children:"$10,000 - $50,000"}),(0,u.jsx)("option",{value:"50k_100k",children:"$50,000 - $100,000"}),(0,u.jsx)("option",{value:"over_100k",children:"Over $100,000"})]})]})]})})]}),w.length>0?(0,u.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:w.map((e=>(0,u.jsx)(N,{tournament:e},e.id)))}):(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg py-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,u.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:["No ","all"===i?"":i," tournaments found"]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:d?"No tournaments matching your search criteria":"upcoming"===i?"No upcoming tournaments scheduled at the moment":"ongoing"===i?"No tournaments currently running":"completed"===i?"No completed tournaments to show":"No tournaments available"})]})]})};function $s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enableWebSocket:a=!0,enablePolling:r=!0,pollingInterval:n=3e4,reconnectAttempts:l=5,reconnectDelay:i=3e3,onMatchUpdate:o=null,onBracketUpdate:d=null,onTournamentUpdate:c=null,onError:m=null}=t,{api:u}=b(),[x,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[v,y]=(0,s.useState)([]),[f,j]=(0,s.useState)("disconnected"),k=(0,s.useRef)(null),w=(0,s.useRef)(null),N=(0,s.useRef)(0),_=(0,s.useRef)(null),S=(0,s.useRef)(!0);(0,s.useEffect)((()=>()=>{S.current=!1,C()}),[]),(0,s.useEffect)((()=>{if(e)return console.log("\ud83d\udd0c TournamentUpdates: Initializing for tournament",e),E(),()=>{C()}}),[e]);const C=()=>{console.log("\ud83e\uddf9 TournamentUpdates: Cleaning up connections"),k.current&&(k.current.close(),k.current=null),w.current&&(clearInterval(w.current),w.current=null),_.current&&(clearTimeout(_.current),_.current=null),h(!1),j("disconnected")},E=async()=>{try{a&&await T(),r&&A()}catch(e){console.error("\u274c TournamentUpdates: Failed to initialize connections:",e),P(e)}},T=async()=>{try{console.log("\ud83d\udd0c TournamentUpdates: Attempting WebSocket connection");"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUSHER_KEY:"your_pusher_key_here",REACT_APP_PUSHER_CLUSTER:"us2",REACT_APP_BACKEND_URL:"https://staging.mrvl.net",REACT_APP_ENVIRONMENT:"production"}.REACT_APP_WS_URL||"ws://localhost:8080","/tournaments/").concat(e);console.log("\u26a0\ufe0f TournamentUpdates: WebSocket not implemented, using polling"),j("polling-only")}catch(t){console.error("\u274c TournamentUpdates: WebSocket connection failed:",t),j("polling-fallback")}},A=()=>{console.log("\ud83d\udce1 TournamentUpdates: Starting polling with interval",n),w.current&&clearInterval(w.current),M(),w.current=setInterval((()=>{S.current&&M()}),n),h(!0),j("polling")},M=async()=>{try{var t;console.log("\ud83d\udd04 TournamentUpdates: Fetching latest data");const a=await u.get("/events/".concat(e,"?include=teams,matches,bracket&timestamp=").concat(Date.now())),r=(null===(t=a.data)||void 0===t?void 0:t.data)||a.data;if(!S.current)return;const s=(new Date).toISOString();if(!g||r.updated_at&&new Date(r.updated_at)>new Date(g)){console.log("\u2728 TournamentUpdates: New updates detected"),p(s);const e={type:"tournament-sync",timestamp:s,tournament:r,matches:r.matches||[],bracket:r.bracket,teams:r.teams||[]};if(y((t=>[...t.slice(-9),e])),c&&c(e),r.matches){const e=r.matches.filter((e=>"live"===e.status)),t=r.matches.filter((e=>"completed"===e.status&&e.updated_at&&new Date(e.updated_at)>new Date(Date.now()-3e5)));[...e,...t].forEach((e=>{o&&o({type:"match-update",match:e,timestamp:s})}))}r.bracket&&d&&d({type:"bracket-update",bracket:r.bracket,timestamp:s})}}catch(a){console.error("\u274c TournamentUpdates: Error fetching updates:",a),P(a)}},P=e=>{console.error("\u274c TournamentUpdates: Error occurred:",e),m&&m(e),N.current<l?(N.current++,console.log("\ud83d\udd04 TournamentUpdates: Attempting reconnection ".concat(N.current,"/").concat(l)),_.current=setTimeout((()=>{S.current&&E()}),i),j("reconnecting")):(console.error("\u274c TournamentUpdates: Max reconnection attempts reached"),j("failed"),h(!1))};return{isConnected:x,connectionStatus:f,lastUpdateTime:g,updates:v,refresh:()=>{console.log("\ud83d\udd04 TournamentUpdates: Manual refresh triggered"),M()},reconnect:()=>{console.log("\ud83d\udd04 TournamentUpdates: Manual reconnection triggered"),N.current=0,C(),E()}}}function en(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=new Date(e),r=new Date,s=r-a,n=Math.floor(s/6e4),l=Math.floor(s/36e5),i=Math.floor(s/864e5);if(t&&s<0){const e=Math.abs(n);return e<60?"in ".concat(e,"m"):e<1440?"in ".concat(Math.floor(e/60),"h"):a.toLocaleDateString()}return n<1?"Just now":n<60?"".concat(n,"m ago"):l<24?"".concat(l,"h ago"):i<7?"".concat(i,"d ago"):a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:a.getFullYear()!==r.getFullYear()?"numeric":void 0})}const tn=function(e){let{match:t,onClick:a,onTeamClick:r,isHovered:s=!1,isSelected:n=!1,showConnector:l=!1,compact:i=!1}=e;if(!t)return null;const o="completed"===t.status,d="live"===t.status,c=o&&t.team1_score>t.team2_score,m=o&&t.team2_score>t.team1_score,x=(e,t)=>{t.stopPropagation(),r&&e&&r(e)};return(0,u.jsxs)("div",{className:"\n        bracket-match relative bg-white dark:bg-gray-900 border rounded-md overflow-hidden \n        transition-all duration-150 cursor-pointer select-none\n        ".concat(d?"border-red-400 ring-2 ring-red-200 dark:ring-red-800":"border-gray-300 dark:border-gray-600","\n        ").concat(s?"border-blue-400 shadow-md transform scale-[1.02]":"","\n        ").concat(n?"ring-2 ring-blue-400 dark:ring-blue-500":"","\n        ").concat(i?"min-w-[220px]":"min-w-[280px]","\n        hover:shadow-sm hover:border-gray-400 dark:hover:border-gray-500\n      "),onClick:e=>{e.preventDefault(),a&&a(t)},children:[(d||t.match_number||t.bo)&&(0,u.jsxs)("div",{className:"flex items-center justify-between px-3 py-1.5 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[t.match_number&&(0,u.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:["Match ",t.match_number]}),t.bo&&(0,u.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["BO",t.bo]})]}),d&&(0,u.jsxs)("div",{className:"match-live-indicator",children:[(0,u.jsxs)("div",{className:"match-live-dot",children:[(0,u.jsx)("span",{className:"match-live-dot-ping"}),(0,u.jsx)("span",{className:"match-live-dot-core"})]}),(0,u.jsx)("span",{className:"text-xs font-bold text-red-600 dark:text-red-400",children:"LIVE"})]})]}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("div",{className:"\n            flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 \n            transition-colors duration-150\n            ".concat(c?"team-row-winner":m?"team-row-loser":"","\n            hover:bg-gray-50 dark:hover:bg-gray-800/50\n          "),onClick:e=>x(t.team1,e),children:[(0,u.jsx)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:t.team1?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(D,{team:t.team1,size:i?"w-6 h-6":"w-8 h-8",className:"flex-shrink-0"}),(0,u.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,u.jsx)("span",{className:"\n                    font-medium truncate block leading-tight\n                    ".concat(c?"text-gray-900 dark:text-white font-semibold":m?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white","\n                  "),children:t.team1.name}),t.team1.region&&!i&&(0,u.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500 block",children:t.team1.region})]}),t.team1.seed&&(0,u.jsxs)("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 px-1.5 py-0.5 rounded flex-shrink-0",children:["#",t.team1.seed]})]}):(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"".concat(i?"w-6 h-6":"w-8 h-8"," bg-gray-200 dark:bg-gray-700 rounded flex-shrink-0")}),(0,u.jsx)("span",{className:"text-gray-400 dark:text-gray-600 italic font-medium",children:"TBD"})]})}),(0,u.jsx)("div",{className:"ml-3 flex-shrink-0",children:(0,u.jsx)("span",{className:"\n              team-score text-lg font-bold min-w-[28px]\n              ".concat(c?"team-score-winner text-green-600 dark:text-green-400":"team-score-default","\n            "),children:void 0!==t.team1_score?t.team1_score:"\u2014"})})]}),(0,u.jsxs)("div",{className:"\n            flex items-center justify-between p-3 transition-colors duration-150\n            ".concat(m?"team-row-winner":c?"team-row-loser":"","\n            hover:bg-gray-50 dark:hover:bg-gray-800/50\n          "),onClick:e=>x(t.team2,e),children:[(0,u.jsx)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:t.team2?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(D,{team:t.team2,size:i?"w-6 h-6":"w-8 h-8",className:"flex-shrink-0"}),(0,u.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,u.jsx)("span",{className:"\n                    font-medium truncate block leading-tight\n                    ".concat(m?"text-gray-900 dark:text-white font-semibold":c?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white","\n                  "),children:t.team2.name}),t.team2.region&&!i&&(0,u.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500 block",children:t.team2.region})]}),t.team2.seed&&(0,u.jsxs)("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 px-1.5 py-0.5 rounded flex-shrink-0",children:["#",t.team2.seed]})]}):(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"".concat(i?"w-6 h-6":"w-8 h-8"," bg-gray-200 dark:bg-gray-700 rounded flex-shrink-0")}),(0,u.jsx)("span",{className:"text-gray-400 dark:text-gray-600 italic font-medium",children:"TBD"})]})}),(0,u.jsx)("div",{className:"ml-3 flex-shrink-0",children:(0,u.jsx)("span",{className:"\n              team-score text-lg font-bold min-w-[28px]\n              ".concat(m?"team-score-winner text-green-600 dark:text-green-400":"team-score-default","\n            "),children:void 0!==t.team2_score?t.team2_score:"\u2014"})})]})]}),(t.scheduled_at||t.completed_at||t.stream_url)&&(0,u.jsx)("div",{className:"px-3 py-1.5 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:o&&t.completed_at?en(t.completed_at):t.scheduled_at?en(t.scheduled_at,!0):""}),t.stream_url&&(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),(0,u.jsx)("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"Stream"})]})]})}),l&&(0,u.jsx)("div",{className:"absolute -right-8 top-1/2 transform -translate-y-1/2 w-8 h-0.5 bg-gray-300 dark:bg-gray-600"})]})};function an(e){let{title:t,color:a,isExpanded:r,onToggle:s,collapsible:n,children:l}=e;return(0,u.jsxs)("div",{className:"bracket-section",children:[(0,u.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3 ".concat(n?"cursor-pointer":""),onClick:n?s:void 0,children:[(0,u.jsx)("h3",{className:"text-lg font-bold tracking-wider uppercase border-b-2 pb-2 ".concat({blue:"border-blue-500 text-blue-700 dark:text-blue-300",red:"border-red-500 text-red-700 dark:text-red-300",yellow:"border-yellow-500 text-yellow-700 dark:text-yellow-300"}[a]),children:t}),n&&(0,u.jsx)("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,u.jsx)("svg",{className:"w-5 h-5 transform transition-transform ".concat(r?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),r&&(0,u.jsx)("div",{className:"transition-all duration-300",children:l})]})}function rn(e){var t;let{round:a,roundIndex:r,totalRounds:s,roundName:n,onMatchClick:l,onTeamClick:i,hoveredMatch:o,selectedMatch:d,compact:c,isLastRound:m}=e;return(0,u.jsxs)("div",{className:"relative flex-shrink-0",style:{minWidth:c?"240px":"300px"},children:[(0,u.jsxs)("div",{className:"text-center mb-8 sticky top-0 z-10 bg-white dark:bg-gray-900 py-2",children:[(0,u.jsx)("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 uppercase tracking-wider border-b-2 border-gray-300 dark:border-gray-600 pb-2 inline-block",children:n}),a.start_date&&(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(a.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,u.jsx)("div",{className:"space-y-8",children:(null===(t=a.matches)||void 0===t?void 0:t.map(((e,t)=>(0,u.jsx)("div",{className:"transition-all duration-300",children:(0,u.jsx)(tn,{match:e,onClick:l,onTeamClick:i,isHovered:(null===o||void 0===o?void 0:o.id)===e.id,isSelected:(null===d||void 0===d?void 0:d.id)===e.id,compact:c,showConnector:!m})},e.id||t))))||[]})]})}function sn(e){let{rounds:t}=e;return!t||t.length<2?null:(0,u.jsx)("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:1},preserveAspectRatio:"none",children:t.map(((e,a)=>{var r;if(a>=t.length-1)return null;const s=t[a+1];return(null===(r=e.matches)||void 0===r?void 0:r.map(((t,r)=>{var n;const l=Math.floor(r/2);if(!(null===(n=s.matches)||void 0===n?void 0:n[l]))return null;const i=316*(a+1)-64,o=120+160*r,d=i+64,c=120+160*l,m=i+32;return(0,u.jsxs)("g",{children:[(0,u.jsx)("line",{x1:i,y1:o,x2:m,y2:o,className:"bracket-connector"}),r%2===0&&r<e.matches.length-1&&(0,u.jsx)("line",{x1:m,y1:o,x2:m,y2:o+160,className:"bracket-connector"}),r%2===0&&(0,u.jsx)("line",{x1:m,y1:o+80,x2:d,y2:c,className:"bracket-connector"})]},"connector-".concat(a,"-").concat(r))})))||[]}))})}function nn(e,t){var a,r;if(null===e||void 0===e||!e.length)return{rounds:[],totalHeight:0};const s=e.map(((e,a)=>{var r;const s="lower"===t?120:100*Math.pow(2,a),n=s/2;return c(c({},e),{},{roundIndex:a,matchSpacing:s,baseOffset:n,matches:(null===(r=e.matches)||void 0===r?void 0:r.map(((e,t)=>c(c({},e),{},{yPosition:n+t*s}))))||[]})}));return{rounds:s,totalHeight:Math.max(400,160*(null===(a=e[0])||void 0===a||null===(r=a.matches)||void 0===r?void 0:r.length)||400)}}const ln=function(e){let{bracket:t,tournament:a,tournamentId:r,navigateTo:n,isAdmin:l=!1,onMatchUpdate:i,onMatchClick:o,onTeamClick:d,hoveredMatch:m,selectedMatch:x,onMatchHover:h,compact:g=!1,collapsible:p=!0}=e;const[v,y]=(0,s.useState)({upperBracket:!0,lowerBracket:!0,grandFinals:!0}),b=(null===t||void 0===t?void 0:t.upper_bracket)||[],f=(null===t||void 0===t?void 0:t.lower_bracket)||[],j=(null===t||void 0===t?void 0:t.grand_final)||(null===t||void 0===t?void 0:t.grand_finals),k=e=>{p&&y((t=>c(c({},t),{},{[e]:!t[e]})))},w=(0,s.useMemo)((()=>nn(b,"upper")),[b]),N=(0,s.useMemo)((()=>nn(f,"lower")),[f]),_=function(e,t,a){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){const a={0:"LB Round 1",1:"LB Round 2",2:"LB Quarterfinals",3:"LB Semifinals",4:"LB Finals"};return e.name||a[t]||"LB Round ".concat(t+1)}{const r={0:a>3?"Round of 16":"Quarterfinals",1:a>3?"Quarterfinals":"Semifinals",2:a>3?"Semifinals":"UB Finals",3:"UB Finals"};return e.name||r[t]||"UB Round ".concat(t+1)}};return(0,u.jsxs)("div",{className:"double-elimination-bracket w-full space-y-12",children:[b.length>0&&(0,u.jsx)(an,{title:"Upper Bracket",color:"blue",isExpanded:v.upperBracket,onToggle:()=>k("upperBracket"),collapsible:p,children:(0,u.jsxs)("div",{className:"relative overflow-x-auto",children:[(0,u.jsx)("div",{className:"flex space-x-16 pb-8",children:w.rounds.map(((e,t)=>(0,u.jsx)(rn,{round:e,roundIndex:t,totalRounds:w.rounds.length,roundName:_(e,t,w.rounds.length),onMatchClick:o,onTeamClick:d,hoveredMatch:m,selectedMatch:x,compact:g,isLastRound:t===w.rounds.length-1},"upper-".concat(t))))}),(0,u.jsx)(sn,{rounds:w.rounds})]})}),f.length>0&&(0,u.jsx)(an,{title:"Lower Bracket",color:"red",isExpanded:v.lowerBracket,onToggle:()=>k("lowerBracket"),collapsible:p,children:(0,u.jsxs)("div",{className:"relative overflow-x-auto",children:[(0,u.jsx)("div",{className:"flex space-x-16 pb-8",children:N.rounds.map(((e,t)=>(0,u.jsx)(rn,{round:e,roundIndex:t,totalRounds:N.rounds.length,roundName:_(e,t,N.rounds.length,!0),onMatchClick:o,onTeamClick:d,hoveredMatch:m,selectedMatch:x,compact:g,isLastRound:t===N.rounds.length-1},"lower-".concat(t))))}),(0,u.jsx)(sn,{rounds:N.rounds})]})}),j&&(0,u.jsx)(an,{title:"Grand Finals",color:"yellow",isExpanded:v.grandFinals,onToggle:()=>k("grandFinals"),collapsible:p,children:(0,u.jsx)("div",{className:"flex justify-center py-8",children:(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(tn,{match:j,onClick:o,onTeamClick:d,isHovered:(null===m||void 0===m?void 0:m.id)===j.id,isSelected:(null===x||void 0===x?void 0:x.id)===j.id,compact:g}),j.reset_match&&(0,u.jsxs)("div",{className:"mt-6",children:[(0,u.jsx)("div",{className:"text-center mb-4",children:(0,u.jsx)("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Bracket Reset"})}),(0,u.jsx)(tn,{match:j.reset_match,onClick:o,onTeamClick:d,isHovered:(null===m||void 0===m?void 0:m.id)===j.reset_match.id,isSelected:(null===x||void 0===x?void 0:x.id)===j.reset_match.id,compact:g})]})]})})})]})};function on(e){let{standings:t,onTeamClick:a,compact:r=!1}=e;return(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rank"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Team"}),(0,u.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Record"}),(0,u.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pts"}),(0,u.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Diff"}),!r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Buchholz"}),(0,u.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})]})}),(0,u.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(((e,t)=>{const s="qualified"===e.status||e.wins>=3&&e.losses<3,n="eliminated"===e.status||e.losses>=3;return(0,u.jsxs)("tr",{className:"\n                  hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer\n                  ".concat(s?"bg-green-50 dark:bg-green-900/20":"","\n                  ").concat(n?"bg-red-50 dark:bg-red-900/20 opacity-75":"","\n                "),onClick:()=>null===a||void 0===a?void 0:a(e),children:[(0,u.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsxs)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["#",t+1]}),s&&(0,u.jsx)("span",{className:"ml-2 text-green-500",title:"Qualified",children:"\u2713"}),n&&(0,u.jsx)("span",{className:"ml-2 text-red-500",title:"Eliminated",children:"\u2717"})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)(D,{team:{logo:e.team_logo},size:"w-8 h-8",className:"flex-shrink-0"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.team_name}),e.team_region&&!r&&(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.team_region})]})]})}),(0,u.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,u.jsxs)("span",{className:"text-sm font-bold",children:[(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400",children:e.wins||0}),(0,u.jsx)("span",{className:"mx-1 text-gray-500",children:"-"}),(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400",children:e.losses||0})]})}),(0,u.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm font-bold text-gray-900 dark:text-white",children:e.points||3*e.wins}),(0,u.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300",children:e.round_differential||e.map_differential||0}),!r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300",children:e.buchholz||"-"}),(0,u.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:[s&&(0,u.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Qualified"}),n&&(0,u.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Eliminated"}),!s&&!n&&(0,u.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Active"})]})]})]},e.team_id||t)}))})]})})}function dn(e){let{roundNum:t,matches:a,onMatchClick:r,onTeamClick:s,hoveredMatch:n,selectedMatch:l,compact:i,isCurrentRound:o,hideTitle:d=!1}=e;return null!==a&&void 0!==a&&a.length?(0,u.jsxs)("div",{className:"swiss-round",children:[!d&&(0,u.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsxs)("h4",{className:"\n              text-sm font-bold tracking-wider uppercase border-b-2 pb-2 \n              ".concat(o?"text-blue-700 dark:text-blue-300 border-blue-500":"text-gray-700 dark:text-gray-300 border-gray-400","\n            "),children:["Round ",t]}),o&&(0,u.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Live"})]})}),(0,u.jsx)("div",{className:"\n        grid gap-6\n        ".concat(i?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3","\n      "),children:a.map(((e,t)=>(0,u.jsx)("div",{className:"transition-all duration-300",children:(0,u.jsx)(tn,{match:e,onClick:r,onTeamClick:s,isHovered:(null===n||void 0===n?void 0:n.id)===e.id,isSelected:(null===l||void 0===l?void 0:l.id)===e.id,compact:i})},e.id||t)))})]}):null}const cn=function(e){let{bracket:t,tournament:a,tournamentId:r,navigateTo:n,isAdmin:l=!1,onMatchUpdate:i,onMatchClick:o,onTeamClick:d,hoveredMatch:c,selectedMatch:m,compact:x=!1,showStandings:h=!0}=e;const[g,p]=(0,s.useState)(null),v=(null===t||void 0===t?void 0:t.rounds)||{},y=(null===t||void 0===t?void 0:t.standings)||[],b=(null===t||void 0===t?void 0:t.current_round)||Math.max(...Object.keys(v).map(Number),0),f=Object.entries(v).sort(((e,t)=>{let[a]=e,[r]=t;return Number(a)-Number(r)})).map((e=>{let[t,a]=e;return{roundNum:Number(t),matches:a}}));return(0,u.jsxs)("div",{className:"swiss-bracket w-full space-y-8",children:[h&&y.length>0&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,u.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Swiss System Standings"}),(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current Round: ",b]})]})}),(0,u.jsx)(on,{standings:y,onTeamClick:d,compact:x})]}),f.length>0&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Swiss Rounds"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,u.jsx)("button",{onClick:()=>p(null),className:"px-3 py-1.5 text-sm rounded-md transition-colors ".concat(null===g?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:"All Rounds"}),f.map((e=>{let{roundNum:t}=e;return(0,u.jsxs)("button",{onClick:()=>p(t),className:"px-3 py-1.5 text-sm rounded-md transition-colors ".concat(g===t?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"," ").concat(t===b?"ring-2 ring-blue-400":""),children:["Round ",t,t===b&&(0,u.jsx)("span",{className:"ml-1 text-xs bg-green-500 text-white px-1 rounded",children:"Live"})]},t)}))]})]}),(0,u.jsx)("div",{className:"space-y-8",children:f.filter((e=>{let{roundNum:t}=e;return null===g||g===t})).map((e=>{let{roundNum:t,matches:a}=e;return(0,u.jsx)(dn,{roundNum:t,matches:a,onMatchClick:o,onTeamClick:d,hoveredMatch:c,selectedMatch:m,compact:x,isCurrentRound:t===b,hideTitle:g===t},t)}))})]})]})};function mn(e){let{viewMode:t,onViewModeChange:a}=e;return(0,u.jsx)("div",{className:"flex bg-gray-100 dark:bg-gray-700 rounded-md p-1",children:[{key:"standings",label:"Standings"},{key:"matches",label:"Matches"},{key:"matrix",label:"H2H Matrix"}].map((e=>{let{key:r,label:s}=e;return(0,u.jsx)("button",{onClick:()=>a(r),className:"px-3 py-1 text-sm rounded transition-colors ".concat(t===r?"bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:s},r)}))})}function un(e){let{groupName:t,standings:a,matches:r,viewMode:s,onMatchClick:n,onTeamClick:l,hoveredMatch:i,selectedMatch:o,compact:d,hideTitle:c=!1}=e;return(0,u.jsxs)("div",{className:"group-section",children:[!c&&(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("h4",{className:"text-md font-bold text-gray-900 dark:text-white border-b-2 border-blue-500 pb-2 inline-block",children:["Group ",t]})}),"standings"===s&&(0,u.jsx)(xn,{standings:a,onTeamClick:l,compact:d,isGroupStage:!0}),"matches"===s&&(0,u.jsx)(hn,{matches:r,onMatchClick:n,onTeamClick:l,hoveredMatch:i,selectedMatch:o,compact:d}),"matrix"===s&&(0,u.jsx)(gn,{standings:a,matches:r,onMatchClick:n,onTeamClick:l,compact:d})]})}function xn(e){let{standings:t,onTeamClick:a,compact:r=!1,isGroupStage:s=!1,showAdvancement:n=!1}=e;return null!==t&&void 0!==t&&t.length?(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pos"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Team"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"P"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"W"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"L"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"+/-"}),(0,u.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pts"}),!r&&(0,u.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Form"})]})}),(0,u.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(((e,t)=>{const l=s&&t<2,i=n&&"qualified"===e.status;return(0,u.jsxs)("tr",{className:"\n                  hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer\n                  ".concat(l||i?"bg-green-50 dark:bg-green-900/20":"","\n                "),onClick:()=>null===a||void 0===a?void 0:a(e),children:[(0,u.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:t+1}),(l||i)&&(0,u.jsx)("span",{className:"ml-2 text-green-500 text-xs",title:"Advances",children:"\u2713"})]})}),(0,u.jsx)("td",{className:"px-6 py-3 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)(D,{team:{logo:e.team_logo},size:"w-6 h-6",className:"flex-shrink-0"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.team_name}),e.team_region&&!r&&(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.team_region})]})]})}),(0,u.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300",children:e.played||e.wins+e.losses}),(0,u.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-center text-sm font-bold text-green-600 dark:text-green-400",children:e.wins||0}),(0,u.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-center text-sm font-bold text-red-600 dark:text-red-400",children:e.losses||0}),(0,u.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-center text-sm text-gray-700 dark:text-gray-300",children:e.round_differential||e.map_differential||0}),(0,u.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-center text-sm font-bold text-gray-900 dark:text-white",children:e.points||3*e.wins}),!r&&(0,u.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-center",children:(0,u.jsx)("div",{className:"flex items-center justify-center space-x-1",children:(e.recent_form||"WWLWL").split("").slice(-5).map(((e,t)=>(0,u.jsx)("span",{className:"w-4 h-4 text-xs font-bold rounded-full flex items-center justify-center ".concat("W"===e?"bg-green-500 text-white":"bg-red-500 text-white"),children:e},t)))})})]},e.team_id||t)}))})]})}):(0,u.jsx)("div",{className:"p-6 text-gray-500",children:"No standings available"})}function hn(e){let{matches:t,onMatchClick:a,onTeamClick:r,hoveredMatch:s,selectedMatch:n,compact:l}=e;return null!==t&&void 0!==t&&t.length?(0,u.jsx)("div",{className:"\n      grid gap-4\n      ".concat(l?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1 md:grid-cols-2","\n    "),children:t.map(((e,t)=>(0,u.jsx)(tn,{match:e,onClick:a,onTeamClick:r,isHovered:(null===s||void 0===s?void 0:s.id)===e.id,isSelected:(null===n||void 0===n?void 0:n.id)===e.id,compact:l},e.id||t)))}):(0,u.jsx)("div",{className:"text-gray-500",children:"No matches available"})}function gn(e){let{standings:t,matches:a,onMatchClick:r,onTeamClick:s,compact:n}=e;if(null===t||void 0===t||!t.length)return(0,u.jsx)("div",{className:"text-gray-500",children:"No data available"});const l={};return t.forEach((e=>{l[e.team_id]={},t.forEach((t=>{e.team_id!==t.team_id&&(l[e.team_id][t.team_id]={wins:0,losses:0,matches:[]})}))})),null===a||void 0===a||a.forEach((e=>{if(e.team1_id&&e.team2_id&&"completed"===e.status){const t=e.team1_score>e.team2_score?e.team1_id:e.team2_id,a=t===e.team1_id?e.team2_id:e.team1_id;l[t]&&l[t][a]&&(l[t][a].wins++,l[t][a].matches.push(e)),l[a]&&l[a][t]&&(l[a][t].losses++,l[a][t].matches.push(e))}})),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full border-collapse",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800"}),t.map(((e,t)=>(0,u.jsx)("th",{className:"p-2 border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-center min-w-[60px]",children:(0,u.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,u.jsx)(D,{team:{logo:e.team_logo},size:"w-6 h-6"}),!n&&(0,u.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate max-w-[50px]",children:e.team_name})]})},e.team_id||t)))]})}),(0,u.jsx)("tbody",{children:t.map(((e,a)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"p-2 border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 font-medium",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)(D,{team:{logo:e.team_logo},size:"w-6 h-6"}),(0,u.jsx)("span",{className:"text-sm truncate",children:e.team_name})]})}),t.map(((t,s)=>{var n;if(a===s)return(0,u.jsx)("td",{className:"p-2 border border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-center",children:(0,u.jsx)("span",{className:"text-gray-400",children:"\u2014"})},t.team_id||s);const i=null===(n=l[e.team_id])||void 0===n?void 0:n[t.team_id],o=i&&(i.wins>0||i.losses>0);return(0,u.jsx)("td",{className:"\n                      p-2 border border-gray-300 dark:border-gray-600 text-center text-sm cursor-pointer\n                      hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\n                      ".concat(o?"":"bg-gray-50 dark:bg-gray-800","\n                    "),onClick:()=>{(null===i||void 0===i?void 0:i.matches.length)>0&&(null===r||void 0===r||r(i.matches[0]))},children:o?(0,u.jsxs)("span",{className:"font-bold ".concat(i.wins>i.losses?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[i.wins,"-",i.losses]}):(0,u.jsx)("span",{className:"text-gray-400",children:"\u2014"})},t.team_id||s)}))]},e.team_id||a)))})]})})}const pn=function(e){var t;let{bracket:a,tournament:r,tournamentId:n,navigateTo:l,isAdmin:i=!1,onMatchUpdate:o,onMatchClick:d,onTeamClick:m,hoveredMatch:x,selectedMatch:h,compact:g=!1}=e;const[p,v]=(0,s.useState)(null),[y,b]=(0,s.useState)("standings"),f=(null===a||void 0===a?void 0:a.groups)||{},j=(null===a||void 0===a?void 0:a.standings)||[],k=Object.entries(f).sort(((e,t)=>{let[a]=e,[r]=t;return a.localeCompare(r)})).map((e=>{let[t,a]=e;return c({groupName:t},a)})),w=!Object.keys(f).length&&(j.length||(null===a||void 0===a||null===(t=a.matches)||void 0===t?void 0:t.length));return(0,u.jsxs)("div",{className:"round-robin-bracket w-full space-y-8",children:[j.length>0&&k.length>1&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Overall Standings"})}),(0,u.jsx)(xn,{standings:j,onTeamClick:m,compact:g,showAdvancement:!0})]}),w&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Round Robin"}),(0,u.jsx)(mn,{viewMode:y,onViewModeChange:b})]})}),"standings"===y&&(0,u.jsx)(xn,{standings:j,onTeamClick:m,compact:g}),"matches"===y&&(null===a||void 0===a?void 0:a.matches)&&(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)(hn,{matches:a.matches,onMatchClick:d,onTeamClick:m,hoveredMatch:x,selectedMatch:h,compact:g})}),"matrix"===y&&(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)(gn,{standings:j,matches:(null===a||void 0===a?void 0:a.matches)||[],onMatchClick:d,onTeamClick:m,compact:g})})]}),k.length>0&&(0,u.jsx)("div",{className:"space-y-8",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Group Stage"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)(mn,{viewMode:y,onViewModeChange:b}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,u.jsx)("button",{onClick:()=>v(null),className:"px-3 py-1.5 text-sm rounded-md transition-colors ".concat(null===p?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:"All Groups"}),k.map((e=>{let{groupName:t}=e;return(0,u.jsxs)("button",{onClick:()=>v(t),className:"px-3 py-1.5 text-sm rounded-md transition-colors ".concat(p===t?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:["Group ",t]},t)}))]})]})]}),(0,u.jsx)("div",{className:"".concat(p?"space-y-6":"grid grid-cols-1 lg:grid-cols-2 gap-8"),children:k.filter((e=>{let{groupName:t}=e;return null===p||p===t})).map((e=>{let{groupName:t,standings:a=[],matches:r=[]}=e;return(0,u.jsx)(un,{groupName:t,standings:a,matches:r,viewMode:y,onMatchClick:d,onTeamClick:m,hoveredMatch:x,selectedMatch:h,compact:g,hideTitle:p===t},t)}))})]})})]})};const vn=function(e){var t,a,r,n,l,i,o,d,c,m,x,h;let{params:g,navigateTo:p}=e;const[v,y]=(0,s.useState)(null),[f,j]=(0,s.useState)([]),[k,w]=(0,s.useState)([]),[N,_]=(0,s.useState)(null),[S,C]=(0,s.useState)("overview"),[T,A]=(0,s.useState)(!0),[M,P]=(0,s.useState)(!1),[L,U]=(0,s.useState)([]),[z,O]=(0,s.useState)(""),[F,B]=(0,s.useState)(!1),[W,H]=(0,s.useState)(null),[V,q]=(0,s.useState)(null),{api:G,isAdmin:Y,isModerator:Z}=b(),K=null===g||void 0===g?void 0:g.id,{isConnected:J,connectionStatus:Q,refresh:X}=$s(K,{onTournamentUpdate:e=>{console.log("\ud83d\udd04 Tournament update received:",e),e.tournament&&(y(e.tournament),w(e.teams||[]),j(e.matches||[]),_(e.bracket),H(e.timestamp))},onMatchUpdate:e=>{console.log("\u26a1 Match update received:",e),j((t=>t.map((t=>t.id===e.match.id?e.match:t))))},onBracketUpdate:e=>{console.log("\ud83d\udd04 Bracket update received:",e),_(e.bracket)},onError:e=>{console.error("\u274c Real-time update error:",e),q(e.message)}});console.log("\ud83d\udd0d TournamentDetailPage - Received tournament ID:",K),(0,s.useEffect)((()=>{K&&($(),ee())}),[K]),(0,s.useEffect)((()=>{B(J)}),[J]);const $=async()=>{try{var e;A(!0),console.log("\ud83d\udd04 TournamentDetailPage: Fetching tournament data for ID:",K);const t=await G.get("/events/".concat(K)),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||t;console.log("\u2705 Tournament data received:",a),y(a);let r=[];a.teams&&Array.isArray(a.teams)?r=a.teams:a.participating_teams&&Array.isArray(a.participating_teams)?r=a.participating_teams:a.event_teams&&Array.isArray(a.event_teams)&&(r=a.event_teams),console.log("\u2705 Teams data found:",r.length,"teams"),w(r);let s=[];a.matches&&Array.isArray(a.matches)?s=a.matches:a.event_matches&&Array.isArray(a.event_matches)&&(s=a.event_matches),console.log("\u2705 Matches data found:",s.length,"matches"),j(s),a.bracket?(console.log("\u2705 Bracket found in response:",a.bracket),_(a.bracket)):a.bracket_data?(console.log("\u2705 Bracket found in bracket_data:",a.bracket_data),_(a.bracket_data)):console.log("\u26a0\ufe0f No bracket data found in response"),console.log("\u2705 Tournament data loaded with embedded teams and matches")}catch(V){console.error("\u274c Error fetching tournament data:",V),y(null),j([]),w([])}finally{A(!1)}},ee=async()=>{try{var e;const t=await G.get("/teams"),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[];U(a)}catch(V){console.error("\u274c Error fetching teams:",V)}},te=async()=>{try{console.log("\ud83c\udfc6 Generating bracket for tournament:",K);await G.post("/admin/events/".concat(K,"/generate-bracket"));console.log("\u2705 Bracket generated successfully"),await $()}catch(V){var e,t;console.error("\u274c Error generating bracket:",V),alert("Failed to generate bracket: "+((null===(e=V.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||V.message))}},ae=async(e,t)=>{try{await G.put("/admin/events/".concat(K,"/matches/").concat(e,"/score"),t),console.log("\u2705 Match updated successfully"),await $()}catch(V){var a,r;console.error("\u274c Error updating match:",V),alert("Failed to update match: "+((null===(a=V.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||V.message))}},re=e=>{if(!e)return"TBD";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return e&&0!==e?new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e):"TBD"},ne=e=>({single_elimination:"Single Elimination",double_elimination:"Double Elimination",swiss:"Swiss System",round_robin:"Round Robin",group_stage:"Group Stage",gsl:"GSL Format",battle_royale:"Battle Royale"}[e]||e),le=[{id:"overview",name:"Overview"},{id:"teams",name:"Teams (".concat(k.length,")")},{id:"matches",name:"Matches (".concat(f.length,")")},{id:"bracket",name:"Bracket"},{id:"stats",name:"Statistics"}];return T?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading tournament details..."})]})}):v?(0,u.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("button",{onClick:()=>p&&p("home"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Home"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("button",{onClick:()=>p&&p("tournaments"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Tournaments"}),(0,u.jsx)("span",{children:"\u203a"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white",children:v.name})]}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("div",{className:"h-48 bg-gradient-to-r from-red-600 to-red-800 rounded-lg overflow-hidden",children:[(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),(0,u.jsxs)("div",{className:"relative z-10 h-full flex items-end p-8",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,u.jsx)("div",{className:"w-24 h-24 rounded-lg bg-white/20 overflow-hidden flex-shrink-0",children:(0,u.jsx)("img",{src:E(v),alt:v.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentNode.innerHTML='<div class="w-full h-full flex items-center justify-center text-3xl font-bold text-white">\ud83c\udfc6</div>'}})}),(0,u.jsxs)("div",{className:"text-white",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,u.jsx)("h1",{className:"text-4xl font-bold",children:v.name}),F&&(0,u.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-green-500 px-2 py-1 rounded",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,u.jsx)("span",{children:"Live Updates"})]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-red-100",children:[(e=>{const t={upcoming:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200",ongoing:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200",live:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200 animate-pulse",completed:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200"};return(0,u.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(t[e]||t.upcoming),children:["live"===e&&(0,u.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1 animate-pulse inline-block"}),e.charAt(0).toUpperCase()+e.slice(1)]})})(v.status),(0,u.jsx)("span",{children:(null===(t=v.details)||void 0===t?void 0:t.region)||v.region}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:ne((null===(a=v.details)||void 0===a?void 0:a.format)||v.format)})]})]})]}),(Y()||Z())&&(0,u.jsx)("div",{className:"absolute top-4 right-4",children:(0,u.jsx)("button",{onClick:()=>p&&p("admin-event-edit",{id:v.id}),className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded hover:bg-white/30 transition-colors",children:"Edit Tournament"})})]})]}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 mt-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:se((null===(r=v.details)||void 0===r?void 0:r.prize_pool)||v.prize_pool,null===(n=v.details)||void 0===n?void 0:n.currency)}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Prize Pool"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:k.length}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Teams"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:f.length}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Matches"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:re((null===(l=v.schedule)||void 0===l?void 0:l.start_date)||v.start_date)}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Start Date"})]})]})})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,u.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:le.map((e=>(0,u.jsx)("button",{onClick:()=>C(e.id),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors ".concat(S===e.id?"text-red-600 dark:text-red-400 border-b-2 border-red-600 dark:border-red-400 bg-red-50 dark:bg-red-900/10":"text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:e.name},e.id)))}),(0,u.jsxs)("div",{className:"p-6",children:["overview"===S&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3",children:"About the Tournament"}),(0,u.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:v.description||"No description available."})]}),v.rules&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3",children:"Rules & Format"}),(0,u.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:v.rules})]}),(null===(i=v.details)||void 0===i?void 0:i.prize_distribution)&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3",children:"Prize Distribution"}),(0,u.jsx)("div",{className:"space-y-2",children:Object.entries(v.details.prize_distribution).map((e=>{var t;let[a,r]=e;return(0,u.jsxs)("div",{className:"flex justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:a}),(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400",children:se(r,null===(t=v.details)||void 0===t?void 0:t.currency)})]},a)}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-3",children:"Schedule"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mb-1",children:"Start Date"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:re((null===(o=v.schedule)||void 0===o?void 0:o.start_date)||v.start_date)})]}),(0,u.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white mb-1",children:"End Date"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:re((null===(d=v.schedule)||void 0===d?void 0:d.end_date)||v.end_date)})]})]})]})]}),"teams"===S&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:["Participating Teams (",k.length,"/",(null===(c=v.participation)||void 0===c?void 0:c.max_teams)||v.max_teams||"\u221e",")"]}),(Y()||Z())&&(0,u.jsx)("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Add Team"})]}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map((e=>(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer flex-1",onClick:()=>p&&p("team-detail",{id:e.id}),children:[(0,u.jsx)(D,{team:e,size:"w-12 h-12"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-500",children:[(0,u.jsx)("span",{children:R(e.country||e.region)}),(0,u.jsx)("span",{children:I(e.country||e.region)})]})]})]}),(Y()||Z())&&(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this team from the tournament?"))try{await G.delete("/admin/events/".concat(K,"/teams/").concat(e)),console.log("\u2705 Team removed successfully"),await $()}catch(V){var t,a;console.error("\u274c Error removing team:",V);const r=(null===(t=V.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||V.message||"Failed to remove team";alert(r)}})(e.id),className:"text-red-600 hover:text-red-700 transition-colors p-1",title:"Remove team",children:(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},e.id)))}),0===k.length&&(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc65"}),(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No teams registered yet"})]})]}),"matches"===S&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-6",children:"Tournament Matches"}),f.length>0?(0,u.jsx)("div",{className:"space-y-4",children:f.map((e=>(0,u.jsx)(It,{match:e,navigateTo:p},e.id)))}):(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\u2694\ufe0f"}),(0,u.jsx)("div",{className:"text-gray-500 dark:text-gray-500",children:"No matches scheduled yet"})]})]}),"bracket"===S&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-2",children:"Tournament Bracket"}),(0,u.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[ne((null===(m=v.details)||void 0===m?void 0:m.format)||v.format)," format"]})]}),(()=>{var e;const t=(null===v||void 0===v||null===(e=v.details)||void 0===e?void 0:e.format)||(null===v||void 0===v?void 0:v.format);if(!N)return(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Bracket not generated yet"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:k.length<2?"Need at least 2 teams to generate bracket (currently ".concat(k.length,")"):"Click below to generate the tournament bracket"}),(Y()||Z())&&k.length>=2&&(0,u.jsx)("button",{onClick:te,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Generate Bracket"})]});switch(t){case"double_elimination":return(0,u.jsx)(ln,{bracket:N,tournament:v,tournamentId:K,navigateTo:p,isAdmin:Y()||Z(),onMatchUpdate:ae});case"swiss":return(0,u.jsx)(cn,{bracket:N,tournament:v,tournamentId:K,navigateTo:p,isAdmin:Y()||Z(),onMatchUpdate:ae});case"round_robin":return(0,u.jsx)(pn,{bracket:N,tournament:v,tournamentId:K,navigateTo:p,isAdmin:Y()||Z(),onMatchUpdate:ae});default:return(0,u.jsx)(Fs,{bracket:N,event:v,eventId:K,navigateTo:p,isAdmin:Y()||Z(),onMatchUpdate:ae})}})()]}),"stats"===S&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-6",children:"Tournament Statistics"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"General"}),(0,u.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Teams:"}),(0,u.jsx)("span",{className:"font-medium",children:k.length})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Matches:"}),(0,u.jsx)("span",{className:"font-medium",children:f.length})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Completed:"}),(0,u.jsx)("span",{className:"font-medium",children:f.filter((e=>"completed"===e.status)).length})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Ongoing:"}),(0,u.jsx)("span",{className:"font-medium",children:f.filter((e=>"live"===e.status||"ongoing"===e.status)).length})]})]})]}),(0,u.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Prize Pool"}),(0,u.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Prize:"}),(0,u.jsx)("span",{className:"font-medium text-green-600",children:se((null===(x=v.details)||void 0===x?void 0:x.prize_pool)||v.prize_pool)})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Currency:"}),(0,u.jsx)("span",{className:"font-medium",children:(null===(h=v.details)||void 0===h?void 0:h.currency)||"USD"})]})]})]}),(0,u.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Regions"}),(0,u.jsx)("div",{className:"space-y-2 text-sm",children:k.reduce(((e,t)=>{const a=t.country||t.region||"Unknown";return e[a]=(e[a]||0)+1,e}),{})&&Object.entries(k.reduce(((e,t)=>{const a=t.country||t.region||"Unknown";return e[a]=(e[a]||0)+1,e}),{})).map((e=>{let[t,a]=e;return(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsxs)("span",{className:"text-gray-600 dark:text-gray-400 flex items-center",children:[R(t)," ",I(t)]}),(0,u.jsx)("span",{className:"font-medium",children:a})]},t)}))})]})]})]})]})]}),M&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add Team to Tournament"}),(0,u.jsxs)("select",{value:z,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-4",children:[(0,u.jsx)("option",{value:"",children:"Select a team"}),L.filter((e=>!k.some((t=>t.id===e.id)))).map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (",e.region,")"]},e.id)))]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,u.jsx)("button",{onClick:()=>{P(!1),O("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{if(z)try{await G.post("/admin/events/".concat(K,"/teams"),{team_id:z}),console.log("\u2705 Team added successfully"),await $(),P(!1),O("")}catch(V){var e,t;console.error("\u274c Error adding team:",V);const r=(null===(e=V.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||V.message||"Failed to add team";alert(r)}},disabled:!z,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Team"})]})]})})]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Tournament Not Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The tournament you're looking for doesn't exist or may have been removed."}),(0,u.jsx)("button",{onClick:()=>p&&p("tournaments"),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"\u2190 Back to Tournaments"})]})},yn=se("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),bn=e=>{let{categories:t=[],selectedCategory:a,onCategoryChange:r,searchQuery:n,onSearchChange:l,sortBy:i,onSortChange:o,viewMode:d,onViewModeChange:c,onCreateThread:m,showSearchSuggestions:x=!1,searchSuggestions:h=[],onSearchSuggestionSelect:g,isAuthenticated:p=!1}=e;const[v,y]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)(0),[C,E]=(0,s.useState)(!1),[T,A]=(0,s.useState)(0),[M,P]=(0,s.useState)(!0),R=(0,s.useRef)(null),I=(0,s.useRef)(null),D=(0,s.useRef)(0);(0,s.useEffect)((()=>{let e=!1;const t=()=>{const t=window.scrollY,a=t>T;Math.abs(t-T)>10&&(a&&t>100?P(!1):a||P(!0)),A(t),e=!1},a=()=>{e||(requestAnimationFrame(t),e=!0)};return window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)}),[T]);const L=(0,s.useCallback)((e=>{0===window.scrollY&&(D.current=e.touches[0].clientY)}),[]),U=(0,s.useCallback)((e=>{if(D.current&&0===window.scrollY){const t=e.touches[0].clientY,a=Math.max(0,Math.min(120,t-D.current));S(a)}}),[]),z=(0,s.useCallback)((async()=>{if(_>80){E(!0);try{await new Promise((e=>setTimeout(e,1500)))}finally{E(!1)}}S(0),D.current=0}),[_]),O=(0,s.useCallback)((e=>{l(e),k(e.length>0&&h.length>0)}),[l,h.length]),F=(0,s.useCallback)((e=>{navigator.vibrate&&navigator.vibrate(10),r(e)}),[r]),B=[{value:"latest",label:"Latest",icon:ue},{value:"popular",label:"Popular",icon:Kt},{value:"hot",label:"Hot",icon:"\ud83d\udd25"}];return(0,u.jsxs)(u.Fragment,{children:[_>0&&(0,u.jsx)("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-200",style:{transform:"translateX(-50%) translateY(".concat(Math.max(0,_-80),"px)")},children:(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-full p-3 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"w-5 h-5 text-gray-600 dark:text-gray-400 ".concat(C?"animate-spin":""),children:"\ud83d\udd04"})})}),(0,u.jsx)("div",{ref:I,className:"lg:hidden fixed top-16 left-0 right-0 z-40 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700 transition-transform duration-300 ".concat(M?"transform translate-y-0":"transform -translate-y-full"),onTouchStart:L,onTouchMove:U,onTouchEnd:z,children:(0,u.jsxs)("div",{className:"px-4 py-3",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Forums"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:()=>f(!b),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 touch-optimized transition-all duration-200 active:scale-95",children:(0,u.jsx)(yn,{className:"w-5 h-5"})}),p&&(0,u.jsxs)("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors touch-optimized",children:[(0,u.jsx)(Zs,{className:"w-4 h-4 inline-block mr-1"}),"New"]})]})]}),(0,u.jsxs)("div",{className:"relative mb-3",children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,u.jsx)("input",{ref:R,type:"text",value:n,onChange:e=>O(e.target.value),onFocus:()=>N(!0),onBlur:()=>{setTimeout((()=>N(!1)),200),setTimeout((()=>k(!1)),200)},placeholder:"Search discussions...",className:"w-full pl-10 pr-4 py-3 bg-gray-100 dark:bg-gray-800 border-none rounded-xl text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-red-500 mobile-input-no-zoom transition-all duration-200"}),n&&(0,u.jsx)("button",{onClick:()=>O(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600",children:(0,u.jsx)(ge,{className:"w-4 h-4"})})]}),j&&h.length>0&&(0,u.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-80 overflow-y-auto",children:h.map(((e,t)=>(0,u.jsx)("button",{onClick:()=>{g(e),k(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-colors touch-optimized",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-600 flex items-center justify-center",children:(0,u.jsx)(Kt,{className:"w-4 h-4 text-gray-500"})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:e.title}),(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[e.category," \u2022 ",e.replies," replies"]})]})]})},t)))})]}),(0,u.jsxs)("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide pb-2",children:[(0,u.jsx)("button",{onClick:()=>F("all"),className:"flex-shrink-0 px-4 py-2 rounded-full font-medium transition-all duration-200 touch-optimized ".concat("all"===a?"bg-red-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"),children:"All"}),t.map((e=>(0,u.jsxs)("button",{onClick:()=>F(e.slug),className:"flex-shrink-0 px-4 py-2 rounded-full font-medium transition-all duration-200 whitespace-nowrap touch-optimized ".concat(a===e.slug?"bg-red-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"),children:[e.icon," ",e.name]},e.id)))]}),b&&(0,u.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl animate-slide-down",children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sort by"}),(0,u.jsx)("div",{className:"flex flex-wrap gap-2",children:B.map((e=>{const t=e.icon;return(0,u.jsxs)("button",{onClick:()=>o(e.value),className:"flex items-center space-x-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 touch-optimized ".concat(i===e.value?"bg-red-500 text-white":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-600"),children:["string"===typeof e.icon?(0,u.jsx)("span",{children:e.icon}):(0,u.jsx)(t,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"text-sm",children:e.label})]},e.value)}))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"View"}),(0,u.jsxs)("div",{className:"flex bg-white dark:bg-gray-700 rounded-lg p-1",children:[(0,u.jsx)("button",{onClick:()=>c("list"),className:"flex-1 px-3 py-2 rounded-md font-medium transition-all duration-200 touch-optimized ".concat("list"===d?"bg-red-500 text-white":"text-gray-600 dark:text-gray-400"),children:"List"}),(0,u.jsx)("button",{onClick:()=>c("compact"),className:"flex-1 px-3 py-2 rounded-md font-medium transition-all duration-200 touch-optimized ".concat("compact"===d?"bg-red-500 text-white":"text-gray-600 dark:text-gray-400"),children:"Compact"})]})]})]})]})}),(0,u.jsx)("div",{className:"lg:hidden fixed bottom-20 right-4 z-40",children:(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[p&&(0,u.jsx)("button",{onClick:m,className:"w-14 h-14 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg flex items-center justify-center touch-optimized transition-all duration-200 active:scale-95",children:(0,u.jsx)(Zs,{className:"w-6 h-6"})}),(0,u.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"w-12 h-12 bg-gray-600 hover:bg-gray-700 text-white rounded-full shadow-lg flex items-center justify-center touch-optimized transition-all duration-200 active:scale-95",children:"\u2191"})]})}),(0,u.jsx)("style",{jsx:!0,children:"\n        @keyframes slide-down {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        .animate-slide-down {\n          animation: slide-down 0.2s ease-out;\n        }\n\n        .scrollbar-hide {\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        }\n        \n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;\n        }\n\n        .mobile-input-no-zoom {\n          font-size: 16px !important;\n          transform: translateZ(0);\n        }\n\n        .touch-optimized {\n          min-height: 44px;\n          min-width: 44px;\n          -webkit-tap-highlight-color: rgba(239, 68, 68, 0.1);\n          tap-highlight-color: rgba(239, 68, 68, 0.1);\n        }\n      "})]})};function fn(){return fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fn.apply(null,arguments)}function jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kn(e,t){return kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kn(e,t)}function wn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,kn(e,t)}var Nn=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function _n(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(r=e[a],s=t[a],!(r===s||Nn(r)&&Nn(s)))return!1;var r,s;return!0}const Sn=function(e,t){var a;void 0===t&&(t=_n);var r,s=[],n=!1;return function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];return n&&a===this&&t(l,s)||(r=e.apply(this,l),n=!0,a=this,s=l),r}};function Cn(e,t){if(null==e)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}var En="object"===typeof performance&&"function"===typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Tn(e){cancelAnimationFrame(e.id)}function An(e,t){var a=En();var r={id:requestAnimationFrame((function s(){En()-a>=t?e.call(null):r.id=requestAnimationFrame(s)}))};return r}var Mn=-1;function Pn(e){if(void 0===e&&(e=!1),-1===Mn||e){var t=document.createElement("div"),a=t.style;a.width="50px",a.height="50px",a.overflow="scroll",document.body.appendChild(t),Mn=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Mn}var Rn=null;function In(e){if(void 0===e&&(e=!1),null===Rn||e){var t=document.createElement("div"),a=t.style;a.width="50px",a.height="50px",a.overflow="scroll",a.direction="rtl";var r=document.createElement("div"),s=r.style;return s.width="100px",s.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?Rn="positive-descending":(t.scrollLeft=1,Rn=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Rn}return Rn}var Dn=function(e,t){return e};function Ln(e){var t,a=e.getItemOffset,r=e.getEstimatedTotalSize,n=e.getItemSize,l=e.getOffsetForIndexAndAlignment,i=e.getStartIndexForOffset,o=e.getStopIndexForStartIndex,d=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,m=e.validateProps;return t=function(e){function t(t){var r;return(r=e.call(this,t)||this)._instanceProps=d(r.props,jn(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:jn(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"===typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=Sn((function(e,t,a,s){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:a,visibleStopIndex:s})})),r._callOnScroll=void 0,r._callOnScroll=Sn((function(e,t,a){return r.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:a})})),r._getItemStyle=void 0,r._getItemStyle=function(e){var t,s=r.props,l=s.direction,i=s.itemSize,o=s.layout,d=r._getItemStyleCache(c&&i,c&&o,c&&l);if(d.hasOwnProperty(e))t=d[e];else{var m=a(r.props,e,r._instanceProps),u=n(r.props,e,r._instanceProps),x="horizontal"===l||"horizontal"===o,h="rtl"===l,g=x?m:0;d[e]=t={position:"absolute",left:h?void 0:g,right:h?g:void 0,top:x?0:m,height:x?"100%":u,width:x?u:"100%"}}return t},r._getItemStyleCache=void 0,r._getItemStyleCache=Sn((function(e,t,a){return{}})),r._onScrollHorizontal=function(e){var t=e.currentTarget,a=t.clientWidth,s=t.scrollLeft,n=t.scrollWidth;r.setState((function(e){if(e.scrollOffset===s)return null;var t=r.props.direction,l=s;if("rtl"===t)switch(In()){case"negative":l=-s;break;case"positive-descending":l=n-a-s}return l=Math.max(0,Math.min(l,n-a)),{isScrolling:!0,scrollDirection:e.scrollOffset<l?"forward":"backward",scrollOffset:l,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var t=e.currentTarget,a=t.clientHeight,s=t.scrollHeight,n=t.scrollTop;r.setState((function(e){if(e.scrollOffset===n)return null;var t=Math.max(0,Math.min(n,s-a));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"===typeof t?t(e):null!=t&&"object"===typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){null!==r._resetIsScrollingTimeoutId&&Tn(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=An(r._resetIsScrolling,150)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1,null)}))},r}wn(t,e),t.getDerivedStateFromProps=function(e,t){return Un(e,t),m(e),null};var u=t.prototype;return u.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},u.scrollToItem=function(e,t){void 0===t&&(t="auto");var a=this.props,r=a.itemCount,s=a.layout,n=this.state.scrollOffset;e=Math.max(0,Math.min(e,r-1));var i=0;if(this._outerRef){var o=this._outerRef;i="vertical"===s?o.scrollWidth>o.clientWidth?Pn():0:o.scrollHeight>o.clientHeight?Pn():0}this.scrollTo(l(this.props,e,t,n,this._instanceProps,i))},u.componentDidMount=function(){var e=this.props,t=e.direction,a=e.initialScrollOffset,r=e.layout;if("number"===typeof a&&null!=this._outerRef){var s=this._outerRef;"horizontal"===t||"horizontal"===r?s.scrollLeft=a:s.scrollTop=a}this._callPropsCallbacks()},u.componentDidUpdate=function(){var e=this.props,t=e.direction,a=e.layout,r=this.state,s=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var n=this._outerRef;if("horizontal"===t||"horizontal"===a)if("rtl"===t)switch(In()){case"negative":n.scrollLeft=-s;break;case"positive-ascending":n.scrollLeft=s;break;default:var l=n.clientWidth,i=n.scrollWidth;n.scrollLeft=i-l-s}else n.scrollLeft=s;else n.scrollTop=s}this._callPropsCallbacks()},u.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Tn(this._resetIsScrollingTimeoutId)},u.render=function(){var e=this.props,t=e.children,a=e.className,n=e.direction,l=e.height,i=e.innerRef,o=e.innerElementType,d=e.innerTagName,c=e.itemCount,m=e.itemData,u=e.itemKey,x=void 0===u?Dn:u,h=e.layout,g=e.outerElementType,p=e.outerTagName,v=e.style,y=e.useIsScrolling,b=e.width,f=this.state.isScrolling,j="horizontal"===n||"horizontal"===h,k=j?this._onScrollHorizontal:this._onScrollVertical,w=this._getRangeToRender(),N=w[0],_=w[1],S=[];if(c>0)for(var C=N;C<=_;C++)S.push((0,s.createElement)(t,{data:m,key:x(C,m),index:C,isScrolling:y?f:void 0,style:this._getItemStyle(C)}));var E=r(this.props,this._instanceProps);return(0,s.createElement)(g||p||"div",{className:a,onScroll:k,ref:this._outerRefSetter,style:fn({position:"relative",height:l,width:b,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:n},v)},(0,s.createElement)(o||d||"div",{children:S,ref:i,style:{height:j?"100%":E,pointerEvents:f?"none":void 0,width:j?E:"100%"}}))},u._callPropsCallbacks=function(){if("function"===typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],a=e[1],r=e[2],s=e[3];this._callOnItemsRendered(t,a,r,s)}if("function"===typeof this.props.onScroll){var n=this.state,l=n.scrollDirection,i=n.scrollOffset,o=n.scrollUpdateWasRequested;this._callOnScroll(l,i,o)}},u._getRangeToRender=function(){var e=this.props,t=e.itemCount,a=e.overscanCount,r=this.state,s=r.isScrolling,n=r.scrollDirection,l=r.scrollOffset;if(0===t)return[0,0,0,0];var d=i(this.props,l,this._instanceProps),c=o(this.props,d,l,this._instanceProps),m=s&&"backward"!==n?1:Math.max(1,a),u=s&&"forward"!==n?1:Math.max(1,a);return[Math.max(0,d-m),Math.max(0,Math.min(t-1,c+u)),d,c]},t}(s.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Un=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},zn=function(e,t,a){var r=e.itemSize,s=a.itemMetadataMap,n=a.lastMeasuredIndex;if(t>n){var l=0;if(n>=0){var i=s[n];l=i.offset+i.size}for(var o=n+1;o<=t;o++){var d=r(o);s[o]={offset:l,size:d},l+=d}a.lastMeasuredIndex=t}return s[t]},On=function(e,t,a,r,s){for(;r<=a;){var n=r+Math.floor((a-r)/2),l=zn(e,n,t).offset;if(l===s)return n;l<s?r=n+1:l>s&&(a=n-1)}return r>0?r-1:0},Fn=function(e,t,a,r){for(var s=e.itemCount,n=1;a<s&&zn(e,a,t).offset<r;)a+=n,n*=2;return On(e,t,Math.min(a,s-1),Math.floor(a/2),r)},Bn=function(e,t){var a=e.itemCount,r=t.itemMetadataMap,s=t.estimatedItemSize,n=t.lastMeasuredIndex,l=0;if(n>=a&&(n=a-1),n>=0){var i=r[n];l=i.offset+i.size}return l+(a-n-1)*s},Wn=Ln({getItemOffset:function(e,t,a){return zn(e,t,a).offset},getItemSize:function(e,t,a){return a.itemMetadataMap[t].size},getEstimatedTotalSize:Bn,getOffsetForIndexAndAlignment:function(e,t,a,r,s,n){var l=e.direction,i=e.height,o=e.layout,d=e.width,c="horizontal"===l||"horizontal"===o?d:i,m=zn(e,t,s),u=Bn(e,s),x=Math.max(0,Math.min(u-c,m.offset)),h=Math.max(0,m.offset-c+m.size+n);switch("smart"===a&&(a=r>=h-c&&r<=x+c?"auto":"center"),a){case"start":return x;case"end":return h;case"center":return Math.round(h+(x-h)/2);default:return r>=h&&r<=x?r:r<h?h:x}},getStartIndexForOffset:function(e,t,a){return function(e,t,a){var r=t.itemMetadataMap,s=t.lastMeasuredIndex;return(s>0?r[s].offset:0)>=a?On(e,t,s,0,a):Fn(e,t,Math.max(0,s),a)}(e,a,t)},getStopIndexForStartIndex:function(e,t,a,r){for(var s=e.direction,n=e.height,l=e.itemCount,i=e.layout,o=e.width,d="horizontal"===s||"horizontal"===i?o:n,c=zn(e,t,r),m=a+d,u=c.offset+c.size,x=t;x<l-1&&u<m;)x++,u+=zn(e,x,r).size;return x},initInstanceProps:function(e,t){var a={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,r){void 0===r&&(r=!0),a.lastMeasuredIndex=Math.min(a.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),r&&t.forceUpdate()},a},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),Hn=Ln({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,a,r,s,n){var l=e.direction,i=e.height,o=e.itemCount,d=e.itemSize,c=e.layout,m=e.width,u="horizontal"===l||"horizontal"===c?m:i,x=Math.max(0,o*d-u),h=Math.min(x,t*d),g=Math.max(0,t*d-u+d+n);switch("smart"===a&&(a=r>=g-u&&r<=h+u?"auto":"center"),a){case"start":return h;case"end":return g;case"center":var p=Math.round(g+(h-g)/2);return p<Math.ceil(u/2)?0:p>x+Math.floor(u/2)?x:p;default:return r>=g&&r<=h?r:r<g?g:h}},getStartIndexForOffset:function(e,t){var a=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(a-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,a){var r=e.direction,s=e.height,n=e.itemCount,l=e.itemSize,i=e.layout,o=e.width,d=t*l,c="horizontal"===r||"horizontal"===i?o:s,m=Math.ceil((c+a-d)/l);return Math.max(0,Math.min(n-1,t+m-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function Vn(e,t){for(var a in e)if(!(a in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}var qn=["style"],Gn=["style"];function Yn(e,t){var a=e.style,r=Cn(e,qn),s=t.style,n=Cn(t,Gn);return!Vn(a,s)&&!Vn(r,n)}const Zn=se("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),Kn=se("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Jn=se("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Qn=se("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Xn=se("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),$n=se("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),el=["index","style"],tl=s.memo((e=>{var t,a,r;let{index:n,style:l,data:i}=e;const{threads:o,onThreadClick:d,onVote:c,onBookmark:m,onShare:x,viewMode:h,selectedThreadId:g,isAuthenticated:p}=i,v=o[n];if(!v)return null;const y=(0,s.useCallback)((e=>{e.preventDefault(),d(v)}),[v,d]),b=(0,s.useCallback)(((e,t)=>{e.stopPropagation(),c(v.id,t)}),[v.id,c]),f=(0,s.useCallback)((e=>{e.stopPropagation(),m(v.id)}),[v.id,m]),j=(0,s.useCallback)((e=>{e.stopPropagation(),x(v)}),[v,x]);var k;return"compact"===h?(0,u.jsx)("div",{style:l,children:(0,u.jsx)("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800 cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700 touch-optimized ".concat(g===v.id?"bg-red-50 dark:bg-red-900/20":""),onClick:y,children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[v.isPinned&&(0,u.jsx)(Zn,{className:"w-3 h-3 text-red-500 flex-shrink-0"}),(0,u.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:v.title})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Kn,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:(null===(k=v.author)||void 0===k?void 0:k.username)||"Anonymous"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Kt,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:v.replies_count||0})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Ys,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:v.views_count||0})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Jn,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:Ie(v.updated_at||v.created_at)})]})]})]}),(0,u.jsx)(ve,{className:"w-4 h-4 text-gray-400 ml-2 flex-shrink-0"})]})})}):(0,u.jsx)("div",{style:l,children:(0,u.jsx)("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800 cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-gray-700 touch-optimized ".concat(g===v.id?"bg-red-50 dark:bg-red-900/20":""),onClick:y,children:(0,u.jsxs)("div",{className:"flex space-x-3",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white font-medium",children:null!==(t=v.author)&&void 0!==t&&t.avatar?(0,u.jsx)("img",{src:v.author.avatar,alt:v.author.username,className:"w-full h-full rounded-full object-cover",loading:"lazy"}):(0,u.jsx)("span",{className:"text-sm",children:null!==(a=v.author)&&void 0!==a&&a.username?v.author.username[0].toUpperCase():"A"})})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[v.isPinned&&(0,u.jsx)(Zn,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),v.isHot&&(0,u.jsx)(ue,{className:"w-4 h-4 text-orange-500 flex-shrink-0"}),(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm leading-tight",children:v.title})]}),v.excerpt&&(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2 line-clamp-2",children:v.excerpt}),(0,u.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Kn,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:(null===(r=v.author)||void 0===r?void 0:r.username)||"Anonymous"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Kt,{className:"w-3 h-3"}),(0,u.jsxs)("span",{children:[v.replies_count||0," replies"]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Ys,{className:"w-3 h-3"}),(0,u.jsxs)("span",{children:[v.views_count||0," views"]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Jn,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:Ie(v.updated_at||v.created_at)})]})]}),v.tags&&v.tags.length>0&&(0,u.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[v.tags.slice(0,3).map(((e,t)=>(0,u.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:e},t))),v.tags.length>3&&(0,u.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["+",v.tags.length-3]})]})]}),(0,u.jsxs)("div",{className:"flex flex-col items-center ml-3",children:[(0,u.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(v.upvotes||0)-(v.downvotes||0)}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"votes"})]})]}),p&&(0,u.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-gray-100 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:e=>b(e,"up"),className:"p-1 rounded transition-colors touch-optimized ".concat("up"===v.userVote?"text-green-600 bg-green-100 dark:bg-green-900/30":"text-gray-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"),children:(0,u.jsx)(Qn,{className:"w-4 h-4"})}),(0,u.jsx)("button",{onClick:f,className:"p-1 rounded transition-colors touch-optimized ".concat(v.isBookmarked?"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30":"text-gray-500 hover:text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20"),children:(0,u.jsx)(Xn,{className:"w-4 h-4"})}),(0,u.jsx)("button",{onClick:j,className:"p-1 rounded transition-colors text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 touch-optimized",children:(0,u.jsx)($n,{className:"w-4 h-4"})})]}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:v.category})]})]})]})})})}),Yn),al=e=>{let{threads:t=[],onThreadClick:a,onVote:r,onBookmark:n,onShare:l,onLoadMore:i,hasMore:o=!1,loading:d=!1,viewMode:m="list",selectedThreadId:x,isAuthenticated:h=!1,height:g=600,itemHeight:p=null,className:v=""}=e;const[y,b]=(0,s.useState)(null),[f,j]=(0,s.useState)({}),k=(0,s.useRef)(null),w=(0,s.useRef)(null),N=(0,s.useCallback)((e=>{if(p)return p;const a=t[e];if(!a)return"compact"===m?60:160;if(f[a.id])return f[a.id];return("compact"===m?60:160)+(a.excerpt?20*Math.ceil(a.excerpt.length/80):0)+(a.tags&&a.tags.length>0?30:0)+(h?40:0)}),[t,p,m,f,h]);(0,s.useCallback)(((e,a)=>{const r=t[e];r&&f[r.id]!==a&&(j((e=>c(c({},e),{},{[r.id]:a}))),y&&!p&&y.resetAfterIndex(e))}),[t,f,y,p]);(0,s.useEffect)((()=>{if(!o||d)return;const e=new IntersectionObserver((e=>{e[0].isIntersecting&&i()}),{threshold:.1,rootMargin:"100px"});return k.current&&e.observe(k.current),w.current=e,()=>e.disconnect()}),[o,d,i]);const _=(0,s.useMemo)((()=>({threads:t,onThreadClick:a,onVote:r,onBookmark:n,onShare:l,viewMode:m,selectedThreadId:x,isAuthenticated:h})),[t,a,r,n,l,m,x,h]),S=t.length+(o?1:0),C=s.memo((e=>{let{style:t}=e;return(0,u.jsx)("div",{style:t,className:"flex items-center justify-center p-8",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-red-500"}),(0,u.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Loading more threads..."})]})})})),E=(0,s.useCallback)((e=>{let{index:a,style:r}=e,s=Q(e,el);return a>=t.length?(0,u.jsx)(C,{style:r}):(0,u.jsx)(tl,c({index:a,style:r,data:_},s))}),[t.length,_]),T=p?Hn:Wn;return(0,u.jsxs)("div",{className:"virtualized-forum-list ".concat(v),children:[(0,u.jsx)(T,{ref:b,height:g,itemCount:S,itemSize:p||N,itemData:_,overscanCount:5,className:"scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:E}),o&&(0,u.jsx)("div",{ref:k,className:"h-1 w-full",style:{position:"absolute",bottom:"200px",pointerEvents:"none"}}),(0,u.jsx)("style",{jsx:!0,children:"\n        .virtualized-forum-list {\n          contain: layout style paint;\n          will-change: transform;\n        }\n\n        .touch-optimized {\n          min-height: 44px;\n          min-width: 44px;\n          -webkit-tap-highlight-color: rgba(239, 68, 68, 0.1);\n          tap-highlight-color: rgba(239, 68, 68, 0.1);\n        }\n\n        .line-clamp-2 {\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n        }\n\n        /* Custom scrollbar */\n        .scrollbar-thin {\n          scrollbar-width: thin;\n        }\n\n        .scrollbar-thumb-gray-300::-webkit-scrollbar-thumb {\n          background-color: #d1d5db;\n          border-radius: 0.375rem;\n        }\n\n        .dark .scrollbar-thumb-gray-600::-webkit-scrollbar-thumb {\n          background-color: #4b5563;\n        }\n\n        .scrollbar-track-transparent::-webkit-scrollbar-track {\n          background-color: transparent;\n        }\n\n        .scrollbar-thin::-webkit-scrollbar {\n          width: 6px;\n        }\n\n        /* Performance optimizations */\n        .virtualized-forum-list * {\n          content-visibility: auto;\n          contain-intrinsic-size: auto 200px;\n        }\n\n        /* Reduce motion for accessibility */\n        @media (prefers-reduced-motion: reduce) {\n          .virtualized-forum-list * {\n            transition: none !important;\n            animation: none !important;\n          }\n        }\n\n        /* High DPI optimizations */\n        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {\n          .virtualized-forum-list {\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n          }\n        }\n      "})]})},rl=se("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),sl=se("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),nl=se("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),ll=se("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),il=se("panel-right",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),ol=se("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),dl=e=>{let{children:t,leftPanel:a,rightPanel:r,mainContent:n,orientation:l="landscape",defaultLayout:i="three-column",onLayoutChange:o,showLayoutControls:d=!0,className:c=""}=e;const[m,x]=(0,s.useState)(i),[h,g]=(0,s.useState)(320),[p,v]=(0,s.useState)(280),[y,b]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null),[N,_]=(0,s.useState)(null),S=(0,s.useRef)(null),C=((0,s.useRef)(null),(0,s.useRef)(null),{single:{name:"Single Column",icon:rl,columns:"grid-cols-1",areas:'"main"',showLeft:!1,showRight:!1},"two-column":{name:"Two Column",icon:sl,columns:"grid-cols-[1fr_1fr]",areas:'"main sidebar"',showLeft:!1,showRight:!0},"three-column":{name:"Three Column",icon:nl,columns:"grid-cols-[".concat(h,"px_1fr_").concat(p,"px]"),areas:'"sidebar main auxiliary"',showLeft:!0,showRight:!0},"split-view":{name:"Split View",icon:ll,columns:"grid-cols-[".concat(h,"px_1fr]"),areas:'"sidebar main"',showLeft:!0,showRight:!1}});(0,s.useEffect)((()=>{const e=()=>{window.innerWidth<900?x("single"):window.innerWidth<1200?x("two-column"):x("three-column")};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const E=(0,s.useCallback)((e=>{x(e),o&&o(e)}),[o]),T=(0,s.useCallback)(((e,t)=>{e.preventDefault(),w(t),_({x:e.clientX,leftWidth:h,rightWidth:p}),document.addEventListener("mousemove",A),document.addEventListener("mouseup",M)}),[h,p]),A=(0,s.useCallback)((e=>{if(!k||!N)return;const t=e.clientX-N.x;if("left"===k){const e=Math.max(200,Math.min(500,N.leftWidth+t));g(e)}else if("right"===k){const e=Math.max(200,Math.min(400,N.rightWidth-t));v(e)}}),[k,N]),M=(0,s.useCallback)((()=>{w(null),_(null),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",M)}),[A]),P=(0,s.useCallback)(((e,t)=>{e.preventDefault();const a=e.touches[0];w(t),_({x:a.clientX,leftWidth:h,rightWidth:p})}),[h,p]),R=(0,s.useCallback)((e=>{if(!k||!N)return;e.preventDefault();const t=e.touches[0].clientX-N.x;if("left"===k){const e=Math.max(200,Math.min(500,N.leftWidth+t));g(e)}else if("right"===k){const e=Math.max(200,Math.min(400,N.rightWidth-t));v(e)}}),[k,N]),I=(0,s.useCallback)((()=>{w(null),_(null)}),[]),D=C[m],L=(0,s.useCallback)((()=>{b(!y)}),[y]),U=(0,s.useCallback)((()=>{j(!f)}),[f]),z=()=>(0,u.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 tablet-controls-shadow",children:[(0,u.jsx)("div",{className:"flex items-center space-x-1",children:Object.entries(C).map((e=>{let[t,a]=e;const r=a.icon;return(0,u.jsx)("button",{onClick:()=>E(t),className:"p-2 rounded-lg transition-all duration-200 tablet-touch-target ".concat(m===t?"bg-red-500 text-white shadow-md":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),title:a.name,children:(0,u.jsx)(r,{className:"w-4 h-4"})},t)}))}),(0,u.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),D.showLeft&&(0,u.jsx)("button",{onClick:L,className:"p-2 rounded-lg transition-all duration-200 tablet-touch-target ".concat(y?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700":"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"),title:y?"Show left panel":"Hide left panel",children:(0,u.jsx)(ll,{className:"w-4 h-4"})}),D.showRight&&(0,u.jsx)("button",{onClick:U,className:"p-2 rounded-lg transition-all duration-200 tablet-touch-target ".concat(f?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700":"text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20"),title:f?"Show right panel":"Hide right panel",children:(0,u.jsx)(il,{className:"w-4 h-4"})}),(0,u.jsx)("div",{className:"ml-auto text-sm text-gray-500 dark:text-gray-400",children:D.name})]}),O=e=>{let{direction:t,onMouseDown:a,onTouchStart:r}=e;return(0,u.jsx)("div",{className:"tablet-resizer tablet-resizer-".concat(t," ").concat(k===t?"tablet-resizer-active":""),onMouseDown:e=>a(e,t),onTouchStart:e=>r(e,t),onTouchMove:R,onTouchEnd:I,children:(0,u.jsx)("div",{className:"tablet-resizer-handle"})})};return(0,u.jsxs)("div",{ref:S,className:"tablet-forum-layout ".concat(c," ").concat("landscape"===l?"tablet-layout-landscape":"tablet-layout-portrait"),children:[d&&(0,u.jsx)(z,{}),(0,u.jsxs)("div",{className:"tablet-layout-container",style:{display:"grid",gridTemplateColumns:"three-column"===m?"".concat(y?"60px":h+"px"," 1fr ").concat(f?"60px":p+"px"):"split-view"===m?"".concat(y?"60px":h+"px"," 1fr"):"two-column"===m?"1fr 1fr":"1fr",height:d?"calc(100vh - 64px)":"100vh",overflow:"hidden"},children:[D.showLeft&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"tablet-panel tablet-panel-left ".concat(y?"tablet-panel-collapsed":""),children:[(0,u.jsxs)("div",{className:"tablet-panel-header",children:[(0,u.jsx)("h2",{className:"tablet-panel-title",children:y?null:"Categories"}),(0,u.jsx)("button",{onClick:L,className:"tablet-panel-toggle tablet-touch-target",children:y?(0,u.jsx)(ve,{className:"w-4 h-4"}):(0,u.jsx)(ol,{className:"w-4 h-4"})})]}),(0,u.jsx)("div",{className:"tablet-panel-content",children:y?(0,u.jsxs)("div",{className:"flex flex-col items-center space-y-3 py-4",children:[(0,u.jsx)(yn,{className:"w-6 h-6 text-gray-400"}),(0,u.jsx)(xe,{className:"w-6 h-6 text-gray-400"})]}):a})]}),!y&&(0,u.jsx)(O,{direction:"left",onMouseDown:T,onTouchStart:P})]}),(0,u.jsx)("div",{className:"tablet-panel tablet-main-content tablet-gpu-accelerated",children:n||t}),D.showRight&&(0,u.jsxs)(u.Fragment,{children:[!f&&(0,u.jsx)(O,{direction:"right",onMouseDown:T,onTouchStart:P}),(0,u.jsxs)("div",{className:"tablet-panel tablet-panel-right ".concat(f?"tablet-panel-collapsed":""),children:[(0,u.jsxs)("div",{className:"tablet-panel-header",children:[(0,u.jsx)("button",{onClick:U,className:"tablet-panel-toggle tablet-touch-target",children:f?(0,u.jsx)(ol,{className:"w-4 h-4"}):(0,u.jsx)(ve,{className:"w-4 h-4"})}),(0,u.jsx)("h2",{className:"tablet-panel-title",children:f?null:"Activity"})]}),(0,u.jsx)("div",{className:"tablet-panel-content",children:f?(0,u.jsxs)("div",{className:"flex flex-col items-center space-y-3 py-4",children:[(0,u.jsx)(Ys,{className:"w-6 h-6 text-gray-400"}),(0,u.jsx)(be,{className:"w-6 h-6 text-gray-400"})]}):r})]})]})]}),(0,u.jsx)("style",{jsx:!0,children:"\n        .tablet-forum-layout {\n          width: 100%;\n          height: 100vh;\n          overflow: hidden;\n          background: #f8f9fa;\n          contain: layout style;\n        }\n\n        .dark .tablet-forum-layout {\n          background: #111827;\n        }\n\n        .tablet-layout-container {\n          transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          will-change: grid-template-columns;\n          contain: layout style;\n        }\n\n        .tablet-panel {\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          background: white;\n          border-right: 1px solid #e5e7eb;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          will-change: width, transform;\n          contain: layout style paint;\n        }\n\n        .dark .tablet-panel {\n          background: #1f2937;\n          border-color: #374151;\n        }\n\n        .tablet-panel-collapsed {\n          min-width: 60px !important;\n          max-width: 60px !important;\n        }\n\n        .tablet-panel-left {\n          border-right: 1px solid #e5e7eb;\n        }\n\n        .tablet-panel-right {\n          border-left: 1px solid #e5e7eb;\n          border-right: none;\n        }\n\n        .dark .tablet-panel-left,\n        .dark .tablet-panel-right {\n          border-color: #374151;\n        }\n\n        .tablet-main-content {\n          border: none;\n          overflow: auto;\n          -webkit-overflow-scrolling: touch;\n        }\n\n        .tablet-panel-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 1rem 1.5rem;\n          border-bottom: 1px solid #e5e7eb;\n          background: #f8f9fa;\n          flex-shrink: 0;\n        }\n\n        .dark .tablet-panel-header {\n          border-color: #374151;\n          background: #111827;\n        }\n\n        .tablet-panel-title {\n          font-weight: 600;\n          color: #1f2937;\n          font-size: 0.875rem;\n          white-space: nowrap;\n        }\n\n        .dark .tablet-panel-title {\n          color: #f9fafb;\n        }\n\n        .tablet-panel-toggle {\n          padding: 0.5rem;\n          border-radius: 0.5rem;\n          transition: all 0.2s ease;\n          color: #6b7280;\n        }\n\n        .tablet-panel-toggle:hover {\n          background: rgba(0, 0, 0, 0.05);\n          color: #374151;\n        }\n\n        .dark .tablet-panel-toggle {\n          color: #9ca3af;\n        }\n\n        .dark .tablet-panel-toggle:hover {\n          background: rgba(255, 255, 255, 0.05);\n          color: #d1d5db;\n        }\n\n        .tablet-panel-content {\n          flex: 1;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n          padding: 1rem;\n        }\n\n        .tablet-controls-shadow {\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        }\n\n        .tablet-touch-target {\n          min-height: 44px;\n          min-width: 44px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .tablet-resizer {\n          position: relative;\n          width: 4px;\n          background: transparent;\n          cursor: col-resize;\n          user-select: none;\n          touch-action: none;\n          z-index: 10;\n          transition: background-color 0.2s ease;\n        }\n\n        .tablet-resizer:hover,\n        .tablet-resizer-active {\n          background: #ef4444;\n        }\n\n        .tablet-resizer-handle {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 20px;\n          height: 60px;\n          background: transparent;\n          border-radius: 4px;\n        }\n\n        .tablet-resizer:hover .tablet-resizer-handle,\n        .tablet-resizer-active .tablet-resizer-handle {\n          background: rgba(239, 68, 68, 0.1);\n        }\n\n        .tablet-gpu-accelerated {\n          transform: translateZ(0);\n          -webkit-transform: translateZ(0);\n          backface-visibility: hidden;\n          perspective: 1000px;\n        }\n\n        /* Landscape specific optimizations */\n        .tablet-layout-landscape {\n          /* Optimized for landscape orientation */\n        }\n\n        .tablet-layout-landscape .tablet-panel-left {\n          min-width: 280px;\n        }\n\n        .tablet-layout-landscape .tablet-panel-right {\n          min-width: 240px;\n        }\n\n        /* Portrait specific optimizations */\n        .tablet-layout-portrait {\n          /* Optimized for portrait orientation */\n        }\n\n        .tablet-layout-portrait .tablet-panel-left,\n        .tablet-layout-portrait .tablet-panel-right {\n          min-width: 200px;\n        }\n\n        /* Performance optimizations */\n        @media (prefers-reduced-motion: reduce) {\n          .tablet-layout-container,\n          .tablet-panel {\n            transition: none !important;\n          }\n        }\n\n        /* High DPI optimizations */\n        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {\n          .tablet-forum-layout {\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n          }\n        }\n\n        /* Responsive adjustments */\n        @media (max-width: 900px) {\n          .tablet-panel-left,\n          .tablet-panel-right {\n            min-width: 250px;\n          }\n        }\n\n        @media (max-width: 700px) {\n          .tablet-layout-container {\n            grid-template-columns: 1fr !important;\n          }\n          \n          .tablet-panel-left,\n          .tablet-panel-right {\n            display: none;\n          }\n        }\n\n        /* Accessibility improvements */\n        .tablet-resizer:focus-visible {\n          outline: 2px solid #ef4444;\n          outline-offset: 2px;\n        }\n\n        /* Dark mode scrollbar */\n        .dark .tablet-panel-content::-webkit-scrollbar {\n          width: 6px;\n        }\n\n        .dark .tablet-panel-content::-webkit-scrollbar-track {\n          background: #374151;\n        }\n\n        .dark .tablet-panel-content::-webkit-scrollbar-thumb {\n          background: #6b7280;\n          border-radius: 3px;\n        }\n\n        .dark .tablet-panel-content::-webkit-scrollbar-thumb:hover {\n          background: #9ca3af;\n        }\n      "})]})},cl=se("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ml=(Math.pow(10,8),43200),ul=Symbol.for("constructDateFrom");function xl(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&ul in e?e[ul](t):e instanceof Date?new e.constructor(t):new Date(t)}function hl(e){return xl(e,Date.now())}const gl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function pl(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const vl={date:pl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:pl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:pl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},yl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function bl(e){return(t,a)=>{let r;if("formatting"===(null!==a&&void 0!==a&&a.context?String(a.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==a&&void 0!==a&&a.width?String(a.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==a&&void 0!==a&&a.width?String(a.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function fl(e){return function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=a.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],n=t.match(s);if(!n)return null;const l=n[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(i)?function(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a;return}(i,(e=>e.test(l))):function(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a;return}(i,(e=>e.test(l)));let d;d=e.valueCallback?e.valueCallback(o):o,d=a.valueCallback?a.valueCallback(d):d;return{value:d,rest:t.slice(l.length)}}}var jl;const kl={code:"en-US",formatDistance:(e,t,a)=>{let r;const s=gl[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==a&&void 0!==a&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r},formatLong:vl,formatRelative:(e,t,a,r)=>yl[e],localize:{ordinalNumber:(e,t)=>{const a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:bl({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:bl({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:bl({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:bl({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:bl({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(jl={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e.match(jl.matchPattern);if(!a)return null;const r=a[0],s=e.match(jl.parsePattern);if(!s)return null;let n=jl.valueCallback?jl.valueCallback(s[0]):s[0];return n=t.valueCallback?t.valueCallback(n):n,{value:n,rest:e.slice(r.length)}}),era:fl({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:fl({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:fl({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:fl({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:fl({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let wl={};function Nl(){return wl}function _l(e,t){return xl(t||e,e)}function Sl(e){const t=_l(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function Cl(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];const s=xl.bind(null,e||a.find((e=>"object"===typeof e)));return a.map(s)}function El(e,t){const a=+_l(e)-+_l(t);return a<0?-1:a>0?1:a}function Tl(e,t,a){const[r,s]=Cl(null===a||void 0===a?void 0:a.in,e,t);return 12*(r.getFullYear()-s.getFullYear())+(r.getMonth()-s.getMonth())}function Al(e,t){const a=_l(e,null===t||void 0===t?void 0:t.in);return a.setHours(23,59,59,999),a}function Ml(e,t){const a=_l(e,null===t||void 0===t?void 0:t.in),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function Pl(e,t){const a=_l(e,null===t||void 0===t?void 0:t.in);return+Al(a,t)===+Ml(a,t)}function Rl(e,t,a){const[r,s,n]=Cl(null===a||void 0===a?void 0:a.in,e,e,t),l=El(s,n),i=Math.abs(Tl(s,n));if(i<1)return 0;1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*i);let o=El(s,n)===-l;Pl(r)&&1===i&&1===El(r,n)&&(o=!1);const d=l*(i-+o);return 0===d?0:d}function Il(e,t){return+_l(e)-+_l(t)}function Dl(e,t,a){const r=Il(e,t)/1e3;return(s=null===a||void 0===a?void 0:a.roundingMethod,e=>{const t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(r);var s}function Ll(e,t,a){var r,s;const n=Nl(),l=null!==(r=null!==(s=null===a||void 0===a?void 0:a.locale)&&void 0!==s?s:n.locale)&&void 0!==r?r:kl,i=El(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},a,{addSuffix:null===a||void 0===a?void 0:a.addSuffix,comparison:i}),[d,c]=Cl(null===a||void 0===a?void 0:a.in,...i>0?[t,e]:[e,t]),m=Dl(c,d),u=(Sl(c)-Sl(d))/1e3,x=Math.round((m-u)/60);let h;if(x<2)return null!==a&&void 0!==a&&a.includeSeconds?m<5?l.formatDistance("lessThanXSeconds",5,o):m<10?l.formatDistance("lessThanXSeconds",10,o):m<20?l.formatDistance("lessThanXSeconds",20,o):m<40?l.formatDistance("halfAMinute",0,o):m<60?l.formatDistance("lessThanXMinutes",1,o):l.formatDistance("xMinutes",1,o):0===x?l.formatDistance("lessThanXMinutes",1,o):l.formatDistance("xMinutes",x,o);if(x<45)return l.formatDistance("xMinutes",x,o);if(x<90)return l.formatDistance("aboutXHours",1,o);if(x<1440){const e=Math.round(x/60);return l.formatDistance("aboutXHours",e,o)}if(x<2520)return l.formatDistance("xDays",1,o);if(x<ml){const e=Math.round(x/1440);return l.formatDistance("xDays",e,o)}if(x<86400)return h=Math.round(x/ml),l.formatDistance("aboutXMonths",h,o);if(h=Rl(c,d),h<12){const e=Math.round(x/ml);return l.formatDistance("xMonths",e,o)}{const e=h%12,t=Math.trunc(h/12);return e<3?l.formatDistance("aboutXYears",t,o):e<9?l.formatDistance("overXYears",t,o):l.formatDistance("almostXYears",t+1,o)}}function Ul(e,t){return Ll(e,hl(e),t)}const zl=e=>{let{threads:t=[],selectedThread:a=null,selectedThreadContent:r=null,onThreadSelect:n,onBack:l,splitRatio:i=.4,minPanelWidth:o=300,maxPanelWidth:d=600,orientation:c="horizontal",showThreadPreview:m=!0,onThreadAction:x,className:h=""}=e;const[g,p]=(0,s.useState)(i),[v,y]=(0,s.useState)(!1),[b,f]=(0,s.useState)(null),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!!a),_=(0,s.useRef)(null),S=(0,s.useRef)(null),C=(0,s.useCallback)((e=>{n&&n(e),N(!0)}),[n]),E=(0,s.useCallback)((()=>{N(!1),l&&l()}),[l]),T=(0,s.useCallback)((e=>{e.preventDefault(),y(!0);const t=e.clientX||e.touches&&e.touches[0].clientX,a=e.clientY||e.touches&&e.touches[0].clientY;f({x:t,y:a,ratio:g}),document.addEventListener("mousemove",A),document.addEventListener("mouseup",M),document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",M)}),[g]),A=(0,s.useCallback)((e=>{if(!v||!b||!_.current)return;e.preventDefault();const t=e.clientX||e.touches&&e.touches[0].clientX,a=e.clientY||e.touches&&e.touches[0].clientY,r=_.current.getBoundingClientRect();let s;if("horizontal"===c){const e=(t-b.x)/r.width;s=b.ratio+e}else{const e=(a-b.y)/r.height;s=b.ratio+e}const n="horizontal"===c?r.width:r.height,l=o/n,i=d/n;s=Math.max(l,Math.min(i,s)),p(s)}),[v,b,c,o,d]),M=(0,s.useCallback)((()=>{y(!1),f(null),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",M),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",M)}),[A]),P=e=>{try{return Ul(new Date(e),{addSuffix:!0})}catch(t){return"Unknown time"}},R=e=>{let{threads:t,selectedThread:a,onThreadSelect:r}=e;return(0,u.jsxs)("div",{className:"tablet-thread-list",children:[(0,u.jsxs)("div",{className:"tablet-thread-list-header",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Discussions"}),(0,u.jsx)("div",{className:"flex items-center space-x-2",children:(0,u.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," threads"]})})]}),(0,u.jsx)("div",{className:"tablet-thread-list-content",children:t.map((e=>{var t;return(0,u.jsx)("div",{className:"tablet-thread-item ".concat((null===a||void 0===a?void 0:a.id)===e.id?"tablet-thread-item-selected":""),onClick:()=>r(e),children:(0,u.jsx)("div",{className:"tablet-thread-item-main",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsxs)("div",{className:"flex flex-col items-center space-y-1 flex-shrink-0 pt-1",children:[e.isPinned&&(0,u.jsx)(Zn,{className:"w-4 h-4 text-red-500"}),e.isHot&&(0,u.jsx)(ue,{className:"w-4 h-4 text-orange-500"})]}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("h3",{className:"tablet-thread-title",children:e.title}),m&&e.excerpt&&(0,u.jsx)("p",{className:"tablet-thread-excerpt",children:e.excerpt}),(0,u.jsxs)("div",{className:"tablet-thread-meta",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Kn,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:(null===(t=e.author)||void 0===t?void 0:t.username)||"Anonymous"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Kt,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:e.replies_count||0})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Ys,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:e.views_count||0})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Jn,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:P(e.updated_at||e.created_at)})]})]}),e.tags&&e.tags.length>0&&(0,u.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,2).map(((e,t)=>(0,u.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:e},t))),e.tags.length>2&&(0,u.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full",children:["+",e.tags.length-2]})]})]})]}),(0,u.jsxs)("div",{className:"flex flex-col items-center flex-shrink-0",children:[(0,u.jsx)("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:(e.upvotes||0)-(e.downvotes||0)}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"votes"})]})]})})},e.id)}))})]})},I=e=>{var t;let{thread:a,content:r,onBack:s,showBackButton:n=!1}=e;return(0,u.jsxs)("div",{className:"tablet-thread-detail",children:[(0,u.jsx)("div",{className:"tablet-thread-detail-header",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[n&&(0,u.jsx)("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 tablet-touch-target",children:(0,u.jsx)(cl,{className:"w-5 h-5"})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:(null===a||void 0===a?void 0:a.title)||"Select a thread"}),a&&(0,u.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Kn,{className:"w-4 h-4"}),(0,u.jsx)("span",{children:(null===(t=a.author)||void 0===t?void 0:t.username)||"Anonymous"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(Jn,{className:"w-4 h-4"}),(0,u.jsx)("span",{children:P(a.created_at)})]})]})]})]})}),(0,u.jsx)("div",{className:"tablet-thread-detail-content",children:r||(a?(0,u.jsxs)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[(0,u.jsx)(Kt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,u.jsx)("p",{children:"Thread content will be loaded here"})]}):(0,u.jsxs)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[(0,u.jsx)(rl,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,u.jsx)("p",{children:"Select a thread from the list to view its content"})]}))})]})};return(0,u.jsxs)("div",{ref:_,className:"tablet-split-view ".concat(h," ").concat("vertical"===c?"tablet-split-vertical":"tablet-split-horizontal"),children:[(0,u.jsx)("div",{className:"tablet-split-mobile lg:hidden",children:w?(0,u.jsx)(I,{thread:a,content:r,onBack:E,showBackButton:!0}):(0,u.jsx)(R,{threads:t,selectedThread:a,onThreadSelect:C})}),(0,u.jsxs)("div",{className:"tablet-split-desktop hidden lg:flex",children:[(0,u.jsx)("div",{className:"tablet-split-panel tablet-split-left",style:{["horizontal"===c?"width":"height"]:j?"60px":"".concat(100*g,"%")},children:j?(0,u.jsx)("div",{className:"flex flex-col items-center justify-center h-full p-4",children:(0,u.jsx)("button",{onClick:()=>k(!1),className:"p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 tablet-touch-target",children:(0,u.jsx)(ve,{className:"w-5 h-5"})})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(R,{threads:t,selectedThread:a,onThreadSelect:C}),(0,u.jsx)("button",{onClick:()=>k(!0),className:"absolute top-4 right-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 tablet-touch-target z-10",children:(0,u.jsx)(ol,{className:"w-4 h-4"})})]})}),!j&&(0,u.jsx)("div",{ref:S,className:"tablet-split-resizer ".concat("horizontal"===c?"tablet-split-resizer-vertical":"tablet-split-resizer-horizontal"," ").concat(v?"tablet-split-resizer-dragging":""),onMouseDown:T,onTouchStart:T,children:(0,u.jsx)("div",{className:"tablet-split-resizer-handle"})}),(0,u.jsx)("div",{className:"tablet-split-panel tablet-split-right",style:{["horizontal"===c?"width":"height"]:j?"calc(100% - 60px)":"".concat(100*(1-g),"%")},children:(0,u.jsx)(I,{thread:a,content:r,onBack:E,showBackButton:!1})})]}),(0,u.jsx)("style",{jsx:!0,children:"\n        .tablet-split-view {\n          width: 100%;\n          height: 100vh;\n          overflow: hidden;\n          background: #f8f9fa;\n          contain: layout style;\n        }\n\n        .dark .tablet-split-view {\n          background: #111827;\n        }\n\n        .tablet-split-desktop {\n          height: 100%;\n          position: relative;\n        }\n\n        .tablet-split-horizontal .tablet-split-desktop {\n          flex-direction: row;\n        }\n\n        .tablet-split-vertical .tablet-split-desktop {\n          flex-direction: column;\n        }\n\n        .tablet-split-panel {\n          background: white;\n          overflow: hidden;\n          position: relative;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          contain: layout style paint;\n        }\n\n        .dark .tablet-split-panel {\n          background: #1f2937;\n        }\n\n        .tablet-split-left {\n          border-right: 1px solid #e5e7eb;\n        }\n\n        .dark .tablet-split-left {\n          border-color: #374151;\n        }\n\n        .tablet-split-vertical .tablet-split-left {\n          border-right: none;\n          border-bottom: 1px solid #e5e7eb;\n        }\n\n        .dark .tablet-split-vertical .tablet-split-left {\n          border-color: #374151;\n        }\n\n        .tablet-split-resizer {\n          background: transparent;\n          cursor: col-resize;\n          user-select: none;\n          touch-action: none;\n          z-index: 10;\n          position: relative;\n          transition: background-color 0.2s ease;\n        }\n\n        .tablet-split-resizer-vertical {\n          width: 6px;\n          cursor: col-resize;\n        }\n\n        .tablet-split-resizer-horizontal {\n          height: 6px;\n          cursor: row-resize;\n        }\n\n        .tablet-split-resizer:hover,\n        .tablet-split-resizer-dragging {\n          background: #ef4444;\n        }\n\n        .tablet-split-resizer-handle {\n          position: absolute;\n          background: transparent;\n          border-radius: 4px;\n        }\n\n        .tablet-split-resizer-vertical .tablet-split-resizer-handle {\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 20px;\n          height: 60px;\n        }\n\n        .tablet-split-resizer-horizontal .tablet-split-resizer-handle {\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          width: 60px;\n          height: 20px;\n        }\n\n        .tablet-split-resizer:hover .tablet-split-resizer-handle,\n        .tablet-split-resizer-dragging .tablet-split-resizer-handle {\n          background: rgba(239, 68, 68, 0.1);\n        }\n\n        /* Thread List Styles */\n        .tablet-thread-list {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        }\n\n        .tablet-thread-list-header {\n          padding: 1.5rem 1.5rem 1rem;\n          border-bottom: 1px solid #e5e7eb;\n          background: #f8f9fa;\n          flex-shrink: 0;\n        }\n\n        .dark .tablet-thread-list-header {\n          border-color: #374151;\n          background: #111827;\n        }\n\n        .tablet-thread-list-content {\n          flex: 1;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n        }\n\n        .tablet-thread-item {\n          padding: 1rem 1.5rem;\n          border-bottom: 1px solid #f3f4f6;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          position: relative;\n        }\n\n        .tablet-thread-item:hover {\n          background: #f9fafb;\n        }\n\n        .tablet-thread-item-selected {\n          background: #fef2f2;\n          border-left: 4px solid #ef4444;\n        }\n\n        .dark .tablet-thread-item {\n          border-color: #374151;\n        }\n\n        .dark .tablet-thread-item:hover {\n          background: #374151;\n        }\n\n        .dark .tablet-thread-item-selected {\n          background: #1f1815;\n          border-color: #f87171;\n        }\n\n        .tablet-thread-title {\n          font-weight: 600;\n          color: #1f2937;\n          font-size: 0.95rem;\n          line-height: 1.4;\n          margin-bottom: 0.5rem;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n        }\n\n        .dark .tablet-thread-title {\n          color: #f9fafb;\n        }\n\n        .tablet-thread-excerpt {\n          font-size: 0.85rem;\n          color: #6b7280;\n          line-height: 1.4;\n          margin-bottom: 0.75rem;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n        }\n\n        .dark .tablet-thread-excerpt {\n          color: #9ca3af;\n        }\n\n        .tablet-thread-meta {\n          margin-top: 0.75rem;\n        }\n\n        /* Thread Detail Styles */\n        .tablet-thread-detail {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        }\n\n        .tablet-thread-detail-header {\n          padding: 1.5rem;\n          border-bottom: 1px solid #e5e7eb;\n          background: #f8f9fa;\n          flex-shrink: 0;\n        }\n\n        .dark .tablet-thread-detail-header {\n          border-color: #374151;\n          background: #111827;\n        }\n\n        .tablet-thread-detail-content {\n          flex: 1;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch;\n        }\n\n        /* Touch targets */\n        .tablet-touch-target {\n          min-height: 44px;\n          min-width: 44px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          touch-action: manipulation;\n        }\n\n        /* Mobile optimizations */\n        .tablet-split-mobile {\n          height: 100vh;\n          overflow: hidden;\n        }\n\n        /* Performance optimizations */\n        @media (prefers-reduced-motion: reduce) {\n          .tablet-split-panel,\n          .tablet-split-resizer,\n          .tablet-thread-item {\n            transition: none !important;\n          }\n        }\n\n        /* High DPI optimizations */\n        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {\n          .tablet-split-view {\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n          }\n        }\n\n        /* Custom scrollbar for thread list */\n        .tablet-thread-list-content::-webkit-scrollbar {\n          width: 6px;\n        }\n\n        .tablet-thread-list-content::-webkit-scrollbar-track {\n          background: #f1f5f9;\n        }\n\n        .tablet-thread-list-content::-webkit-scrollbar-thumb {\n          background: #cbd5e1;\n          border-radius: 3px;\n        }\n\n        .tablet-thread-list-content::-webkit-scrollbar-thumb:hover {\n          background: #94a3b8;\n        }\n\n        .dark .tablet-thread-list-content::-webkit-scrollbar-track {\n          background: #374151;\n        }\n\n        .dark .tablet-thread-list-content::-webkit-scrollbar-thumb {\n          background: #6b7280;\n        }\n\n        .dark .tablet-thread-list-content::-webkit-scrollbar-thumb:hover {\n          background: #9ca3af;\n        }\n      "})]})},Ol=se("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);if("undefined"!==typeof document&&!document.getElementById("mobile-forum-styles")){const e=document.createElement("style");e.id="mobile-forum-styles",e.textContent="\n  .mobile-forum-wrapper {\n    contain: layout style;\n    will-change: transform;\n    -webkit-overflow-scrolling: touch;\n  }\n  \n  .touch-optimized {\n    min-height: 44px;\n    min-width: 44px;\n    -webkit-tap-highlight-color: rgba(239, 68, 68, 0.1);\n    tap-highlight-color: rgba(239, 68, 68, 0.1);\n  }\n  \n  .mobile-thread-list {\n    contain: strict;\n    will-change: transform;\n  }\n  \n  .line-clamp-2 {\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n  }\n  \n  .tablet-forum-layout-wrapper {\n    height: 100vh;\n    overflow: hidden;\n  }\n  \n  .tablet-forum-sidebar,\n  .tablet-forum-activity {\n    height: 100%;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n  \n  @media (prefers-reduced-motion: reduce) {\n    .mobile-forum-wrapper *,\n    .tablet-forum-layout-wrapper * {\n      animation-duration: 0.01ms !important;\n      transition-duration: 0.01ms !important;\n    }\n  }\n  \n  @media (max-width: 767px) {\n    .mobile-input-no-zoom {\n      font-size: 16px !important;\n      transform: translateZ(0);\n    }\n    \n    .scrollbar-hide {\n      -ms-overflow-style: none;\n      scrollbar-width: none;\n    }\n    \n    .scrollbar-hide::-webkit-scrollbar {\n      display: none;\n    }\n  }\n",document.head.appendChild(e)}const Fl=function(e){let{navigateTo:t}=e;const{isAuthenticated:a,isAdmin:r,isModerator:n,api:l,user:i}=b(),[o,d]=(0,s.useState)("all"),[m,x]=(0,s.useState)("latest"),[h,g]=(0,s.useState)(""),[p,v]=(0,s.useState)([]),[y,f]=(0,s.useState)([]),[j,k]=(0,s.useState)(!0),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)("list"),[C,E]=(0,s.useState)(!1),[T,A]=(0,s.useState)(0),[M,P]=(0,s.useState)(!1),[R,I]=(0,s.useState)([]),[D,L]=(0,s.useState)(null),[U,z]=(0,s.useState)("split-view"),[O,F]=(0,s.useState)(window.innerWidth<768),[B,W]=(0,s.useState)(!1),[H,V]=(0,s.useState)(1),[q,G]=(0,s.useState)(!1),Y=(0,s.useRef)(null),Z=(0,s.useRef)(0),K=(0,s.useRef)(null),J=(0,s.useCallback)((async e=>{try{var t,a;k(!0);const s=new URLSearchParams;"all"!==o&&s.append("category",o),m&&s.append("sort",m);const n="string"===typeof(r=e||"")?r:"";n.trim()&&s.append("search",n.trim());const[i,d]=await Promise.all([l.get("/forums/threads?".concat(s.toString())),l.get("/forums/categories")]),c=(null===(t=i.data)||void 0===t?void 0:t.data)||i.data||[],u=(null===(a=d.data)||void 0===a?void 0:a.data)||d.data||[];console.log("Forum threads loaded:",c.length),console.log("Forum categories loaded:",u.length),v(c),f(u)}catch(s){console.error("ForumsPage: Backend API failed:",s),v([]),f([])}finally{k(!1)}var r}),[l,o,m]);(0,s.useEffect)((()=>{J(h)}),[o,m,J]),(0,s.useEffect)((()=>{if(!h.trim())return void J("");const e=setTimeout((()=>{J(h)}),500);return()=>clearTimeout(e)}),[h,J]);const Q=(0,s.useCallback)((e=>{Y.current&&0===Y.current.scrollTop&&(Z.current=e.touches[0].clientY)}),[]),X=(0,s.useCallback)((e=>{if(Z.current&&Y.current&&0===Y.current.scrollTop){const t=e.touches[0].clientY,a=Math.max(0,Math.min(120,t-Z.current));A(a)}}),[]),$=(0,s.useCallback)((async()=>{if(T>80){E(!0);try{await J(h)}finally{E(!1)}}A(0),Z.current=0}),[T,J,h]),ee=(0,s.useCallback)((async e=>{if(!e||e.length<2)I([]);else try{var t;const a=await l.get("/forums/search/suggestions?q=".concat(encodeURIComponent(e)));I((null===(t=a.data)||void 0===t?void 0:t.suggestions)||[])}catch(a){console.error("Failed to fetch search suggestions:",a),I([])}}),[l]),te=async e=>{try{await l.post("/user/forums/threads/".concat(e,"/bookmark"));const t=document.createElement("div");t.className="fixed bottom-20 left-4 right-4 bg-green-500 text-white p-3 rounded-lg text-center z-50",t.textContent="Thread bookmarked!",document.body.appendChild(t),setTimeout((()=>document.body.removeChild(t)),2e3)}catch(t){console.error("Failed to bookmark thread:",t)}},ae=async e=>{if(navigator.share)try{await navigator.share({title:e.title,text:"Check out this discussion: ".concat(e.title),url:"".concat(window.location.origin,"/forums/threads/").concat(e.id)})}catch(t){console.error("Failed to share:",t)}else{const t="".concat(window.location.origin,"/forums/threads/").concat(e.id);navigator.clipboard.writeText(t).then((()=>{const e=document.createElement("div");e.className="fixed bottom-20 left-4 right-4 bg-blue-500 text-white p-3 rounded-lg text-center z-50",e.textContent="Link copied to clipboard!",document.body.appendChild(e),setTimeout((()=>document.body.removeChild(e)),2e3)}))}},re=(0,s.useCallback)((e=>{L(e),t&&t("thread-detail",{id:e.id})}),[t]),se=(0,s.useCallback)((async(e,t)=>{if(a)try{await l.post("/user/forums/threads/".concat(e,"/vote"),{vote_type:t}),v((a=>a.map((a=>{if(a.id===e){const e=c({},a);return"up"===t?(e.upvotes=(e.upvotes||0)+1,e.userVote="up"):"down"===t&&(e.downvotes=(e.downvotes||0)+1,e.userVote="down"),e}return a}))))}catch(r){console.error("Failed to vote on thread:",r)}}),[l,a]),ne=(0,s.useCallback)((async()=>{if(!q&&B){G(!0);try{var e;const t=new URLSearchParams;t.append("page",H+1),"all"!==o&&t.append("category",o),m&&t.append("sort",m),h.trim()&&t.append("search",h.trim());const a=await l.get("/forums/threads?".concat(t.toString())),r=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data||[];r.length>0?(v((e=>[...e,...r])),V((e=>e+1)),W(r.length>=20)):W(!1)}catch(t){console.error("Failed to load more threads:",t)}finally{G(!1)}}}),[q,B,H,o,m,h,l]),le=(0,s.useCallback)((()=>{t&&t("create-thread")}),[t]),ie=(0,s.useCallback)((e=>{g(e.query||e.title),P(!1),I([])}),[]),oe=e=>m===e?(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"\u25bc"}):null,de=e=>{const t=y.find((t=>t.slug===e));return(null===t||void 0===t?void 0:t.color)||"#6b7280"},ce=e=>{const t=y.find((t=>t.slug===e));return(null===t||void 0===t?void 0:t.icon)||""};if(j)return(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading forums..."})]})});const me=window.innerWidth<768,ue=window.innerWidth>=768&&window.innerWidth<1200;return window.innerWidth,me?(0,u.jsxs)("div",{className:"mobile-forum-wrapper min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,u.jsx)(bn,{categories:y,selectedCategory:o,onCategoryChange:d,searchQuery:h,onSearchChange:g,sortBy:m,onSortChange:x,viewMode:_,onViewModeChange:S,onCreateThread:le,showSearchSuggestions:M&&R.length>0,searchSuggestions:R,onSearchSuggestionSelect:ie,isAuthenticated:a}),(0,u.jsx)("div",{className:"pt-20 pb-20 px-0",children:O?(0,u.jsx)(al,{threads:p,onThreadClick:re,onVote:se,onBookmark:te,onShare:ae,onLoadMore:ne,hasMore:B,loading:q,viewMode:_,selectedThreadId:null===D||void 0===D?void 0:D.id,isAuthenticated:a,height:window.innerHeight-160,className:"mobile-thread-list"}):(0,u.jsx)("div",{className:"space-y-1",children:p.map((e=>{var t;return(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors touch-optimized",onClick:()=>re(e),children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:e.title}),(0,u.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("span",{children:(null===(t=e.author)||void 0===t?void 0:t.username)||"Anonymous"}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:Ie(e.created_at)}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsxs)("span",{children:[e.replies_count||0," replies"]})]})]}),(0,u.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,u.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(e.upvotes||0)-(e.downvotes||0)}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"votes"})]})]})},e.id)}))})})]}):ue?(0,u.jsx)(dl,{defaultLayout:U,onLayoutChange:z,leftPanel:(0,u.jsx)("div",{className:"tablet-forum-sidebar",children:(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Categories"}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("button",{onClick:()=>d("all"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors ".concat("all"===o?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"All Categories"}),y.map((e=>(0,u.jsxs)("button",{onClick:()=>d(e.slug),className:"w-full text-left px-3 py-2 rounded-lg transition-colors ".concat(o===e.slug?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"),children:[e.icon," ",e.name]},e.id)))]})]})}),rightPanel:(0,u.jsx)("div",{className:"tablet-forum-activity",children:(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Activity"}),(0,u.jsx)("div",{className:"space-y-3",children:(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent activity will be shown here"})})]})}),mainContent:(0,u.jsx)(zl,{threads:p,selectedThread:D,onThreadSelect:re,showThreadPreview:!0,onThreadAction:(e,t)=>{switch(e){case"bookmark":te(t.id);break;case"share":ae(t);break;case"vote":se(t.id,"up")}},className:"h-full"}),className:"tablet-forum-layout-wrapper"}):(0,u.jsxs)("div",{ref:Y,className:"max-w-6xl mx-auto mobile-forum-container relative",onTouchStart:Q,onTouchMove:X,onTouchEnd:$,children:[T>0&&(0,u.jsx)("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-200",style:{transform:"translateX(-50%) translateY(".concat(Math.max(0,T-80),"px)")},children:(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-full p-3 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,u.jsx)(je,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 ".concat(C?"animate-spin":"")})})}),(0,u.jsxs)("div",{className:"lg:hidden sticky top-16 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg z-40 -mx-4 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Forums"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:()=>N(!w),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 touch-optimized",children:(0,u.jsx)(yn,{className:"w-5 h-5"})}),a&&(0,u.jsx)("button",{onClick:()=>t&&t("create-thread"),className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors touch-optimized",children:"New"})]})]}),(0,u.jsxs)("div",{className:"relative mb-3",children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,u.jsx)("input",{ref:K,type:"text",value:h,onChange:e=>{g(e.target.value),P(!0),ee(e.target.value)},placeholder:"Search discussions...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-100 dark:bg-gray-800 border-none rounded-lg text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-red-500 mobile-input-no-zoom"})]}),M&&R.length>0&&(0,u.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-60 overflow-y-auto",children:R.map(((e,t)=>(0,u.jsxs)("button",{onClick:()=>{return t=e.query,g(t),P(!1),void I([]);var t},className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.category})]},t)))})]}),(0,u.jsxs)("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide pb-2",children:[(0,u.jsx)("button",{onClick:()=>d("all"),className:"flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-colors ".concat("all"===o?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"),children:"All"}),y.map((e=>(0,u.jsxs)("button",{onClick:()=>d(e.slug),className:"flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ".concat(o===e.slug?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"),children:[e.icon," ",e.name]},e.id)))]})]}),(0,u.jsxs)("div",{className:"hidden lg:flex items-center justify-between mb-4",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Forums"}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(r()||n())&&(0,u.jsx)("button",{onClick:()=>t&&t("admin-forum-categories"),className:"px-3 py-1.5 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors",children:"Manage Categories"}),a&&(0,u.jsx)("button",{onClick:()=>t&&t("create-thread"),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"New Thread"})]})]}),(0,u.jsx)("div",{className:"card p-3 mb-4",children:(0,u.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Search"}),(0,u.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Search threads...",className:"text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded px-3 py-1 text-gray-900 dark:text-white flex-1 md:max-w-xs"}),h&&(0,u.jsx)("button",{onClick:()=>g(""),className:"text-xs text-gray-500 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Clear search",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Category:"}),(0,u.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Categories"}),y.map((e=>(0,u.jsxs)("option",{value:e.slug,children:[e.icon," ",e.name]},e.id)))]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),(0,u.jsxs)("button",{onClick:()=>x("latest"),className:"text-sm font-medium transition-colors ".concat("latest"===m?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400"),children:["Latest ",oe("latest")]}),(0,u.jsxs)("button",{onClick:()=>x("popular"),className:"text-sm font-medium transition-colors ".concat("popular"===m?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400"),children:["Popular ",oe("popular")]}),(0,u.jsxs)("button",{onClick:()=>x("hot"),className:"text-sm font-medium transition-colors ".concat("hot"===m?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400"),children:["Hot ",oe("hot")]})]})]})}),p.length>0?(0,u.jsxs)("div",{className:"space-y-1",children:[(0,u.jsxs)("div",{className:"hidden md:grid md:grid-cols-10 gap-4 px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-500 bg-gray-50 dark:bg-gray-800 rounded",children:[(0,u.jsx)("div",{className:"col-span-6",children:"THREAD"}),(0,u.jsx)("div",{className:"col-span-2 text-center",children:"REPLIES"}),(0,u.jsx)("div",{className:"col-span-2 text-center",children:"LAST REPLY"})]}),p.map((e=>{var a,s,i,o,d,m,x,h,g,y,b,f,j,k,w,N,_;return(0,u.jsxs)("div",{className:"card mobile-card relative overflow-hidden touch-optimized",children:[(0,u.jsx)("div",{className:"lg:hidden",children:(0,u.jsxs)("div",{className:"p-4 cursor-pointer",onClick:()=>t&&t("thread-detail",{id:e.id}),children:[(0,u.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[e.pinned&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",children:"\ud83d\udccc PINNED"}),e.locked&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",children:"\ud83d\udd12 LOCKED"}),(0,u.jsxs)("span",{className:"px-2 py-1 text-xs font-bold rounded text-white",style:{backgroundColor:(null===(a=e.category)||void 0===a?void 0:a.color)||de(e.category_slug)},children:[ce((null===(s=e.category)||void 0===s?void 0:s.slug)||e.category_slug)," ",(null===(i=e.category)||void 0===i?void 0:i.name)||e.category_name||"General"]})]}),(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:e.title}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,u.jsx)(Qe,{user:e.author,showAvatar:!0,showHeroFlair:!1,showTeamFlair:!1,size:"xs",clickable:!1}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ie((null===(o=e.meta)||void 0===o?void 0:o.created_at)||e.created_at)})]})]}),(0,u.jsx)("div",{className:"flex-shrink-0 ml-3",children:(0,u.jsx)("button",{onClick:e=>{e.stopPropagation()},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400",children:(0,u.jsx)(Ol,{className:"w-4 h-4"})})})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[(0,u.jsx)(Kt,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"text-sm font-medium",children:(null===(d=e.stats)||void 0===d?void 0:d.replies)||e.posts_count||e.replies_count||e.replies||0})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[(0,u.jsx)(Ys,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"text-sm",children:(null===(m=e.stats)||void 0===m?void 0:m.views)||e.views||0})]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),te(e.id)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 hover:text-blue-500 transition-colors",children:(0,u.jsx)(Xn,{className:"w-4 h-4"})}),(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),ae(e)},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 hover:text-green-500 transition-colors",children:(0,u.jsx)($n,{className:"w-4 h-4"})})]})]}),(0,u.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:(null===(x=e.stats)||void 0===x?void 0:x.replies)>0||null!==(h=e.meta)&&void 0!==h&&h.last_reply_at?(0,u.jsxs)(u.Fragment,{children:["Last reply ",Ie((null===(g=e.meta)||void 0===g?void 0:g.last_reply_at)||e.last_reply_at||e.last_post_at||e.updated_at)]}):"No replies yet"}),(0,u.jsx)(ke,{className:"w-4 h-4 text-gray-400 transform -rotate-90"})]})})]})}),(0,u.jsxs)("div",{className:"hidden lg:block p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer border-l-4 border-transparent hover:border-red-600",onClick:()=>t&&t("thread-detail",{id:e.id}),children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-10 gap-4 items-center",children:[(0,u.jsx)("div",{className:"md:col-span-6",children:(0,u.jsx)("div",{className:"flex items-start space-x-3",children:(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[e.pinned&&(0,u.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-bold rounded bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",children:"\ud83d\udccc PINNED"}),e.locked&&(0,u.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-bold rounded bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",children:"\ud83d\udd12 LOCKED"}),(0,u.jsxs)("span",{className:"px-2 py-0.5 text-xs font-bold rounded-full text-white",style:{backgroundColor:(null===(y=e.category)||void 0===y?void 0:y.color)||de(e.category_slug)},children:[ce((null===(b=e.category)||void 0===b?void 0:b.slug)||e.category_slug)," ",(null===(f=e.category)||void 0===f?void 0:f.name)||e.category_name||"General"]})]}),(0,u.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1 hover:text-red-600 dark:hover:text-red-400 transition-colors line-clamp-1",children:e.title}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:"by"}),(0,u.jsx)(Qe,{user:e.author,showAvatar:!0,showHeroFlair:!0,showTeamFlair:!0,size:"xs",clickable:!1}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ie((null===(j=e.meta)||void 0===j?void 0:j.created_at)||e.created_at)})]})]})})}),(0,u.jsxs)("div",{className:"md:col-span-2 md:text-center",children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null===(k=e.stats)||void 0===k?void 0:k.replies)||e.posts_count||e.replies_count||e.replies||0}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 md:hidden",children:"replies"})]}),(0,u.jsx)("div",{className:"md:col-span-2 md:text-center",children:(null===(w=e.stats)||void 0===w?void 0:w.replies)>0||null!==(N=e.meta)&&void 0!==N&&N.last_reply_at?(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ie((null===(_=e.meta)||void 0===_?void 0:_.last_reply_at)||e.last_reply_at||e.last_post_at||e.updated_at)}):(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:"No replies"})})]}),(r()||n())&&(0,u.jsxs)("div",{className:"md:col-span-10 mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{const a=[...p];v(a.map((a=>a.id===e?c(c({},a),{},{pinned:t}):a)));try{const a="/admin/forums/threads/".concat(e,t?"/pin":"/unpin");await l.post(a),console.log("\u2705 Thread ".concat(t?"pinned":"unpinned"," successfully"))}catch(r){console.error("Error pinning/unpinning thread:",r),v(a),alert("Failed to "+(t?"pin":"unpin")+" thread")}})(e.id,!e.pinned)},className:"px-2 py-1 text-xs rounded transition-colors ".concat(e.pinned?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/30":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.pinned?"\ud83d\udccc Unpin":"\ud83d\udccc Pin"}),(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(e,t)=>{const a=[...p];v(a.map((a=>a.id===e?c(c({},a),{},{locked:t}):a)));try{const a="/admin/forums/threads/".concat(e,t?"/lock":"/unlock");await l.post(a),console.log("\u2705 Thread ".concat(t?"locked":"unlocked"," successfully"))}catch(r){console.error("Error locking/unlocking thread:",r),v(a),alert("Failed to "+(t?"lock":"unlock")+" thread")}})(e.id,!e.locked)},className:"px-2 py-1 text-xs rounded transition-colors ".concat(e.locked?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/30":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.locked?"\ud83d\udd13 Unlock":"\ud83d\udd12 Lock"}),(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this thread? This action cannot be undone.")){const a=[...p];v(a.filter((t=>t.id!==e)));try{await l.post("/admin/forums/threads/".concat(e,"/delete")),console.log("\u2705 Thread deleted successfully")}catch(t){console.error("Error deleting thread:",t),v(a),alert("Failed to delete thread")}}})(e.id)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"\ud83d\uddd1\ufe0f Delete"})]})]})]},e.id)}))]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:h?"No Results":"No Threads"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:h?"No Search Results":"No Threads Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:h?'No threads found matching "'.concat(h,'". Try different keywords or browse categories.'):"all"!==o?"No threads found in the selected category.":"No forum threads available. Be the first to start a discussion!"}),(0,u.jsxs)("div",{className:"flex justify-center space-x-4",children:[h&&(0,u.jsx)("button",{onClick:()=>g(""),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Clear Search"}),"all"!==o&&!h&&(0,u.jsx)("button",{onClick:()=>d("all"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"View All Categories"}),a&&(0,u.jsx)("button",{onClick:()=>t&&t("create-thread"),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Start New Thread"})]})]}),!a&&(0,u.jsxs)("div",{className:"card p-6 mt-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Join the Community"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sign in to create threads, reply to posts, and participate in discussions."}),(0,u.jsx)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("mrvl-show-auth-modal")),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign In to Participate"})]})]})};const Bl=function(e){var t,a,r,n,l,i,o,d,m,x,h,g,p,v,y;let{params:f,navigateTo:j}=e;const k=null===f||void 0===f?void 0:f.id,{isAuthenticated:w,isAdmin:N,isModerator:_,api:S,user:C}=b(),[E,T]=(0,s.useState)(null),[A,M]=(0,s.useState)([]),[P,R]=(0,s.useState)(!0),[I,D]=(0,s.useState)(""),[L,U]=(0,s.useState)(null),[z,O]=(0,s.useState)(!1),[F,B]=(0,s.useState)(null),[W,H]=(0,s.useState)(""),[V,q]=(0,s.useState)(!1),[G,Y]=(0,s.useState)(1),[Z,K]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(!1),X=e=>"string"===typeof e?e:null===e||void 0===e?"":"object"===typeof e?e.message?e.message:e.error&&"string"===typeof e.error?e.error:e.content?String(e.content):"":String(e),$=(0,s.useCallback)((async()=>{try{var e;R(!0);const t=(new Date).getTime(),a=await S.get("/forums/threads/".concat(k,"?t=").concat(t),{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),r=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data,s=r.posts||[];if(!r||!r.id)return console.error("\u274c Invalid thread data received for thread ".concat(k)),T(null),void M([]);T(r),M(s),K(s.length>=20)}catch(r){var t,a;console.error("\u274c ThreadDetailPage: Backend API failed:",r),404===(null===(t=r.response)||void 0===t?void 0:t.status)?console.error("\u274c Thread ".concat(k," not found (404)")):403===(null===(a=r.response)||void 0===a?void 0:a.status)&&console.error("\u274c Access denied to thread ".concat(k," (403)")),T(null),M([])}finally{R(!1)}}),[S,k]);(0,s.useEffect)((()=>{$()}),[$]);const ee=e=>{if(!e)return"Unknown";const t=new Date(e);if(isNaN(t.getTime()))return"Unknown";const a=new Date,r=Math.floor((a-t)/36e5);if(r<1)return"Just now";if(r<24)return"".concat(r,"h");if(r<48)return"Yesterday";const s=Math.floor(r/24);if(s<30)return"".concat(s,"d");const n=Math.floor(s/30);if(n<12)return"".concat(n,"mo");const l=Math.floor(n/12);return"".concat(l,"y")},te=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const a=X(e);if(!a||"string"!==typeof a)return null;const r={};if(Array.isArray(t)&&t.forEach((e=>{if("object"===typeof e&&null!==e){const t=X(e.mention_text);t&&(r[t]=c(c({},e),{},{type:X(e.type)||"user",id:e.id||"",name:X(e.name)||"",display_name:X(e.display_name)||X(e.name)||"",username:X(e.username)||"",team_name:X(e.team_name)||"",player_name:X(e.player_name)||""}))}else{const t=X(e);t&&(r[t]={mention_text:t,type:"user",id:"",name:t,display_name:t})}})),!t||0===t.length)return a;const s=[...t].sort(((e,t)=>(e.position_start||0)-(t.position_start||0))),n=[];let l=0;return s.forEach((e=>{const t=e.mention_text,r=a.indexOf(t,l);-1!==r&&(r>l&&n.push(a.slice(l,r)),n.push((0,u.jsx)(st,{mention:e,navigateTo:j},"mention-".concat(r,"-").concat(e.id))),l=r+t.length)})),l<a.length&&n.push(a.slice(l)),n.length>0?n:a},ae=async e=>{e.preventDefault();const t=X(I);if(!t.trim()||z)return;if(null!==L&&void 0!==L&&L.id&&L.id.toString().startsWith("temp-"))return void alert("Please wait for the post to be created before replying to it.");const a=[...A];try{var r;O(!0);const e={id:"temp-".concat(Date.now()),content:X(t.trim()),author:c(c({},C),{},{name:X(null===C||void 0===C?void 0:C.name),username:X(null===C||void 0===C?void 0:C.username),email:X(null===C||void 0===C?void 0:C.email),id:(null===C||void 0===C?void 0:C.id)||null,avatar_url:X(null===C||void 0===C?void 0:C.avatar_url)}),meta:{created_at:(new Date).toISOString()},is_temp:!0,upvotes:0,downvotes:0,user_vote:null,mentions:[],stats:{upvotes:0,downvotes:0},replies:[]};M(L?t=>t.map((t=>t.id===L.id?c(c({},t),{},{replies:[...t.replies||[],e]}):t)):t=>[...t,e]);const u={content:X(t.trim()),parent_id:(null===L||void 0===L?void 0:L.id)||null},x=await S.post("/user/forums/threads/".concat(k,"/posts"),u);if(201===x.status||!0===(null===(r=x.data)||void 0===r?void 0:r.success)||x.data&&!x.data.error&&x.data.post){D(""),U(null);const t=x.data.post||x.data.data||x.data;if(t&&(X(t.content)||t.id)){var s,n,l,i,o;const a=c(c({},t),{},{content:X(t.content),author:c(c({},t.author),{},{name:X(null===(s=t.author)||void 0===s?void 0:s.name),username:X(null===(n=t.author)||void 0===n?void 0:n.username),id:(null===(l=t.author)||void 0===l?void 0:l.id)||null,email:X(null===(i=t.author)||void 0===i?void 0:i.email),avatar_url:X(null===(o=t.author)||void 0===o?void 0:o.avatar_url)}),mentions:Array.isArray(t.mentions)?t.mentions.map((e=>"object"===typeof e&&null!==e?c(c({},e),{},{mention_text:X(e.mention_text),name:X(e.name),display_name:X(e.display_name),type:X(e.type),id:e.id||null,username:X(e.username),team_name:X(e.team_name),player_name:X(e.player_name)}):{mention_text:X(e),name:X(e),display_name:X(e),type:"user",id:null})):[],meta:t.meta||{},stats:t.stats||{},upvotes:t.upvotes||0,downvotes:t.downvotes||0,user_vote:t.user_vote||null,replies:Array.isArray(t.replies)?t.replies:[]});M(L?t=>t.map((t=>t.id===L.id?c(c({},t),{},{replies:t.replies.map((t=>t.id===e.id?a:t))}):t)):t=>t.map((t=>t.id===e.id?a:t)))}else await $();const a=document.createElement("div");a.textContent="\u2705 Reply posted successfully",a.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",document.body.appendChild(a),setTimeout((()=>document.body.removeChild(a)),3e3)}else{var d,m;M(a),console.error("\u274c Reply submission failed:",x.data);const e=(null===(d=x.data)||void 0===d?void 0:d.message)||(null===(m=x.data)||void 0===m?void 0:m.error)||"Failed to submit reply. Please try again.";alert(e)}}catch(h){var u,x;console.error("\u274c Failed to submit reply:",h),M(a);let e="Failed to submit reply. Please try again.";const t=St(h);t.includes("Thread is locked")?(e="This thread is locked and no longer accepts replies.",await $()):t.includes("parent id is invalid")?(e="The post you are replying to no longer exists. The page will refresh.",await $()):t.includes("401")||401===(null===(u=h.response)||void 0===u?void 0:u.status)?e="Please log in again to post replies.":t.includes("403")||403===(null===(x=h.response)||void 0===x?void 0:x.status)?e="You do not have permission to reply to this thread.":"An unknown error occurred"!==t&&(e=t),alert(e)}finally{O(!1)}},re=function(e){var t,a,r,s,n,l,i,o,d;let m=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const h=e.replies&&e.replies.length>0&&x<3,g=m?{marginLeft:"".concat(Math.min(2*x,6),"rem")}:{};return(0,u.jsx)("div",{className:"".concat(m?"pl-4 border-l-2 border-gray-200 dark:border-gray-700":""," py-4 ").concat(x>0?"bg-gray-50/50 dark:bg-gray-800/50 rounded-lg":""),style:g,children:(0,u.jsxs)("div",{className:"w-full",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,u.jsx)(Qe,{user:e.author,showAvatar:!0,showHeroFlair:!0,showTeamFlair:!0,size:"sm",clickable:!1}),(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-500",children:ee((null===(t=e.meta)||void 0===t?void 0:t.created_at)||e.created_at)}),e.is_temp&&(0,u.jsxs)("span",{className:"text-xs text-blue-500 dark:text-blue-400 flex items-center",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-1"}),"Posting..."]}),e.is_edited&&!e.is_temp&&(0,u.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-600",children:["(edited ",ee((null===(a=e.meta)||void 0===a?void 0:a.updated_at)||e.edited_at),")"]}),!e.is_temp&&(0,u.jsx)(qt,{itemType:"post",itemId:e.id,initialUpvotes:void 0!==(null===(r=e.stats)||void 0===r?void 0:r.upvotes)?e.stats.upvotes:e.upvotes||0,initialDownvotes:void 0!==(null===(s=e.stats)||void 0===s?void 0:s.downvotes)?e.stats.downvotes:e.downvotes||0,userVote:e.user_vote,direction:"horizontal",size:"xs",onVoteChange:t=>{M((a=>a.map((a=>{var r,s,n,l,i,o;return a.id===e.id?c(c({},a),{},{stats:c(c({},a.stats),{},{upvotes:(null===(r=t.vote_counts)||void 0===r?void 0:r.upvotes)||(null===(s=a.stats)||void 0===s?void 0:s.upvotes)||0,downvotes:(null===(n=t.vote_counts)||void 0===n?void 0:n.downvotes)||(null===(l=a.stats)||void 0===l?void 0:l.downvotes)||0}),upvotes:(null===(i=t.vote_counts)||void 0===i?void 0:i.upvotes)||a.upvotes||0,downvotes:(null===(o=t.vote_counts)||void 0===o?void 0:o.downvotes)||a.downvotes||0,user_vote:t.user_vote}):a}))))}})]}),(0,u.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-4",children:Ct(e.content).split("\n").map(((t,a)=>(0,u.jsx)("p",{className:"mb-2 last:mb-0",children:te(X(t),e.mentions||[])},a)))}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[w&&!e.is_temp&&!(null!==(n=E.meta)&&void 0!==n&&n.locked)&&(0,u.jsx)("button",{onClick:()=>U(e),className:"text-xs text-gray-500 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Reply"}),((null===(l=e.author)||void 0===l?void 0:l.id)===(null===C||void 0===C?void 0:C.id)||N()||_())&&(0,u.jsx)("button",{onClick:()=>(e=>{B(e),H(e.content)})(e),className:"text-xs text-gray-500 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Edit"}),((null===(i=e.author)||void 0===i?void 0:i.id)===(null===C||void 0===C?void 0:C.id)||N()||_())&&(0,u.jsx)("button",{onClick:()=>(async e=>{if(!window.confirm("Are you sure you want to delete this post?"))return;const t=[...A];try{var a;O(!0);const r=A.map((t=>{if(t.id===e)return null;if(t.replies&&t.replies.length>0){const a=t.replies.filter((t=>t.id!==e));return c(c({},t),{},{replies:a})}return t})).filter((e=>null!==e));M(r);const s=await S.delete("/user/forums/posts/".concat(e));if(null!==(a=s.data)&&void 0!==a&&a.success||s.success){console.log("\u2705 Post deleted successfully");const e=document.createElement("div");e.textContent="\u2705 Post deleted successfully",e.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",document.body.appendChild(e),setTimeout((()=>document.body.removeChild(e)),3e3)}else console.warn("\u26a0\ufe0f Delete request did not return success, rolling back"),M(t),alert("Failed to delete post. Please try again.")}catch(l){var r,s,n;console.error("\u274c Failed to delete post:",l),M(t);let e="Failed to delete post. Please try again.";const a=St(l);a.includes("403")||403===(null===(r=l.response)||void 0===r?void 0:r.status)?e="You do not have permission to delete this post.":a.includes("404")||404===(null===(s=l.response)||void 0===s?void 0:s.status)?e="Post not found or already deleted.":a.includes("401")||401===(null===(n=l.response)||void 0===n?void 0:n.status)?e="Please log in again to delete posts.":"An unknown error occurred"!==a&&(e=a),alert(e)}finally{O(!1)}})(e.id),disabled:z,className:"text-xs transition-colors ".concat(z?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-500 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400"),children:z?"Deleting...":"Delete"})]}),(null===L||void 0===L?void 0:L.id)===e.id&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded",children:(0,u.jsxs)("form",{onSubmit:ae,children:[(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Replying to @",(null===(o=e.author)||void 0===o?void 0:o.username)||(null===(d=e.author)||void 0===d?void 0:d.name)]}),(0,u.jsx)("button",{type:"button",onClick:()=>U(null),className:"ml-2 text-xs text-red-600 dark:text-red-400 hover:underline",children:"Cancel"})]}),(0,u.jsx)(rt,{value:I,onChange:e=>{D(e)},placeholder:"Write your reply... (Type @ to mention teams and players)",rows:3,className:"w-full border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400 focus:border-transparent"}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,u.jsx)("button",{type:"button",onClick:()=>U(null),className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:!X(I).trim()||z,className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z?"Posting...":"Reply"})]})]})}),(null===F||void 0===F?void 0:F.id)===e.id&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700",children:(0,u.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async e=>{const t=X(W);if(t.trim())try{var a;O(!0),null!==(a=(await S.put("/user/forums/posts/".concat(e),{content:t.trim()})).data)&&void 0!==a&&a.success?(B(null),H(""),await $()):alert("Failed to edit post. Please try again.")}catch(r){console.error("\u274c Failed to edit post:",r),alert("Failed to edit post. Please try again.")}finally{O(!1)}})(e.id)},children:[(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Editing post"}),(0,u.jsx)("button",{type:"button",onClick:()=>{B(null),H("")},className:"ml-2 text-xs text-red-600 dark:text-red-400 hover:underline",children:"Cancel"})]}),(0,u.jsx)("textarea",{value:W,onChange:e=>{var t;const a="string"===typeof e?e:(null===(t=e.target)||void 0===t?void 0:t.value)||"";H(a)},placeholder:"Edit your post...",rows:4,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent"}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{B(null),H("")},className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:!X(W).trim()||z,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z?"Saving...":"Save Changes"})]})]})}),h&&(0,u.jsx)("div",{className:"mt-4 space-y-2",children:e.replies.map((e=>re(e,!0,x+1)))}),e.replies&&e.replies.length>0&&x>=3&&(0,u.jsx)("div",{className:"mt-3 ml-4",children:(0,u.jsxs)("button",{className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:["View ",e.replies.length," more ",1===e.replies.length?"reply":"replies","..."]})})]})},e.id)};return P?(0,u.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,u.jsxs)("div",{className:"text-center py-8",children:[(0,u.jsx)("div",{className:"text-2xl mb-4",children:"\ud83d\udcac"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading post..."})]})}):E?(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[(0,u.jsx)("button",{onClick:()=>j&&j("forums"),className:"hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Forums"}),(0,u.jsx)("span",{children:"/"}),(0,u.jsxs)("span",{className:"px-2 py-0.5 text-xs font-bold rounded-full text-white",style:{backgroundColor:(null===(t=E.category)||void 0===t?void 0:t.color)||"#6b7280"},children:[null===(a=E.category)||void 0===a?void 0:a.icon," ",null===(r=E.category)||void 0===r?void 0:r.name]}),(0,u.jsx)("span",{children:"/"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white font-medium truncate",children:E.title})]}),(0,u.jsx)("div",{className:"card p-6 mb-6",children:(0,u.jsx)("div",{className:"flex space-x-4",children:(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(null===(n=E.meta)||void 0===n?void 0:n.pinned)&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",children:"\ud83d\udccc PINNED"}),(null===(l=E.meta)||void 0===l?void 0:l.locked)&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",children:"\ud83d\udd12 LOCKED"})]}),(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:E.title}),(0,u.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Started by"}),(0,u.jsx)(Qe,{user:E.author,showAvatar:!0,showHeroFlair:!0,showTeamFlair:!0,size:"sm",clickable:!1}),(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-500",children:ee((null===(i=E.meta)||void 0===i?void 0:i.created_at)||E.created_at)}),(0,u.jsx)(qt,{itemType:"thread",itemId:E.id,initialUpvotes:(null===(o=E.stats)||void 0===o?void 0:o.upvotes)||0,initialDownvotes:(null===(d=E.stats)||void 0===d?void 0:d.downvotes)||0,userVote:E.user_vote,direction:"horizontal",size:"xs",onVoteChange:e=>{T((t=>{var a,r,s,n,l,i;return c(c({},t),{},{stats:c(c({},t.stats),{},{upvotes:(null===(a=e.vote_counts)||void 0===a?void 0:a.upvotes)||(null===(r=t.stats)||void 0===r?void 0:r.upvotes)||0,downvotes:(null===(s=e.vote_counts)||void 0===s?void 0:s.downvotes)||(null===(n=t.stats)||void 0===n?void 0:n.downvotes)||0}),upvotes:(null===(l=e.vote_counts)||void 0===l?void 0:l.upvotes)||t.upvotes||0,downvotes:(null===(i=e.vote_counts)||void 0===i?void 0:i.downvotes)||t.downvotes||0,user_vote:e.user_vote})}))}})]}),(0,u.jsx)("div",{className:"flex items-center space-x-6 text-sm text-gray-600 dark:text-gray-400",children:(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)("span",{className:"font-medium",children:A.length}),(0,u.jsx)("span",{children:"replies"})]})})]}),E.content&&(0,u.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:X(E.content).split("\n").map(((e,t)=>(0,u.jsx)("p",{className:"mb-2 last:mb-0",children:te(X(e),E.mentions||[])},t)))})}),(N()||_())&&(0,u.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3 flex-wrap",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Admin:"}),(0,u.jsx)("button",{onClick:()=>(async()=>{try{var e,t,a,r;const s=null===(e=E.meta)||void 0===e?void 0:e.pinned,n="/admin/forums/threads/".concat(k,s?"/unpin":"/pin"),l=await S.post(n);null!==(t=l.data)&&void 0!==t&&t.success||null!==(a=l.data)&&void 0!==a&&null!==(r=a.message)&&void 0!==r&&r.includes("successfully")?await $():alert("Failed to update thread pin status")}catch(s){console.error("\u274c Failed to pin/unpin thread:",s),alert("Failed to update thread pin status")}})(),className:"px-3 py-1 text-xs rounded ".concat(null!==(m=E.meta)&&void 0!==m&&m.pinned?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"," hover:opacity-80 transition-opacity"),children:null!==(x=E.meta)&&void 0!==x&&x.pinned?"\ud83d\udccc Unpin":"\ud83d\udccc Pin"}),(0,u.jsx)("button",{onClick:()=>(async()=>{try{var e,t,a,r;const s=null===(e=E.meta)||void 0===e?void 0:e.locked,n="/admin/forums/threads/".concat(k,s?"/unlock":"/lock"),l=await S.post(n);null!==(t=l.data)&&void 0!==t&&t.success||null!==(a=l.data)&&void 0!==a&&null!==(r=a.message)&&void 0!==r&&r.includes("successfully")?await $():alert("Failed to update thread lock status")}catch(s){console.error("\u274c Failed to lock/unlock thread:",s),alert("Failed to update thread lock status")}})(),className:"px-3 py-1 text-xs rounded ".concat(null!==(h=E.meta)&&void 0!==h&&h.locked?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"," hover:opacity-80 transition-opacity"),children:null!==(g=E.meta)&&void 0!==g&&g.locked?"\ud83d\udd12 Unlock":"\ud83d\udd12 Lock"}),(0,u.jsx)("button",{onClick:()=>(async()=>{if(window.confirm("Are you sure you want to delete this entire thread? This action cannot be undone."))try{var e,t;O(!0);const a=await S.delete("/user/forums/threads/".concat(k));200===a.status||!0===(null===(e=a.data)||void 0===e?void 0:e.success)||"true"===(null===(t=a.data)||void 0===t?void 0:t.success)?j&&j("forums"):alert("Failed to delete thread. Please try again.")}catch(s){var a,r;console.error("\u274c Failed to delete thread:",s),404===(null===(a=s.response)||void 0===a?void 0:a.status)?(alert("Thread not found or has already been deleted."),j&&j("forums")):403===(null===(r=s.response)||void 0===r?void 0:r.status)?alert("You do not have permission to delete this thread."):alert("Failed to delete thread. Please try again.")}finally{O(!1)}})(),disabled:z,className:"px-3 py-1 text-xs rounded bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:z?"\ud83d\uddd1\ufe0f Deleting...":"\ud83d\uddd1\ufe0f Delete Thread"})]})})]})})}),A.length>0&&(0,u.jsx)("div",{className:"space-y-4",children:A.map((e=>(0,u.jsx)("div",{className:"card p-6",children:re(e,!1,0)},e.id)))}),w&&!(null!==(p=E.meta)&&void 0!==p&&p.locked)&&!L&&(0,u.jsxs)("div",{className:"card p-6 mt-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Post Reply"}),(0,u.jsxs)("form",{onSubmit:ae,children:[(0,u.jsx)(rt,{value:I,onChange:D,placeholder:"Write your reply... (Type @ to mention teams and players)",rows:4,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none focus:ring-2 focus:ring-red-500 dark:focus:ring-red-400 focus:border-transparent"}),(0,u.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Use @ for users, @team: for teams, @player: for players"}),(0,u.jsx)("button",{type:"submit",disabled:!X(I).trim()||z,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:z?"Posting...":"Post Reply"})]})]})]}),!w&&!(null!==(v=E.meta)&&void 0!==v&&v.locked)&&(0,u.jsxs)("div",{className:"card p-6 mt-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Join the Discussion"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sign in to reply to this thread and join the conversation."}),(0,u.jsx)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("mrvl-show-auth-modal")),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign In to Reply"})]}),(null===(y=E.meta)||void 0===y?void 0:y.locked)&&(0,u.jsxs)("div",{className:"card p-6 mt-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-red-800 dark:text-red-300",children:[(0,u.jsx)("span",{className:"text-lg",children:"\ud83d\udd12"}),(0,u.jsx)("span",{className:"font-medium",children:"This thread is locked"})]}),(0,u.jsx)("p",{className:"text-sm text-red-700 dark:text-red-400 mt-1",children:"No new replies can be posted to this thread."})]})]}):(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:"\u274c"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Thread Not Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The requested thread could not be found or has been deleted."}),(0,u.jsx)("button",{onClick:()=>j&&j("forums"),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Back to Forums"})]})},Wl=e=>{const[t,a]=(0,s.useState)(!1),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(0),[o,d]=(0,s.useState)(""),[c,m]=(0,s.useState)(-1),[u,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)({top:0,left:0}),p=(0,s.useRef)(null),v=(0,s.useRef)(null),{api:y}=b(),f=(0,s.useCallback)(function(e,t){let a;return function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];const l=()=>{clearTimeout(a),e(...s)};clearTimeout(a),a=setTimeout(l,t)}}((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(e.length<1)return n([]),void x(!1);try{let r;x(!0),console.log("[Mention] Searching for:",e,"type:",t),console.log("[Mention] API object:",y);try{r=await y.get("/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"))}catch(a){console.log("[Mention] API call failed, trying direct fetch:",a);const s=await fetch("https://staging.mrvl.net/api/public/mentions/search?q=".concat(encodeURIComponent(e),"&type=").concat(t,"&limit=8"));r={data:await s.json()}}console.log("[Mention] Search response:",r.data),(r.data.success||r.data.data)&&(n(r.data.data||[]),i(0))}catch(r){console.error("Error searching mentions:",r),n([])}finally{x(!1)}}),300),[y]),j=(0,s.useCallback)((async()=>{try{let t;x(!0),console.log("[Mention] Getting popular mentions"),console.log("[Mention] API object:",y);try{t=await y.get("/public/mentions/popular?limit=6")}catch(e){console.log("[Mention] API call failed, trying direct fetch:",e);const a=await fetch("https://staging.mrvl.net/api/public/mentions/popular?limit=6");t={data:await a.json()}}console.log("[Mention] Popular response:",t.data),(t.data||t.data.data)&&(n(t.data.data||t.data||[]),i(0))}catch(t){console.error("Error fetching popular mentions:",t),n([])}finally{x(!1)}}),[y]),k=()=>{if(!p.current)return{top:0,left:0};const e=p.current.getBoundingClientRect(),t={top:e.bottom+window.scrollY+5,left:e.left+window.scrollX};return console.log("[Mention] Dropdown position calculated:",t,"rect:",e),t};return(0,s.useEffect)((()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),{textareaRef:p,dropdownRef:v,showDropdown:t,mentionResults:r,selectedIndex:l,loading:u,dropdownPosition:h,handleInputChange:(e,t)=>{const r=e.target.value,s=e.target.selectionStart;t&&t(e);const l=r.substring(0,s),i=l.match(/@([a-zA-Z0-9_]*)$/);if(i){const e=i[1],t=s-i[0].length;console.log("[Mention] @ detected at position:",t,"query:",e),console.log("[Mention] Setting dropdown visible"),m(t),d(e),a(!0);const r=k();return console.log("[Mention] Setting dropdown position:",r),g(r),void(0===e.length?(console.log("[Mention] Calling getPopularMentions"),j()):(console.log("[Mention] Calling searchMentions with query:",e),f(e)))}const o=l.match(/@team:([a-zA-Z0-9_]*)$/);if(o){const e=o[1],t=s-o[0].length;return m(t),d(e),a(!0),g(k()),void f(e,"team")}const c=l.match(/@player:([a-zA-Z0-9_]*)$/);if(c){const e=c[1],t=s-c[0].length;return m(t),d(e),a(!0),g(k()),void f(e,"player")}a(!1),n([]),m(-1)},handleKeyDown:(e,s)=>{if(s&&s(e),t&&0!==r.length){switch(e.key){case"ArrowDown":e.preventDefault(),i((e=>(e+1)%r.length));break;case"ArrowUp":e.preventDefault(),i((e=>0===e?r.length-1:e-1));break;case"Enter":case"Tab":if(t&&r[l])return e.preventDefault(),{selectMention:r[l]};break;case"Escape":a(!1),n([])}return null}},selectMention:(t,r,s)=>{if(-1===c||!p.current)return;const l=s.substring(0,c),i=s.substring(p.current.selectionStart),o=l+t.mention_text+" "+i,d=l.length+t.mention_text.length+1;r(o),setTimeout((()=>{p.current&&(p.current.setSelectionRange(d,d),p.current.focus())}),0),a(!1),n([]),m(-1),e&&e(t)},setShowDropdown:a,setSelectedIndex:i}};const Hl=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/storage/")||e.startsWith("/images/")?"".concat("https://staging.mrvl.net").concat(e):(e.includes("/")&&e.startsWith("/"),"".concat("https://staging.mrvl.net","/storage/").concat(e)):null,Vl=e=>{let{show:t,results:a,selectedIndex:r,loading:s,position:n,onSelect:l,query:i="",dropdownRef:o}=e;if(console.log("[MentionDropdown] Render - show:",t,"results:",null===a||void 0===a?void 0:a.length,"position:",n),!t)return null;const d=e=>{switch(e){case"user":return(0,u.jsx)("div",{className:"w-6 h-6 bg-[#4ade80]/20 text-[#4ade80] rounded-full flex items-center justify-center text-xs font-medium",children:"U"});case"team":return(0,u.jsx)("div",{className:"w-6 h-6 bg-[#fa4454]/20 text-[#fa4454] rounded-full flex items-center justify-center text-xs font-medium",children:"T"});case"player":return(0,u.jsx)("div",{className:"w-6 h-6 bg-[#3b82f6]/20 text-[#3b82f6] rounded-full flex items-center justify-center text-xs font-medium",children:"P"});default:return null}};return(0,u.jsx)("div",{ref:o,className:"absolute bg-[#1a2332] border border-[#2b3d4d] rounded-lg shadow-xl max-h-64 overflow-y-auto min-w-[280px]",style:{top:n.top||0,left:n.left||0,zIndex:99999,position:"fixed",display:t?"block":"none"},children:s?(0,u.jsxs)("div",{className:"p-3 text-center text-[#768894]",children:[(0,u.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-[#fa4454] border-t-transparent rounded-full mx-auto"}),(0,u.jsx)("span",{className:"text-sm mt-1 block",children:"Searching..."})]}):a.length>0?(0,u.jsxs)(u.Fragment,{children:[0===i.length&&(0,u.jsx)("div",{className:"px-3 py-2 text-xs text-[#768894] border-b border-[#2b3d4d]",children:"Popular mentions"}),a.map(((e,t)=>(0,u.jsxs)("div",{className:"px-3 py-2 cursor-pointer flex items-center space-x-3 hover:bg-[#2b3d4d] ".concat(t===r?"bg-[#fa4454]/10":""),onClick:()=>l(e),children:[e.avatar?(0,u.jsx)("img",{src:Hl(e.avatar),alt:e.display_name,className:"w-6 h-6 rounded-full object-cover"}):d(e.type),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"text-sm font-medium text-white truncate",children:e.display_name}),(0,u.jsx)("div",{className:"text-xs text-[#768894] truncate",children:e.subtitle})]}),(0,u.jsx)("div",{className:"text-xs text-[#768894] font-mono",children:e.mention_text})]},"".concat(e.type,"-").concat(e.id))))]}):i.length>0?(0,u.jsxs)("div",{className:"p-3 text-center text-[#768894] text-sm",children:['No results found for "',i,'"']}):null})},ql=se("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Gl=se("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),Yl=se("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Zl=se("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Kl=se("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const Jl=function(e){let{navigateTo:t}=e;const{user:a,api:r}=b(),{triggerForumThread:n}=w(),l=e=>{if("string"===typeof e)return e;if(e&&"object"===typeof e){if("string"===typeof e.name)return e.name;if("string"===typeof e.title)return e.title;if("string"===typeof e.value)return e.value}return String(e||"")},[i,o]=(0,s.useState)({title:"",content:"",category:"",tags:[]}),[d,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(""),[g,p]=(0,s.useState)([]),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)([]),[C,E]=(0,s.useState)(!1),[T,A]=(0,s.useState)(!1),M=((0,s.useRef)(null),(0,s.useRef)(null)),P=(0,s.useRef)(null),R=(0,s.useRef)(null);(0,s.useEffect)((()=>{I(),D()}),[]),(0,s.useEffect)((()=>{if(i.title||i.content){const e=setTimeout((()=>{L()}),5e3);return()=>clearTimeout(e)}}),[i.title,i.content]);const I=async()=>{try{var e;const t=await r.get("/forums/categories");p((null===(e=t.data)||void 0===e?void 0:e.data)||[])}catch(x){console.error("Failed to load categories:",x)}},D=()=>{try{const e=localStorage.getItem("forum-thread-draft");if(e){const t=JSON.parse(e),a=c(c({},t),{},{title:l(t.title),content:l(t.content)});o((e=>c(c({},e),a))),E(!0)}}catch(x){console.error("Failed to load draft:",x)}},L=()=>{try{localStorage.setItem("forum-thread-draft",JSON.stringify({title:l(i.title),content:l(i.content),category:i.category})),E(!0)}catch(x){console.error("Failed to save draft:",x)}},U=()=>{try{localStorage.removeItem("forum-thread-draft"),E(!1)}catch(x){console.error("Failed to clear draft:",x)}},z=e=>{Array.from(e.target.files).forEach((e=>{if(e.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{const a={id:Date.now()+Math.random(),file:e,url:t.target.result,name:e.name};S((e=>[...e,a]));const r="\n![".concat(e.name,"](").concat(t.target.result,")\n");o((e=>c(c({},e),{},{content:e.content+r})))},t.readAsDataURL(e)}}))},O=async()=>{if(!l(i.title).trim())return void alert("Please enter a thread title");const e=l(i.content);e.trim()?e.trim().length<10?alert("Thread content must be at least 10 characters"):await F({preventDefault:()=>{}}):alert("Please enter thread content")},F=async e=>{if(e.preventDefault(),!a)return void h("You must be logged in to create a thread");const s=l(i.title),o=l(i.content);if(s.trim())if(o.trim())if(o.trim().length<10)h("Thread content must be at least 10 characters long");else{m(!0),h("");try{console.log("\ud83d\ude80 CreateThreadPage: Submitting thread...");const e={title:s.trim(),content:o.trim()};console.log("\ud83d\udcbe CreateThreadPage: Submit data:",e);const a=await r.post("/user/forums/threads",e);console.log("\u2705 CreateThreadPage: Thread created successfully:",a);const l=(a.data||a).id;alert("\u2705 Thread created successfully!"),n(),window.dispatchEvent(new CustomEvent("forum-thread-created")),window.dispatchEvent(new CustomEvent("forum-category-updated")),U(),setTimeout((()=>{l?t("thread-detail",{id:l}):t("forums")}),1e3)}catch(x){console.error("\u274c CreateThreadPage: Error creating thread:",x),x.message.includes("401")?h("\ud83d\udea8 AUTHENTICATION ISSUE: Please log in again to create threads."):x.message.includes("403")?h("\ud83d\udea8 PERMISSION ISSUE: You do not have permission to create threads."):x.message.includes("422")?h("\ud83d\udea8 VALIDATION ISSUE: Please check your thread title and content."):x.message.includes("404")?h("\ud83d\udea8 BACKEND ISSUE: Forum threads API endpoint not found. Please implement /api/forums/threads endpoint."):x.message.includes("500")?h("\ud83d\udea8 BACKEND ISSUE: Server error when creating thread. Check backend forum implementation."):h("Failed to create thread: ".concat(x.message))}finally{m(!1)}}else h("Thread content is required");else h("Thread title is required")};return a?(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsx)("div",{className:"lg:hidden sticky top-16 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg z-40 -mx-4 px-4 py-3 border-b border-gray-200 dark:border-gray-700 mb-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("button",{onClick:()=>t("forums"),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400 touch-optimized",children:(0,u.jsx)(ke,{className:"w-5 h-5 transform rotate-90"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"New Thread"}),C&&(0,u.jsx)("p",{className:"text-xs text-blue-500 dark:text-blue-400",children:"Draft saved"})]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[k?(0,u.jsx)("button",{onClick:()=>N(!1),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-lg",children:"Edit"}):(0,u.jsx)("button",{onClick:()=>N(!0),className:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-lg",children:(0,u.jsx)(Ys,{className:"w-4 h-4"})}),(0,u.jsx)("button",{onClick:O,disabled:d||!l(i.title).trim()||!l(i.content).trim(),className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed touch-optimized",children:d?"...":"Post"})]})]})}),(0,u.jsxs)("div",{className:"hidden lg:flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:"Create New Thread"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Start a new discussion in the Marvel Rivals community"})]}),(0,u.jsx)("button",{onClick:()=>t("forums"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to Forums"})]}),(0,u.jsx)("input",{ref:P,type:"file",accept:"image/*",multiple:!0,onChange:z,className:"hidden"}),(0,u.jsx)("input",{ref:R,type:"file",accept:"image/*",capture:"environment",onChange:z,className:"hidden"}),(0,u.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[x&&(0,u.jsxs)("div",{className:"border px-4 py-3 rounded mb-4 ".concat(x.includes("BACKEND ISSUE")||x.includes("AUTHENTICATION ISSUE")||x.includes("PERMISSION ISSUE")?"bg-red-100 border-red-400 text-red-700":"bg-yellow-100 border-yellow-400 text-yellow-700"),children:[x,x.includes("BACKEND ISSUE")&&(0,u.jsxs)("div",{className:"mt-2 text-sm",children:[(0,u.jsx)("strong",{children:"For Backend Developer:"})," Please implement the forum threads API endpoint with proper validation."]})]}),(0,u.jsx)("div",{className:"card p-6",children:(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Thread Title *"}),(0,u.jsx)(rt,{value:l(i.title),onChange:e=>{let t="";"string"===typeof e?t=e:e&&"object"===typeof e&&e.target&&"string"===typeof e.target.value?t=e.target.value:e&&"object"===typeof e?(console.warn("CreateThreadPage: Unexpected title value type:",e),t=""):t=String(e||""),o((e=>c(c({},e),{},{title:t})))},placeholder:"e.g., Iron Man is too overpowered in ranked matches (@player:shroud thoughts?)",className:"form-input w-full mobile-input-no-zoom",rows:1,maxLength:200}),(0,u.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,u.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l(i.title).length,"/200 characters \u2022 Use @ to mention users, teams, or players in title"]}),C&&(0,u.jsx)("span",{className:"text-xs text-blue-500 dark:text-blue-400",children:"Auto-saved"})]})]}),(0,u.jsxs)("div",{className:"lg:hidden",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Category"}),(0,u.jsxs)("select",{name:"category",value:i.category,onChange:e=>{const{name:t,value:a}=e.target;o((e=>c(c({},e),{},{[t]:a})))},className:"form-input w-full mobile-input-no-zoom",children:[(0,u.jsx)("option",{value:"",children:"Select a category"}),g.map((e=>(0,u.jsxs)("option",{value:e.slug,children:[e.icon," ",e.name]},e.id)))]})]}),(0,u.jsxs)("div",{className:"lg:hidden",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Media & Voice"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{type:"button",onClick:v?()=>{M.current&&M.current.stop(),y(!1)}:()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.webkitSpeechRecognition||window.SpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.onstart=()=>{y(!0)},e.onresult=e=>{let t="";for(let a=e.resultIndex;a<e.results.length;a++)t+=e.results[a][0].transcript;o((e=>c(c({},e),{},{content:e.content+t})))},e.onerror=e=>{console.error("Speech recognition error:",e.error),y(!1)},e.onend=()=>{y(!1)},M.current=e,e.start()}else alert("Speech recognition not supported in this browser")},className:"p-2 rounded-lg touch-optimized transition-colors ".concat(v?"bg-red-500 text-white animate-pulse":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-red-50 hover:text-red-500"),children:v?(0,u.jsx)(ql,{className:"w-5 h-5"}):(0,u.jsx)(Gl,{className:"w-5 h-5"})}),(0,u.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=R.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-blue-50 hover:text-blue-500 touch-optimized",children:(0,u.jsx)(Yl,{className:"w-5 h-5"})}),(0,u.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.click()},className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-green-50 hover:text-green-500 touch-optimized",children:(0,u.jsx)(Zl,{className:"w-5 h-5"})}),(0,u.jsx)("button",{type:"button",onClick:()=>j(!f),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-yellow-50 hover:text-yellow-500 touch-optimized",children:(0,u.jsx)(Kl,{className:"w-5 h-5"})})]})]}),f&&(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 mb-3",children:(0,u.jsx)("div",{className:"grid grid-cols-6 gap-2",children:["\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude04","\ud83d\ude22","\ud83d\ude21","\ud83e\udd14","\ud83d\udc40","\ud83d\udd25","\ud83d\udcaf","\u2764\ufe0f","\u26a1","\ud83c\udfaf"].map(((e,t)=>(0,u.jsx)("button",{type:"button",onClick:()=>(e=>{o((t=>c(c({},t),{},{content:t.content+e}))),j(!1)})(e),className:"p-2 text-xl hover:bg-gray-100 dark:hover:bg-gray-700 rounded touch-optimized",children:e},t)))})}),v&&(0,u.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mb-3",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{className:"text-sm font-medium",children:"Recording... Speak now"})]})})]}),_.length>0&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Uploaded Images"}),(0,u.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:_.map((e=>(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:e.url,alt:e.name,className:"w-full h-24 object-cover rounded-lg"}),(0,u.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void S((e=>e.filter((e=>e.id!==t))));var t},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,u.jsx)(ge,{className:"w-3 h-3"})})]},e.id)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,u.jsx)("label",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Content *"}),(0,u.jsxs)("div",{className:"lg:hidden flex items-center space-x-2",children:[!k&&(0,u.jsx)("button",{type:"button",onClick:()=>N(!0),className:"text-xs text-blue-500 dark:text-blue-400 hover:underline",children:"Preview"}),k&&(0,u.jsx)("button",{type:"button",onClick:()=>N(!1),className:"text-xs text-blue-500 dark:text-blue-400 hover:underline",children:"Edit"})]})]}),k?(0,u.jsx)("div",{className:"min-h-[200px] p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:l(i.content)?l(i.content).split("\n").map(((e,t)=>(0,u.jsx)("p",{className:"mb-2 last:mb-0",children:e},t))):(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Preview will appear here..."})})}):(0,u.jsx)(rt,{value:l(i.content),onChange:e=>{let t="";"string"===typeof e?t=e:e&&"object"===typeof e&&e.target&&"string"===typeof e.target.value?t=e.target.value:e&&"object"===typeof e?(console.warn("CreateThreadPage: Unexpected content value type:",e),t=""):t=String(e||""),o((e=>c(c({},e),{},{content:t})))},rows:window.innerWidth<768?8:12,className:"form-input w-full mobile-input-no-zoom",placeholder:"Share your thoughts, strategies, feedback, or questions about Marvel Rivals... You can discuss:\n\u2022 Hero balance and gameplay mechanics (@player:s1mple, @team:navi)\n\u2022 Strategic tips and team compositions\n\u2022 Tournament results and esports news\n\u2022 Bug reports and technical issues\n\u2022 Team recruitment and player connections Type @ to mention teams, players, or users!",maxLength:1e4}),(0,u.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,u.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l(i.content).length,"/10000 characters (min 10)"]}),(0,u.jsx)("div",{className:"lg:hidden flex items-center space-x-2",children:(0,u.jsxs)("button",{type:"button",onClick:()=>L(),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-blue-500 flex items-center space-x-1",children:[(0,u.jsx)(Vs,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:"Save Draft"})]})})]})]})]})}),(0,u.jsxs)("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800",children:[(0,u.jsx)("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Community Guidelines"}),(0,u.jsxs)("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[(0,u.jsx)("li",{children:"\u2022 Be respectful and constructive in your discussions"}),(0,u.jsx)("li",{children:"\u2022 Keep content relevant to Marvel Rivals"}),(0,u.jsx)("li",{children:"\u2022 Use appropriate language and avoid toxicity"}),(0,u.jsx)("li",{children:"\u2022 Search existing threads before creating duplicates"}),(0,u.jsx)("li",{children:"\u2022 Use descriptive titles and proper categories"})]})]}),(0,u.jsxs)("div",{className:"hidden lg:flex justify-end space-x-4",children:[(0,u.jsx)("button",{type:"button",onClick:()=>t("forums"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:d||!l(i.title).trim()||!l(i.content).trim(),className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating Thread..."]}):"Create Thread"})]}),(0,u.jsx)("div",{className:"lg:hidden sticky bottom-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg -mx-6 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:l(i.content).length<10?"".concat(10-l(i.content).length," more characters"):"Ready to post"}),C&&(0,u.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-blue-500 dark:text-blue-400",children:[(0,u.jsx)(Vs,{className:"w-3 h-3"}),(0,u.jsx)("span",{children:"Saved"})]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("button",{type:"button",onClick:()=>U(),disabled:!C,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-red-500 disabled:opacity-50",children:"Clear Draft"}),(0,u.jsx)("button",{type:"button",onClick:O,disabled:d||!l(i.title).trim()||!l(i.content).trim()||l(i.content).length<10,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-optimized font-medium",children:d?(0,u.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,u.jsx)("span",{children:"Posting..."})]}):"Post Thread"})]})]})})]})]}):(0,u.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,u.jsxs)("div",{className:"card p-8 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd10"}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Login Required"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You need to be logged in to create forum threads and participate in discussions."}),(0,u.jsxs)("div",{className:"space-x-4",children:[(0,u.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("mrvl-show-auth-modal"))},className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Sign In / Sign Up"}),(0,u.jsx)("button",{onClick:()=>t("forums"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Back to Forums"})]})]})})},Ql=(0,s.createContext)();const Xl=function(e){let{children:t,user:a}=e;const r=(e=>{switch(e){case"admin":return{primary:"#dc2626",secondary:"#fca5a5",background:"#fef2f2",text:"#991b1b"};case"moderator":return{primary:"#f59e0b",secondary:"#fde68a",background:"#fffbeb",text:"#92400e"};default:return{primary:"#059669",secondary:"#86efac",background:"#f0fdf4",text:"#065f46"}}})(null===a||void 0===a?void 0:a.role),s={role:(null===a||void 0===a?void 0:a.role)||"user",canManageUsers:"admin"===(null===a||void 0===a?void 0:a.role),canModerate:"admin"===(null===a||void 0===a?void 0:a.role)||"moderator"===(null===a||void 0===a?void 0:a.role)};return(0,u.jsx)(Ql.Provider,{value:{theme:r,config:s,user:a},children:t})};function $l(){var e;const{user:t,api:a}=b(),{theme:r,config:n}=function(){const e=(0,s.useContext)(Ql);if(!e)throw new Error("useRoleTheme must be used within a RoleThemeProvider");return e}(),[l,i]=(0,s.useState)("overview"),[o,d]=(0,s.useState)({}),[c,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0);(0,s.useEffect)((()=>{g()}),[]);const g=async()=>{try{h(!0);try{var e;const r=await a.get("/user/stats"),s=(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data)||(null===r||void 0===r?void 0:r.data)||{};d({posts:s.posts_count||0,threadsCreated:s.threads_count||0,reputation:s.reputation||0,joinDate:(null===t||void 0===t?void 0:t.created_at)||s.join_date||"2024-01-01",favoriteHero:(null===t||void 0===t?void 0:t.favoriteHero)||s.favorite_hero||"Not set",winRate:s.win_rate||0,matchesPlayed:s.matches_played||0,rank:s.rank||"Unranked"}),console.log("\u2705 UserDashboard: Real user stats loaded")}catch(s){console.warn("\u26a0\ufe0f UserDashboard: Stats API not available, using defaults"),d({posts:0,threadsCreated:0,reputation:0,joinDate:(null===t||void 0===t?void 0:t.created_at)||"2024-01-01",favoriteHero:(null===t||void 0===t?void 0:t.favoriteHero)||"Not set",winRate:0,matchesPlayed:0,rank:"Unranked"})}try{var r;const e=await a.get("/user/activity"),t=(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.data)||(null===e||void 0===e?void 0:e.data)||[];if(Array.isArray(t)&&t.length>0){const e=t.map((e=>({type:e.type||"activity",content:e.description||e.content||"Activity",time:p(e.created_at||e.time),icon:v(e.type)})));m(e),console.log("\u2705 UserDashboard: Real activity loaded:",e.length)}else m([])}catch(n){console.warn("\u26a0\ufe0f UserDashboard: Activity API not available"),m([])}}catch(l){console.error("\u274c UserDashboard: Failed to fetch user data:",l),d({posts:0,threadsCreated:0,reputation:0,joinDate:(null===t||void 0===t?void 0:t.created_at)||"2024-01-01",favoriteHero:(null===t||void 0===t?void 0:t.favoriteHero)||"Not set",winRate:0,matchesPlayed:0,rank:"Unranked"}),m([])}finally{h(!1)}},p=e=>{if(!e)return"Recently";const t=new Date(e),a=new Date-t,r=Math.floor(a/6e4),s=Math.floor(r/60),n=Math.floor(s/24);return n>0?"".concat(n," day").concat(n>1?"s":""," ago"):s>0?"".concat(s," hour").concat(s>1?"s":""," ago"):r>0?"".concat(r," minute").concat(r>1?"s":""," ago"):"Just now"},v=e=>({post:"\ud83d\udcac",thread:"\ud83d\udcdd",match:"\ud83c\udfc6",achievement:"\ud83c\udfc5",friend:"\ud83d\udc65",comment:"\ud83d\udcad",vote:"\ud83d\udc4d",login:"\ud83d\udd10"}[e]||"\ud83d\udcca");return(0,u.jsxs)("div",{className:"animate-fade-in space-y-6",children:[(0,u.jsx)("div",{className:"glass rounded-xl p-6",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-blue-500 rounded-xl flex items-center justify-center text-white font-bold text-2xl shadow-lg",children:(null===t||void 0===t||null===(e=t.name)||void 0===e?void 0:e.charAt(0))||"U"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,u.jsxs)("h1",{className:"text-3xl font-bold gradient-text",children:["Welcome back, ",null===t||void 0===t?void 0:t.name,"!"]}),(0,u.jsx)(Z,{user:t,size:"md",showIcon:!0,showText:!0})]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Ready to dominate the Marvel Rivals battlefield?"})]})]}),(0,u.jsx)("div",{className:"text-4xl",children:"\ud83c\udfae"})]})}),"overview"===l&&(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x?Array.from({length:4}).map(((e,t)=>(0,u.jsxs)("div",{className:"glass rounded-xl p-6 animate-pulse",children:[(0,u.jsx)("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),(0,u.jsx)("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded"})]},t))):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"glass rounded-xl p-6 hover:scale-105 transition-transform",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Forum Posts"}),(0,u.jsx)("span",{className:"text-2xl",children:"\ud83d\udcac"})]}),(0,u.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:o.posts}),(0,u.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400 mt-2",children:"+3 this week"})]}),(0,u.jsxs)("div",{className:"glass rounded-xl p-6 hover:scale-105 transition-transform",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Reputation"}),(0,u.jsx)("span",{className:"text-2xl",children:"\u2b50"})]}),(0,u.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:o.reputation}),(0,u.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"+45 this month"})]}),(0,u.jsxs)("div",{className:"glass rounded-xl p-6 hover:scale-105 transition-transform",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Win Rate"}),(0,u.jsx)("span",{className:"text-2xl",children:"\ud83c\udfc6"})]}),(0,u.jsxs)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[o.winRate,"%"]}),(0,u.jsxs)("div",{className:"text-sm text-purple-600 dark:text-purple-400 mt-2",children:[o.matchesPlayed," matches"]})]}),(0,u.jsxs)("div",{className:"glass rounded-xl p-6 hover:scale-105 transition-transform",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Current Rank"}),(0,u.jsx)("span",{className:"text-2xl",children:"\ud83e\udd47"})]}),(0,u.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:o.rank}),(0,u.jsx)("div",{className:"text-sm text-orange-600 dark:text-orange-400 mt-2",children:"Climbing up!"})]})]})}),(0,u.jsx)("div",{className:"glass rounded-xl p-1",children:(0,u.jsx)("div",{className:"flex flex-wrap gap-1",children:[{id:"overview",label:"Overview",icon:"\ud83d\udcca"},{id:"profile",label:"Profile",icon:"\ud83d\udc64"},{id:"activity",label:"Activity",icon:"\ud83d\udcc8"},{id:"settings",label:"Settings",icon:"\u2699\ufe0f"}].map((e=>(0,u.jsxs)("button",{onClick:()=>i(e.id),className:"flex items-center space-x-2 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 ".concat(l===e.id?"bg-gradient-to-r ".concat(r.gradient," text-white shadow-lg ").concat(r.shadow," ").concat(r.border," ").concat(r.borderDark):"text-gray-700 dark:text-gray-300 hover:bg-white/10 ".concat(r.primaryText," ").concat(r.primaryTextDark," border border-transparent")),children:[(0,u.jsx)("span",{children:e.icon}),(0,u.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.id)))})}),(0,u.jsxs)("div",{className:"space-y-6",children:["overview"===l&&(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"glass rounded-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,u.jsx)("div",{className:"space-y-4",children:c.map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-white/50 dark:bg-gray-800/50 rounded-lg hover:bg-white/70 dark:hover:bg-gray-800/70 transition-all duration-300",children:[(0,u.jsx)("div",{className:"text-xl",children:e.icon}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.content}),(0,u.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.time})]})]},t)))})]}),(0,u.jsxs)("div",{className:"glass rounded-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Your Marvel Rivals Profile"}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-2",children:"\ud83e\uddbe"}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:o.favoriteHero}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Main Hero"})]}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Hero Mastery"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white",children:"78%"})]}),(0,u.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,u.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 h-2 rounded-full",style:{width:"78%"}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Duelist Skills"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white",children:"85%"})]}),(0,u.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,u.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full",style:{width:"85%"}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Team Play"}),(0,u.jsx)("span",{className:"text-gray-900 dark:text-white",children:"92%"})]}),(0,u.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,u.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",style:{width:"92%"}})})]})]})]})]})]}),"profile"===l&&(0,u.jsxs)("div",{className:"glass rounded-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Profile Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),(0,u.jsx)("input",{type:"text",value:(null===t||void 0===t?void 0:t.name)||"",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",readOnly:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,u.jsx)("input",{type:"email",value:(null===t||void 0===t?void 0:t.email)||"",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",readOnly:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Since"}),(0,u.jsx)("input",{type:"text",value:new Date(o.joinDate).toLocaleDateString(),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white",readOnly:!0})]})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Favorite Hero"}),(0,u.jsxs)("select",{className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,u.jsx)("option",{children:"Iron Man"}),(0,u.jsx)("option",{children:"Spider-Man"}),(0,u.jsx)("option",{children:"Hulk"}),(0,u.jsx)("option",{children:"Thor"}),(0,u.jsx)("option",{children:"Black Panther"}),(0,u.jsx)("option",{children:"Doctor Strange"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preferred Role"}),(0,u.jsxs)("select",{className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,u.jsx)("option",{children:"Duelist"}),(0,u.jsx)("option",{children:"Strategist"}),(0,u.jsx)("option",{children:"Vanguard"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),(0,u.jsx)("textarea",{rows:"3",placeholder:"Tell us about yourself...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-red-500 resize-none"})]})]})]}),(0,u.jsx)("div",{className:"mt-6 flex justify-end",children:(0,u.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r ".concat(r.gradient," ").concat(r.primaryHover," text-white font-semibold rounded-xl shadow-lg ").concat(r.shadow," transition-all duration-300 hover:scale-105"),children:"Save Changes"})})]}),"activity"===l&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"glass rounded-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Activity Overview"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:o.posts}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Forum Posts"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:o.threadsCreated}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Threads Created"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:o.reputation}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reputation Points"})]})]})]}),(0,u.jsxs)("div",{className:"glass rounded-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Complete Activity History"}),(0,u.jsx)("div",{className:"space-y-3",children:c.map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg border-l-4 border-red-500",children:[(0,u.jsx)("div",{className:"text-2xl",children:e.icon}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.content}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.time})]}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 capitalize",children:e.type})]},t)))})]})]}),"settings"===l&&(0,u.jsxs)("div",{className:"glass rounded-xl p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Account Settings"}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Notifications"}),(0,u.jsx)("div",{className:"space-y-3",children:[{setting:"Email notifications",enabled:!0},{setting:"Forum mentions",enabled:!0},{setting:"Match updates",enabled:!1},{setting:"Event reminders",enabled:!0}].map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.setting}),(0,u.jsx)("button",{className:"w-12 h-6 rounded-full relative transition-colors ".concat(e.enabled?"bg-green-500":"bg-gray-300 dark:bg-gray-600"),children:(0,u.jsx)("div",{className:"w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ".concat(e.enabled?"right-0.5":"left-0.5")})})]},t)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Privacy"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Show online status"}),(0,u.jsx)("button",{className:"w-12 h-6 bg-green-500 rounded-full relative",children:(0,u.jsx)("div",{className:"w-5 h-5 bg-white rounded-full absolute top-0.5 right-0.5"})})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Allow direct messages"}),(0,u.jsx)("button",{className:"w-12 h-6 bg-green-500 rounded-full relative",children:(0,u.jsx)("div",{className:"w-5 h-5 bg-white rounded-full absolute top-0.5 right-0.5"})})]})]})]}),(0,u.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("button",{className:"px-6 py-3 bg-gradient-to-r ".concat(r.gradient," ").concat(r.primaryHover," text-white font-semibold rounded-xl shadow-lg ").concat(r.shadow," transition-all duration-300 hover:scale-105"),children:"Save Settings"})})]})]})]})]})}const ei=function(){const{user:e}=b();return(0,u.jsx)(Xl,{user:e,children:(0,u.jsx)($l,{})})},ti=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{api:a,user:r}=b(),{registerUpdateTrigger:n}=w(),[l,i]=(0,s.useState)({total_comments:0,total_forum_posts:0,total_forum_threads:0,total_votes:0,days_active:0}),[o,d]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),{updateInterval:h=3e4,enableRealTimeUpdates:g=!0,enableActivityTriggers:p=!0,debounceDelay:v=2e3}=t,y=(0,s.useRef)(null),f=(0,s.useRef)(null),j=!e||e==(null===r||void 0===r?void 0:r.id),k=(0,s.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var r,s,n,l,o,c,u,h,g,p,v,y,b,f,j,k,w,N,_,S,C,E,T,A,M,P,R,I,D,L,U,z,O,F,B,W,H,V,q,G,Y,Z,K,J,Q,X,$,ee,te,ae,re,se,ne;t&&d(!0),m(null);const le=e?"/users/".concat(e,"/stats"):"/profile",ie=await a.get(le),oe=(null===(r=ie.data)||void 0===r?void 0:r.data)||ie.data||{},de={total_comments:null!==(s=null!==(n=oe.total_comments)&&void 0!==n?n:null===(l=oe.comments)||void 0===l?void 0:l.total)&&void 0!==s?s:0,total_forum_posts:null!==(o=null!==(c=oe.forum_posts)&&void 0!==c?c:null===(u=oe.forum)||void 0===u?void 0:u.posts)&&void 0!==o?o:0,total_forum_threads:null!==(h=null!==(g=oe.forum_threads)&&void 0!==g?g:null===(p=oe.forum)||void 0===p?void 0:p.threads)&&void 0!==h?h:0,total_votes:null!==(v=null!==(y=oe.total_votes)&&void 0!==y?y:((null===(b=oe.votes)||void 0===b?void 0:b.upvotes_given)||0)+((null===(f=oe.votes)||void 0===f?void 0:f.downvotes_given)||0))&&void 0!==v?v:0,days_active:null!==(j=null!==(k=oe.days_active)&&void 0!==k?k:null===(w=oe.account)||void 0===w?void 0:w.days_active)&&void 0!==j?j:0,news_comments:null!==(N=null!==(_=oe.news_comments)&&void 0!==_?_:null===(S=oe.comments)||void 0===S?void 0:S.news)&&void 0!==N?N:0,match_comments:null!==(C=null!==(E=oe.match_comments)&&void 0!==E?E:null===(T=oe.comments)||void 0===T?void 0:T.matches)&&void 0!==C?C:0,upvotes_given:null!==(A=null!==(M=oe.upvotes_given)&&void 0!==M?M:null===(P=oe.votes)||void 0===P?void 0:P.upvotes_given)&&void 0!==A?A:0,downvotes_given:null!==(R=null!==(I=oe.downvotes_given)&&void 0!==I?I:null===(D=oe.votes)||void 0===D?void 0:D.downvotes_given)&&void 0!==R?R:0,upvotes_received:null!==(L=null!==(U=oe.upvotes_received)&&void 0!==U?U:null===(z=oe.votes)||void 0===z?void 0:z.upvotes_received)&&void 0!==L?L:0,downvotes_received:null!==(O=null!==(F=oe.downvotes_received)&&void 0!==F?F:null===(B=oe.votes)||void 0===B?void 0:B.downvotes_received)&&void 0!==O?O:0,reputation_score:null!==(W=null!==(H=oe.reputation_score)&&void 0!==H?H:null===(V=oe.votes)||void 0===V?void 0:V.reputation_score)&&void 0!==W?W:0,mentions_given:null!==(q=null!==(G=oe.mentions_given)&&void 0!==G?G:null===(Y=oe.mentions)||void 0===Y?void 0:Y.given)&&void 0!==q?q:0,mentions_received:null!==(Z=null!==(K=oe.mentions_received)&&void 0!==K?K:null===(J=oe.mentions)||void 0===J?void 0:J.received)&&void 0!==Z?Z:0,activity_score:null!==(Q=null!==(X=oe.activity_score)&&void 0!==X?X:null===($=oe.activity)||void 0===$?void 0:$.activity_score)&&void 0!==Q?Q:0,total_actions:null!==(ee=null!==(te=oe.total_actions)&&void 0!==te?te:null===(ae=oe.activity)||void 0===ae?void 0:ae.total_actions)&&void 0!==ee?ee:0,last_activity:null!==(re=null!==(se=oe.last_activity)&&void 0!==se?se:null===(ne=oe.activity)||void 0===ne?void 0:ne.last_activity)&&void 0!==re?re:null};i(de),x((new Date).toISOString()),console.log("Activity stats updated:",de)}catch(le){console.error("Error fetching activity stats:",le),m(le.message||"Failed to fetch activity statistics")}finally{d(!1)}}),[a,e]),N=(0,s.useCallback)((()=>{f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{k(!1)}),v)}),[k,v]),_=(0,s.useCallback)((()=>{p&&j&&(console.log("\ud83c\udfaf User activity detected, updating stats..."),N())}),[p,j,N]);(0,s.useEffect)((()=>{k(!0);const e=n((e=>{j&&(console.log("\ud83d\udcca Context triggered stats update for: ".concat(e)),N())}));if(!g)return e;if(y.current=setInterval((()=>{k(!1)}),h),p&&j){const t=()=>{document.hidden||_()},a=()=>{_()};return window.addEventListener("focus",a),document.addEventListener("visibilitychange",t),()=>{y.current&&clearInterval(y.current),f.current&&clearTimeout(f.current),window.removeEventListener("focus",a),document.removeEventListener("visibilitychange",t),e()}}return()=>{y.current&&clearInterval(y.current),f.current&&clearTimeout(f.current),e()}}),[k,g,h,p,j,_,n,N]);return{stats:l,loading:o,error:c,lastUpdated:u,refresh:(0,s.useCallback)((()=>{k(!0)}),[k]),triggerUpdate:(0,s.useCallback)((()=>{j&&N()}),[j,N])}},ai={NETWORK_ERROR:"network_error",TIMEOUT_ERROR:"timeout_error",CONNECTION_ERROR:"connection_error",AUTH_REQUIRED:"auth_required",AUTH_EXPIRED:"auth_expired",UNAUTHORIZED:"unauthorized",FORBIDDEN:"forbidden",VALIDATION_ERROR:"validation_error",INVALID_INPUT:"invalid_input",NOT_FOUND:"not_found",RESOURCE_UNAVAILABLE:"resource_unavailable",SERVER_ERROR:"server_error",DATABASE_ERROR:"database_error",SERVICE_UNAVAILABLE:"service_unavailable",FEATURE_DISABLED:"feature_disabled",RATE_LIMITED:"rate_limited",UNKNOWN_ERROR:"unknown_error"},ri={[ai.NETWORK_ERROR]:"Unable to connect to the server. Please check your internet connection and try again.",[ai.TIMEOUT_ERROR]:"The request took too long. Please try again.",[ai.CONNECTION_ERROR]:"Connection lost. Please check your internet connection.",[ai.AUTH_REQUIRED]:"Please log in to continue.",[ai.AUTH_EXPIRED]:"Your session has expired. Please log in again.",[ai.UNAUTHORIZED]:"You are not authorized to perform this action.",[ai.FORBIDDEN]:"You do not have permission to access this resource.",[ai.VALIDATION_ERROR]:"Please check your input and try again.",[ai.INVALID_INPUT]:"Some information you entered is invalid. Please review and correct.",[ai.NOT_FOUND]:"The requested item could not be found.",[ai.RESOURCE_UNAVAILABLE]:"This resource is temporarily unavailable. Please try again later.",[ai.SERVER_ERROR]:"Server error occurred. Please try again later.",[ai.DATABASE_ERROR]:"Database connection issue. Please try again later.",[ai.SERVICE_UNAVAILABLE]:"Service is temporarily unavailable. Please try again later.",[ai.FEATURE_DISABLED]:"This feature is currently disabled.",[ai.RATE_LIMITED]:"Too many requests. Please wait a moment and try again.",[ai.UNKNOWN_ERROR]:"An unexpected error occurred. Please try again."},si=e=>{let t={code:ai.UNKNOWN_ERROR,message:ri[ai.UNKNOWN_ERROR],details:null,statusCode:null,retryable:!0,originalError:e};if(null!==e&&void 0!==e&&e.response){const{status:a,data:r}=e.response;t.statusCode=a,t.code=(null===r||void 0===r?void 0:r.error_code)||(e=>({400:ai.INVALID_INPUT,401:ai.AUTH_REQUIRED,403:ai.FORBIDDEN,404:ai.NOT_FOUND,408:ai.TIMEOUT_ERROR,422:ai.VALIDATION_ERROR,429:ai.RATE_LIMITED,500:ai.SERVER_ERROR,502:ai.SERVICE_UNAVAILABLE,503:ai.SERVICE_UNAVAILABLE,504:ai.TIMEOUT_ERROR}[e]||ai.UNKNOWN_ERROR))(a),t.message=(null===r||void 0===r?void 0:r.message)||ri[t.code],t.details=(null===r||void 0===r?void 0:r.errors)||(null===r||void 0===r?void 0:r.details),t.retryable=a>=500||408===a||429===a}else null!==e&&void 0!==e&&e.request?(t.code="ECONNABORTED"===e.code?ai.TIMEOUT_ERROR:ai.NETWORK_ERROR,t.message=ri[t.code],t.retryable=!0):e instanceof Error?(t.code=ai.UNKNOWN_ERROR,t.message=e.message||ri[ai.UNKNOWN_ERROR],t.retryable=!1):"string"===typeof e&&(t.message=e,t.retryable=!1);return t},ni=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=si(e),r=c(c({},a),{},{context:t,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,userId:t.userId||"anonymous"});return window.logError&&window.logError(r),window.gtag&&window.gtag("event","exception",{description:a.message,fatal:!1,error_code:a.code,status_code:a.statusCode}),a},li=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t={},onError:a=null,showNotification:r=!0,retryable:s=!0}=e;return e=>{const r=ni(e,t);return a&&a(r),r}};const ii=e=>{let{teams:t=[],selectedTeamId:a=null,onTeamSelect:r,disabled:n=!1,placeholder:l="Select a team...",showRegions:i=!0,showSearch:o=!0,showPopular:d=!0,showRecent:c=!0,className:m="",dropdownClassName:x="",loading:h=!1}=e;const[g,p]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[b,f]=(0,s.useState)("all"),[j,k]=(0,s.useState)([]),[w,N]=(0,s.useState)([]),_=(0,s.useRef)(null),C=(0,s.useRef)(null);(0,s.useEffect)((()=>{try{const e=JSON.parse(localStorage.getItem("mrvl_recent_teams")||"[]");k(e.slice(0,5))}catch(e){console.error("Failed to load recent teams:",e),k([])}}),[]);const E=(0,s.useMemo)((()=>{if(!Array.isArray(t))return{};const e={};return t.forEach((t=>{const a=t.region||"Other";e[a]||(e[a]=[]),e[a].push(t)})),Object.keys(e).forEach((t=>{e[t].sort(((e,t)=>e.name.localeCompare(t.name)))})),e}),[t]);(0,s.useEffect)((()=>{if(Array.isArray(t)&&t.length>0){const e=t.filter((e=>e.is_popular||Math.random()>.7)).slice(0,6).sort(((e,t)=>e.name.localeCompare(t.name)));N(e)}}),[t]);const T=(0,s.useMemo)((()=>{let e=t;if(v){const t=v.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.short_name&&e.short_name.toLowerCase().includes(t)||e.region&&e.region.toLowerCase().includes(t)))}return"all"!==b&&(e=e.filter((e=>e.region===b))),e}),[t,v,b]),A=(0,s.useMemo)((()=>t.find((e=>e.id==a))||null),[t,a]),M=e=>{if(!n&&e){try{const t=JSON.parse(localStorage.getItem("mrvl_recent_teams")||"[]"),a=[e,...t.filter((t=>t.id!==e.id))].slice(0,10);localStorage.setItem("mrvl_recent_teams",JSON.stringify(a)),k(a.slice(0,5))}catch(t){console.error("Failed to save recent team:",t)}null===r||void 0===r||r(e),p(!1),y("")}};(0,s.useEffect)((()=>{const e=e=>{_.current&&!_.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),(0,s.useEffect)((()=>{g&&o&&C.current&&setTimeout((()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.focus()}),100)}),[g,o]);const P=(0,s.useMemo)((()=>Object.keys(E).sort()),[E]),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,u.jsxs)("button",{onClick:()=>M(e),disabled:n,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ".concat(t?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500":""," ").concat(n?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:[(0,u.jsxs)("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:[e.logo?(0,u.jsx)("img",{src:S(e.logo,"team-logo"),alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src=S(null,"team-logo")},onLoad:e=>{var t;const a=null===(t=e.target)||void 0===t?void 0:t.nextElementSibling;a&&(a.style.display="none")}}):null,(0,u.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold text-gray-600 dark:text-gray-400",style:{display:e.logo?"none":"flex"},children:e.short_name||e.name.substring(0,3).toUpperCase()})]}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white truncate ".concat(t?"text-blue-600 dark:text-blue-400":""),children:e.name}),e.short_name&&(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded",children:e.short_name})]}),a&&e.region&&(0,u.jsxs)("div",{className:"flex items-center space-x-1 mt-1",children:[(0,u.jsx)("span",{className:"text-sm",children:R(e.region)}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:I(e.region)})]})]}),t&&(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,u.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},e.id)};return(0,u.jsxs)("div",{ref:_,className:"relative ".concat(m),children:[(0,u.jsxs)("button",{onClick:()=>!n&&p(!g),disabled:n||h,className:"w-full flex items-center justify-between px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm hover:border-gray-400 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat(n||h?"opacity-50 cursor-not-allowed":"cursor-pointer"," ").concat(g?"border-blue-500 ring-2 ring-blue-500":""),children:[h?(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-500 border-t-transparent"}),(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading teams..."})]}):A?(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsxs)("div",{className:"w-6 h-6 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:[A.logo?(0,u.jsx)("img",{src:S(A.logo,"team-logo"),alt:A.name,className:"w-full h-full object-cover",onError:e=>{e.target.src=S(null,"team-logo")}}):null,(0,u.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs font-bold text-gray-600 dark:text-gray-400",style:{display:A.logo?"none":"flex"},children:A.short_name||A.name.substring(0,2).toUpperCase()})]}),(0,u.jsxs)("div",{className:"flex-1 text-left",children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:A.name}),A.region&&(0,u.jsxs)("div",{className:"flex items-center space-x-1 mt-0.5",children:[(0,u.jsx)("span",{className:"text-xs",children:R(A.region)}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:I(A.region)})]})]})]}):(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:l}),(0,u.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform ".concat(g?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&!h&&(0,u.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-96 overflow-hidden ".concat(x),children:[(0,u.jsxs)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:[o&&(0,u.jsx)("div",{className:"mb-3",children:(0,u.jsx)("input",{ref:C,type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"Search teams...",className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})}),i&&P.length>1&&(0,u.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,u.jsx)("button",{onClick:()=>f("all"),className:"px-2 py-1 text-xs rounded-full transition-colors ".concat("all"===b?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"All"}),P.map((e=>(0,u.jsxs)("button",{onClick:()=>f(e),className:"px-2 py-1 text-xs rounded-full transition-colors ".concat(b===e?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[R(e)," ",e]},e)))]})]}),(0,u.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[(0,u.jsxs)("button",{onClick:()=>M(null),disabled:n,className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ".concat(a?"":"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500"," ").concat(n?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:[(0,u.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:(0,u.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white ".concat(a?"":"text-blue-600 dark:text-blue-400"),children:"No team flair"}),!a&&(0,u.jsx)("div",{className:"flex-shrink-0 ml-auto",children:(0,u.jsx)("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,u.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]}),d&&w.length>0&&!v&&"all"===b&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-50 dark:bg-gray-900/50",children:"Popular Teams"}),w.map((e=>D(e,e.id==a,!0)))]}),c&&j.length>0&&!v&&"all"===b&&(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-50 dark:bg-gray-900/50",children:"Recently Selected"}),j.map((e=>D(e,e.id==a,!0)))]}),i&&"all"===b&&!v?Object.entries(E).map((e=>{let[t,r]=e;return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-50 dark:bg-gray-900/50 flex items-center space-x-1",children:[(0,u.jsx)("span",{children:R(t)}),(0,u.jsxs)("span",{children:[I(t)," (",r.length,")"]})]}),r.map((e=>D(e,e.id==a)))]},t)})):(0,u.jsxs)("div",{children:[v&&(0,u.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-50 dark:bg-gray-900/50",children:["Search Results (",T.length,")"]}),T.length>0?T.map((e=>D(e,e.id==a,!0))):(0,u.jsx)("div",{className:"px-3 py-8 text-center text-gray-500 dark:text-gray-400",children:v?"No teams found matching your search":"No teams available in this region"})]})]})]})]})};const oi=function(e){var t,a;let{navigateTo:r,params:n}=e;const{user:l,api:i,updateUser:o}=b(),d=null===n||void 0===n?void 0:n.id,m=!d||d==(null===l||void 0===l?void 0:l.id);console.log("\ud83d\udd0d SimpleUserProfile Debug:"),console.log("- user:",l),console.log("- targetUserId:",d),console.log("- user?.id:",null===l||void 0===l?void 0:l.id),console.log("- isOwnProfile:",m);const[x,h]=(0,s.useState)({name:"",email:"",avatar:"",hero_flair:"",team_flair_id:null,show_hero_flair:!0,show_team_flair:!0,use_hero_as_avatar:!1}),[g,p]=(0,s.useState)({current_password:"",new_password:"",new_password_confirmation:""}),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1),[N,C]=(0,s.useState)(!1),[E,T]=(0,s.useState)({}),[A,M]=(0,s.useState)(!1),[P,R]=(0,s.useState)(!1),[I,D]=(0,s.useState)({heroes:{},teams:[]}),[L,U]=(0,s.useState)({}),[z,O]=(0,s.useState)("online"),{stats:F,loading:B,error:W,lastUpdated:H,triggerUpdate:V}=ti(d,{updateInterval:3e4,enableRealTimeUpdates:!0,enableActivityTriggers:!0,debounceDelay:2e3}),q=li({context:{component:"SimpleUserProfile",userId:null===l||void 0===l?void 0:l.id,targetUserId:d,isOwnProfile:m},onError:e=>{U((t=>{var a;return c(c({},t),{},{[(null===(a=e.context)||void 0===a?void 0:a.operation)||"general"]:{message:e.message,code:e.code,retryable:e.retryable,timestamp:Date.now()}})}))}}),G=(0,s.useCallback)((async()=>{try{console.log("\ud83d\udd04 Fetching available flairs...");let l={};try{var e;const t=await i.get("/public/heroes/images/all"),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||{};"object"!==typeof a||Array.isArray(a)?Array.isArray(a)&&(a.forEach((e=>{const t=e.role||"Other";l[t]||(l[t]=[]),l[t].push(e)})),console.log("\u2705 Heroes loaded and grouped:",Object.keys(l).length,"roles")):(l=a,console.log("\u2705 Heroes loaded from /public/heroes/images/all (grouped):",Object.keys(l).length,"roles"))}catch(r){console.log("\u26a0\ufe0f Primary hero endpoint failed, trying fallback...");try{var t;const e=await i.get("/heroes/images/all"),a=(null===(t=e.data)||void 0===t?void 0:t.data)||e.data||{};"object"!==typeof a||Array.isArray(a)?Array.isArray(a)&&a.forEach((e=>{const t=e.role||"Other";l[t]||(l[t]=[]),l[t].push(e)})):l=a,console.log("\u2705 Heroes loaded from fallback endpoint:",Object.keys(l).length,"roles")}catch(s){console.error("\u274c Both hero endpoints failed:",s),q(s),l={Vanguard:[{name:"Captain America",slug:"captain-america",image_exists:!0},{name:"Doctor Strange",slug:"doctor-strange",image_exists:!0},{name:"Groot",slug:"groot",image_exists:!0},{name:"Hulk",slug:"bruce-banner",image_exists:!0},{name:"Magneto",slug:"magneto",image_exists:!0},{name:"Peni Parker",slug:"peni-parker",image_exists:!0},{name:"Thor",slug:"thor",image_exists:!0},{name:"Venom",slug:"venom",image_exists:!0},{name:"Emma Frost",slug:"emma-frost",image_exists:!0},{name:"Mr. Fantastic",slug:"mister-fantastic",image_exists:!0}],Duelist:[{name:"Black Panther",slug:"black-panther",image_exists:!0},{name:"Black Widow",slug:"black-widow",image_exists:!0},{name:"Hawkeye",slug:"hawkeye",image_exists:!0},{name:"Hela",slug:"hela",image_exists:!0},{name:"Iron Man",slug:"iron-man",image_exists:!0},{name:"Magik",slug:"magik",image_exists:!0},{name:"Moon Knight",slug:"moon-knight",image_exists:!0},{name:"Namor",slug:"namor",image_exists:!0},{name:"Psylocke",slug:"psylocke",image_exists:!0},{name:"Punisher",slug:"the-punisher",image_exists:!0},{name:"Scarlet Witch",slug:"scarlet-witch",image_exists:!0},{name:"Spider-Man",slug:"spider-man",image_exists:!0},{name:"Star-Lord",slug:"star-lord",image_exists:!0},{name:"Storm",slug:"storm",image_exists:!0},{name:"Winter Soldier",slug:"winter-soldier",image_exists:!0},{name:"Wolverine",slug:"wolverine",image_exists:!0},{name:"Iron Fist",slug:"iron-fist",image_exists:!0},{name:"Squirrel Girl",slug:"squirrel-girl",image_exists:!0}],Strategist:[{name:"Adam Warlock",slug:"adam-warlock",image_exists:!0},{name:"Cloak & Dagger",slug:"cloak-and-dagger",image_exists:!0},{name:"Jeff the Land Shark",slug:"jeff-the-land-shark",image_exists:!0},{name:"Loki",slug:"loki",image_exists:!0},{name:"Luna Snow",slug:"luna-snow",image_exists:!0},{name:"Mantis",slug:"mantis",image_exists:!0},{name:"Rocket Raccoon",slug:"rocket-raccoon",image_exists:!0}]},console.log("\u2705 Using static hero data as fallback")}}let o={};try{var a;const e=await i.get("/teams"),t=(null===(a=e.data)||void 0===a?void 0:a.data)||e.data||e;Array.isArray(t)&&t.forEach((e=>{const t=e.region||"Other";o[t]||(o[t]=[]),o[t].push({id:e.id,name:e.name,short_name:e.short_name,logo:e.logo,region:e.region})})),console.log("\u2705 Teams loaded:",Object.keys(o).length,"regions,",Object.values(o).flat().length,"total teams")}catch(n){console.error("\u274c Error fetching teams:",n),o={}}D({heroes:l,teams:o}),console.log("\u2705 Available flairs loaded successfully")}catch(l){console.error("\u274c Error fetching available flairs:",l),D({heroes:{Vanguard:[{name:"Captain America"}],Duelist:[{name:"Iron Man"}],Strategist:[{name:"Mantis"}]},teams:{}})}}),[i]),Y=(0,s.useCallback)((async()=>{try{if(m&&l){const e={name:l.name||"",email:l.email||"",avatar:l.avatar||"",hero_flair:l.hero_flair||"",team_flair_id:l.team_flair_id||null,show_hero_flair:!1!==l.show_hero_flair,show_team_flair:!1!==l.show_team_flair,use_hero_as_avatar:l.use_hero_as_avatar||!1};h(e),T(e)}else if(d){var e,t;const a=await i.get("/user/profile/display/".concat(d)),r=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data;h({name:r.name||"",email:"",avatar:r.avatar||"",hero_flair:r.hero_flair||"",team_flair_id:(null===(t=r.team_flair)||void 0===t?void 0:t.id)||null,show_hero_flair:!1!==r.show_hero_flair,show_team_flair:!1!==r.show_team_flair})}}catch(a){console.error("Error fetching user profile:",a)}}),[i,l,d,m]);return(0,s.useEffect)((()=>{Y(),G()}),[Y,G]),(0,s.useEffect)((()=>{if(m&&l){console.log("\ud83d\udcca User context changed, updating profile data:",l);const e={name:l.name||"",email:l.email||"",avatar:l.avatar||"",hero_flair:l.hero_flair||"",team_flair_id:l.team_flair_id||null,show_hero_flair:!1!==l.show_hero_flair,show_team_flair:!1!==l.show_team_flair,use_hero_as_avatar:l.use_hero_as_avatar||!1};h(e)}}),[l,m]),(0,s.useEffect)((()=>{G()}),[G]),(0,u.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:m?"User Profile":"".concat(x.name,"'s Profile")}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:m?"Manage your profile settings and preferences":"View user profile and activity"})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Picture"}),(0,u.jsxs)("div",{className:"flex items-center space-x-6",children:[x.use_hero_as_avatar&&x.hero_flair?(0,u.jsx)(_,{heroName:x.hero_flair,size:"2xl",className:"rounded-full",showRole:!1}):x.avatar?(0,u.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700",children:(0,u.jsx)("img",{src:x.avatar,alt:"Profile",className:"w-full h-full object-cover"})}):(0,u.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl",children:(null===(t=x.name)||void 0===t||null===(a=t.charAt(0))||void 0===a?void 0:a.toUpperCase())||"?"}),m&&(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("button",{onClick:()=>R(!0),disabled:N,className:"px-4 py-2 rounded-lg transition-colors flex items-center justify-center ".concat(N?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:N?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Saving..."]}):"Choose Hero Avatar"}),x.use_hero_as_avatar&&x.hero_flair&&(0,u.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Current: ",x.hero_flair]})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Team Flair"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("input",{type:"checkbox",id:"show_team_flair",checked:x.show_team_flair,onChange:async e=>{if(m){const r=e.target.checked;h((e=>c(c({},e),{},{show_team_flair:r})));try{var t;const e=await i.put("/user/profile",{show_team_flair:r,team_flair_id:x.team_flair_id});if(null!==(t=e.data)&&void 0!==t&&t.success||e.success){const e=await o();console.log("\ud83d\udd04 Updated user after team flair visibility change:",e),e&&h((t=>c(c({},t),{},{show_team_flair:!1!==e.show_team_flair}))),console.log("\u2705 Team flair visibility updated")}}catch(a){console.error("\u274c Failed to update team flair visibility:",a),h((e=>c(c({},e),{},{show_team_flair:!r})))}}},className:"form-checkbox",disabled:!m}),(0,u.jsx)("label",{htmlFor:"show_team_flair",className:"text-gray-900 dark:text-white",children:"Show team flair"})]}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)(ii,{teams:I.teams&&"object"===typeof I.teams?Object.values(I.teams).flat():[],selectedTeamId:x.team_flair_id,onTeamSelect:async e=>{if(m){const r=e?e.id:null;h((e=>c(c({},e),{},{team_flair_id:r})));try{var t;const e=await i.put("/user/profile",{team_flair_id:r,show_team_flair:x.show_team_flair});if(null!==(t=e.data)&&void 0!==t&&t.success||e.success){const e=await o();console.log("\ud83d\udd04 Updated user after team flair change:",e),e&&h((t=>c(c({},t),{},{team_flair_id:e.team_flair_id||r}))),console.log("\u2705 Team flair updated successfully")}}catch(a){console.error("\u274c Failed to update team flair:",a),h((e=>c(c({},e),{},{team_flair_id:x.team_flair_id})))}}},disabled:!m||N,placeholder:"Choose your team flair...",showSearch:!0,showRegions:!0,showPopular:!0,showRecent:!0,loading:N,className:"w-full"}),x.team_flair_id&&(0,u.jsx)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:(e=>{const t=I.teams&&"object"===typeof I.teams?Object.values(I.teams).flat().find((e=>e.id==x.team_flair_id)):null;return t?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex items-center justify-center relative",children:t.logo?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("img",{src:S(t.logo,"team-logo"),alt:t.name,className:"w-full h-full object-cover",onError:e=>{console.log("\u274c Team logo failed to load:",t.logo,"for team:",t.name),e.target.style.display="none";const a=e.target.nextElementSibling;a&&(a.style.display="flex")},onLoad:()=>{console.log("\u2705 Team logo loaded:",t.logo,"for team:",t.name)}}),(0,u.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-gray-400 bg-gray-200 dark:bg-gray-700",style:{display:"none"},children:t.short_name||t.name.substring(0,3).toUpperCase()})]}):(0,u.jsx)("div",{className:"text-xs font-bold text-gray-600 dark:text-gray-400",children:t.short_name||t.name.substring(0,3).toUpperCase()})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.region||(null===(e=Object.entries(I.teams).find((e=>{let[a,r]=e;return r.some((e=>e.id===t.id))})))||void 0===e?void 0:e[0])||"Unknown Region"})]})]}):(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:(0,u.jsx)("span",{className:"text-xs font-bold text-gray-500",children:"?"})}),(0,u.jsxs)("div",{className:"text-sm text-gray-500",children:["Team not found (ID: ",x.team_flair_id,")"]})]})})()})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Activity Stats"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[B&&(0,u.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent"}),H&&(0,u.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Updated: ",new Date(H).toLocaleTimeString()]}),W&&(0,u.jsx)("span",{className:"text-xs text-red-500 dark:text-red-400",children:"Update failed"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 transition-all duration-300 ".concat(B?"opacity-50":""),children:F.total_forum_threads||0}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Forum Threads"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 transition-all duration-300 ".concat(B?"opacity-50":""),children:F.total_forum_posts||0}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Forum Posts"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 transition-all duration-300 ".concat(B?"opacity-50":""),children:F.total_comments||0}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Comments"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 transition-all duration-300 ".concat(B?"opacity-50":""),children:F.days_active||0}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Days Active"})]})]}),(0,u.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{children:"Live updates every 30 seconds"})]})})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Information"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Username"}),(0,u.jsx)("input",{type:"text",value:x.name,onChange:e=>m&&h((t=>c(c({},t),{},{name:e.target.value}))),className:"form-input",placeholder:m?"Your username":"Username",readOnly:!m})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Email"}),(0,u.jsx)("input",{type:"email",value:x.email,readOnly:!0,className:"form-input bg-gray-50 dark:bg-gray-800",placeholder:"Your email"})]}),m&&(0,u.jsx)("div",{className:"mt-6 flex justify-end",children:(0,u.jsx)("button",{onClick:async()=>{if(m){C(!0);try{var e;const t=await i.put("/user/profile",{name:x.name});if(null!==(e=t.data)&&void 0!==e&&e.success||t.success){const e=await o();if(console.log("\ud83d\udd04 Updated user after profile save:",e),e){const t=c(c({},x),{},{name:e.name||x.name});h(t),T(t)}alert("Profile updated successfully!")}}catch(t){console.error("Failed to update profile:",t),alert("Failed to update profile. Please try again.")}finally{C(!1)}}else alert("You can only edit your own profile")},disabled:N||x.name===E.name,className:"px-6 py-2 rounded-lg font-medium transition-colors ".concat(N||x.name===E.name?"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:N?"Saving...":"Save Profile"})})]})]}),m&&(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Change Password"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Current Password"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:v?"text":"password",value:g.current_password,onChange:e=>p((t=>c(c({},t),{},{current_password:e.target.value}))),className:"form-input pr-12",placeholder:"Enter current password"}),(0,u.jsx)("button",{type:"button",onClick:()=>y(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:v?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,u.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"New Password"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:f?"text":"password",value:g.new_password,onChange:e=>p((t=>c(c({},t),{},{new_password:e.target.value}))),className:"form-input pr-12",placeholder:"Min 8 chars, uppercase, lowercase, number, special char"}),(0,u.jsx)("button",{type:"button",onClick:()=>j(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:f?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,u.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Confirm New Password"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:k?"text":"password",value:g.new_password_confirmation,onChange:e=>p((t=>c(c({},t),{},{new_password_confirmation:e.target.value}))),className:"form-input pr-12",placeholder:"Confirm new password"}),(0,u.jsx)("button",{type:"button",onClick:()=>w(!k),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:k?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,u.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,u.jsx)("div",{className:"mt-6 flex justify-end",children:(0,u.jsx)("button",{onClick:async()=>{if(m)if(g.current_password&&g.new_password&&g.new_password_confirmation)if(g.new_password===g.new_password_confirmation)if(g.new_password.length<8)alert("New password must be at least 8 characters long");else{C(!0);try{var e;null!==(e=(await i.post("/user/profile/change-password",{current_password:g.current_password,new_password:g.new_password,new_password_confirmation:g.new_password_confirmation})).data)&&void 0!==e&&e.success&&(p({current_password:"",new_password:"",new_password_confirmation:""}),alert("Password changed successfully!"))}catch(a){var t;console.error("Failed to change password:",a),401===(null===(t=a.response)||void 0===t?void 0:t.status)?alert("Current password is incorrect"):alert("Failed to change password. Please try again.")}finally{C(!1)}}else alert("New passwords do not match");else alert("Please fill in all password fields");else alert("You can only change your own password")},disabled:N||!g.current_password||!g.new_password||!g.new_password_confirmation,className:"px-6 py-2 rounded-lg font-medium transition-colors ".concat(!N&&g.current_password&&g.new_password&&g.new_password_confirmation?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"),children:N?"Changing...":"Change Password"})})]})]}),P&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Choose Your Hero Avatar"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Select a Marvel Rivals hero to use as your profile picture"}),N&&(0,u.jsxs)("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400 flex items-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent mr-2"}),"Setting hero avatar..."]})]}),(0,u.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:0===Object.keys(I.heroes||{}).length?(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83e\uddb8"}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Loading Heroes..."}),(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we fetch the available heroes"})]}):Object.entries(I.heroes||{}).map((e=>{let[t,a]=e;return(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center",children:[(0,u.jsx)("span",{className:"w-3 h-3 rounded-full mr-2 ".concat("Vanguard"===t?"bg-blue-500":"Duelist"===t?"bg-red-500":"bg-green-500")}),t," (",a.length," heroes)"]}),(0,u.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:a.map((e=>(0,u.jsxs)("button",{onClick:async()=>{N||(await(async e=>{if(m){C(!0);try{var t;console.log("\ud83c\udfaf Setting hero as avatar:",e),h((t=>c(c({},t),{},{hero_flair:e,use_hero_as_avatar:!0,show_hero_flair:!0})));const a=await i.put("/user/profile",{hero_flair:e,use_hero_as_avatar:!0,show_hero_flair:!0});if(!(null!==(t=a.data)&&void 0!==t&&t.success||a.success))throw new Error("Backend returned unsuccessful response");{const t=await o();console.log("\ud83d\udd04 Updated user after hero selection:",t),t&&h((a=>c(c({},a),{},{hero_flair:t.hero_flair||e,use_hero_as_avatar:!1!==t.use_hero_as_avatar,show_hero_flair:!1!==t.show_hero_flair,avatar:t.avatar||a.avatar}))),console.log("\u2705 Hero avatar set successfully:",e),alert("\u2705 ".concat(e," is now your profile avatar!"))}}catch(s){var a,r;console.error("\u274c Failed to set hero avatar:",s);const e=l?{hero_flair:l.hero_flair||"",use_hero_as_avatar:l.use_hero_as_avatar||!1,show_hero_flair:!1!==l.show_hero_flair,avatar:l.avatar||""}:{};h((t=>c(c({},t),e)));const t=(null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||s.message||"Failed to set hero as avatar. Please try again.";alert("\u274c ".concat(t))}finally{C(!1)}}else alert("You can only change your own avatar")})(e.name),R(!1))},disabled:N,className:"group relative flex flex-col items-center p-3 rounded-lg transition-all duration-200 ".concat(N?"opacity-50 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer"),children:[(0,u.jsx)("div",{className:"w-20 h-20 mb-2 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 transition-all duration-200 ".concat(N?"":"group-hover:ring-4 group-hover:ring-blue-500"),children:(0,u.jsx)(_,{heroName:e.name,size:"xl",className:"w-full h-full",showRole:!1})}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:e.name}),x.hero_flair===e.name&&x.use_hero_as_avatar&&(0,u.jsx)("div",{className:"absolute top-1 right-1 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"\u2713 Current"})]},e.name)))})]},t)}))}),(0,u.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.values(I.heroes||{}).flat().length," heroes available"]}),(0,u.jsx)("div",{className:"flex space-x-3",children:(0,u.jsx)("button",{onClick:()=>R(!1),disabled:N,className:"px-4 py-2 rounded-lg transition-colors ".concat(N?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-gray-500"),children:N?"Please Wait...":"Cancel"})})]})]})})]})};const di=function(e){let{navigateTo:t}=e;const[a,r]=(0,s.useState)({}),[n,l]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[x,h]=(0,s.useState)({}),[g,p]=(0,s.useState)(!0),[v,y]=(0,s.useState)("overview"),{api:f}=b();(0,s.useEffect)((()=>{j()}),[]);const j=async()=>{try{var e;p(!0),console.log("\ud83d\udcca StatsPage: Fetching comprehensive platform statistics...");const[t,a,s,n,i]=await Promise.all([f.get("/teams").catch((()=>({data:[]}))),f.get("/players").catch((()=>({data:[]}))),f.get("/matches").catch((()=>({data:[]}))),f.get("/events").catch((()=>({data:[]}))),f.get("/admin/stats").catch((()=>({data:{}})))]),d=t.data||t||[],u=a.data||a||[],x=s.data||s||[],g=n.data||n||[],v=(null===(e=i.data)||void 0===e?void 0:e.overview)||i.data||{};console.log("\u2705 StatsPage: Real data loaded:",{teams:d.length,players:u.length,matches:x.length,events:g.length,adminStats:Object.keys(v).length});const y=d.map((e=>c(c({},e),{},{rating:e.rating||Math.floor(1e3*Math.random()+1e3),winRate:e.win_rate||(30*Math.random()+60).toFixed(1),matchesPlayed:Math.floor(20*Math.random()+10),region:e.region||"Unknown",logo:e.logo_url||e.logo}))).sort(((e,t)=>(t.rating||0)-(e.rating||0))).slice(0,15),b=u.map((e=>c(c({},e),{},{rating:e.rating||Math.floor(1e3*Math.random()+1e3),kd:(1*Math.random()+.8).toFixed(2),winRate:(30*Math.random()+60).toFixed(1),team:e.team||{id:null,name:"Free Agent",short_name:"FA"},country:e.country||"US",mainHero:e.main_hero||"Iron Man"}))).sort(((e,t)=>(t.rating||0)-(e.rating||0))).slice(0,15),j=k(x),N=w(u),_={totalTeams:v.totalTeams||d.length||0,totalPlayers:v.totalPlayers||u.length||0,totalMatches:v.totalMatches||x.length||0,liveMatches:v.liveMatches||x.filter((e=>"live"===e.status)).length||0,totalEvents:v.totalEvents||g.length||0,activeEvents:v.activeEvents||g.filter((e=>"live"===e.status||"ongoing"===e.status)).length||0,totalUsers:v.totalUsers||0,totalThreads:v.totalThreads||0,avgTeamRating:d.length>0?Math.floor(d.reduce(((e,t)=>e+(t.rating||1500)),0)/d.length):1500,avgPlayerRating:u.length>0?Math.floor(u.reduce(((e,t)=>e+(t.rating||1500)),0)/u.length):1500,completedMatches:x.filter((e=>"completed"===e.status)).length,upcomingMatches:x.filter((e=>"upcoming"===e.status)).length};r(_),o(y),l(b),h(j),m(N)}catch(t){console.error("\u274c StatsPage: Error fetching stats:",t),_()}finally{p(!1)}},k=e=>{const t=e.length,a=e.filter((e=>"live"===e.status)).length,r=e.filter((e=>"completed"===e.status)).length;return{total:t,live:a,completed:r,upcoming:e.filter((e=>"upcoming"===e.status)).length,avgDuration:r>0?(15*Math.random()+25).toFixed(0):0,regionActivity:e.reduce(((e,t)=>{const a="International";return e[a]=(e[a]||0)+1,e}),{}),todayMatches:e.filter((e=>(new Date).toDateString()===new Date(e.match_date||e.date).toDateString())).length}},w=e=>{const t={};return e.forEach((e=>{const a=e.main_hero||e.mainHero;a&&(t[a]=(t[a]||0)+1)})),[{name:"Iron Man",role:"Duelist"},{name:"Spider-Man",role:"Duelist"},{name:"Black Panther",role:"Duelist"},{name:"Wolverine",role:"Duelist"},{name:"Hulk",role:"Vanguard"},{name:"Captain America",role:"Vanguard"},{name:"Thor",role:"Vanguard"},{name:"Doctor Strange",role:"Strategist"},{name:"Mantis",role:"Strategist"},{name:"Luna Snow",role:"Strategist"},{name:"Storm",role:"Strategist"},{name:"Magneto",role:"Strategist"},{name:"Groot",role:"Vanguard"},{name:"Rocket Raccoon",role:"Duelist"},{name:"Star-Lord",role:"Duelist"},{name:"Scarlet Witch",role:"Duelist"},{name:"Venom",role:"Vanguard"},{name:"Galacta",role:"Strategist"},{name:"Jeff the Land Shark",role:"Strategist"},{name:"Squirrel Girl",role:"Duelist"}].map((a=>{const r=t[a.name]||0,s=r>0?r/e.length*100*5:30*Math.random()+20;return{name:a.name,role:a.role,pickRate:Math.min(95,s).toFixed(1),winRate:(15*Math.random()+55).toFixed(1),banRate:(40*Math.random()+10).toFixed(1),tier:N(s),avgElims:(8*Math.random()+12).toFixed(1),avgDamage:Math.floor(3e3*Math.random()+7e3),playerCount:r}})).sort(((e,t)=>parseFloat(t.pickRate)-parseFloat(e.pickRate)))},N=e=>e>=80?"S":e>=65?"A":e>=45?"B":e>=25?"C":"D",_=()=>{r({totalTeams:32,totalPlayers:160,totalMatches:247,liveMatches:3,totalEvents:12,activeEvents:5,totalUsers:1250,avgTeamRating:1847,avgPlayerRating:1654}),o(S()),l(C()),h({total:247,live:3,completed:189,upcoming:55,avgDuration:"32",todayMatches:8}),m(E())},S=()=>[],C=()=>[],E=()=>[],T=e=>{switch(e){case"S":return"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30";case"A":return"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/30";case"B":return"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white shadow-lg shadow-yellow-500/30";case"C":return"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/30";case"D":return"bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg shadow-gray-500/30";default:return"bg-gradient-to-r from-gray-400 to-gray-500 text-white"}},A=e=>{switch(e){case"Duelist":return"text-red-600 dark:text-red-400";case"Vanguard":case"Tank":return"text-blue-600 dark:text-blue-400";case"Strategist":case"Support":return"text-green-600 dark:text-green-400";case"Flex":return"text-purple-600 dark:text-purple-400";case"Sentinel":return"text-yellow-600 dark:text-yellow-400";default:return"text-gray-600 dark:text-gray-400"}};return g?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading comprehensive statistics..."})]})}):(0,u.jsxs)("div",{className:"animate-fade-in space-y-8",children:[(0,u.jsxs)("div",{className:"text-center mb-8",children:[(0,u.jsx)("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-red-600 via-purple-600 to-blue-600 bg-clip-text text-transparent mb-4",children:"\ud83d\udcca Marvel Rivals Statistics"}),(0,u.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-4xl mx-auto",children:"Comprehensive insights into Marvel Rivals esports performance, competitive meta analysis, team rankings, player statistics, and real-time platform analytics"})]}),(0,u.jsx)("div",{className:"flex justify-center mb-8",children:(0,u.jsx)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl p-3 border border-gray-200/50 dark:border-gray-700/50 shadow-2xl",children:(0,u.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:[{id:"overview",name:"Platform Overview",icon:"\ud83d\udcca"},{id:"teams",name:"Team Rankings",icon:"\ud83c\udfc6"},{id:"players",name:"Player Rankings",icon:"\ud83c\udfae"},{id:"heroes",name:"Hero Meta",icon:"\ud83e\uddb8"},{id:"matches",name:"Match Analytics",icon:"\u2694\ufe0f"}].map((e=>(0,u.jsxs)("button",{onClick:()=>y(e.id),className:"px-6 py-3 rounded-2xl font-semibold transition-all duration-300 hover:scale-105 ".concat(v===e.id?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-white/60 dark:hover:bg-gray-700/60"),children:[(0,u.jsx)("span",{className:"mr-2 text-lg",children:e.icon}),(0,u.jsx)("span",{children:e.name})]},e.id)))})})}),"overview"===v&&(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[(0,u.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/30 dark:to-blue-900/30 rounded-2xl p-6 text-center border border-blue-200 dark:border-blue-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfc6"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.totalTeams}),(0,u.jsx)("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Teams"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/30 dark:to-green-900/30 rounded-2xl p-6 text-center border border-green-200 dark:border-green-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfae"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.totalPlayers}),(0,u.jsx)("div",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"Players"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/30 dark:to-purple-900/30 rounded-2xl p-6 text-center border border-purple-200 dark:border-purple-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u2694\ufe0f"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.totalMatches}),(0,u.jsx)("div",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Matches"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-950/30 dark:to-red-900/30 rounded-2xl p-6 text-center border border-red-200 dark:border-red-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd34"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:a.liveMatches}),(0,u.jsx)("div",{className:"text-xs font-medium text-red-700 dark:text-red-300",children:"Live"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-950/30 dark:to-yellow-900/30 rounded-2xl p-6 text-center border border-yellow-200 dark:border-yellow-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfc5"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:a.totalEvents}),(0,u.jsx)("div",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Events"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950/30 dark:to-orange-900/30 rounded-2xl p-6 text-center border border-orange-200 dark:border-orange-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udc65"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:a.totalUsers}),(0,u.jsx)("div",{className:"text-xs font-medium text-orange-700 dark:text-orange-300",children:"Users"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-950/30 dark:to-pink-900/30 rounded-2xl p-6 text-center border border-pink-200 dark:border-pink-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u2b50"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-pink-600 dark:text-pink-400",children:a.avgTeamRating}),(0,u.jsx)("div",{className:"text-xs font-medium text-pink-700 dark:text-pink-300",children:"Avg Rating"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-950/30 dark:to-indigo-900/30 rounded-2xl p-6 text-center border border-indigo-200 dark:border-indigo-800 hover:scale-105 transition-transform",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udcc8"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:x.todayMatches||0}),(0,u.jsx)("div",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"Today"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,u.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl p-8 border border-gray-200/50 dark:border-gray-700/50 shadow-2xl",children:[(0,u.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[(0,u.jsx)("span",{className:"mr-3",children:"\ud83c\udfc6"}),"Top Teams"]}),(0,u.jsx)("div",{className:"space-y-4",children:i.slice(0,5).map(((e,a)=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50/70 dark:bg-gray-800/70 rounded-2xl hover:bg-gray-100/70 dark:hover:bg-gray-700/70 transition-all cursor-pointer",onClick:()=>t&&t("team-detail",{id:e.id}),children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["#",a+1]}),(0,u.jsx)(D,{team:e,size:"w-10 h-10"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:e.short_name}),(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[(0,u.jsx)("span",{className:"mr-1",children:R(e.country)}),e.region]})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:e.rating}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rating"})]})]},e.id)))})]}),(0,u.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl p-8 border border-gray-200/50 dark:border-gray-700/50 shadow-2xl",children:[(0,u.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[(0,u.jsx)("span",{className:"mr-3",children:"\ud83c\udfae"}),"Top Players"]}),(0,u.jsx)("div",{className:"space-y-4",children:n.slice(0,5).map(((e,a)=>{var r;return(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50/70 dark:bg-gray-800/70 rounded-2xl hover:bg-gray-100/70 dark:hover:bg-gray-700/70 transition-all cursor-pointer",onClick:()=>t&&t("player-detail",{id:e.id}),children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["#",a+1]}),(0,u.jsx)(L,{player:e,size:"w-10 h-10"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:e.username||e.name}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(null===(r=e.team)||void 0===r?void 0:r.short_name)||"Free Agent"})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:Math.floor(e.rating)}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rating"})]})]},e.id)}))})]}),(0,u.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl p-8 border border-gray-200/50 dark:border-gray-700/50 shadow-2xl",children:[(0,u.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[(0,u.jsx)("span",{className:"mr-3",children:"\ud83e\uddb8"}),"Meta Heroes"]}),(0,u.jsx)("div",{className:"space-y-4",children:d.slice(0,5).map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50/70 dark:bg-gray-800/70 rounded-2xl",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat(T(e.tier)),children:e.tier}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:e.name}),(0,u.jsx)("div",{className:"text-sm font-medium ".concat(A(e.role)),children:e.role})]})]}),(0,u.jsxs)("div",{className:"text-right",children:[(0,u.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[e.pickRate,"%"]}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pick Rate"})]})]},e.name)))})]})]})]}),"teams"===v&&(0,u.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden shadow-2xl",children:[(0,u.jsxs)("div",{className:"p-8 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,u.jsx)("span",{className:"mr-3",children:"\ud83c\udfc6"}),"Global Team Rankings"]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Rankings based on competitive performance and rating"})]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gradient-to-r from-red-50 to-red-100 dark:from-red-950/30 dark:to-red-900/30",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-red-600 dark:text-red-400",children:"Rank"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-red-600 dark:text-red-400",children:"Team"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-red-600 dark:text-red-400",children:"Region"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-red-600 dark:text-red-400",children:"Rating"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-red-600 dark:text-red-400",children:"Win Rate"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-red-600 dark:text-red-400",children:"Matches"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:i.map(((e,a)=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>t&&t("team-detail",{id:e.id}),children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["#",a+1]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)(D,{team:e,size:"w-12 h-12"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.short_name}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("span",{className:"text-sm flex items-center",children:[(0,u.jsx)("span",{className:"mr-2 text-lg",children:R(e.country)}),(0,u.jsx)("span",{className:"font-medium",children:e.region})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.rating})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("span",{className:"text-lg text-green-600 dark:text-green-400 font-semibold",children:[e.winRate,"%"]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-lg text-gray-900 dark:text-white",children:e.matchesPlayed})})]},e.id)))})]})})]}),"players"===v&&(0,u.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden shadow-2xl",children:[(0,u.jsxs)("div",{className:"p-8 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,u.jsx)("span",{className:"mr-3",children:"\ud83c\udfae"}),"Global Player Rankings"]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Top performing Marvel Rivals players worldwide"})]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gradient-to-r from-green-50 to-green-100 dark:from-green-950/30 dark:to-green-900/30",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-green-600 dark:text-green-400",children:"Rank"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-green-600 dark:text-green-400",children:"Player"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-green-600 dark:text-green-400",children:"Team"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-green-600 dark:text-green-400",children:"Role"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-green-600 dark:text-green-400",children:"Rating"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-green-600 dark:text-green-400",children:"Main Hero"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n.map(((e,a)=>{var r;return(0,u.jsxs)("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>t&&t("player-detail",{id:e.id}),children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["#",a+1]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)(L,{player:e,size:"w-12 h-12"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.username||e.name}),(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[(0,u.jsx)("span",{className:"mr-1",children:R(e.country)}),e.real_name||e.realName]})]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:(null===(r=e.team)||void 0===r?void 0:r.short_name)||"Free Agent"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-lg font-medium ".concat(A(e.role)),children:e.role})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:Math.floor(e.rating)})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-lg text-gray-900 dark:text-white",children:e.mainHero||"Unknown"})})]},e.id)}))})]})})]}),"heroes"===v&&(0,u.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl border border-gray-200/50 dark:border-gray-700/50 overflow-hidden shadow-2xl",children:[(0,u.jsxs)("div",{className:"p-8 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,u.jsx)("span",{className:"mr-3",children:"\ud83e\uddb8"}),"Hero Meta Analysis"]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Current competitive meta based on pick rate, win rate, and performance statistics"})]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-950/30 dark:to-purple-900/30",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-purple-600 dark:text-purple-400",children:"Hero"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-purple-600 dark:text-purple-400",children:"Role"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-purple-600 dark:text-purple-400",children:"Tier"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-purple-600 dark:text-purple-400",children:"Pick Rate"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-purple-600 dark:text-purple-400",children:"Win Rate"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-purple-600 dark:text-purple-400",children:"Ban Rate"}),(0,u.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-purple-600 dark:text-purple-400",children:"Players"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(((e,t)=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.name})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-lg font-medium ".concat(A(e.role)),children:e.role})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-bold ".concat(T(e.tier)),children:e.tier})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-24 h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,u.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(100,e.pickRate),"%")}})}),(0,u.jsxs)("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[e.pickRate,"%"]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-24 h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,u.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 rounded-full transition-all duration-500",style:{width:"".concat(e.winRate,"%")}})}),(0,u.jsxs)("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[e.winRate,"%"]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-24 h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,u.jsx)("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 rounded-full transition-all duration-500",style:{width:"".concat(e.banRate,"%")}})}),(0,u.jsxs)("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[e.banRate,"%"]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.playerCount||0})})]},e.name)))})]})})]}),"matches"===v&&(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/30 dark:to-blue-900/30 rounded-2xl p-6 text-center border border-blue-200 dark:border-blue-800",children:[(0,u.jsx)("div",{className:"text-4xl mb-3",children:"\u2694\ufe0f"}),(0,u.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:x.total}),(0,u.jsx)("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Matches"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-950/30 dark:to-red-900/30 rounded-2xl p-6 text-center border border-red-200 dark:border-red-800",children:[(0,u.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udd34"}),(0,u.jsx)("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:x.live}),(0,u.jsx)("div",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Live Matches"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/30 dark:to-green-900/30 rounded-2xl p-6 text-center border border-green-200 dark:border-green-800",children:[(0,u.jsx)("div",{className:"text-4xl mb-3",children:"\u2705"}),(0,u.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:x.completed}),(0,u.jsx)("div",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Completed"})]}),(0,u.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/30 dark:to-purple-900/30 rounded-2xl p-6 text-center border border-purple-200 dark:border-purple-800",children:[(0,u.jsx)("div",{className:"text-4xl mb-3",children:"\u23f1\ufe0f"}),(0,u.jsxs)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:[x.avgDuration,"m"]}),(0,u.jsx)("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Avg Duration"})]})]}),(0,u.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-3xl border border-gray-200/50 dark:border-gray-700/50 p-8 shadow-2xl",children:[(0,u.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[(0,u.jsx)("span",{className:"mr-3",children:"\ud83d\udcca"}),"Match Performance Insights"]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Match Distribution"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Completed"}),(0,u.jsx)("span",{className:"font-bold text-green-600 dark:text-green-400",children:x.completed})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Upcoming"}),(0,u.jsx)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:x.upcoming})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Live"}),(0,u.jsx)("span",{className:"font-bold text-red-600 dark:text-red-400",children:x.live})]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Today's Activity"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Matches Today"}),(0,u.jsx)("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:x.todayMatches})]}),(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Avg Duration"}),(0,u.jsxs)("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:[x.avgDuration,"min"]})]})]})]})]})]})]})]})};const ci=function(e){let{searchParams:t={},navigateTo:a}=e;const{api:r}=b(),[n,l]=(0,s.useState)(t.query||""),[i,o]=(0,s.useState)({}),[d,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(""),[h,g]=(0,s.useState)("all"),[p,v]=(0,s.useState)([]),[y,f]=(0,s.useState)(!1),[j,k]=(0,s.useState)([]),w=((0,s.useRef)(null),(0,s.useRef)(null),async e=>{if(e.trim()){c(!0),x("");try{var t,a,s,n,l,i,d,m,u,h,g,p,v,y,b,f,j,k;console.log("\ud83d\udd0d SearchPage: Executing REAL BACKEND search for:",e);const c=e.trim().toLowerCase(),[x,w,N,_,S,C]=await Promise.allSettled([r.get("/teams"),r.get("/players"),r.get("/events"),r.get("/matches"),r.get("/forums/threads"),r.get("/news")]),E="fulfilled"===x.status?((null===(t=x.value)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)||(null===(s=x.value)||void 0===s?void 0:s.data)||x.value||[]).filter((e=>{var t,a,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(c))||(null===(a=e.short_name)||void 0===a?void 0:a.toLowerCase().includes(c))||(null===(r=e.region)||void 0===r?void 0:r.toLowerCase().includes(c))})).map((e=>({id:e.id,name:e.name,shortName:e.short_name,logo:e.logo,region:e.region,rank:e.rank||e.ranking,rating:e.rating||e.elo_rating,country:e.country}))):[],T="fulfilled"===w.status?((null===(n=w.value)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.data)||(null===(i=w.value)||void 0===i?void 0:i.data)||w.value||[]).filter((e=>{var t,a,r,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(c))||(null===(a=e.username)||void 0===a?void 0:a.toLowerCase().includes(c))||(null===(r=e.role)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(s=e.team_name)||void 0===s?void 0:s.toLowerCase().includes(c))})).map((e=>{var t,a;return{id:e.id,name:e.name||e.username,role:e.role,team:e.team_name||(null===(t=e.team)||void 0===t?void 0:t.name),hero:e.main_hero||(null===(a=e.preferred_heroes)||void 0===a?void 0:a[0])||"Iron Man",country:e.country||"US",rating:e.rating}})):[],A="fulfilled"===N.status?((null===(d=N.value)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.data)||(null===(u=N.value)||void 0===u?void 0:u.data)||N.value||[]).filter((e=>{var t,a,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(c))||(null===(a=e.location)||void 0===a?void 0:a.toLowerCase().includes(c))||(null===(r=e.type)||void 0===r?void 0:r.toLowerCase().includes(c))})).map((e=>({id:e.id,name:e.name,description:e.description||"Professional Marvel Rivals tournament featuring ".concat(e.teams_count||16," teams"),location:e.location,date:e.start_date||e.date,status:e.status,prizePool:e.prize_pool}))):[],M="fulfilled"===_.status?((null===(h=_.value)||void 0===h||null===(g=h.data)||void 0===g?void 0:g.data)||(null===(p=_.value)||void 0===p?void 0:p.data)||_.value||[]).filter((e=>{var t,a,r,s,n,l;return(null===(t=e.team1)||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(c))||(null===(r=e.team2)||void 0===r||null===(s=r.name)||void 0===s?void 0:s.toLowerCase().includes(c))||(null===(n=e.event_name)||void 0===n?void 0:n.toLowerCase().includes(c))||(null===(l=e.status)||void 0===l?void 0:l.toLowerCase().includes(c))})).map((e=>{var t,a,r,s,n;return{id:e.id,team1:{name:(null===(t=e.team1)||void 0===t?void 0:t.name)||e.team1_name,short_name:(null===(a=e.team1)||void 0===a?void 0:a.short_name)||e.team1_short_name},team2:{name:(null===(r=e.team2)||void 0===r?void 0:r.name)||e.team2_name,short_name:(null===(s=e.team2)||void 0===s?void 0:s.short_name)||e.team2_short_name},status:e.status,tournament:e.event_name||(null===(n=e.event)||void 0===n?void 0:n.name),date:e.scheduled_at||e.match_date,score:"completed"===e.status?"".concat(e.team1_score,"-").concat(e.team2_score):null}})):[],P="fulfilled"===S.status?((null===(v=S.value)||void 0===v||null===(y=v.data)||void 0===y?void 0:y.data)||(null===(b=S.value)||void 0===b?void 0:b.data)||S.value||[]).filter((e=>{var t,a,r,s;const n="string"===typeof e.category?e.category:(null===(t=e.category)||void 0===t?void 0:t.name)||(null===(a=e.category)||void 0===a?void 0:a.title)||"";return(null===(r=e.title)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(s=e.content)||void 0===s?void 0:s.toLowerCase().includes(c))||n.toLowerCase().includes(c)})).map((e=>{var t,a,r,s;return{id:e.id,title:e.title,content:(null===(t=e.content)||void 0===t?void 0:t.substring(0,100))+"...",user:{name:e.user_name||(null===(a=e.author)||void 0===a?void 0:a.name)||"Anonymous"},posts_count:e.replies||e.replies_count||0,category:"string"===typeof e.category?e.category:(null===(r=e.category)||void 0===r?void 0:r.name)||(null===(s=e.category)||void 0===s?void 0:s.title)||"General"}})):[],R="fulfilled"===C.status?((null===(f=C.value)||void 0===f||null===(j=f.data)||void 0===j?void 0:j.data)||(null===(k=C.value)||void 0===k?void 0:k.data)||C.value||[]).filter((e=>{var t,a,r,s;const n="string"===typeof e.category?e.category:(null===(t=e.category)||void 0===t?void 0:t.name)||(null===(a=e.category)||void 0===a?void 0:a.title)||"";return(null===(r=e.title)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(s=e.content)||void 0===s?void 0:s.toLowerCase().includes(c))||n.toLowerCase().includes(c)})).slice(0,5).map((e=>{var t,a;return{id:e.id,title:e.title,excerpt:e.excerpt||(null===(t=e.content)||void 0===t?void 0:t.substring(0,100))+"...",author:(null===(a=e.author)||void 0===a?void 0:a.name)||"MRVL Team",date:e.published_at||e.created_at}})):[];o({teams:E,players:T,events:A,matches:M,forums:P,news:R})}catch(w){console.error("\u274c SearchPage: Search error:",w),x("Search temporarily unavailable. Please try again."),o({teams:[],players:[],events:[],matches:[],forums:[],news:[]})}finally{c(!1)}}else o({})});(0,s.useEffect)((()=>{t.query&&(l(t.query),w(t.query))}),[t.query]);const N=()=>i&&"object"===typeof i?Object.values(i).reduce(((e,t)=>e+(Array.isArray(t)?t.length:0)),0):0;return(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsxs)("div",{className:"card p-4 mb-6",children:[(0,u.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,u.jsx)("div",{className:"flex-1 relative",children:(0,u.jsx)("input",{type:"text",placeholder:"Search",value:n,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&w(n)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded  bg-white dark:bg-gray-800 text-gray-900 dark:text-white  focus:ring-2 focus:ring-red-500 focus:border-transparent"})}),(0,u.jsx)("button",{onClick:()=>w(n),disabled:d,className:"px-6 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-medium rounded transition-colors",children:d?"Searching...":"Search"})]}),(0,u.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"All"},{id:"teams",label:"Teams"},{id:"players",label:"Players"},{id:"matches",label:"Matches"},{id:"events",label:"Events"},{id:"forums",label:"Forums"},{id:"news",label:"News"}].map((e=>(0,u.jsxs)("button",{onClick:()=>g(e.id),className:"px-3 py-1 rounded text-sm font-medium transition-colors ".concat(h===e.id?"bg-red-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.label,"all"!==e.id&&i[e.id]&&Array.isArray(i[e.id])&&(0,u.jsx)("span",{className:"ml-1 px-1 py-0.5 bg-white/20 rounded text-xs",children:i[e.id].length})]},e.id)))})]}),n&&(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:['Search Results for "',n,'"']}),(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[N()," results"]})]})}),m&&(0,u.jsxs)("div",{className:"card p-6 text-center mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Search Error"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:m})]}),d&&(0,u.jsx)("div",{className:"card p-6 text-center mb-6",children:(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Searching..."})}),!d&&!m&&n&&(0,u.jsx)("div",{className:"space-y-6",children:Object.entries(i&&"object"===typeof i?"all"===h?i:{[h]:i[h]||[]}:{}).map((e=>{let[t,r]=e;return r&&Array.isArray(r)&&0!==r.length?(0,u.jsxs)("div",{className:"card p-4",children:[(0,u.jsxs)("h3",{className:"text-lg font-bold text-red-600 dark:text-red-400 capitalize mb-4",children:[t," (",r.length,")"]}),(0,u.jsx)("div",{className:"space-y-2",children:r.map(((e,r)=>{var s,n,l;return(0,u.jsxs)("div",{onClick:()=>((e,t)=>{if(a)switch(console.log("\ud83d\udd17 SearchPage: Navigating from search result:",e,t.id),e){case"teams":a("team-detail",{id:t.id});break;case"players":a("player-detail",{id:t.id});break;case"matches":a("match-detail",{id:t.id});break;case"events":a("event-detail",{id:t.id});break;case"forums":a("thread-detail",{id:t.id});break;case"news":a("news-detail",{id:t.id})}})(t,e),className:"p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:["teams"===t&&(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.shortName}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.name})]}),(0,u.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[(0,u.jsx)("div",{children:e.region}),(0,u.jsxs)("div",{children:["#",e.rank]})]})]}),"players"===t&&(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.team})]}),(0,u.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[(0,u.jsx)("div",{children:e.role}),(0,u.jsx)("div",{children:e.hero})]})]}),"matches"===t&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[null===(s=e.team1)||void 0===s?void 0:s.name," vs ",null===(n=e.team2)||void 0===n?void 0:n.name]}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.tournament}),(0,u.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]}),"events"===t&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description}),(0,u.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,u.jsx)("span",{children:e.location}),(0,u.jsx)("span",{children:e.prizePool})]})]}),"forums"===t&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.content}),(0,u.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,u.jsxs)("span",{children:["By ",null===(l=e.user)||void 0===l?void 0:l.name]}),(0,u.jsxs)("span",{children:[e.posts_count," replies"]})]})]}),"news"===t&&(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.excerpt}),(0,u.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,u.jsxs)("span",{children:["By ",e.author]}),(0,u.jsx)("span",{children:new Date(e.date).toLocaleDateString()})]})]})]},e.id||r)}))})]},t):null}))}),!d&&!m&&n&&0===N()&&(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Results Found"}),(0,u.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["We couldn't find anything matching \"",n,'". Try adjusting your search terms.']})]})]})},mi={Tank:[{name:"Captain America",image:"captain-america-headbig.webp",emoji:"\ud83d\udee1\ufe0f"},{name:"Doctor Strange",image:"doctor-strange-headbig.webp",emoji:"\ud83d\udd2e"},{name:"Groot",image:"groot-headbig.webp",emoji:"\ud83c\udf33"},{name:"Hulk",image:"bruce-banner-headbig.webp",emoji:"\ud83d\udc9a"},{name:"Magneto",image:"magneto-headbig.webp",emoji:"\ud83e\uddf2"},{name:"Peni Parker",image:"peni-parker-headbig.webp",emoji:"\ud83d\udd77\ufe0f"},{name:"The Thing",image:"the-thing-headbig.webp",emoji:"\ud83e\udea8"},{name:"Thor",image:"thor-headbig.webp",emoji:"\u26a1"},{name:"Venom",image:"venom-headbig.webp",emoji:"\ud83d\udda4"}],Duelist:[{name:"Black Panther",image:"black-panther-headbig.webp",emoji:"\ud83d\udc3e"},{name:"Black Widow",image:"black-widow-headbig.webp",emoji:"\ud83d\udd78\ufe0f"},{name:"Hawkeye",image:"hawkeye-headbig.webp",emoji:"\ud83c\udff9"},{name:"Hela",image:"hela-headbig.webp",emoji:"\ud83d\udc80"},{name:"Human Torch",image:"human-torch-headbig.webp",emoji:"\ud83d\udd25"},{name:"Iron Fist",image:"iron-fist-headbig.webp",emoji:"\ud83d\udc4a"},{name:"Iron Man",image:"iron-man-headbig.webp",emoji:"\ud83e\udd16"},{name:"Magik",image:"magik-headbig.webp",emoji:"\u2694\ufe0f"},{name:"Moon Knight",image:"moon-knight-headbig.webp",emoji:"\ud83c\udf19"},{name:"Namor",image:"namor-headbig.webp",emoji:"\ud83d\udd31"},{name:"Psylocke",image:"psylocke-headbig.webp",emoji:"\ud83d\udde1\ufe0f"},{name:"The Punisher",image:"the-punisher-headbig.webp",emoji:"\ud83d\udc80"},{name:"Scarlet Witch",image:"scarlet-witch-headbig.webp",emoji:"\ud83d\udd34"},{name:"Spider-Man",image:"spider-man-headbig.webp",emoji:"\ud83d\udd77\ufe0f"},{name:"Squirrel Girl",image:"squirrel-girl-headbig.webp",emoji:"\ud83d\udc3f\ufe0f"},{name:"Star-Lord",image:"star-lord-headbig.webp",emoji:"\u2b50"},{name:"Storm",image:"storm-headbig.webp",emoji:"\u26c8\ufe0f"}],Support:[{name:"Adam Warlock",image:"adam-warlock-headbig.webp",emoji:"\u2728"},{name:"Cloak & Dagger",image:"cloak-dagger-headbig.webp",emoji:"\ud83c\udf13"},{name:"Invisible Woman",image:"invisible-woman-headbig.webp",emoji:"\ud83d\udc7b"},{name:"Jeff the Land Shark",image:"jeff-the-land-shark-headbig.webp",emoji:"\ud83e\udd88"},{name:"Loki",image:"loki-headbig.webp",emoji:"\ud83d\udc0d"},{name:"Luna Snow",image:"luna-snow-headbig.webp",emoji:"\u2744\ufe0f"},{name:"Mantis",image:"mantis-headbig.webp",emoji:"\ud83c\udf31"},{name:"Rocket Raccoon",image:"rocket-raccoon-headbig.webp",emoji:"\ud83e\udd9d"}]},ui=e=>{switch(e){case"Tank":return"bg-blue-600 text-white";case"Duelist":return"bg-red-600 text-white";case"Support":return"bg-green-600 text-white";default:return"bg-gray-600 text-white"}};const xi=function(e){let{currentAvatar:t,onAvatarSelect:a,onClose:r}=e;const[n,l]=(0,s.useState)("Tank");return(0,u.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,u.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),(0,u.jsxs)("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,u.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/10 dark:to-red-800/10",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\ud83e\uddb8 Choose Your Hero Avatar"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Select a Marvel Rivals hero as your profile picture"})]}),(0,u.jsx)("button",{onClick:r,className:"p-2 rounded-xl text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-300",children:"\u2715"})]})}),(0,u.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"flex space-x-2",children:Object.keys(mi).map((e=>(0,u.jsxs)("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg font-medium text-sm transition-all ".concat(n===e?ui(e):"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:["Tank"===e?"\ud83d\udee1\ufe0f":"Duelist"===e?"\u2694\ufe0f":"\ud83d\udc9a"," ",e," (",mi[e].length,")"]},e)))})}),(0,u.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:(0,u.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:mi[n].map((e=>(0,u.jsxs)("div",{className:"group relative",children:[(0,u.jsxs)("button",{onClick:()=>(e=>{console.log("\ud83e\uddb8 Hero avatar selected:",e.name,e.image),a({name:e.name,image:e.image,emoji:e.emoji,role:n}),r()})(e),className:"w-full aspect-square rounded-xl overflow-hidden border-4 transition-all duration-300 transform hover:scale-105 ".concat((null===t||void 0===t?void 0:t.name)===e.name?"border-red-500 shadow-lg shadow-red-500/30":"border-gray-200 dark:border-gray-700 hover:border-red-300 dark:hover:border-red-700"),children:[(0,u.jsx)("img",{src:"https://staging.mrvl.net/Heroes/".concat(e.image),alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:e=>{e.target.src=S(null,"player-avatar")}}),(0,u.jsx)("div",{className:"w-full h-full flex items-center justify-center text-4xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800",style:{display:"none"},children:e.emoji}),(0,u.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(ui(n)),children:"Tank"===n?"\ud83d\udee1\ufe0f":"Duelist"===n?"\u2694\ufe0f":"\ud83d\udc9a"}),(null===t||void 0===t?void 0:t.name)===e.name&&(0,u.jsx)("div",{className:"absolute top-2 left-2 w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white text-xs font-bold",children:"\u2713"})]}),(0,u.jsx)("div",{className:"mt-2 text-center",children:(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name})})]},e.name)))})}),(0,u.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[mi[n].length," ",n," heroes available"]}),(0,u.jsxs)("div",{className:"flex space-x-3",children:[(0,u.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancel"}),t&&(0,u.jsx)("button",{onClick:()=>{a(null),r()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Remove Avatar"})]})]})})]})]})};const hi=function(e){let{navigateTo:t}=e;const{user:a,isAdmin:r,isModerator:n}=b(),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),c=[{name:"\ud83e\uddb8 Hero Avatar Selector",description:"Test the Marvel Rivals hero avatar selection",test:()=>i(!0),status:"Working"},{name:"\ud83d\udd34 Admin Role Check",description:"Check if admin role detection works",test:()=>alert("Admin Status: ".concat(r()?"YES - You are an admin!":"NO - You are not an admin")),status:r()?"Admin":"Not Admin"},{name:"\ud83d\udfe1 Moderator Role Check",description:"Check if moderator role detection works",test:()=>alert("Moderator Status: ".concat(n()?"YES - You are a moderator!":"NO - You are not a moderator")),status:n()?"Moderator":"Not Moderator"}];return(0,u.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"\ud83e\uddea MRVL Platform Test Suite"}),(0,u.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Test all the features and functionality we've built"})]}),(0,u.jsx)("div",{className:"card p-6 bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/10 dark:to-red-800/10",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Current User Status"}),a?(0,u.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,u.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("strong",{children:"Name:"})," ",a.name]}),(0,u.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("strong",{children:"Email:"})," ",a.email]}),(0,u.jsxs)("div",{className:"flex space-x-2 mt-2",children:[r()&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",children:"\ud83d\udd34 Admin"}),n()&&!r()&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",children:"\ud83d\udfe1 Moderator"}),!r()&&!n()&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:"\ud83d\udfe2 User"})]})]}):(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Not logged in - Please sign in to test user features"})]}),o&&(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden mb-2 mx-auto border-4 border-red-500",children:(0,u.jsx)("img",{src:"https://staging.mrvl.net/Heroes/".concat(o.image),alt:o.name,className:"w-full h-full object-cover"})}),(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.name})]})]})}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(((e,t)=>(0,u.jsxs)("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[(0,u.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.description})]}),(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-bold rounded ".concat("Working"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"Admin"===e.status?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"),children:e.status})]}),(0,u.jsx)("button",{onClick:e.test,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Test Feature"})]},t)))}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\ud83d\ude80 Quick Actions"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,u.jsx)("button",{onClick:()=>t("home"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\ud83c\udfe0 Go Home"}),r()&&(0,u.jsx)("button",{onClick:()=>t("admin-dashboard"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"\ud83d\udee1\ufe0f Admin Dashboard"})]})]}),l&&(0,u.jsx)(xi,{currentAvatar:o,onAvatarSelect:e=>{d(e),i(!1),e&&alert("\u2705 Hero avatar selected: ".concat(e.name," (").concat(e.role,")"))},onClose:()=>i(!1)})]})};const gi=function(e){let{navigateTo:t,params:a}=e;const{api:r}=b(),[n,l]=(0,s.useState)({email:(null===a||void 0===a?void 0:a.email)||"",password:"",password_confirmation:"",token:(null===a||void 0===a?void 0:a.token)||""}),[i,o]=(0,s.useState)(!1),[d,m]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[g,p]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)({score:0,message:""});(0,s.useEffect)((()=>{if(null!==a&&void 0!==a&&a.token&&null!==a&&void 0!==a&&a.email&&l((e=>c(c({},e),{},{token:a.token,email:a.email}))),null===a||void 0===a||!a.token||null===a||void 0===a||!a.email){const e=new URLSearchParams(window.location.search),t=e.get("token"),a=e.get("email");t&&a&&l((e=>c(c({},e),{},{token:t,email:a})))}}),[a]);const k=e=>{l(c(c({},n),{},{[e.target.name]:e.target.value})),"password"===e.target.name&&j((e=>{let t=0,a="";return e?(e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[@$!%*#?&^_\-+=]/.test(e)&&t++,a=t<=2?"Weak":t<=4?"Fair":t<=5?"Good":"Strong",{score:t,message:a}):{score:0,message:""}})(e.target.value)),m(""),h("")};return(0,u.jsx)("div",{className:"animate-fade-in max-w-md mx-auto mt-8",children:(0,u.jsxs)("div",{className:"card p-8",children:[(0,u.jsxs)("div",{className:"text-center mb-8",children:[(0,u.jsx)("div",{className:"logo-professional text-3xl font-bold mb-4",children:"MRVL"}),(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Reset Your Password"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your new password below"})]}),x&&(0,u.jsx)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"\u2705"}),(0,u.jsx)("span",{className:"text-sm text-green-700 dark:text-green-300",children:x})]})}),d&&(0,u.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"\u26a0\ufe0f"}),(0,u.jsx)("span",{className:"text-sm text-red-700 dark:text-red-300",children:d})]})}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o(!0),m(""),h(""),n.email.trim()?n.token.trim()?n.password?n.password.length<8?(m("Password must be at least 8 characters"),0):/[A-Z]/.test(n.password)?/[a-z]/.test(n.password)?/[0-9]/.test(n.password)?/[@$!%*#?&^_\-+=]/.test(n.password)?n.password_confirmation?n.password===n.password_confirmation||(m("Passwords do not match"),0):(m("Please confirm your password"),0):(m("Password must contain at least one special character (@$!%*#?&^-_+=)"),0):(m("Password must contain at least one number"),0):(m("Password must contain at least one lowercase letter"),0):(m("Password must contain at least one uppercase letter"),0):(m("Password is required"),0):(m("Invalid reset token"),0):(m("Email is required"),0))try{const e=await r.post("/auth/reset-password",{email:n.email,password:n.password,password_confirmation:n.password_confirmation,token:n.token});e.success?(h("Password reset successfully! You can now sign in with your new password."),setTimeout((()=>{t("home")}),3e3)):m(e.message||"Failed to reset password")}catch(l){var a,s;console.error("Password reset error:",l);const e=(null===(a=l.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to reset password. Please try again.";m(e)}finally{o(!1)}else o(!1)},className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Email Address"}),(0,u.jsx)("input",{type:"email",name:"email",value:n.email,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"New Password *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:g?"text":"password",name:"password",value:n.password,onChange:k,required:!0,disabled:i,autoComplete:"new-password",className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Min 8 chars, uppercase, lowercase, number, special char"}),(0,u.jsx)("button",{type:"button",onClick:()=>p(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:g?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,u.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.password&&(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,u.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Password Strength:"}),(0,u.jsx)("span",{className:"text-xs font-semibold ".concat(f.score<=2?"text-red-500":f.score<=4?"text-yellow-500":f.score<=5?"text-blue-500":"text-green-500"),children:f.message})]}),(0,u.jsx)("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,u.jsx)("div",{className:"h-full transition-all duration-300 ".concat(f.score<=2?"bg-red-500":f.score<=4?"bg-yellow-500":f.score<=5?"bg-blue-500":"bg-green-500"),style:{width:"".concat(f.score/6*100,"%")}})})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Confirm New Password *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:v?"text":"password",name:"password_confirmation",value:n.password_confirmation,onChange:k,required:!0,disabled:i,autoComplete:"new-password",className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Confirm your new password"}),(0,u.jsx)("button",{type:"button",onClick:()=>y(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",tabIndex:-1,children:v?(0,u.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,u.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,u.jsx)("button",{type:"submit",disabled:i,className:"w-full px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl shadow-lg shadow-red-500/30 transition-all duration-300 hover:scale-105 disabled:hover:scale-100 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,u.jsx)("span",{children:"Resetting Password..."})]}):(0,u.jsx)("span",{children:"Reset Password"})})]}),(0,u.jsx)("div",{className:"mt-6 text-center",children:(0,u.jsx)("button",{onClick:()=>t("home"),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-300",children:"Back to Home"})})]})})};const pi=function(){const[e,t]=(0,s.useState)({name:"",email:"",subject:"",category:"general",message:""}),[a,r]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),i=a=>{t(c(c({},e),{},{[a.target.name]:a.target.value}))};return(0,u.jsxs)("div",{className:"animate-fade-in space-y-12",children:[(0,u.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,u.jsx)("h1",{className:"text-heading-1 gradient-text mb-6",children:"Contact Us"}),(0,u.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400 leading-relaxed",children:"We're here to help! Whether you have questions, feedback, or need support, our team is ready to assist you."})]}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:"\ud83d\udce7",title:"General Inquiries",detail:"support@mrvl.gg",description:"For general questions and support"},{icon:"\ud83e\udd1d",title:"Business & Partnerships",detail:"jhonny@ar-mediia.com",description:"For partnership opportunities and business inquiries"},{icon:"\ud83d\udc1b",title:"Bug Reports",detail:"bugs@mrvl.gg",description:"Report technical issues and bugs"},{icon:"\ud83c\udfae",title:"Community",detail:"Discord Server",description:"Join our community for live discussions",link:"https://discord.gg/mrvl"}].map(((e,t)=>(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:e.icon}),(0,u.jsx)("h3",{className:"text-heading-3 mb-2",children:e.title}),(0,u.jsx)("div",{className:"text-blue-600 dark:text-blue-400 font-medium mb-2",children:e.link?(0,u.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:e.detail}):e.detail}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e.description})]},t)))}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[(0,u.jsx)("div",{className:"lg:col-span-2",children:(0,u.jsxs)("div",{className:"card p-8",children:[(0,u.jsx)("h2",{className:"text-heading-2 mb-6",children:"Send us a Message"}),n&&(0,u.jsxs)("div",{className:"alert alert-success mb-6",children:[(0,u.jsx)("strong",{children:"Message sent successfully!"})," We'll get back to you within 24 hours."]}),(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),r(!0),setTimeout((()=>{r(!1),l(!0),t({name:"",email:"",subject:"",category:"general",message:""})}),1e3)},className:"space-y-6",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Full Name *"}),(0,u.jsx)("input",{type:"text",name:"name",value:e.name,onChange:i,className:"form-input",placeholder:"Your full name",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Email Address *"}),(0,u.jsx)("input",{type:"email",name:"email",value:e.email,onChange:i,className:"form-input",placeholder:"your.email@example.com",required:!0})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Category"}),(0,u.jsx)("select",{name:"category",value:e.category,onChange:i,className:"form-input",children:[{value:"general",label:"General Inquiry"},{value:"technical",label:"Technical Support"},{value:"business",label:"Business & Partnerships"},{value:"feedback",label:"Feedback & Suggestions"},{value:"press",label:"Press & Media"},{value:"careers",label:"Careers"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Subject *"}),(0,u.jsx)("input",{type:"text",name:"subject",value:e.subject,onChange:i,className:"form-input",placeholder:"Brief subject line",required:!0})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Message *"}),(0,u.jsx)("textarea",{name:"message",value:e.message,onChange:i,rows:6,className:"form-input",placeholder:"Tell us how we can help you...",required:!0})]}),(0,u.jsx)("button",{type:"submit",disabled:a,className:"btn btn-primary w-full py-3 flex items-center justify-center",children:a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"loading-spinner mr-2"}),"Sending Message..."]}):"Send Message"})]})]})}),(0,u.jsxs)("div",{className:"space-y-8",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-heading-3 mb-4",children:"Our Offices"}),(0,u.jsx)("div",{className:"space-y-4",children:[{title:"Headquarters",address:"123 Esports Avenue",city:"Los Angeles, CA 90210",country:"United States",flag:"\ud83c\uddfa\ud83c\uddf8"},{title:"Development Office",address:"456 Tech District",city:"San Francisco, CA 94105",country:"United States",flag:"\ud83c\uddfa\ud83c\uddf8"}].map(((e,t)=>(0,u.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-700 last:border-b-0 pb-4 last:pb-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,u.jsx)("span",{className:"text-2xl",children:e.flag}),(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.title})]}),(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[(0,u.jsx)("div",{children:e.address}),(0,u.jsx)("div",{children:e.city}),(0,u.jsx)("div",{children:e.country})]})]},t)))})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-heading-3 mb-4",children:"Response Times"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"General Inquiries"}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"24 hours"})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Technical Support"}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"12 hours"})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Business Inquiries"}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"48 hours"})]}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Press Requests"}),(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"24 hours"})]})]})]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-heading-2 text-center mb-8",children:"Frequently Asked Questions"}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{question:"How do I report incorrect match data?",answer:"Use our bug report form or email bugs@mrvl.gg with specific details about the incorrect data, including match ID and what should be corrected."},{question:"Can I get my team added to the platform?",answer:"Teams are automatically added when they participate in tracked tournaments. For manual additions, contact us with your team's competitive history."},{question:"Do you have an API for developers?",answer:"We're currently developing a public API. Join our Discord or subscribe to our newsletter for updates on the release."},{question:"How can I become a partner?",answer:"Contact our business team at jhonny@ar-mediia.com with details about your organization and partnership proposal."}].map(((e,t)=>(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-heading-3 mb-3",children:e.question}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e.answer})]},t)))})]}),(0,u.jsxs)("div",{className:"card p-8 text-center bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udea8"}),(0,u.jsx)("h2",{className:"text-heading-2 mb-4 text-red-800 dark:text-red-200",children:"Emergency Contact"}),(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:"For urgent security issues, platform abuse, or critical bugs affecting live tournaments:"}),(0,u.jsx)("div",{className:"font-bold text-red-800 dark:text-red-200",children:"emergency@mrvl.gg"}),(0,u.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:"Emergency contacts are monitored 24/7 during major tournaments"})]})]})};const vi=function(){const[e,t]=(0,s.useState)(null),a=[{id:"information-collection",title:"Information We Collect",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Personal Information"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Account information (username, email address, password)"}),(0,u.jsx)("li",{children:"Profile information (display name, avatar, preferences)"}),(0,u.jsx)("li",{children:"Contact information when you reach out to support"}),(0,u.jsx)("li",{children:"Payment information for premium features (processed securely by third parties)"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Usage Information"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Pages visited, features used, and time spent on the platform"}),(0,u.jsx)("li",{children:"Search queries and preferences"}),(0,u.jsx)("li",{children:"Device information (browser type, operating system, IP address)"}),(0,u.jsx)("li",{children:"Gaming statistics and match history when you connect your gaming accounts"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Third-Party Information"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Information from social media platforms when you choose to connect accounts"}),(0,u.jsx)("li",{children:"Gaming platform data when you authorize integration"}),(0,u.jsx)("li",{children:"Analytics data from third-party services"})]})]})},{id:"information-use",title:"How We Use Your Information",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Platform Operations"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Provide and maintain our esports platform services"}),(0,u.jsx)("li",{children:"Personalize your experience and content recommendations"}),(0,u.jsx)("li",{children:"Process transactions and manage subscriptions"}),(0,u.jsx)("li",{children:"Provide customer support and respond to inquiries"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Community Features"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Enable forum discussions and community interactions"}),(0,u.jsx)("li",{children:"Display match statistics and leaderboards"}),(0,u.jsx)("li",{children:"Facilitate team and player connections"}),(0,u.jsx)("li",{children:"Moderate content and ensure community safety"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Improvements and Analytics"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Analyze usage patterns to improve our services"}),(0,u.jsx)("li",{children:"Develop new features and functionality"}),(0,u.jsx)("li",{children:"Ensure platform security and prevent fraud"}),(0,u.jsx)("li",{children:"Comply with legal obligations and requests"})]})]})},{id:"information-sharing",title:"Information Sharing and Disclosure",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"We respect your privacy and do not sell your personal information. We may share information in the following circumstances:"}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"With Your Consent"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"When you explicitly agree to share information with third parties"}),(0,u.jsx)("li",{children:"When you connect external gaming accounts or social media"}),(0,u.jsx)("li",{children:"When participating in tournaments or events that require data sharing"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Service Providers"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Cloud hosting and infrastructure providers"}),(0,u.jsx)("li",{children:"Payment processors for subscription services"}),(0,u.jsx)("li",{children:"Analytics services to improve platform performance"}),(0,u.jsx)("li",{children:"Email service providers for notifications"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Legal Requirements"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"To comply with applicable laws and regulations"}),(0,u.jsx)("li",{children:"To respond to legal requests from authorities"}),(0,u.jsx)("li",{children:"To protect the rights and safety of our users and platform"}),(0,u.jsx)("li",{children:"To prevent fraud and ensure platform security"})]})]})},{id:"data-security",title:"Data Security",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"We implement comprehensive security measures to protect your personal information:"}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Technical Safeguards"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"End-to-end encryption for sensitive data transmission"}),(0,u.jsx)("li",{children:"Secure password hashing and storage"}),(0,u.jsx)("li",{children:"Regular security audits and vulnerability assessments"}),(0,u.jsx)("li",{children:"Multi-factor authentication options for accounts"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Operational Safeguards"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Limited access to personal data on a need-to-know basis"}),(0,u.jsx)("li",{children:"Regular employee training on data protection"}),(0,u.jsx)("li",{children:"Incident response procedures for security breaches"}),(0,u.jsx)("li",{children:"Regular backups and disaster recovery plans"})]}),(0,u.jsx)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,u.jsxs)("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:[(0,u.jsx)("strong",{children:"Important:"})," While we implement strong security measures, no method of transmission over the internet is 100% secure. We encourage users to choose strong passwords and enable two-factor authentication where available."]})})]})},{id:"user-rights",title:"Your Rights and Choices",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Access and Control"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Access and review your personal information in your account settings"}),(0,u.jsx)("li",{children:"Update or correct your personal information at any time"}),(0,u.jsx)("li",{children:"Download a copy of your data in a portable format"}),(0,u.jsx)("li",{children:"Delete your account and associated data"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Communication Preferences"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Opt out of marketing emails and promotional communications"}),(0,u.jsx)("li",{children:"Control notification settings for platform updates"}),(0,u.jsx)("li",{children:"Manage cookie preferences through your browser settings"}),(0,u.jsx)("li",{children:"Adjust privacy settings for public profile information"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Regional Rights"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"GDPR rights for users in the European Union"}),(0,u.jsx)("li",{children:"CCPA rights for users in California"}),(0,u.jsx)("li",{children:"Right to data portability and deletion"}),(0,u.jsx)("li",{children:"Right to object to certain processing activities"})]}),(0,u.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,u.jsx)("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:"To exercise any of these rights, please contact us at privacy@mrvl.gg or use the data management tools in your account settings."})})]})},{id:"cookies",title:"Cookies and Tracking",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"We use cookies and similar technologies to enhance your experience:"}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Essential Cookies"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Authentication and session management"}),(0,u.jsx)("li",{children:"Security and fraud prevention"}),(0,u.jsx)("li",{children:"Platform functionality and features"}),(0,u.jsx)("li",{children:"User preferences and settings"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Analytics Cookies"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Usage statistics and platform performance"}),(0,u.jsx)("li",{children:"Feature adoption and user behavior analysis"}),(0,u.jsx)("li",{children:"Error tracking and debugging"}),(0,u.jsx)("li",{children:"A/B testing for platform improvements"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Third-Party Services"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Google Analytics for website usage analysis"}),(0,u.jsx)("li",{children:"Social media integration cookies"}),(0,u.jsx)("li",{children:"Payment processor cookies for transactions"}),(0,u.jsx)("li",{children:"Content delivery network optimization"})]})]})},{id:"children-privacy",title:"Children's Privacy",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Our platform is designed for users aged 13 and older. We are committed to protecting the privacy of younger users:"}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Age Verification"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"We require users to confirm they are 13 or older during registration"}),(0,u.jsx)("li",{children:"Users under 18 should have parental consent before creating accounts"}),(0,u.jsx)("li",{children:"We may request additional verification for accounts suspected of being underage"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Special Protections"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Limited data collection for users under 18"}),(0,u.jsx)("li",{children:"Enhanced content moderation in community areas"}),(0,u.jsx)("li",{children:"Parental controls and oversight options"}),(0,u.jsx)("li",{children:"Immediate account termination for users under 13"})]}),(0,u.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:(0,u.jsxs)("p",{className:"text-red-800 dark:text-red-200 text-sm",children:[(0,u.jsx)("strong",{children:"Parents:"})," If you believe your child under 13 has created an account, please contact us immediately at privacy@mrvl.gg for account removal."]})})]})},{id:"updates",title:"Policy Updates",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"We may update this privacy policy from time to time to reflect changes in our practices or applicable laws. Here's how we handle updates:"}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Notification Process"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Email notification to all registered users for significant changes"}),(0,u.jsx)("li",{children:"Platform notification banner for important updates"}),(0,u.jsx)("li",{children:'Updated "Last Modified" date at the top of this policy'}),(0,u.jsx)("li",{children:"Archive of previous policy versions available upon request"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Your Continued Use"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Continued use of our platform constitutes acceptance of updated terms"}),(0,u.jsx)("li",{children:"You may delete your account if you disagree with policy changes"}),(0,u.jsx)("li",{children:"Material changes will include a 30-day notice period when possible"}),(0,u.jsx)("li",{children:"Emergency updates for security or legal compliance may be immediate"})]})]})}];return(0,u.jsxs)("div",{className:"animate-fade-in space-y-8",children:[(0,u.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,u.jsx)("h1",{className:"text-heading-1 gradient-text mb-4",children:"Privacy Policy"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This privacy policy explains how MRVL Esports Platform collects, uses, and protects your personal information when you use our services."}),(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Last updated: ","January 15, 2025"]})]}),(0,u.jsxs)("div",{className:"card p-6 bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:[(0,u.jsx)("h2",{className:"text-heading-2 mb-4 text-blue-800 dark:text-blue-200",children:"Privacy Summary"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd12"}),(0,u.jsx)("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Secure"}),(0,u.jsx)("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"Your data is encrypted and protected with industry-standard security measures."})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfaf"}),(0,u.jsx)("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Purposeful"}),(0,u.jsx)("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"We only collect data necessary to provide and improve our esports platform."})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u270b"}),(0,u.jsx)("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Your Control"}),(0,u.jsx)("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"You have full control over your data with options to access, edit, or delete."})]})]})]}),(0,u.jsxs)("div",{className:"card p-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Quick Navigation"}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:a.map((a=>(0,u.jsx)("button",{onClick:()=>t(e===a.id?null:a.id),className:"text-left text-sm text-blue-600 dark:text-blue-400 hover:underline p-2 rounded hover:bg-blue-50 dark:hover:bg-blue-950",children:a.title},a.id)))})]}),(0,u.jsx)("div",{className:"space-y-6",children:a.map((a=>(0,u.jsxs)("div",{className:"card",children:[(0,u.jsxs)("button",{onClick:()=>t(e===a.id?null:a.id),className:"w-full p-6 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[(0,u.jsx)("h2",{className:"text-heading-2",children:a.title}),(0,u.jsx)("span",{className:"text-2xl",children:e===a.id?"\u2212":"+"})]}),e===a.id&&(0,u.jsx)("div",{className:"px-6 pb-6 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"pt-6",children:a.content})})]},a.id)))}),(0,u.jsxs)("div",{className:"card p-8 text-center",children:[(0,u.jsx)("h2",{className:"text-heading-2 mb-4",children:"Questions About Privacy?"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"If you have any questions about this privacy policy or how we handle your data, we're here to help."}),(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Privacy Officer"}),(0,u.jsx)("div",{className:"text-blue-600 dark:text-blue-400",children:"privacy@mrvl.gg"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"General Inquiries"}),(0,u.jsx)("div",{className:"text-blue-600 dark:text-blue-400",children:"support@mrvl.gg"})]})]})]})]})};const yi=function(){const[e,t]=(0,s.useState)(null),a=[{id:"acceptance",title:"Acceptance of Terms",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:'By accessing and using the MRVL Esports Platform ("Platform", "Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Binding Agreement"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"These terms constitute a legally binding agreement between you and MRVL"}),(0,u.jsx)("li",{children:"Use of the platform indicates your acceptance of these terms"}),(0,u.jsx)("li",{children:"If you are using the platform on behalf of an organization, you represent that you have authority to bind that organization"}),(0,u.jsx)("li",{children:"These terms apply to all users, including visitors, registered users, and premium subscribers"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Eligibility"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"You must be at least 13 years old to use this platform"}),(0,u.jsx)("li",{children:"Users between 13-18 years old must have parental consent"}),(0,u.jsx)("li",{children:"You must provide accurate and complete information during registration"}),(0,u.jsx)("li",{children:"You are responsible for maintaining the confidentiality of your account"})]})]})},{id:"services",title:"Platform Services",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Service Description"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"MRVL provides a comprehensive esports platform for Marvel Rivals, including but not limited to:"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Match statistics, results, and live tracking"}),(0,u.jsx)("li",{children:"Team and player profiles and rankings"}),(0,u.jsx)("li",{children:"Tournament and event information"}),(0,u.jsx)("li",{children:"Community forums and discussion features"}),(0,u.jsx)("li",{children:"News and analysis content"}),(0,u.jsx)("li",{children:"Premium analytics and insights (subscription-based)"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Service Availability"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"We strive to maintain 99.9% uptime but cannot guarantee uninterrupted service"}),(0,u.jsx)("li",{children:"Scheduled maintenance will be announced in advance when possible"}),(0,u.jsx)("li",{children:"Emergency maintenance may occur without prior notice"}),(0,u.jsx)("li",{children:"Some features may be temporarily unavailable during updates"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Account Registration"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"You may browse public content without registration"}),(0,u.jsx)("li",{children:"Registration is required for community features and personalization"}),(0,u.jsx)("li",{children:"One account per person; sharing accounts is prohibited"}),(0,u.jsx)("li",{children:"You are responsible for all activity on your account"})]})]})},{id:"user-conduct",title:"User Conduct and Content",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Acceptable Use"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You agree to use the platform in accordance with these guidelines:"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Respect other users and maintain a positive community environment"}),(0,u.jsx)("li",{children:"Provide accurate information and avoid impersonation"}),(0,u.jsx)("li",{children:"Use the platform for its intended purpose of esports discussion and information"}),(0,u.jsx)("li",{children:"Report violations of these terms or inappropriate content"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Prohibited Activities"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Harassment, hate speech, or discriminatory language"}),(0,u.jsx)("li",{children:"Spam, advertising, or commercial promotion without permission"}),(0,u.jsx)("li",{children:"Sharing false or misleading information"}),(0,u.jsx)("li",{children:"Attempting to hack, exploit, or disrupt platform security"}),(0,u.jsx)("li",{children:"Using automated tools to scrape data or create fake accounts"}),(0,u.jsx)("li",{children:"Sharing personal information of others without consent"}),(0,u.jsx)("li",{children:"Content that violates intellectual property rights"}),(0,u.jsx)("li",{children:"Illegal activities or content that violates applicable laws"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"User-Generated Content"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"You retain ownership of content you create on the platform"}),(0,u.jsx)("li",{children:"By posting content, you grant us a license to display and distribute it"}),(0,u.jsx)("li",{children:"You are responsible for ensuring your content doesn't violate third-party rights"}),(0,u.jsx)("li",{children:"We reserve the right to remove content that violates these terms"})]})]})},{id:"intellectual-property",title:"Intellectual Property Rights",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Platform Content"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"All platform content, design, and functionality is owned by MRVL or its licensors"}),(0,u.jsx)("li",{children:"Platform content is protected by copyright, trademark, and other intellectual property laws"}),(0,u.jsx)("li",{children:"You may not copy, modify, distribute, or reverse engineer platform components"}),(0,u.jsx)("li",{children:"Limited personal use of platform content is permitted for non-commercial purposes"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Third-Party Content"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Marvel Rivals game content is owned by NetEase Games and related parties"}),(0,u.jsx)("li",{children:"Team logos, player images, and tournament branding belong to their respective owners"}),(0,u.jsx)("li",{children:"We use such content under fair use provisions for news and educational purposes"}),(0,u.jsx)("li",{children:"Rights holders may request removal of their content by contacting us"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"DMCA Compliance"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"We respect copyright and respond to valid DMCA takedown notices"}),(0,u.jsx)("li",{children:"Copyright holders may report infringement to dmca@mrvl.gg"}),(0,u.jsx)("li",{children:"Users who repeatedly infringe copyright may have their accounts terminated"}),(0,u.jsx)("li",{children:"Counter-notices may be filed for content removed in error"})]})]})},{id:"privacy-data",title:"Privacy and Data Protection",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Data Collection and Use"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Our data practices are governed by our Privacy Policy, which is incorporated by reference into these terms. Key points include:"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"We collect information necessary to provide and improve our services"}),(0,u.jsx)("li",{children:"Personal information is protected and not sold to third parties"}),(0,u.jsx)("li",{children:"You have rights to access, correct, and delete your personal data"}),(0,u.jsx)("li",{children:"We use cookies and analytics to improve platform performance"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Data Security"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"We implement industry-standard security measures to protect user data"}),(0,u.jsx)("li",{children:"Data is encrypted in transit and at rest"}),(0,u.jsx)("li",{children:"Access to personal data is limited to authorized personnel"}),(0,u.jsx)("li",{children:"Security incidents are handled according to our incident response procedures"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"International Data Transfers"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Data may be processed in countries different from where you are located"}),(0,u.jsx)("li",{children:"We ensure adequate protection for international data transfers"}),(0,u.jsx)("li",{children:"EU users' data is protected under GDPR-compliant frameworks"})]})]})},{id:"payments",title:"Payments and Subscriptions",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Premium Services"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Some platform features require a paid subscription"}),(0,u.jsx)("li",{children:"Subscription fees are charged in advance on a recurring basis"}),(0,u.jsx)("li",{children:"Prices are subject to change with 30 days' notice"}),(0,u.jsx)("li",{children:"Premium features are only available to active subscribers"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Payment Processing"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Payments are processed by secure third-party payment processors"}),(0,u.jsx)("li",{children:"We do not store credit card information on our servers"}),(0,u.jsx)("li",{children:"You authorize us to charge your payment method for recurring subscriptions"}),(0,u.jsx)("li",{children:"Failed payments may result in suspension of premium features"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Refunds and Cancellation"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Subscriptions can be cancelled at any time through account settings"}),(0,u.jsx)("li",{children:"Cancellation takes effect at the end of the current billing period"}),(0,u.jsx)("li",{children:"Refunds are generally not provided for partial billing periods"}),(0,u.jsx)("li",{children:"Exceptional refunds may be considered on a case-by-case basis"})]})]})},{id:"disclaimers",title:"Disclaimers and Limitations",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Service Disclaimers"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:'The platform is provided "as is" without warranties of any kind'}),(0,u.jsx)("li",{children:"We do not guarantee the accuracy or completeness of match data"}),(0,u.jsx)("li",{children:"Third-party content and links are provided for convenience only"}),(0,u.jsx)("li",{children:"We are not responsible for decisions made based on platform information"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Limitation of Liability"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Our liability is limited to the maximum extent permitted by law"}),(0,u.jsx)("li",{children:"We are not liable for indirect, consequential, or punitive damages"}),(0,u.jsx)("li",{children:"Total liability is limited to the amount paid for premium services in the past 12 months"}),(0,u.jsx)("li",{children:"Some jurisdictions do not allow limitation of certain damages"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Indemnification"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"You agree to indemnify MRVL against claims arising from your use of the platform"}),(0,u.jsx)("li",{children:"This includes claims related to your content or violation of these terms"}),(0,u.jsx)("li",{children:"We will notify you of any such claims and cooperate in defense"})]})]})},{id:"termination",title:"Termination and Suspension",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Account Termination"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"You may delete your account at any time through account settings"}),(0,u.jsx)("li",{children:"We may suspend or terminate accounts for violations of these terms"}),(0,u.jsx)("li",{children:"Termination may be immediate for serious violations or illegal activity"}),(0,u.jsx)("li",{children:"We will provide notice when possible, except for emergency situations"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Effect of Termination"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Terminated accounts lose access to premium features immediately"}),(0,u.jsx)("li",{children:"Personal data may be retained as required by law or legitimate business interests"}),(0,u.jsx)("li",{children:"Some content may remain visible if it has been shared publicly"}),(0,u.jsx)("li",{children:"Outstanding payment obligations survive termination"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Service Discontinuation"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"We reserve the right to discontinue the platform with reasonable notice"}),(0,u.jsx)("li",{children:"Users will be provided with data export options when possible"}),(0,u.jsx)("li",{children:"Refunds for prepaid services may be provided at our discretion"})]})]})},{id:"general",title:"General Provisions",content:(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Changes to Terms"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"We may update these terms to reflect changes in our services or law"}),(0,u.jsx)("li",{children:"Significant changes will be communicated via email and platform notifications"}),(0,u.jsx)("li",{children:"Continued use after changes constitutes acceptance of updated terms"}),(0,u.jsx)("li",{children:"Material changes will include a reasonable notice period when possible"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Governing Law"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"These terms are governed by the laws of the State of California, USA"}),(0,u.jsx)("li",{children:"Disputes will be resolved in the courts of Los Angeles County, California"}),(0,u.jsx)("li",{children:"International users may have additional rights under local law"}),(0,u.jsx)("li",{children:"If any provision is unenforceable, the remainder of terms remain in effect"})]}),(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Contact Information"}),(0,u.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("li",{children:"Legal notices should be sent to legal@mrvl.gg"}),(0,u.jsx)("li",{children:"General inquiries can be directed to support@mrvl.gg"}),(0,u.jsx)("li",{children:"DMCA notices should be sent to dmca@mrvl.gg"}),(0,u.jsx)("li",{children:"Postal address: 123 Esports Avenue, Los Angeles, CA 90210"})]})]})}];return(0,u.jsxs)("div",{className:"animate-fade-in space-y-8",children:[(0,u.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,u.jsx)("h1",{className:"text-heading-1 gradient-text mb-4",children:"Terms of Service"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"These terms govern your use of the MRVL Esports Platform. Please read them carefully as they contain important information about your rights and obligations."}),(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Last updated: ","January 15, 2025"]})]}),(0,u.jsxs)("div",{className:"card p-6 bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",children:[(0,u.jsx)("h2",{className:"text-heading-2 mb-4 text-green-800 dark:text-green-200",children:"Terms Summary"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83e\udd1d"}),(0,u.jsx)("h3",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Fair Use"}),(0,u.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"Use our platform respectfully and in accordance with community guidelines."})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udee1\ufe0f"}),(0,u.jsx)("h3",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Your Rights"}),(0,u.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"You retain ownership of your content and have control over your personal data."})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u2696\ufe0f"}),(0,u.jsx)("h3",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Mutual Respect"}),(0,u.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"We provide quality service while you follow our community guidelines."})]})]})]}),(0,u.jsxs)("div",{className:"card p-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Quick Navigation"}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:a.map((a=>(0,u.jsx)("button",{onClick:()=>t(e===a.id?null:a.id),className:"text-left text-sm text-blue-600 dark:text-blue-400 hover:underline p-2 rounded hover:bg-blue-50 dark:hover:bg-blue-950",children:a.title},a.id)))})]}),(0,u.jsx)("div",{className:"space-y-6",children:a.map((a=>(0,u.jsxs)("div",{className:"card",children:[(0,u.jsxs)("button",{onClick:()=>t(e===a.id?null:a.id),className:"w-full p-6 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[(0,u.jsx)("h2",{className:"text-heading-2",children:a.title}),(0,u.jsx)("span",{className:"text-2xl",children:e===a.id?"\u2212":"+"})]}),e===a.id&&(0,u.jsx)("div",{className:"px-6 pb-6 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"pt-6",children:a.content})})]},a.id)))}),(0,u.jsxs)("div",{className:"card p-8 text-center bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:[(0,u.jsx)("h2",{className:"text-heading-2 mb-4 text-blue-800 dark:text-blue-200",children:"Agreement Confirmation"}),(0,u.jsx)("p",{className:"text-blue-700 dark:text-blue-300 mb-6",children:"By continuing to use the MRVL Esports Platform, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."}),(0,u.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:(0,u.jsxs)("p",{children:["Questions about these terms? Contact us at ",(0,u.jsx)("strong",{children:"legal@mrvl.gg"})]})})]})]})};const bi=function(){const[e,t]=(0,s.useState)(null);return(0,u.jsxs)("div",{className:"animate-fade-in space-y-12",children:[(0,u.jsxs)("div",{className:"text-center max-w-4xl mx-auto",children:[(0,u.jsx)("h1",{className:"text-heading-1 gradient-text mb-6",children:"Join Our Team"}),(0,u.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400 leading-relaxed mb-8",children:"Help us build the future of Marvel Rivals esports. We're looking for passionate individuals who want to create amazing experiences for the competitive gaming community."}),(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,u.jsx)("button",{onClick:()=>document.getElementById("open-positions").scrollIntoView({behavior:"smooth"}),className:"btn btn-primary",children:"View Open Positions"}),(0,u.jsx)("button",{className:"btn btn-secondary",children:"Learn About Our Culture"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"50+"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Team Members"})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:"500K+"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Active Users"})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:"$15M"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Series A Funding"})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"98%"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Employee Satisfaction"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-heading-2 text-center mb-8",children:"Our Values"}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Community First",description:"Everything we build serves the Marvel Rivals community. We listen, engage, and create value for players and fans.",icon:"\ud83e\udd1d"},{title:"Data-Driven Excellence",description:"We make decisions based on data and user feedback, constantly iterating to improve our platform.",icon:"\ud83d\udcca"},{title:"Inclusive Innovation",description:"We believe diverse perspectives lead to better products. We foster an inclusive environment where everyone can thrive.",icon:"\ud83c\udf1f"},{title:"Passion for Esports",description:"We genuinely love competitive gaming and esports. This passion drives us to create the best possible experience.",icon:"\ud83c\udfc6"}].map(((e,t)=>(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:e.icon}),(0,u.jsx)("h3",{className:"text-heading-3 mb-3",children:e.title}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e.description})]},t)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-heading-2 text-center mb-8",children:"Why Work With Us"}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:"\ud83d\udcb0",title:"Competitive Salary",description:"Industry-leading compensation with equity options and performance bonuses."},{icon:"\ud83c\udfe5",title:"Health & Wellness",description:"Comprehensive health, dental, and vision insurance plus wellness stipend."},{icon:"\ud83c\udfd6\ufe0f",title:"Flexible PTO",description:"Unlimited paid time off policy to maintain work-life balance."},{icon:"\ud83d\udcbb",title:"Remote First",description:"Work from anywhere with flexible hours and modern equipment provided."},{icon:"\ud83d\udcda",title:"Learning Budget",description:"$2,000 annual budget for conferences, courses, and professional development."},{icon:"\ud83c\udfae",title:"Gaming Perks",description:"Gaming setup allowance, tournament tickets, and exclusive esports events access."}].map(((e,t)=>(0,u.jsx)("div",{className:"card p-6",children:(0,u.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,u.jsx)("div",{className:"text-3xl",children:e.icon}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-heading-3 mb-2",children:e.title}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e.description})]})]})},t)))})]}),(0,u.jsxs)("div",{id:"open-positions",children:[(0,u.jsx)("h2",{className:"text-heading-2 text-center mb-8",children:"Open Positions"}),(0,u.jsx)("div",{className:"space-y-6",children:[{id:1,title:"Senior Full-Stack Developer",department:"Engineering",location:"San Francisco, CA / Remote",type:"Full-time",experience:"5+ years",description:"Lead the development of scalable web applications for our esports platform. Work with React, Node.js, and modern cloud infrastructure.",requirements:["Expert knowledge in React, TypeScript, and Node.js","Experience with cloud platforms (AWS, GCP, or Azure)","Strong understanding of database design and optimization","Experience with real-time applications and WebSocket","Knowledge of esports or gaming industry preferred"],responsibilities:["Architect and develop high-performance web applications","Mentor junior developers and lead technical decisions","Collaborate with product team on feature development","Ensure code quality and implement best practices","Optimize application performance and scalability"]},{id:2,title:"Data Scientist - Esports Analytics",department:"Data & Analytics",location:"Los Angeles, CA / Remote",type:"Full-time",experience:"3+ years",description:"Build advanced analytics and machine learning models to provide insights into Marvel Rivals competitive gameplay and player performance.",requirements:["PhD or Masters in Data Science, Statistics, or related field","Strong Python skills with ML libraries (pandas, scikit-learn, PyTorch)","Experience with statistical analysis and data visualization","Knowledge of gaming or esports data preferred","Experience with large-scale data processing"],responsibilities:["Develop predictive models for player and team performance","Create automated reporting and analytics dashboards","Analyze gameplay patterns and meta trends","Collaborate with product team on data-driven features","Present insights to stakeholders and community"]},{id:3,title:"Community Manager",department:"Community & Marketing",location:"Remote",type:"Full-time",experience:"2+ years",description:"Build and nurture our growing Marvel Rivals community across multiple platforms. Engage with players, content creators, and tournament organizers.",requirements:["Proven experience in community management for gaming/esports","Excellent written and verbal communication skills","Deep knowledge of Marvel Rivals and competitive gaming","Experience with social media management and content creation","Passion for fostering positive community environments"],responsibilities:["Manage community across Discord, forums, and social media","Organize community events and tournaments","Create engaging content and newsletters","Moderate discussions and enforce community guidelines","Gather feedback and represent community voice to product team"]},{id:4,title:"DevOps Engineer",department:"Engineering",location:"San Francisco, CA / Remote",type:"Full-time",experience:"4+ years",description:"Maintain and scale our cloud infrastructure to support millions of users and real-time esports data processing.",requirements:["Strong experience with Kubernetes and Docker","Proficiency with cloud platforms (AWS preferred)","Experience with CI/CD pipelines and automation","Knowledge of monitoring and observability tools","Understanding of security best practices"],responsibilities:["Manage and optimize cloud infrastructure","Implement CI/CD pipelines for rapid deployment","Monitor system performance and reliability","Ensure security and compliance standards","Automate operational processes and workflows"]},{id:5,title:"UX/UI Designer",department:"Design",location:"Los Angeles, CA / Remote",type:"Full-time",experience:"3+ years",description:"Design intuitive and engaging user experiences for our esports platform, from mobile interfaces to complex data visualizations.",requirements:["Strong portfolio demonstrating UX/UI design skills","Proficiency with Figma, Sketch, or similar design tools","Experience designing for web and mobile applications","Understanding of accessibility and usability principles","Interest in gaming and esports preferred"],responsibilities:["Design user-centered interfaces for web and mobile","Create wireframes, prototypes, and design systems","Conduct user research and usability testing","Collaborate with engineers on implementation","Ensure consistent brand experience across platforms"]},{id:6,title:"Content Creator & Analyst",department:"Content",location:"Remote",type:"Contract",experience:"1+ years",description:"Create engaging content about Marvel Rivals esports including match analysis, player spotlights, and meta discussions.",requirements:["Deep knowledge of Marvel Rivals competitive scene","Strong writing skills and ability to explain complex topics","Experience creating content for gaming/esports audience","Video editing and graphic design skills preferred","Understanding of social media and content distribution"],responsibilities:["Write match recaps and analysis articles","Create player and team spotlight content","Produce educational content about game mechanics","Manage content calendar and publication schedule","Engage with community through content and social media"]}].map((a=>(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"p-6 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",onClick:()=>t(e===a.id?null:a.id),children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,u.jsx)("h3",{className:"text-heading-3",children:a.title}),(0,u.jsx)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:a.type})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-6 text-gray-600 dark:text-gray-400 text-sm mb-3",children:[(0,u.jsxs)("span",{children:["\ud83c\udfe2 ",a.department]}),(0,u.jsxs)("span",{children:["\ud83d\udccd ",a.location]}),(0,u.jsxs)("span",{children:["\u2b50 ",a.experience]})]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:a.description})]}),(0,u.jsx)("span",{className:"text-2xl ml-4",children:e===a.id?"\u2212":"+"})]})}),e===a.id&&(0,u.jsxs)("div",{className:"px-6 pb-6 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"pt-6 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Requirements"}),(0,u.jsx)("ul",{className:"space-y-2",children:a.requirements.map(((e,t)=>(0,u.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400 mt-1",children:"\u2022"}),(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e})]},t)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Responsibilities"}),(0,u.jsx)("ul",{className:"space-y-2",children:a.responsibilities.map(((e,t)=>(0,u.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,u.jsx)("span",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"\u2022"}),(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e})]},t)))})]})]}),(0,u.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[(0,u.jsx)("button",{className:"btn btn-primary",children:"Apply for This Position"}),(0,u.jsx)("button",{className:"btn btn-secondary",children:"Share with a Friend"})]})]})]},a.id)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-heading-2 text-center mb-8",children:"Our Hiring Process"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-4",children:"1"}),(0,u.jsx)("h3",{className:"text-heading-3 mb-2",children:"Apply"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Submit your application with resume and cover letter. We review all applications carefully."})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-4",children:"2"}),(0,u.jsx)("h3",{className:"text-heading-3 mb-2",children:"Screen"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Initial phone/video call to discuss your background and interest in the role."})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-purple-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-4",children:"3"}),(0,u.jsx)("h3",{className:"text-heading-3 mb-2",children:"Interview"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Technical and cultural fit interviews with team members and hiring manager."})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-orange-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-4",children:"4"}),(0,u.jsx)("h3",{className:"text-heading-3 mb-2",children:"Offer"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Reference checks, offer discussion, and welcome to the MRVL family!"})]})]})]}),(0,u.jsx)("div",{className:"card p-8 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950 dark:to-blue-950",children:(0,u.jsxs)("div",{className:"text-center max-w-3xl mx-auto",children:[(0,u.jsx)("h2",{className:"text-heading-2 mb-6",children:"Life at MRVL"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"We're building more than just a platform - we're creating a community of passionate gamers and technologists who believe in the power of esports to bring people together. Our team works hard, celebrates success, and supports each other through challenges."}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfae"}),(0,u.jsx)("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Gaming Culture"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Weekly gaming sessions, tournament viewing parties, and esports event attendance."})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf31"}),(0,u.jsx)("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Growth Mindset"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Continuous learning, mentorship programs, and career development opportunities."})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf0d"}),(0,u.jsx)("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Global Impact"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Work with a global team serving the worldwide Marvel Rivals community."})]})]})]})}),(0,u.jsxs)("div",{className:"card p-8 text-center",children:[(0,u.jsx)("h2",{className:"text-heading-2 mb-4",children:"Don't See the Right Role?"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-2xl mx-auto",children:"We're always interested in hearing from talented individuals who are passionate about esports and technology. Send us your resume and tell us how you'd like to contribute."}),(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,u.jsx)("button",{className:"btn btn-primary",children:"Send Us Your Resume"}),(0,u.jsx)("button",{className:"btn btn-secondary",children:"Join Our Talent Network"})]}),(0,u.jsx)("div",{className:"mt-6 text-sm text-gray-600 dark:text-gray-400",children:(0,u.jsxs)("p",{children:["Questions about careers? Reach out to ",(0,u.jsx)("strong",{children:"careers@mrvl.gg"})]})})]})]})},fi=se("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ji=se("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ki=se("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),wi=se("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ni=se("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),_i=se("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Si=se("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Ci="status.mrvl.net"===window.location.hostname?"https://staging.mrvl.net/api":{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUSHER_KEY:"your_pusher_key_here",REACT_APP_PUSHER_CLUSTER:"us2",REACT_APP_BACKEND_URL:"https://staging.mrvl.net",REACT_APP_ENVIRONMENT:"production"}.REACT_APP_API_URL||"http://localhost:8000/api";const Ei=new class{constructor(){this.cache=new Map,this.cacheTimeout=3e4}async checkEndpointHealth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const a=Date.now();try{const r=await Ps.get("".concat(Ci).concat(e,"/health"),{timeout:t,validateStatus:()=>!0}),s=Date.now()-a;return{status:r.status<300?"operational":r.status<500?"degraded":"major",responseTime:s,statusCode:r.status,timestamp:new Date,details:r.data}}catch(r){return{status:"major",responseTime:Date.now()-a,statusCode:0,timestamp:new Date,error:r.message,details:null}}}async batchHealthCheck(e){const t=e.map((e=>this.checkEndpointHealth(e.path||e)));return(await Promise.allSettled(t)).map(((t,a)=>c({endpoint:e[a]},t.value||{status:"unknown",error:t.reason})))}async getSystemMetrics(){try{return(await Ps.get("".concat(Ci,"/status/metrics"))).data}catch(e){throw console.error("Failed to fetch system metrics:",e),e}}async getUptimeStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"24h";const t="uptime_".concat(e);if(this.cache.has(t)){const e=this.cache.get(t);if(Date.now()-e.timestamp<this.cacheTimeout)return e.data}try{const a=await Ps.get("".concat(Ci,"/status/uptime"),{params:{range:e}});return this.cache.set(t,{data:a.data,timestamp:Date.now()}),a.data}catch(a){throw console.error("Failed to fetch uptime stats:",a),a}}async getIncidents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{return(await Ps.get("".concat(Ci,"/status/incidents"),{params:{limit:e}})).data}catch(t){throw console.error("Failed to fetch incidents:",t),t}}async getResponseTimeHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"24h";try{return(await Ps.get("".concat(Ci,"/status/response-times"),{params:{service:e,range:t}})).data}catch(a){throw console.error("Failed to fetch response time history:",a),a}}subscribeToUpdates(e){const t=new WebSocket("ws://localhost:8000/status/subscribe");return t.onmessage=t=>{const a=JSON.parse(t.data);e(a)},t.onerror=e=>{console.error("WebSocket error:",e)},t.onclose=()=>{console.log("WebSocket connection closed"),setTimeout((()=>this.subscribeToUpdates(e)),5e3)},()=>t.close()}async reportIssue(e){try{return(await Ps.post("".concat(Ci,"/status/report"),e)).data}catch(t){throw console.error("Failed to report issue:",t),t}}async getMaintenanceSchedule(){try{return(await Ps.get("".concat(Ci,"/status/maintenance"))).data}catch(e){throw console.error("Failed to fetch maintenance schedule:",e),e}}},Ti=()=>{const[e,t]=(0,s.useState)("operational"),[a,r]=(0,s.useState)([]),[n,l]=(0,s.useState)([]),[i,o]=(0,s.useState)({totalRequests:"Loading...",avgResponseTime:"Loading...",errorRate:"Loading...",activeConnections:"Loading...",dataTransferred:"Loading...",cacheHitRate:"Loading..."}),[d,m]=(0,s.useState)(new Date),[x,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)("24h"),v=[{name:"Core API",key:"core",endpoints:[{name:"Authentication API",endpoint:"/api/auth",critical:!0},{name:"User Management API",endpoint:"/api/users",critical:!0},{name:"Events API",endpoint:"/api/events",critical:!0},{name:"Teams API",endpoint:"/api/teams",critical:!0},{name:"Players API",endpoint:"/api/players",critical:!0}]},{name:"Live Services",key:"live",endpoints:[{name:"Live Scoring WebSocket",endpoint:"ws://api/live-scoring",critical:!0},{name:"Match Updates API",endpoint:"/api/matches/live",critical:!0},{name:"Real-time Statistics",endpoint:"/api/stats/live",critical:!1},{name:"Live Chat Service",endpoint:"/api/chat",critical:!1}]},{name:"Content Delivery",key:"content",endpoints:[{name:"News API",endpoint:"/api/news",critical:!1},{name:"Media Storage",endpoint:"/api/media",critical:!1},{name:"Forums API",endpoint:"/api/forums",critical:!1},{name:"CDN Services",endpoint:"cdn.mrvl.net",critical:!1}]},{name:"Analytics & Data",key:"analytics",endpoints:[{name:"Statistics API",endpoint:"/api/statistics",critical:!1},{name:"Rankings API",endpoint:"/api/rankings",critical:!1},{name:"Analytics Engine",endpoint:"/api/analytics",critical:!1},{name:"Data Export API",endpoint:"/api/export",critical:!1}]},{name:"Infrastructure",key:"infrastructure",endpoints:[{name:"Database Cluster",endpoint:"Primary MySQL",critical:!0},{name:"Redis Cache",endpoint:"Redis Cluster",critical:!0},{name:"Search Service",endpoint:"Elasticsearch",critical:!1},{name:"Queue System",endpoint:"RabbitMQ",critical:!1}]}],y=async()=>{try{var e,t,a,r;const s=await Ei.getSystemMetrics();o({totalRequests:s.requestsPerMinute?"".concat(s.requestsPerMinute,"/min"):"0/min",avgResponseTime:null!==(e=s.database)&&void 0!==e&&e.queries?"".concat(Math.round(s.database.queries/1e3),"ms"):"0ms",errorRate:"0.02%",activeConnections:(null===(t=s.database)||void 0===t?void 0:t.connections)||0,dataTransferred:"".concat(Math.round((null===(a=s.disk)||void 0===a?void 0:a.used)||0)," GB"),cacheHitRate:"".concat((null===(r=s.cache)||void 0===r?void 0:r.hitRate)||0,"%")})}catch(s){console.error("Failed to fetch metrics:",s),0===Object.keys(i).length&&o({totalRequests:"0/min",avgResponseTime:"0ms",errorRate:"0%",activeConnections:0,dataTransferred:"0 GB",cacheHitRate:"0%"})}},b=async()=>{try{const e=await Ei.getIncidents(5);l(e)}catch(e){console.error("Failed to fetch incidents:",e),l([])}};(0,s.useEffect)((()=>{(async()=>{try{const e=await Ei.getHealthChecks();t(e.status||"operational");const a=v.map((t=>c(c({},t),{},{status:"operational",uptime:99.99,endpoints:t.endpoints.map((t=>{var a,r,s,n;let l=null===(a=e.services)||void 0===a?void 0:a[t.endpoint];var i;if(l||"Primary MySQL"!==t.endpoint){if(!l&&"Redis Cluster"===t.endpoint){var o;l=null===(o=e.services)||void 0===o?void 0:o.cache}}else l=null===(i=e.services)||void 0===i?void 0:i.database;return c(c({},t),{},{status:(null===(r=l)||void 0===r?void 0:r.status)||"operational",responseTime:(null===(s=l)||void 0===s?void 0:s.responseTime)||Math.floor(80*Math.random()+20),uptime:"operational"===(null===(n=l)||void 0===n?void 0:n.status)?98+1.99*Math.random():95,lastCheck:new Date})}))})));r(a)}catch(e){console.error("Failed to initialize services:",e);const t=v.map((e=>c(c({},e),{},{status:"operational",uptime:99.99,endpoints:e.endpoints.map((e=>c(c({},e),{},{status:"operational",responseTime:Math.floor(50*Math.random()+10),uptime:99.5,lastCheck:new Date})))})));r(t)}})(),f(),y(),b();const e=setInterval((()=>{j()}),3e4);return()=>clearInterval(e)}),[]);const f=(0,s.useCallback)((()=>{if(a.some((e=>e.endpoints.some((e=>e.critical&&"operational"!==e.status))))){const e=a.some((e=>e.endpoints.some((e=>e.critical&&"major"===e.status))));t(e?"major":"partial")}else t("operational")}),[a]),j=async()=>{h(!0);try{const e=await Ei.getHealthChecks();t(e.status||"operational"),e.services&&r((t=>v.map(((a,r)=>{const s=t[r];return c(c({},a),{},{status:"operational",uptime:(null===s||void 0===s?void 0:s.uptime)||99.9,endpoints:a.endpoints.map(((t,a)=>{var r,n;let l=e.services[t.endpoint];l||"Primary MySQL"!==t.endpoint?l||"Redis Cluster"!==t.endpoint||(l=e.services.cache):l=e.services.database;const i=null===s||void 0===s||null===(r=s.endpoints)||void 0===r?void 0:r[a];return c(c({},t),{},{status:(null===(n=l)||void 0===n?void 0:n.status)||(null===i||void 0===i?void 0:i.status)||"operational",responseTime:l?l.responseTime||50:(null===i||void 0===i?void 0:i.responseTime)||Math.floor(80*Math.random()+20),uptime:(null===i||void 0===i?void 0:i.uptime)||99.5,lastCheck:new Date})}))})})))),await y(),await b()}catch(e){if(console.error("Failed to refresh status:",e),0===a.length){const e=v.map((e=>c(c({},e),{},{status:"unknown",uptime:0,endpoints:e.endpoints.map((e=>c(c({},e),{},{status:"unknown",responseTime:0,uptime:0,lastCheck:new Date})))})));r(e)}}m(new Date),f(),setTimeout((()=>h(!1)),500)},k=e=>{switch(e){case"operational":return(0,u.jsx)(fi,{className:"status-icon operational",size:20});case"degraded":return(0,u.jsx)(ji,{className:"status-icon degraded",size:20});case"partial":return(0,u.jsx)(ji,{className:"status-icon partial",size:20});case"major":return(0,u.jsx)(ki,{className:"status-icon major",size:20});case"maintenance":return(0,u.jsx)(Jn,{className:"status-icon maintenance",size:20});default:return(0,u.jsx)(wi,{className:"status-icon",size:20})}};return(0,u.jsxs)("div",{className:"status-page",children:[(0,u.jsx)("header",{className:"status-header",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"header-content",children:[(0,u.jsxs)("div",{className:"logo-section",children:[(0,u.jsx)("h1",{children:"MRVL API Status"}),(0,u.jsx)("p",{className:"tagline",children:"Real-time monitoring of all Marvel Rivals services"})]}),(0,u.jsxs)("div",{className:"header-actions",children:[(0,u.jsxs)("button",{className:"refresh-btn ".concat(x?"refreshing":""),onClick:j,disabled:x,children:[(0,u.jsx)(je,{size:16}),x?"Refreshing...":"Refresh"]}),(0,u.jsxs)("div",{className:"last-updated",children:["Last updated: ",d.toLocaleTimeString()]})]})]})})}),(0,u.jsx)("section",{className:"system-status ".concat(e),children:(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"status-banner",children:[k(e),(0,u.jsx)("h2",{children:(()=>{switch(e){case"operational":return"All Systems Operational";case"degraded":return"Degraded Performance";case"partial":return"Partial System Outage";case"major":return"Major System Outage";default:return"Checking Status..."}})()})]})})}),(0,u.jsx)("section",{className:"quick-metrics",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"metrics-grid",children:[(0,u.jsxs)("div",{className:"metric-card",children:[(0,u.jsx)("div",{className:"metric-icon",children:(0,u.jsx)(Ni,{size:24})}),(0,u.jsxs)("div",{className:"metric-content",children:[(0,u.jsx)("span",{className:"metric-value",children:i.totalRequests}),(0,u.jsx)("span",{className:"metric-label",children:"Total Requests (24h)"})]})]}),(0,u.jsxs)("div",{className:"metric-card",children:[(0,u.jsx)("div",{className:"metric-icon",children:(0,u.jsx)(_i,{size:24})}),(0,u.jsxs)("div",{className:"metric-content",children:[(0,u.jsx)("span",{className:"metric-value",children:i.avgResponseTime}),(0,u.jsx)("span",{className:"metric-label",children:"Avg Response Time"})]})]}),(0,u.jsxs)("div",{className:"metric-card",children:[(0,u.jsx)("div",{className:"metric-icon",children:(0,u.jsx)(ue,{size:24})}),(0,u.jsxs)("div",{className:"metric-content",children:[(0,u.jsx)("span",{className:"metric-value",children:i.errorRate}),(0,u.jsx)("span",{className:"metric-label",children:"Error Rate"})]})]}),(0,u.jsxs)("div",{className:"metric-card",children:[(0,u.jsx)("div",{className:"metric-icon",children:(0,u.jsx)(Si,{size:24})}),(0,u.jsxs)("div",{className:"metric-content",children:[(0,u.jsx)("span",{className:"metric-value",children:i.activeConnections}),(0,u.jsx)("span",{className:"metric-label",children:"Active Connections"})]})]})]})})}),(0,u.jsx)("section",{className:"services-section",children:(0,u.jsxs)("div",{className:"container",children:[(0,u.jsx)("h3",{className:"section-title",children:"Service Status"}),(0,u.jsx)("div",{className:"services-grid",children:a.map(((e,t)=>(0,u.jsxs)("div",{className:"service-category",children:[(0,u.jsxs)("div",{className:"category-header",children:[(0,u.jsx)("h4",{children:e.name}),(0,u.jsx)("span",{className:"category-status",children:k(e.status)})]}),(0,u.jsx)("div",{className:"endpoints-list",children:e.endpoints.map(((e,t)=>{return(0,u.jsxs)("div",{className:"endpoint-item",children:[(0,u.jsxs)("div",{className:"endpoint-main",children:[(0,u.jsxs)("div",{className:"endpoint-info",children:[(0,u.jsx)("span",{className:"endpoint-name",children:e.name}),e.critical&&(0,u.jsx)("span",{className:"critical-badge",children:"Critical"})]}),(0,u.jsx)("div",{className:"endpoint-status",children:k(e.status)})]}),(0,u.jsxs)("div",{className:"endpoint-metrics",children:[(0,u.jsxs)("div",{className:"metric-item",children:[(0,u.jsx)("span",{className:"metric-label",children:"Response:"}),(0,u.jsxs)("span",{className:"metric-value ".concat((r=e.responseTime,r<50?"excellent":r<100?"good":r<200?"fair":"poor")),children:[e.responseTime,"ms"]})]}),(0,u.jsxs)("div",{className:"metric-item",children:[(0,u.jsx)("span",{className:"metric-label",children:"Uptime:"}),(0,u.jsx)("span",{className:"metric-value",children:(a=e.uptime,"".concat(a,"%"))})]})]})]},t);var a,r}))})]},t)))})]})}),(0,u.jsx)("section",{className:"incidents-section",children:(0,u.jsxs)("div",{className:"container",children:[(0,u.jsx)("h3",{className:"section-title",children:"Recent Incidents & Scheduled Maintenance"}),(0,u.jsx)("div",{className:"incidents-timeline",children:n.length>0?n.map((e=>(0,u.jsxs)("div",{className:"incident-card ".concat(e.severity),children:[(0,u.jsxs)("div",{className:"incident-header",children:[(0,u.jsxs)("div",{className:"incident-title",children:[k(e.status),(0,u.jsx)("h4",{children:e.title})]}),(0,u.jsx)("span",{className:"incident-badge ".concat(e.status),children:e.status})]}),(0,u.jsx)("p",{className:"incident-description",children:e.description}),(0,u.jsxs)("div",{className:"incident-meta",children:[(0,u.jsxs)("span",{className:"affected-services",children:["Affected: ",e.affectedServices.join(", ")]}),(0,u.jsx)("span",{className:"incident-time",children:e.startTime.toLocaleString()})]})]},e.id))):(0,u.jsxs)("div",{className:"no-incidents",children:[(0,u.jsx)(fi,{size:48,className:"no-incidents-icon"}),(0,u.jsx)("p",{children:"No recent incidents or scheduled maintenance"})]})})]})}),(0,u.jsx)("footer",{className:"status-footer",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"footer-content",children:(0,u.jsx)("div",{className:"footer-info",children:(0,u.jsxs)("p",{children:["\xa9 2025 Marvel Rivals Platform. Status page powered by ",(0,u.jsx)("a",{href:"https://armormediia.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#10b981",textDecoration:"none"},children:"ArmorMediia.com"})]})})})})})]})};function Ai(e){let{title:t,value:a,icon:r,color:s,subtitle:n}=e;return(0,u.jsx)("div",{className:"rounded-lg border p-6 ".concat({blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-900 dark:text-blue-200",green:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-900 dark:text-green-200",purple:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-900 dark:text-purple-200",red:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-900 dark:text-red-200",yellow:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-900 dark:text-yellow-200",indigo:"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 text-indigo-900 dark:text-indigo-200",pink:"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800 text-pink-900 dark:text-pink-200",orange:"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 text-orange-900 dark:text-orange-200"}[s]),children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm font-medium opacity-80",children:t}),(0,u.jsx)("p",{className:"text-2xl font-bold",children:a.toLocaleString()}),(0,u.jsx)("p",{className:"text-xs opacity-60 mt-1",children:n})]}),(0,u.jsx)("div",{className:"opacity-60",children:(0,u.jsx)(Ri,{icon:r,size:24})})]})})}function Mi(e){let{activity:t}=e;return(0,u.jsxs)("div",{className:"flex items-center space-x-3 py-2",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:t.description}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.timestamp})]})]})}function Pi(e){let{label:t,status:a,uptime:r,usage:s,responseTime:n}=e;return(0,u.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({healthy:"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400",warning:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-400",error:"text-red-600 bg-red-100 dark:bg-red-900/20 dark:text-red-400"}[a]),children:a}),r&&(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r}),s&&(0,u.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s,"% used"]}),n&&(0,u.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n,"ms"]})]})]})}function Ri(e){let{icon:t,size:a=24}=e;const r={width:a,height:a,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2},s={users:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m3 5.197V9a3 3 0 00-3-3m3 12a4 4 0 00-8 0v3h8v-3z"}),user:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}),activity:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"}),zap:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"}),calendar:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),"message-circle":(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}),newspaper:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9.5a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"}),plus:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"}),edit:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})};return(0,u.jsx)("svg",c(c({},r),{},{children:s[t]||s.users}))}const Ii=function(e){var t;let{navigateTo:a}=e;const{api:r}=b(),[n,l]=(0,s.useState)(null),[i,o]=(0,s.useState)(!0),[d,c]=(0,s.useState)(null);(0,s.useEffect)((()=>{m()}),[]);const m=async()=>{try{o(!0);const e=await r.get("/admin/stats");l(e.data||e)}catch(e){c("Failed to load platform statistics"),console.error("Error fetching admin stats:",e)}finally{o(!1)}};if(i)return(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"animate-pulse",children:[(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(8)].map(((e,t)=>(0,u.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-24"},t)))}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,u.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-64"}),(0,u.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-64"})]})]})});if(d)return(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Statistics"}),(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:d}),(0,u.jsx)("button",{onClick:m,className:"btn btn-outline-primary",children:"Try Again"})]})});const x=(null===n||void 0===n?void 0:n.overview)||n||{};return(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Platform Overview"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time platform statistics and insights"})]}),(0,u.jsx)("button",{onClick:m,className:"btn btn-outline-primary",children:"Refresh Data"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,u.jsx)(Ai,{title:"Total Teams",value:x.totalTeams||0,icon:"users",color:"blue",subtitle:"Registered teams"}),(0,u.jsx)(Ai,{title:"Total Players",value:x.totalPlayers||0,icon:"user",color:"green",subtitle:"Active players"}),(0,u.jsx)(Ai,{title:"Total Matches",value:x.totalMatches||0,icon:"activity",color:"purple",subtitle:"All time matches"}),(0,u.jsx)(Ai,{title:"Live Matches",value:x.liveMatches||0,icon:"zap",color:"red",subtitle:"Currently live"}),(0,u.jsx)(Ai,{title:"Total Events",value:x.totalEvents||0,icon:"calendar",color:"yellow",subtitle:"Tournaments & events"}),(0,u.jsx)(Ai,{title:"Total Users",value:x.totalUsers||0,icon:"users",color:"indigo",subtitle:"Registered users"}),(0,u.jsx)(Ai,{title:"Forum Threads",value:x.totalThreads||0,icon:"message-circle",color:"pink",subtitle:"Discussion threads"}),(0,u.jsx)(Ai,{title:"News Articles",value:x.totalNews||0,icon:"newspaper",color:"orange",subtitle:"Published articles"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,u.jsx)("div",{className:"space-y-3",children:(null===(t=x.recentActivity)||void 0===t?void 0:t.slice(0,5).map(((e,t)=>(0,u.jsx)(Mi,{activity:e},t))))||(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No recent activity data available"})})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Health"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsx)(Pi,{label:"Database",status:x.dbStatus||"healthy",uptime:x.dbUptime}),(0,u.jsx)(Pi,{label:"Cache",status:x.cacheStatus||"healthy",uptime:x.cacheUptime}),(0,u.jsx)(Pi,{label:"Storage",status:x.storageStatus||"healthy",usage:x.storageUsage}),(0,u.jsx)(Pi,{label:"API Response Time",status:x.apiStatus||"healthy",responseTime:x.avgResponseTime})]})]})]})]})};const Di=function(e){let{currentPage:t,totalPages:a,totalItems:r,itemsPerPage:s,onPageChange:n,onPageSizeChange:l,pageSizeOptions:i=[10,25,50,100],itemName:o="items",className:d="",showPageSizeSelector:c=!0,showItemInfo:m=!0}=e;if(a<=1&&!c)return null;const x=Math.max(1,(t-1)*s+1),h=Math.min(r,t*s),g=(()=>{if(a<=7)return Array.from({length:a},((e,t)=>t+1));const e=Math.floor(3);return t<=e+1?Array.from({length:7},((e,t)=>t+1)):t>=a-e?Array.from({length:7},((e,t)=>a-7+t+1)):Array.from({length:7},((a,r)=>t-e+r))})();return(0,u.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 px-6 py-3 border-t border-gray-200 dark:border-gray-700 ".concat(d),children:[(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[m&&(0,u.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300 order-2 sm:order-1",children:r>0?(0,u.jsxs)(u.Fragment,{children:["Showing ",(0,u.jsx)("span",{className:"font-medium",children:x})," to"," ",(0,u.jsx)("span",{className:"font-medium",children:h})," of"," ",(0,u.jsx)("span",{className:"font-medium",children:r})," ",o]}):"No ".concat(o," found")}),c&&l&&(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-sm order-3 sm:order-2",children:[(0,u.jsx)("label",{className:"text-gray-700 dark:text-gray-300",children:"Show:"}),(0,u.jsx)("select",{value:s,onChange:e=>l(Number(e.target.value)),className:"form-input text-sm py-1 px-2 min-w-0 w-auto",children:i.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"per page"})]}),a>1&&(0,u.jsxs)("div",{className:"flex items-center space-x-1 order-1 sm:order-3",children:[(0,u.jsx)("button",{onClick:()=>n(Math.max(1,t-1)),disabled:1===t,className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:"Previous"}),!g.includes(1)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:()=>n(1),className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600",children:"1"}),g[0]>2&&(0,u.jsx)("span",{className:"px-2 text-gray-500",children:"..."})]}),g.map((e=>(0,u.jsx)("button",{onClick:()=>n(e),className:"px-3 py-1 text-sm border rounded transition-colors ".concat(t===e?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"),children:e},e))),!g.includes(a)&&a>1&&(0,u.jsxs)(u.Fragment,{children:[g[g.length-1]<a-1&&(0,u.jsx)("span",{className:"px-2 text-gray-500",children:"..."}),(0,u.jsx)("button",{onClick:()=>n(a),className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600",children:a})]}),(0,u.jsx)("button",{onClick:()=>n(Math.min(a,t+1)),disabled:t===a,className:"px-3 py-1 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:"Next"})]})]}),(0,u.jsxs)("div",{className:"sm:hidden mt-2 text-center text-xs text-gray-600 dark:text-gray-400",children:["Page ",t," of ",a]})]})};const Li=function(e){let{navigateTo:t}=e;const[a,r]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0),[i,o]=(0,s.useState)(1),[d,m]=(0,s.useState)(20),[x,h]=(0,s.useState)({search:"",region:"all",sortBy:"rating"}),[g,p]=(0,s.useState)(new Set),{api:v}=b(),y=(0,s.useCallback)((async()=>{try{var e;l(!0),console.log(" AdminTeams: Fetching teams from real API...");const t=await v.get("/admin/teams");let a=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||t||[];console.log(" AdminTeams: Real teams data received:",a.length,"teams"),console.log(" AdminTeams: Sample team data:",a[0]),Array.isArray(a)||(console.warn(" AdminTeams: Teams data is not an array, using fallback"),a=[]),r(a),console.log(" AdminTeams: Teams loaded successfully")}catch(t){console.error("Error fetching teams:",t),r([])}finally{l(!1)}}),[v]);(0,s.useEffect)((()=>{y()}),[y]);const f=(0,s.useMemo)((()=>{let e=[...a];if(x.search.trim()){const t=x.search.toLowerCase().trim();e=e.filter((e=>{var a,r,s,n;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.short_name)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.region)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(n=e.country)||void 0===n?void 0:n.toLowerCase().includes(t))}))}return"all"!==x.region&&(e=e.filter((e=>e.region===x.region))),"rating"===x.sortBy?e.sort(((e,t)=>(t.rating||0)-(e.rating||0))):"name"===x.sortBy&&e.sort(((e,t)=>e.name.localeCompare(t.name))),e}),[a,x]),j=(0,s.useMemo)((()=>{const e=(i-1)*d;return f.slice(e,e+d)}),[f,i,d]),k=Math.ceil(f.length/d);(0,s.useEffect)((()=>{o(1)}),[x]);const w=()=>{console.log("\ud83c\udfaf AdminTeams: Navigating to team create form"),t&&t("admin-team-create")};return n?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading teams..."})]})}):(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Manage Teams"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, edit, and manage all teams"})]}),(0,u.jsx)("button",{onClick:w,className:"btn btn-primary",children:"Create New Team"})]}),(0,u.jsx)("div",{className:"card p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Teams"}),(0,u.jsx)("input",{type:"text",placeholder:"Search by name...",value:x.search,onChange:e=>h(c(c({},x),{},{search:e.target.value})),className:"form-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Region"}),(0,u.jsx)("select",{value:x.region,onChange:e=>h(c(c({},x),{},{region:e.target.value})),className:"form-input",children:["all","NA","EU","APAC","ASIA","LATAM","BR","CN","KR","JP","Americas","EMEA","Oceania","China"].map((e=>(0,u.jsx)("option",{value:e,children:"all"===e?"All Regions":e},e)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,u.jsxs)("select",{value:x.sortBy,onChange:e=>h(c(c({},x),{},{sortBy:e.target.value})),className:"form-input",children:[(0,u.jsx)("option",{value:"rating",children:"Rating"}),(0,u.jsx)("option",{value:"name",children:"Name"})]})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsx)("button",{onClick:()=>h({search:"",region:"all",sortBy:"rating"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),g.size>0&&(0,u.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[g.size," teams selected"]}),(0,u.jsx)("div",{className:"flex space-x-2",children:(0,u.jsx)("button",{onClick:async()=>{if(0===g.size)return;const e="Are you sure you want to delete ".concat(g.size," teams? This action cannot be undone.");if(window.confirm(e))try{var t;const e=await v.post("/admin/teams/bulk-delete",{team_ids:Array.from(g)});var a;if(!1===(null===(t=e.data)||void 0===t?void 0:t.success))throw new Error((null===(a=e.data)||void 0===a?void 0:a.message)||"Bulk delete failed");await y(),p(new Set),alert("".concat(g.size," teams deleted successfully!"))}catch(n){var r,s;console.error("Error in bulk delete:",n);const e=(null===(r=n.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||n.message||"Bulk delete failed";alert(e)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete Selected"})})]}),(0,u.jsx)("button",{onClick:()=>p(new Set),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,u.jsxs)("div",{className:"card overflow-hidden",children:[(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,u.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:(0,u.jsx)("input",{type:"checkbox",checked:g.size===j.length&&j.length>0,onChange:()=>{g.size===j.length&&j.length>0?p(new Set):p(new Set(j.map((e=>e.id))))},className:"rounded border-gray-300 dark:border-gray-600"})}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Team"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Region"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rating"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Players"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,u.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:j.map((e=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("input",{type:"checkbox",checked:g.has(e.id),onChange:()=>(e=>{const t=new Set(g);t.has(e)?t.delete(e):t.add(e),p(t)})(e.id),className:"rounded border-gray-300 dark:border-gray-600"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"mr-3",children:(0,u.jsx)(D,{team:e,size:"w-10 h-10",className:"border border-gray-200 dark:border-gray-600"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.short_name}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:e.region})}),(0,u.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,u.jsx)("div",{className:"text-sm text-gray-900 dark:text-white font-medium",children:e.rating||"N/A"}),(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Rank #",e.rank||"N/A"]})]}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.player_count||0," players"]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>{console.log(" AdminTeams: Navigating to team-detail with ID:",e.id),t("team-detail",{id:e.id})},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View"}),(0,u.jsx)("button",{onClick:()=>(e=>{console.log("\ud83c\udfaf AdminTeams: Navigating to team edit form with ID:",e.id),t&&t("admin-team-edit",{id:e.id})})(e),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm('Are you sure you want to delete "'.concat(t,'"? This action cannot be undone.')))try{if(!a.find((t=>t.id===e)))return alert("Team not found. Please refresh the page and try again."),void await y();console.log(" AdminTeams: Deleting team with ID:",e),await v.delete("/admin/teams/".concat(e)),await y(),alert("Team deleted successfully!")}catch(r){console.error("Error deleting team:",r),r.response&&404===r.response.status?(alert("Team not found. It may have already been deleted. Refreshing the list..."),await y()):alert("Error deleting team. Please try again.")}})(e.id,e.name),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},e.id)))})]})}),(0,u.jsx)(Di,{currentPage:i,totalPages:k,totalItems:f.length,itemsPerPage:d,onPageChange:o,onPageSizeChange:e=>{m(e),o(1)},itemName:"teams",pageSizeOptions:[10,25,50,100]})]}),0===f.length&&(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Teams Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:x.search||"all"!==x.region?"Try adjusting your filters to find more teams.":"Get started by creating your first team."}),(0,u.jsx)("button",{onClick:w,className:"btn btn-primary",children:"Create First Team"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Teams"}),f.length!==a.length&&(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[f.length," filtered"]})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf0e"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.filter((e=>"NA"===e.region)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NA Teams"})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\uddea\ud83c\uddfa"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.filter((e=>"EU"===e.region)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"EU Teams"})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:a.filter((e=>(e.rating||0)>2e3)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"High Rated"})]})]})]})};const Ui=function(e){let{navigateTo:t}=e;const{api:a}=b(),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(1),[h,g]=(0,s.useState)(20),[p,v]=(0,s.useState)(new Set),[y,f]=(0,s.useState)({search:"",region:"all",role:"all",sortBy:"rating"});(0,s.useEffect)((()=>{j()}),[]);const j=(0,s.useCallback)((async()=>{try{var e;i(!0),d(null),console.log("\ud83c\udfc3 AdminPlayers: Fetching players from real API...");const t=await a.get("/players?per_page=500");let r=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||t||[];console.log("\ud83c\udfc3 AdminPlayers: Real players data received:",r.length,"players"),console.log("\ud83c\udfc3 AdminPlayers: Sample player data:",r[0]),Array.isArray(r)||(console.warn("\ud83c\udfc3 AdminPlayers: Players data is not an array, using fallback"),r=[]);const s=r.map((e=>{var t,a,r;return c(c({},e),{},{ign:e.username||e.name||e.ign||"Unknown",name:e.name||e.real_name||e.username||"Unknown",team_name:(null===(t=e.team)||void 0===t?void 0:t.name)||e.team_name||null,team_short_name:(null===(a=e.team)||void 0===a?void 0:a.short_name)||e.team_short||null,team_logo:(null===(r=e.team)||void 0===r?void 0:r.logo)||e.team_logo||null})}));n(s),console.log("\ud83c\udfc3 AdminPlayers: Players loaded successfully")}catch(s){var t,r;const e=(null===(t=s.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||s.message||"Failed to load players";d(e),console.error("Error fetching players:",s),n([])}finally{i(!1)}}),[a]),k=(0,s.useMemo)((()=>{let e=[...r];if(y.search.trim()){const t=y.search.toLowerCase().trim();e=e.filter((e=>{var a,r,s,n;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.ign)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.team_name)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(n=e.country)||void 0===n?void 0:n.toLowerCase().includes(t))}))}return"all"!==y.region&&(e=e.filter((e=>e.country===y.region))),"all"!==y.role&&(e=e.filter((e=>{const t=e.role;return"DPS"===y.role?"DPS"===t||"Duelist"===t:"Tank"===y.role?"Tank"===t||"Vanguard"===t:"Support"===y.role?"Support"===t||"Strategist"===t:t===y.role}))),"rating"===y.sortBy?e.sort(((e,t)=>(t.rating||0)-(e.rating||0))):"name"===y.sortBy?e.sort(((e,t)=>(e.ign||e.name||"").localeCompare(t.ign||t.name||""))):"team"===y.sortBy&&e.sort(((e,t)=>(e.team_name||"").localeCompare(t.team_name||""))),e}),[r,y]),w=(0,s.useMemo)((()=>{const e=(m-1)*h;return k.slice(e,e+h)}),[k,m,h]),N=Math.ceil(k.length/h);(0,s.useEffect)((()=>{x(1)}),[y]);const _=()=>{console.log("\ud83c\udfc3 AdminPlayers: Navigating to player create form"),t&&t("admin-player-create")};return l?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading players..."})]})}):o?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Players"}),(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:o}),(0,u.jsx)("button",{onClick:j,className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Manage Players"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, edit, and manage all players"})]}),(0,u.jsx)("button",{onClick:_,className:"btn btn-primary",children:"Create New Player"})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Players"}),(0,u.jsx)("input",{type:"text",placeholder:"Search by name...",value:y.search,onChange:e=>f(c(c({},y),{},{search:e.target.value})),className:"form-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Country"}),(0,u.jsx)("select",{value:y.region,onChange:e=>f(c(c({},y),{},{region:e.target.value})),className:"form-input",children:["all","US","CA","UK","DE","FR","ES","IT","KR","JP","CN","BR"].map((e=>(0,u.jsx)("option",{value:e,children:"all"===e?"All Countries":I(e)},e)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Role"}),(0,u.jsxs)("select",{value:y.role,onChange:e=>f(c(c({},y),{},{role:e.target.value})),className:"form-input",children:[(0,u.jsx)("option",{value:"all",children:"All Roles"}),(0,u.jsx)("option",{value:"DPS",children:"DPS"}),(0,u.jsx)("option",{value:"Tank",children:"Tank"}),(0,u.jsx)("option",{value:"Support",children:"Support"}),(0,u.jsx)("option",{value:"Flex",children:"Flex"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,u.jsxs)("select",{value:y.sortBy,onChange:e=>f(c(c({},y),{},{sortBy:e.target.value})),className:"form-input",children:[(0,u.jsx)("option",{value:"rating",children:"Rating"}),(0,u.jsx)("option",{value:"name",children:"Name"}),(0,u.jsx)("option",{value:"team",children:"Team"})]})]})]}),(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)("button",{onClick:()=>f({search:"",region:"all",role:"all",sortBy:"rating"}),className:"btn btn-secondary",children:"Clear Filters"})})]}),p.size>0&&(0,u.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[p.size," players selected"]}),(0,u.jsx)("div",{className:"flex space-x-2",children:(0,u.jsx)("button",{onClick:async()=>{if(0===p.size)return;const e="Are you sure you want to delete ".concat(p.size," players? This action cannot be undone.");if(window.confirm(e))try{var t;const e=await a.post("/players/bulk-delete",{player_ids:Array.from(p)});var r;if(!1===(null===(t=e.data)||void 0===t?void 0:t.success))throw new Error((null===(r=e.data)||void 0===r?void 0:r.message)||"Bulk delete failed");await j(),v(new Set),alert("".concat(p.size," players deleted successfully!"))}catch(o){var s,n;console.error("Error in bulk delete:",o);const t=(null===(s=o.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||o.message||"Bulk delete failed";alert(t)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete Selected"})})]}),(0,u.jsx)("button",{onClick:()=>v(new Set),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,u.jsxs)("div",{className:"card overflow-hidden",children:[(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,u.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:(0,u.jsx)("input",{type:"checkbox",checked:p.size===w.length&&w.length>0,onChange:()=>{p.size===w.length&&w.length>0?v(new Set):v(new Set(w.map((e=>e.id))))},className:"rounded border-gray-300 dark:border-gray-600"})}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Player"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Team"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Country"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rating"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,u.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((e=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("input",{type:"checkbox",checked:p.has(e.id),onChange:()=>(e=>{const t=new Set(p);t.has(e)?t.delete(e):t.add(e),v(t)})(e.id),className:"rounded border-gray-300 dark:border-gray-600"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"mr-3",children:(0,u.jsx)(L,{player:e,size:"w-10 h-10",className:"border border-gray-200 dark:border-gray-600"})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.ign||e.name}),e.ign&&e.name&&(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.team_name?(0,u.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.team_name}):(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No team"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.role?(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("DPS"===e.role||"Duelist"===e.role?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"Tank"===e.role||"Vanguard"===e.role?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"Support"===e.role||"Strategist"===e.role?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"),children:e.role}):(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"-"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-lg",children:R(e.country)}),(0,u.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:I(e.country)||"Unknown"})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.rating||"Unrated"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>{console.log("\ud83c\udfc3 AdminPlayers: Navigating to player-detail with ID:",e.id),t&&t("player-detail",{id:e.id})},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View"}),(0,u.jsx)("button",{onClick:()=>{console.log("\ud83c\udfc3 AdminPlayers: Edit player with ID:",e.id),t&&t("admin-player-edit",{id:e.id})},className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm('Are you sure you want to delete player "'.concat(t,'"? This action cannot be undone.')))try{if(!r.find((t=>t.id===e)))return alert("Player not found. Please refresh the page and try again."),void await j();console.log("\ud83c\udfc3 AdminPlayers: Deleting player with ID:",e),await a.delete("/players/".concat(e)),await j(),alert("Player deleted successfully!")}catch(o){console.error("Error deleting player:",o),o.response&&404===o.response.status?(alert("Player not found. It may have already been deleted. Refreshing the list..."),await j()):alert("Error deleting player. Please try again.")}})(e.id,e.ign||e.name),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},e.id)))})]})}),(0,u.jsx)(Di,{currentPage:m,totalPages:N,totalItems:k.length,itemsPerPage:h,onPageChange:x,onPageSizeChange:e=>{g(e),x(1)},itemName:"players",pageSizeOptions:[10,25,50,100]})]}),0===k.length&&(0,u.jsxs)("div",{className:"card p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc3\u200d\u2642\ufe0f"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Players Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:y.search||"all"!==y.region||"all"!==y.role?"Try adjusting your filters to find more players.":"Get started by creating your first player."}),(0,u.jsx)("button",{onClick:_,className:"btn btn-primary",children:"Create First Player"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfc3\u200d\u2642\ufe0f"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Players"}),k.length!==r.length&&(0,u.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[k.length," filtered"]})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u2694\ufe0f"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:r.filter((e=>"DPS"===e.role||"Duelist"===e.role)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"DPS Players"})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udee1\ufe0f"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.filter((e=>"Tank"===e.role||"Vanguard"===e.role)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tank Players"})]}),(0,u.jsxs)("div",{className:"card p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udc9a"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.filter((e=>"Support"===e.role||"Strategist"===e.role)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Support Players"})]})]})]})},zi={maps:[{name:"Hellfire Gala: Krakoa",mode:"Domination",icon:"fire",type:"Competitive"},{name:"Hydra Charteris Base: Hell's Heaven",mode:"Domination",icon:"gear",type:"Competitive"},{name:"Intergalactic Empire of Wakanda: Birnin T'Challa",mode:"Domination",icon:"gem",type:"Competitive"},{name:"Empire of Eternal Night: Central Park",mode:"Convoy",icon:"night",type:"Competitive"},{name:"Tokyo 2099: Spider-Islands",mode:"Convoy",icon:"cityscape",type:"Casual"},{name:"Yggsgard: Yggdrasill Path",mode:"Convoy",icon:"tree",type:"Casual"},{name:"Empire of Eternal Night: Midtown",mode:"Convoy",icon:"building",type:"Casual"},{name:"Empire of Eternal Night: Sanctum Sanctorum",mode:"Convergence",icon:"crystal",type:"Casual"},{name:"Klyntar: Symbiotic Surface",mode:"Convergence",icon:"heart",type:"Casual"},{name:"Intergalactic Empire of Wakanda: Hall of Djalia",mode:"Convergence",icon:"sparkles",type:"Casual"}],gameModes:{Convoy:{duration:1080,displayName:"Convoy",color:"blue",description:"Escort the payload to victory",icon:"truck"},Domination:{duration:720,displayName:"Domination",color:"red",description:"Control strategic points",icon:"flag"},Convergence:{duration:900,displayName:"Convergence",color:"purple",description:"Converge on objectives",icon:"lightning"},Conquest:{duration:1200,displayName:"Conquest",color:"green",description:"Capture and hold territory",icon:"gem"},"Doom Match":{duration:600,displayName:"Doom Match",color:"orange",description:"Eliminate all opponents",icon:"skull"},Escort:{duration:960,displayName:"Escort",color:"yellow",description:"Guide the target safely",icon:"shield"}},formats:[{value:"BO1",label:"BO1 - Best of 1",maps:1,description:"Single elimination match"},{value:"BO3",label:"BO3 - Best of 3",maps:3,description:"First to win 2 maps"},{value:"BO5",label:"BO5 - Best of 5",maps:5,description:"First to win 3 maps"},{value:"BO7",label:"BO7 - Best of 7",maps:7,description:"First to win 4 maps"},{value:"BO9",label:"BO9 - Best of 9",maps:9,description:"First to win 5 maps"}],statuses:[{value:"upcoming",label:"Upcoming",color:"blue"},{value:"live",label:"Live",color:"red"},{value:"completed",label:"Completed",color:"green"},{value:"cancelled",label:"Cancelled",color:"gray"},{value:"postponed",label:"Postponed",color:"yellow"}]},Oi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BO1";const t=Ft.find((t=>t.value===e)),a=(null===t||void 0===t?void 0:t.maps)||1,r=Bt(e),s=Wt(e);return console.log("INITIALIZING ".concat(e," match with ").concat(a," maps from Season 2.5 pool")),{team1_id:"",team2_id:"",event_id:"",scheduled_at:new Date(Date.now()+36e5).toISOString().slice(0,16),format:e,status:"upcoming",stream_urls:[""],betting_urls:[""],vod_urls:[""],round:"",bracket_position:"",allow_past_date:!1,team1_score:0,team2_score:0,maps:Array.from({length:a},((e,t)=>{const a=r[t]||r[0],n=s[t],l=zt[n];return{map_number:t+1,map_name:a.name,map_id:a.id,mode:n,timer:l.timer,icon:a.icon,team1_score:0,team2_score:0,team1_rounds:0,team2_rounds:0,status:"upcoming",winner_id:null,duration:null,overtime:!1,team1_composition:[],team2_composition:[],checkpoints_reached:[],capture_progress:0,payload_distance:0}})),viewers:0,featured:!1,map_pool:zi.maps.slice(0,a)}};const Fi=function(e){var t,a,r,n;let{matchId:l,navigateTo:i}=e;const[o,d]=(0,s.useState)((()=>Oi())),[m,x]=(0,s.useState)([]),[h,g]=(0,s.useState)([]),[p,v]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),[j,k]=(0,s.useState)({}),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)(!1),[C,E]=(0,s.useState)(Ot),{api:T}=b(),A=Boolean(l);console.log("MatchForm: Using backend URL:","https://staging.mrvl.net"),(0,s.useEffect)((()=>{(async()=>{try{console.log("Loading heroes from backend API...");const e=await T.get("/heroes"),t=null===e||void 0===e?void 0:e.data;if(console.log("Heroes loaded from API:",t),t&&t.by_role){const e={};for(const[a,r]of Object.entries(t.by_role))Array.isArray(r)?e[a]=r.map((e=>"object"===typeof e&&e.name?e.name:e)):e[a]=r;E(e),console.log("Heroes state updated from API:",e)}}catch(e){console.error("Error loading heroes from API:",e),console.log("Using fallback heroes from initial state")}})()}),[T]),(0,s.useEffect)((()=>{(async()=>{N(!0);try{console.log("MatchForm: Fetching REAL backend data...");const s=await T.get("/teams"),n=(null===s||void 0===s?void 0:s.data)||[];x(Array.isArray(n)?n:[]),console.log("REAL Teams loaded:",n.length,n);const i=await T.get("/events"),o=(null===i||void 0===i?void 0:i.data)||[];if(g(Array.isArray(o)?o:[]),console.log("REAL Events loaded:",o.length,o),A&&l)try{console.log("Loading REAL match data for ID: ".concat(l));const r=await T.get("/admin/matches/".concat(l)),s=null===r||void 0===r?void 0:r.data;if(s){var e,t,a;console.log("REAL Match data loaded:",s);const r=Oi(s.format||"BO1"),l=s.maps_data&&s.maps_data.length>0?s.maps_data.map(((e,t)=>{var a,s,n,l;return{map_name:e.map_name||(null===(a=r.maps[t])||void 0===a?void 0:a.map_name)||"Tokyo 2099: Shibuya Sky",mode:e.mode||(null===(s=r.maps[t])||void 0===s?void 0:s.mode)||"Conquest",team1_composition:e.team1_composition||(null===(n=r.maps[t])||void 0===n?void 0:n.team1_composition)||[],team2_composition:e.team2_composition||(null===(l=r.maps[t])||void 0===l?void 0:l.team2_composition)||[]}})):r.maps,i=c(c({},s),{},{team1_id:s.team1_id||(null===(e=s.team1)||void 0===e?void 0:e.id)||r.team1_id||"",team2_id:s.team2_id||(null===(t=s.team2)||void 0===t?void 0:t.id)||r.team2_id||"",event_id:s.event_id||(null===(a=s.event)||void 0===a?void 0:a.id)||r.event_id||"",format:s.format||r.format,scheduled_at:s.scheduled_at?new Date(s.scheduled_at).toISOString().slice(0,16):new Date(Date.now()+36e5).toISOString().slice(0,16),stream_urls:s.stream_urls||(s.stream_url?[s.stream_url]:[""]),betting_urls:s.betting_urls||(s.betting_url?[s.betting_url]:[""]),vod_urls:s.vod_urls||[""],round:s.round||"",bracket_position:s.bracket_position||"",allow_past_date:s.allow_past_date||!1,maps:l,map_pool:r.map_pool});d(i);const o=n.find((e=>e.id===i.team1_id)),m=n.find((e=>e.id===i.team2_id));v(o),f(m),o&&await M(o,"team1",i),m&&await M(m,"team2",i),console.log("Real match data loaded and players populated")}}catch(r){console.error("Error loading real match data:",r)}}catch(r){console.error("Error fetching real form data:",r)}finally{N(!1)}})()}),[l,A,T]);const M=async function(e,t){try{console.log("Loading REAL players for ".concat(e.name," (ID: ").concat(e.id,")"));const a=await T.get("/teams/".concat(e.id)),r=null===a||void 0===a?void 0:a.data;if(r&&(r.players||r.current_roster)){const a=r.players||r.current_roster;console.log("Found ".concat(a.length," REAL players for ").concat(e.name,":"),a);const s="team1"===t?"team1_composition":"team2_composition";return d((e=>c(c({},e),{},{maps:(e.maps||[]).map((e=>c(c({},e),{},{[s]:a.slice(0,6).map(((e,t)=>({player_id:e.id,player_name:e.name,hero:e.main_hero||(t%2===0?"Captain America":"Storm"),role:e.role||"Tank",country:e.country||e.nationality||"US",eliminations:0,deaths:0,assists:0,damage:0,healing:0,damageBlocked:0,objectiveTime:0,ultimatesUsed:0})))})))}))),console.log("".concat(e.name," composition updated with REAL players:"),a.map((e=>e.name))),a}return console.log("No players found for ".concat(e.name)),[]}catch(a){return console.error("Error loading real players for ".concat(e.name,":"),a),[]}},P=(0,s.useCallback)((e=>{console.log("Changing format from ".concat(o.format," to ").concat(e));const t=Oi(e);d((a=>{const r=c(c({},a),{},{format:e,maps:t.maps.map(((e,t)=>{var r;const s=null===(r=a.maps)||void 0===r?void 0:r[t];return c(c({},e),{},{team1_composition:(null===s||void 0===s?void 0:s.team1_composition)||e.team1_composition,team2_composition:(null===s||void 0===s?void 0:s.team2_composition)||e.team2_composition,team1_score:(null===s||void 0===s?void 0:s.team1_score)||0,team2_score:(null===s||void 0===s?void 0:s.team2_score)||0,winner_id:(null===s||void 0===s?void 0:s.winner_id)||null})})),map_pool:t.map_pool,stream_urls:a.stream_urls||[""],betting_urls:a.betting_urls||[""],vod_urls:a.vod_urls||[""],team1_id:a.team1_id,team2_id:a.team2_id,event_id:a.event_id,scheduled_at:a.scheduled_at,round:a.round,bracket_position:a.bracket_position});return console.log("Format changed to ".concat(e," with preserved data:"),r),r}))}),[]),R=(0,s.useCallback)((e=>{console.log("Adding URL field for type: ".concat(e));const t={stream:"stream_urls",betting:"betting_urls",vod:"vod_urls"}[e];t?d((a=>{const r=a[t]||[""],s=c(c({},a),{},{[t]:[...r,""]});return console.log("Added ".concat(e," URL field:"),s[t]),s})):console.error("Unknown URL type:",e)}),[]),I=(0,s.useCallback)(((e,t)=>{console.log("Removing URL field for type: ".concat(e,", index: ").concat(t));const a={stream:"stream_urls",betting:"betting_urls",vod:"vod_urls"}[e];a?d((r=>{const s=r[a]||[""];if(s.length<=1)return console.log("Cannot remove last ".concat(e," URL field")),r;const n=s.filter(((e,a)=>a!==t)),l=c(c({},r),{},{[a]:n});return console.log("Removed ".concat(e," URL field at index ").concat(t,":"),l[a]),l})):console.error("Unknown URL type:",e)}),[]),D=(0,s.useCallback)(((e,t,a)=>{console.log("URL change: ".concat(e,"[").concat(t,"] = ").concat(a));const r={stream:"stream_urls",betting:"betting_urls",vod:"vod_urls"}[e];r?d((s=>{const n=(s[r]||[""]).map(((e,r)=>r===t?a:e)),l=c(c({},s),{},{[r]:n});return console.log("Updated ".concat(e," URL at index ").concat(t,":"),l[r]),l})):console.error("Unknown URL type:",e)}),[]),L=async e=>{const{name:t,value:a,type:r,checked:s}=e.target,n="checkbox"===r?s:a;if(console.log("Input change: ".concat(t," = ").concat(n)),"format"!==t){if(d((e=>c(c({},e),{},{[t]:n}))),"team1_id"===t&&n){const e=m.find((e=>e.id==n));v(e),console.log("Team 1 selected:",null===e||void 0===e?void 0:e.name),e&&await M(e,"team1")}else if("team2_id"===t&&n){const e=m.find((e=>e.id==n));f(e),console.log("Team 2 selected:",null===e||void 0===e?void 0:e.name),e&&await M(e,"team2")}j[t]&&k((e=>c(c({},e),{},{[t]:null})))}else P(n)},U=(e,t,a,r,s)=>{const n="object"===typeof r&&r.name?r.name:String(r),l="object"===typeof s&&s.name?s.name:String(s);console.log("Player ".concat(a+1," on ").concat(t," changing to ").concat(n," (").concat(l,") for Map ").concat(e+1)),d((r=>c(c({},r),{},{maps:(r.maps||[]).map(((r,s)=>s===e?c(c({},r),{},{["".concat(t,"_composition")]:(r["".concat(t,"_composition")]||[]).map(((e,t)=>t===a?c(c({},e),{},{hero:n,role:l}):e))}):r))})))},z=(0,s.useCallback)(((e,t,a,r)=>e>t?a:t>e?r:null),[]),O=((0,s.useCallback)((async e=>{try{const t={team1_score:e.team1_score,team2_score:e.team2_score,current_map:e.current_map||1,map_scores:e.maps.map(((e,t)=>({map_number:t+1,team1_score:e.team1_score||0,team2_score:e.team2_score||0,winner_id:e.winner_id})))};console.log("Sending real-time score update with auto-calculated winners:",t);const a=await T.post("/admin/matches/".concat(l,"/update-score"),t);(null!==a&&void 0!==a&&a.success||null!==a&&void 0!==a&&a.data)&&(console.log("Real-time score update sent successfully with automatic winners"),liveScoreManager.broadcastScoreUpdate(l,{team1_score:e.team1_score,team2_score:e.team2_score,maps:e.maps,status:e.status,current_map:e.current_map},{source:"MatchForm",type:"form_score_update",timestamp:Date.now()}))}catch(t){console.error("Error sending real-time score update:",t)}}),[T,l]),(0,s.useCallback)(((e,t,a)=>{console.log("Map ".concat(e+1," ").concat(t," changed to:"),a),d((r=>{const s=c(c({},r),{},{maps:(r.maps||[]).map(((s,n)=>{if(n===e){const n=c(c({},s),{},{[t]:a});if("team1_score"===t||"team2_score"===t){const l="team1_score"===t?a:s.team1_score||0,i="team2_score"===t?a:s.team2_score||0;n.winner_id=z(l,i,r.team1_id,r.team2_id),n.status=n.winner_id?"completed":"upcoming",console.log("Map ".concat(e+1," winner automatically calculated:"),n.winner_id?n.winner_id===r.team1_id?"Team 1":"Team 2":"No winner")}return n}return s}))});let n=0,l=0;return s.maps.forEach((e=>{e.winner_id===s.team1_id?n++:e.winner_id===s.team2_id&&l++})),s.team1_score=n,s.team2_score=l,s}))}),[l,z])),F=async()=>{if((()=>{const e={};return o.team1_id||(e.team1_id="Team 1 is required"),o.team2_id||(e.team2_id="Team 2 is required"),o.team1_id===o.team2_id&&(e.team2_id="Teams must be different"),o.scheduled_at||(e.scheduled_at="Schedule time is required"),o.format||(e.format="Format is required"),o.maps.forEach(((t,a)=>{t.map_name||(e["map_".concat(a)]="Map ".concat(a+1," name is required"))})),k(e),0===Object.keys(e).length})()){S(!0);try{console.log("Saving match to PRODUCTION backend...",o);let e=0,t=0;"completed"===o.status&&o.maps.forEach((e=>{(e.team1_score||0)===(e.team2_score||0)||e.winner_id||(e.winner_id=(e.team1_score||0)>(e.team2_score||0)?o.team1_id:o.team2_id,e.status="completed",console.log(" Auto-calculated map ".concat(e.map_number," winner:"),e.winner_id))})),o.maps.forEach((a=>{a.winner_id&&(a.winner_id==o.team1_id?e++:a.winner_id==o.team2_id&&t++)})),console.log(" Calculated series scores: Team1: ".concat(e,", Team2: ").concat(t));const a={team1_id:parseInt(o.team1_id),team2_id:parseInt(o.team2_id),event_id:o.event_id?parseInt(o.event_id):null,status:o.status||"upcoming",format:o.format||"BO1",scheduled_at:new Date(o.scheduled_at).toISOString(),team1_score:e>0||t>0?e:parseInt(o.team1_score||0),team2_score:e>0||t>0?t:parseInt(o.team2_score||0),stream_urls:(o.stream_urls||[""]).filter((e=>e.trim())),betting_urls:(o.betting_urls||[""]).filter((e=>e.trim())),vod_urls:(o.vod_urls||[""]).filter((e=>e.trim())),round:o.round||null,bracket_position:o.bracket_position||null,allow_past_date:o.allow_past_date||!1,maps_data:o.maps.map(((e,t)=>({map_number:t+1,map_name:e.map_name,mode:e.mode,team1_score:parseInt(e.team1_score)||0,team2_score:parseInt(e.team2_score)||0,winner_id:e.winner_id||null,status:e.winner_id?"completed":"upcoming",team1_composition:(e.team1_composition||[]).slice(0,6).map((e=>({player_id:e.player_id||e.id,player_name:e.player_name||e.name||e.username,hero:e.hero||"Captain America",role:e.role||"Vanguard",country:e.country||e.nationality||"US",eliminations:0,deaths:0,assists:0,damage:0,healing:0,damage_blocked:0,ultimate_usage:0,objective_time:0}))),team2_composition:(e.team2_composition||[]).slice(0,6).map((e=>({player_id:e.player_id||e.id,player_name:e.player_name||e.name||e.username,hero:e.hero||"Hulk",role:e.role||"Vanguard",country:e.country||e.nationality||"US",eliminations:0,deaths:0,assists:0,damage:0,healing:0,damage_blocked:0,ultimate_usage:0,objective_time:0})))})))};let r;console.log("\ud83d\udce4 PRODUCTION payload with preserved heroes/maps:",a),A?(console.log("Updating existing match via PRODUCTION API..."),r=await T.put("/admin/matches/".concat(l,"/complete-update"),a)):(console.log("Creating new match via PRODUCTION API..."),r=await T.post("/admin/matches",a)),console.log("Match saved to PRODUCTION backend successfully:",r),alert("Match ".concat(A?"updated":"created"," successfully with preserved heroes and maps!")),i&&i("admin-matches")}catch(e){console.error("Error saving match to PRODUCTION backend:",e),alert("Error saving match: ".concat(e.message||"Unknown error"))}finally{S(!1)}}else console.log("Form validation failed:",j)};return w?(0,u.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,u.jsxs)("div",{className:"text-center py-8",children:[(0,u.jsx)("div",{className:"text-2xl mb-4",children:"MATCHES"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading real match form data..."})]})}):(0,u.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:A?"Edit Match":"Create New Match"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:A?"Update match details and scoring":"Set up a new Marvel Rivals tournament match"})]}),(0,u.jsx)("button",{onClick:()=>i&&i("admin-matches"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"\u2190 Back to Matches"})]}),(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),F()},className:"space-y-6",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Teams"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team 1 *"}),(0,u.jsxs)("select",{name:"team1_id",value:o.team1_id,onChange:L,className:"form-input ".concat(j.team1_id?"border-red-500":""),required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select Team 1..."}),m.map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (",e.short_name,")"]},e.id)))]}),p&&(0,u.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded text-sm",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:p.name}),(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:["Region: ",p.region," | Rating: ",p.rating||"Unranked"]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team 2 *"}),(0,u.jsxs)("select",{name:"team2_id",value:o.team2_id,onChange:L,className:"form-input ".concat(j.team2_id?"border-red-500":""),required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select Team 2..."}),m.filter((e=>e.id!=o.team1_id)).map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (",e.short_name,")"]},e.id)))]}),y&&(0,u.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded text-sm",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:y.name}),(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:["Region: ",y.region," | Rating: ",y.rating||"Unranked"]})]})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Match Details"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:["Event ",(0,u.jsx)("span",{className:"text-gray-500 text-sm",children:"(Optional - standalone match)"})]}),(0,u.jsxs)("select",{name:"event_id",value:o.event_id,onChange:L,className:"form-input ".concat(j.event_id?"border-red-500":""),children:[(0,u.jsx)("option",{value:"",children:"No Event - Standalone Match"}),h.map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (",e.type||"Tournament",")"]},e.id)))]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to create a standalone match without an event"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Match Format *"}),(0,u.jsx)("select",{name:"format",value:o.format,onChange:L,className:"form-input",required:!0,children:zi.formats.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Changing format will reset map configuration"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Scheduled Time *"}),(0,u.jsx)("input",{type:"datetime-local",name:"scheduled_at",value:o.scheduled_at,onChange:L,className:"form-input ".concat(j.scheduled_at?"border-red-500":""),min:o.allow_past_date?void 0:(new Date).toISOString().slice(0,16),required:!0}),(0,u.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:"allow_past_date",name:"allow_past_date",checked:o.allow_past_date,onChange:L,className:"mr-2"}),(0,u.jsx)("label",{htmlFor:"allow_past_date",className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow past dates (for completed matches)"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Status"}),(0,u.jsx)("select",{name:"status",value:o.status,onChange:L,className:"form-input",children:zi.statuses.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Tournament Round"}),(0,u.jsx)("input",{type:"text",name:"round",value:o.round,onChange:L,className:"form-input",placeholder:"Semi-Finals, Quarter-Finals, etc."})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Bracket Position"}),(0,u.jsx)("input",{type:"text",name:"bracket_position",value:o.bracket_position,onChange:L,className:"form-input",placeholder:"Upper Bracket, Lower Bracket, etc."})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Streaming & Betting URLs"}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Stream URLs"}),(0,u.jsx)("button",{type:"button",onClick:()=>R("stream"),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"+ Add Stream"})]}),(0,u.jsx)("div",{className:"space-y-2",children:(o.stream_urls||[""]).map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"url",value:e,onChange:e=>D("stream",t,e.target.value),className:"form-input flex-1",placeholder:"https://twitch.tv/stream".concat(t+1)}),(o.stream_urls||[]).length>1&&(0,u.jsx)("button",{type:"button",onClick:()=>I("stream",t),className:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Remove"})]},t)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Betting URLs"}),(0,u.jsx)("button",{type:"button",onClick:()=>R("betting"),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"+ Add Betting"})]}),(0,u.jsx)("div",{className:"space-y-2",children:(o.betting_urls||[""]).map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"url",value:e,onChange:e=>D("betting",t,e.target.value),className:"form-input flex-1",placeholder:"https://bet365.com/match".concat(t+1)}),(o.betting_urls||[]).length>1&&(0,u.jsx)("button",{type:"button",onClick:()=>I("betting",t),className:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Remove"})]},t)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"VOD URLs"}),(0,u.jsx)("button",{type:"button",onClick:()=>R("vod"),className:"px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700",children:"+ Add VOD"})]}),(0,u.jsx)("div",{className:"space-y-2",children:(o.vod_urls||[""]).map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"url",value:e,onChange:e=>D("vod",t,e.target.value),className:"form-input flex-1",placeholder:"https://youtube.com/vod".concat(t+1)}),(o.vod_urls||[]).length>1&&(0,u.jsx)("button",{type:"button",onClick:()=>I("vod",t),className:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Remove"})]},t)))})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Marvel Rivals Maps & Team Compositions (",o.format,")"]}),(0,u.jsx)("div",{className:"space-y-6",children:(o.maps||[]).map(((e,t)=>(0,u.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-6 bg-white dark:bg-gray-800",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,u.jsxs)("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Map ",t+1]}),(0,u.jsx)("div",{className:"px-3 py-1 rounded text-sm font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"live"===e.status?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"),children:(e.status||"upcoming").toUpperCase()})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Select Marvel Rivals Map"}),(0,u.jsx)("select",{value:e.map_name,onChange:e=>{const a=e.target.value,r=zi.maps.find((e=>e.name===a));O(t,"map_name",a),r&&O(t,"mode",r.mode)},className:"form-input",children:zi.maps.map((e=>(0,u.jsxs)("option",{value:e.name,children:[e.icon," ",e.name," (",e.mode,")"]},e.name)))}),e.mode&&zi.gameModes[e.mode]&&(0,u.jsx)("div",{className:"mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded text-sm",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-xl",children:zi.gameModes[e.mode].icon}),(0,u.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:zi.gameModes[e.mode].displayName})]})})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Game Mode"}),(0,u.jsx)("select",{value:e.mode||"Convoy",onChange:e=>O(t,"mode",e.target.value),className:"form-input",children:Object.entries(zi.gameModes).map((e=>{let[t,a]=e;return(0,u.jsxs)("option",{value:t,children:[a.icon," ",a.displayName," - ",Math.floor(a.duration/60),"min"]},t)}))})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"border border-blue-200 dark:border-blue-700 rounded-lg p-4 bg-blue-50 dark:bg-blue-900/10",children:[(0,u.jsxs)("h5",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300 mb-4",children:[(null===p||void 0===p?void 0:p.name)||"Team 1"," Composition"]}),(0,u.jsx)("div",{className:"space-y-3",children:(e.team1_composition||[]).length>0?e.team1_composition.map(((e,a)=>(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)("span",{className:"font-bold text-green-600 dark:text-green-400",children:e.player_name||e.name||"Player ".concat(a+1)}),(0,u.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat("Tank"===e.role?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"Duelist"===e.role?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:e.role})]}),(0,u.jsx)("select",{value:e.hero,onChange:e=>{const r=e.target.value,s=Object.keys(C).find((e=>(C[e]||[]).includes(r)))||"Tank";U(t,"team1",a,r,s)},className:"w-full text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Object.entries(C).map((e=>{let[t,a]=e;return(0,u.jsx)("optgroup",{label:t,children:Array.isArray(a)?a.map((e=>(0,u.jsx)("option",{value:e,children:e},e))):null},t)}))})]},a))):(0,u.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Select Team 1 to load real players"})})]}),(0,u.jsxs)("div",{className:"border border-red-200 dark:border-red-700 rounded-lg p-4 bg-red-50 dark:bg-red-900/10",children:[(0,u.jsxs)("h5",{className:"text-lg font-semibold text-red-800 dark:text-red-300 mb-4",children:[(null===y||void 0===y?void 0:y.name)||"Team 2"," Composition"]}),(0,u.jsx)("div",{className:"space-y-3",children:(e.team2_composition||[]).length>0?e.team2_composition.map(((e,a)=>(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)("span",{className:"font-bold text-green-600 dark:text-green-400",children:e.player_name||e.name||"Player ".concat(a+1)}),(0,u.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat("Tank"===e.role?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"Duelist"===e.role?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:e.role})]}),(0,u.jsx)("select",{value:e.hero,onChange:e=>{const r=e.target.value,s=Object.keys(C).find((e=>(C[e]||[]).includes(r)))||"Tank";U(t,"team2",a,r,s)},className:"w-full text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Object.entries(C).map((e=>{let[t,a]=e;return(0,u.jsx)("optgroup",{label:t,children:Array.isArray(a)?a.map((e=>(0,u.jsx)("option",{value:e,children:e},e))):null},t)}))})]},a))):(0,u.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Select Team 2 to load real players"})})]})]}),(0,u.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:[(null===p||void 0===p?void 0:p.short_name)||"Team 1"," Score"]}),(0,u.jsx)("input",{type:"number",min:"0",max:"50",value:e.team1_score,onChange:e=>O(t,"team1_score",parseInt(e.target.value)||0),className:"form-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:[(null===y||void 0===y?void 0:y.short_name)||"Team 2"," Score"]}),(0,u.jsx)("input",{type:"number",min:"0",max:"50",value:e.team2_score,onChange:e=>O(t,"team2_score",parseInt(e.target.value)||0),className:"form-input"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Map Winner (Automatically Calculated)"}),(0,u.jsx)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border",children:e.winner_id?(0,u.jsx)("div",{className:"flex items-center justify-center",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-1",children:[e.winner_id==o.team1_id?null===p||void 0===p?void 0:p.name:null===y||void 0===y?void 0:y.name," Wins!"]}),(0,u.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Score: ",e.team1_score||0," - ",e.team2_score||0]}),l&&(0,u.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Real-time update sent"})]})}):(0,u.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:(e.team1_score||0)===(e.team2_score||0)?(e.team1_score||0)>0?" Tie Game":" No scores entered yet":" Enter scores above to determine winner"})}),(0,u.jsx)("div",{className:"mt-2 text-center",children:(0,u.jsx)("button",{type:"button",onClick:()=>{O(t,"team1_score",0),O(t,"team2_score",0)},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Reset Scores"})})]})]})]},t)))}),(0,u.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,u.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,u.jsx)("div",{className:"font-bold mb-2",children:"Current Match Score:"}),(0,u.jsxs)("div",{className:"text-2xl",children:[(null===p||void 0===p?void 0:p.short_name)||"Team 1",": ",(0,u.jsx)("span",{className:"font-bold",children:o.team1_score})," -",(null===y||void 0===y?void 0:y.short_name)||"Team 2",": ",(0,u.jsx)("span",{className:"font-bold",children:o.team2_score})]}),"completed"===o.status&&(0,u.jsxs)("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded border",children:[(0,u.jsx)("div",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"Manual Score Override (for completed matches):"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:[(null===p||void 0===p?void 0:p.short_name)||"Team 1"," Score"]}),(0,u.jsx)("input",{type:"number",min:"0",max:"10",value:o.team1_score||0,onChange:e=>d((t=>c(c({},t),{},{team1_score:parseInt(e.target.value)||0}))),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm"})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:[(null===y||void 0===y?void 0:y.short_name)||"Team 2"," Score"]}),(0,u.jsx)("input",{type:"number",min:"0",max:"10",value:o.team2_score||0,onChange:e=>d((t=>c(c({},t),{},{team2_score:parseInt(e.target.value)||0}))),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm"})]})]}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Use this to set final match scores for completed matches without detailed map scoring."})]})]})})]}),(0,u.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,u.jsx)("button",{type:"submit",disabled:_,className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold",children:_?"Saving...":A?"Update Match":"Create Match"}),(0,u.jsx)("button",{type:"button",onClick:()=>i&&i("admin-matches"),className:"px-8 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold",children:"Cancel"})]})]}),p&&y&&(0,u.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg p-6 shadow-lg mt-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("div",{className:"flex items-center space-x-4",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center",children:(0,u.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:p.short_name?p.short_name[0]:p.name[0]})}),(0,u.jsxs)("div",{className:"text-white",children:[(0,u.jsx)("div",{className:"font-bold text-lg",children:p.name}),(0,u.jsx)("div",{className:"text-blue-200 text-sm",children:p.region})]})]})}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsxs)("div",{className:"text-white text-4xl font-bold mb-1",children:[p.short_name," ",o.team1_score||0," - ",o.team2_score||0," ",y.short_name]}),(0,u.jsxs)("div",{className:"text-blue-200 text-sm uppercase tracking-wide",children:[o.format," \u2022 ",(null===(t=o.status)||void 0===t?void 0:t.toUpperCase())||"UPCOMING"]}),"live"===o.status&&(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-1 mt-2",children:[(0,u.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,u.jsx)("span",{className:"text-red-200 text-sm font-medium",children:"LIVE"})]})]}),(0,u.jsx)("div",{className:"flex items-center space-x-4",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsxs)("div",{className:"text-white text-right",children:[(0,u.jsx)("div",{className:"font-bold text-lg",children:y.name}),(0,u.jsx)("div",{className:"text-blue-200 text-sm",children:y.region})]}),(0,u.jsx)("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center",children:(0,u.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:y.short_name?y.short_name[0]:y.name[0]})})]})})]}),(0,u.jsxs)("div",{className:"mt-4 pt-4 border-t border-blue-500",children:[(0,u.jsx)("div",{className:"flex items-center justify-center space-x-2",children:(o.maps||[]).map(((e,t)=>{const a=e.winner_id===o.team1_id,r=e.winner_id===o.team2_id,s=(o.current_map||1)===t+1;return(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold ".concat(a?"bg-green-500 text-white":r?"bg-red-500 text-white":s?"bg-yellow-400 text-gray-900":"bg-blue-500 text-white"),children:t+1}),t<o.maps.length-1&&(0,u.jsx)("div",{className:"w-4 h-0.5 bg-blue-400 mx-1"})]},t)}))}),(0,u.jsx)("div",{className:"text-center mt-2",children:(0,u.jsxs)("span",{className:"text-blue-200 text-xs",children:["Map ",o.current_map||1," of ",(null===(a=o.maps)||void 0===a?void 0:a.length)||1," \u2022 ",(null===(r=o.maps)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.mode)||"Convoy"]})})]})]})]})};const Bi=function(){const{api:e}=b(),[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(1),[m]=(0,s.useState)(15),[x,h]=(0,s.useState)({search:"",status:"all",event:"all",sortBy:"date"}),[g,p]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null);(0,s.useEffect)((()=>{N()}),[]);const N=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{var s;n(!0),i(null);const l=await e.get("/api/admin/matches-moderation?page=".concat(t,"&limit=").concat(r)),o=(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data)||(null===l||void 0===l?void 0:l.data)||l||[];a(Array.isArray(o)?o:[])}catch(d){var l,o;const e=(null===(l=d.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||d.message||"Failed to load matches";i(e),console.error("Error fetching matches:",d),a([])}finally{n(!1)}},_=(0,s.useMemo)((()=>{let e=[...t];if(x.search.trim()){const t=x.search.toLowerCase().trim();e=e.filter((e=>{var a,r,s;return(null===(a=e.team1_name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.team2_name)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.event_name)||void 0===s?void 0:s.toLowerCase().includes(t))}))}return"all"!==x.status&&(e=e.filter((e=>e.status===x.status))),"all"!==x.event&&(e=e.filter((e=>{var t;return(null===(t=e.event_id)||void 0===t?void 0:t.toString())===x.event}))),"date"===x.sortBy?e.sort(((e,t)=>new Date(t.scheduled_at||t.created_at)-new Date(e.scheduled_at||e.created_at))):"status"===x.sortBy?e.sort(((e,t)=>(e.status||"").localeCompare(t.status||""))):"event"===x.sortBy&&e.sort(((e,t)=>(e.event_name||"").localeCompare(t.event_name||""))),e}),[t,x]),C=(0,s.useMemo)((()=>{const e=(o-1)*m;return _.slice(e,e+m)}),[_,o,m]),E=Math.ceil(_.length/m);(0,s.useEffect)((()=>{d(1)}),[x]);const T=async(t,a)=>{try{var r;const n=await e.put("/api/admin/matches-moderation/".concat(t),{status:a});var s;if(!1===(null===(r=n.data)||void 0===r?void 0:r.success))throw new Error((null===(s=n.data)||void 0===s?void 0:s.message)||"Status update failed");await N(),alert("Match status updated to ".concat(a,"!"))}catch(l){var n,i;console.error("Error updating match status:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Error updating match status";alert(t)}},A=()=>{p(null),y(!1)},M=()=>{j(!1)},P=()=>{N()},R=async(t,r,s)=>{try{var n;const l=1===r?{team1_score:s}:{team2_score:s},o=await e.put("/api/admin/matches-moderation/".concat(t),l);var i;if(!1===(null===(n=o.data)||void 0===n?void 0:n.success))throw new Error((null===(i=o.data)||void 0===i?void 0:i.message)||"Score update failed");a((e=>e.map((e=>e.id===t?c(c({},e),l):e))))}catch(l){var o,d;console.error("Error updating score:",l);const t=(null===(o=l.response)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.message)||l.message||"Error updating score";alert(t)}},I=async()=>{j(!0)},L=e=>{switch(e){case"live":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"cancelled":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},U=[...new Set(t.map((e=>e.event_name)).filter(Boolean))];return r?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,u.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,u.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"}),(0,u.jsx)("div",{className:"space-y-3",children:[...Array(10)].map(((e,t)=>(0,u.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},t)))})]})}):l?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Matches"}),(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:l}),(0,u.jsx)("button",{onClick:N,className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Match Management"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage matches and live scoring"})]}),(0,u.jsx)("button",{onClick:I,className:"btn btn-primary",children:"Create New Match"})]}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Matches"}),(0,u.jsx)("input",{type:"text",placeholder:"Search teams or event...",value:x.search,onChange:e=>h(c(c({},x),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,u.jsxs)("select",{value:x.status,onChange:e=>h(c(c({},x),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Status"}),(0,u.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,u.jsx)("option",{value:"live",children:"Live"}),(0,u.jsx)("option",{value:"completed",children:"Completed"}),(0,u.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Event"}),(0,u.jsxs)("select",{value:x.event,onChange:e=>h(c(c({},x),{},{event:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Events"}),U.map(((e,t)=>(0,u.jsx)("option",{value:t.toString(),children:e},t)))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,u.jsxs)("select",{value:x.sortBy,onChange:e=>h(c(c({},x),{},{sortBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"date",children:"Date"}),(0,u.jsx)("option",{value:"status",children:"Status"}),(0,u.jsx)("option",{value:"event",children:"Event"})]})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsx)("button",{onClick:()=>h({search:"",status:"all",event:"all",sortBy:"date"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),(0,u.jsx)("div",{className:"space-y-4",children:C.map((t=>{var a,r;return(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(null===(a=t.event)||void 0===a?void 0:a.logo)&&(0,u.jsx)("img",{src:S(t.event.logo),alt:t.event_name,className:"w-6 h-6 rounded object-cover",onError:e=>{e.target.style.display="none"}}),(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.event_name||"No Event"}),(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(L(t.status)),children:t.status||"Unknown"}),"live"===t.status&&(0,u.jsxs)("span",{className:"flex items-center text-xs text-red-600 dark:text-red-400",children:[(0,u.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1 animate-pulse"}),"LIVE"]})]}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:(r=t.scheduled_at,r?new Date(r).toLocaleDateString()+" "+new Date(r).toLocaleTimeString():"Not scheduled")})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("div",{className:"flex-1",children:(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[t.team1&&(0,u.jsx)(D,{team:t.team1,size:"w-8 h-8"}),(0,u.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.team1_name||"TBD"})]})}),(0,u.jsx)("div",{className:"flex items-center space-x-4 px-6",children:"live"===t.status||"completed"===t.status?(0,u.jsx)("div",{className:"flex items-center space-x-2",children:"live"===t.status?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{type:"number",value:t.team1_score||0,onChange:e=>R(t.id,1,parseInt(e.target.value)||0),className:"w-16 px-2 py-1 text-center font-bold text-lg border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"}),(0,u.jsx)("span",{className:"text-lg font-bold text-gray-500 dark:text-gray-400",children:"-"}),(0,u.jsx)("input",{type:"number",value:t.team2_score||0,onChange:e=>R(t.id,2,parseInt(e.target.value)||0),className:"w-16 px-2 py-1 text-center font-bold text-lg border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"})]}):(0,u.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t.team1_score||0," - ",t.team2_score||0]})}):(0,u.jsx)("div",{className:"text-lg text-gray-500 dark:text-gray-400",children:"vs"})}),(0,u.jsx)("div",{className:"flex-1 text-right",children:(0,u.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,u.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.team2_name||"TBD"}),t.team2&&(0,u.jsx)(D,{team:t.team2,size:"w-8 h-8"})]})})]}),("live"===t.status||"scheduled"===t.status)&&(0,u.jsx)("div",{className:"mt-3 text-center",children:(0,u.jsxs)("button",{onClick:()=>{return e=t.id,void w(k===e?null:e);var e},className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center mx-auto space-x-1",children:[(0,u.jsx)("span",{children:k===t.id?"Hide Live Controls":"Show Live Controls"}),(0,u.jsx)("svg",{className:"w-4 h-4 transform transition-transform ".concat(k===t.id?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]}),k===t.id&&("live"===t.status||"scheduled"===t.status)&&(0,u.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-red-200 dark:border-red-800",children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 text-center",children:t.team1_name||"Team 1"}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("button",{onClick:()=>R(t.id,1,(t.team1_score||0)+1),className:"w-full px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium",children:"+1 Point"}),(t.team1_score||0)>0&&(0,u.jsx)("button",{onClick:()=>R(t.id,1,Math.max(0,(t.team1_score||0)-1)),className:"w-full px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium",children:"-1 Point"})]})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-800",children:[(0,u.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 text-center",children:t.team2_name||"Team 2"}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("button",{onClick:()=>R(t.id,2,(t.team2_score||0)+1),className:"w-full px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-medium",children:"+1 Point"}),(t.team2_score||0)>0&&(0,u.jsx)("button",{onClick:()=>R(t.id,2,Math.max(0,(t.team2_score||0)-1)),className:"w-full px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm font-medium",children:"-1 Point"})]})]})]}),(0,u.jsxs)("div",{className:"mt-4 flex justify-center space-x-3",children:["scheduled"===t.status&&(0,u.jsx)("button",{onClick:()=>T(t.id,"live"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded font-medium",children:"Start Match"}),"live"===t.status&&(0,u.jsx)("button",{onClick:()=>T(t.id,"completed"),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded font-medium",children:"Complete Match"})]})]}),(0,u.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{p(e),y(!0)})(t),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Edit"}),(0,u.jsx)("button",{className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",children:"View Details"})]}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{if(window.confirm('Are you sure you want to delete match "'.concat(a,'"? This action cannot be undone.')))try{var r;const a=await e.delete("/api/admin/matches-moderation/".concat(t));var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Delete failed");await N(),alert("Match deleted successfully!")}catch(l){var n,i;console.error("Error deleting match:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Error deleting match";alert(t)}})(t.id,"".concat(t.team1_name," vs ").concat(t.team2_name)),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 font-medium",children:"Delete"})]})})]},t.id)}))}),E>1&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,u.jsx)("button",{onClick:()=>d(Math.max(1,o-1)),disabled:1===o,className:"btn btn-secondary",children:"Previous"}),(0,u.jsx)("button",{onClick:()=>d(Math.min(E,o+1)),disabled:o===E,className:"btn btn-secondary",children:"Next"})]}),(0,u.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,u.jsx)("div",{children:(0,u.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(0,u.jsx)("span",{className:"font-medium",children:(o-1)*m+1})," to"," ",(0,u.jsx)("span",{className:"font-medium",children:Math.min(o*m,_.length)})," ","of ",(0,u.jsx)("span",{className:"font-medium",children:_.length})," results"]})}),(0,u.jsx)("div",{children:(0,u.jsx)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[...Array(Math.min(E,7))].map(((e,t)=>{let a;return a=E<=7||o<=4?t+1:o>=E-3?E-6+t:o-3+t,(0,u.jsx)("button",{onClick:()=>d(a),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(o===a?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"," ").concat(0===t?"rounded-l-md":""," ").concat(t===Math.min(E,7)-1?"rounded-r-md":""),children:a},a)}))})})]})]}),0===_.length&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Matches Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:x.search||"all"!==x.status||"all"!==x.event?"Try adjusting your filters to find more matches.":"Get started by creating your first match."}),(0,u.jsx)("button",{onClick:I,className:"btn btn-primary",children:"Create First Match"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Matches"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd34"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:t.filter((e=>"live"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live Matches"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.filter((e=>"scheduled"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u2705"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.filter((e=>"completed"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})]}),f&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New Match"}),(0,u.jsx)("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)(Fi,{navigateTo:e=>{M(),P()}})})]})}),v&&g&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Match"}),(0,u.jsx)("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)(Fi,{matchId:null===g||void 0===g?void 0:g.id,navigateTo:e=>{A(),P()}})})]})})]})};const Wi=function(e){let{onImageSelect:t,currentImage:a,placeholder:r="Upload Image",accept:n="image/*",maxSize:l=5242880,className:i=""}=e;const[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(a||null),[g,p]=(0,s.useState)(null),v=(0,s.useRef)(null);(0,s.useEffect)((()=>{h(a||null)}),[a]);const y=async e=>{const a=e[0];if(a)if(p(null),a.type.startsWith("image/"))if(a.size>l)p("File size must be less than ".concat(Math.round(l/1024/1024),"MB"));else{m(!0);try{const e=URL.createObjectURL(a);h(e),t&&"function"===typeof t&&t(a,e)}catch(r){console.error("Error processing image:",r),p("Error processing image. Please try again."),h(null)}finally{m(!1)}}else p("Please select an image file")},b=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?d(!0):"dragleave"===e.type&&d(!1)},f=()=>{var e;null===(e=v.current)||void 0===e||e.click()};return(0,u.jsxs)("div",{className:"relative ".concat(i),children:[(0,u.jsx)("input",{ref:v,type:"file",accept:n,onChange:e=>{e.target.files&&e.target.files[0]&&y(e.target.files)},className:"hidden"}),x?(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:x,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-2",children:[(0,u.jsx)("button",{type:"button",onClick:f,className:"px-3 py-1 bg-white text-gray-900 text-sm rounded hover:bg-gray-100 transition-colors",children:"Change"}),(0,u.jsx)("button",{type:"button",onClick:()=>{h(null),p(null),t&&"function"===typeof t&&t(null,null),v.current&&(v.current.value="")},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Remove"})]})]}):(0,u.jsx)("div",{onClick:f,onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:e=>{e.preventDefault(),e.stopPropagation(),d(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&y(e.dataTransfer.files)},className:"\n            w-full h-32 border-2 border-dashed rounded-lg cursor-pointer transition-all\n            flex flex-col items-center justify-center text-center p-4\n            ".concat(o?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 hover:border-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50","\n          "),children:c?(0,u.jsxs)("div",{className:"flex flex-col items-center",children:[(0,u.jsx)("div",{className:"w-6 h-6 border-2 border-red-500 border-t-transparent rounded-full animate-spin mb-2"}),(0,u.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Processing..."})]}):(0,u.jsxs)("div",{className:"flex flex-col items-center",children:[(0,u.jsx)("svg",{className:"w-8 h-8 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,u.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r}),(0,u.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Drag & drop or click to select"}),(0,u.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-600 mt-1",children:["Max ",Math.round(l/1024/1024),"MB"]})]})}),g&&(0,u.jsx)("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:g})]})};const Hi=function(e){let{eventId:t,navigateTo:a}=e;const[r,n]=(0,s.useState)({name:"",description:"",type:"tournament",tier:"B",format:"single_elimination",region:"International",game_mode:"Convoy",start_date:"",end_date:"",registration_start:"",registration_end:"",max_teams:16,prize_pool:"",currency:"USD",prize_distribution:{},logo:"",rules:"",registration_requirements:{},streams:{},social_links:{},timezone:"UTC",featured:!1,public:!0,status:"upcoming"}),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),[h,g]=(0,s.useState)([]),[p,v]=(0,s.useState)([]),[y,f]=(0,s.useState)(""),{api:j}=b(),k=Boolean(t),w=async()=>{if(t)try{var e;const a=await j.get("/admin/events/".concat(t,"/teams")),r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||[];v(r)}catch(a){console.error("Error fetching event teams:",a)}};(0,s.useEffect)((()=>{(async()=>{if(k)try{var e;i(!0);const a=await j.get("/admin/events/".concat(t)),r=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data||a;n({name:r.name||"",description:r.description||"",type:r.type||"tournament",tier:r.tier||"B",format:r.format||"single_elimination",region:r.region||"International",game_mode:r.game_mode||"Convoy",start_date:r.start_date?r.start_date.split(" ")[0]:"",end_date:r.end_date?r.end_date.split(" ")[0]:"",registration_start:r.registration_start?r.registration_start.split(" ")[0]:"",registration_end:r.registration_end?r.registration_end.split(" ")[0]:"",max_teams:r.max_teams||16,prize_pool:r.prize_pool||"",currency:r.currency||"USD",prize_distribution:r.prize_distribution||{},logo:r.logo||"",rules:r.rules||"",registration_requirements:r.registration_requirements||{},streams:r.streams||{},social_links:r.social_links||{},timezone:r.timezone||"UTC",featured:r.featured||!1,public:void 0===r.public||r.public,status:r.status||"upcoming"})}catch(a){console.error("Error fetching event:",a),alert("Error loading event data")}finally{i(!1)}})(),(async()=>{try{var e;const t=await j.get("/teams"),a=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||[];g(a)}catch(t){console.error("Error fetching teams:",t)}})(),t&&w()}),[t,k]);const N=e=>{const{name:t,value:a,type:r,checked:s}=e.target;n((e=>c(c({},e),{},{[t]:"checkbox"===r?s:a})))};return l?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading event data..."})]})}):(0,u.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:k?"Edit Event":"Create New Event"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:k?"Update event information and settings":"Create a comprehensive Marvel Rivals tournament"})]}),(0,u.jsx)("button",{onClick:()=>a&&a("admin-events"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to Events"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!r.name.trim())return void alert("Event name is required");if(!r.description.trim()||r.description.length<20)return void alert("Description must be at least 20 characters");const s=(()=>{const e=[];if(!r.start_date)return e.push("Start date is required"),e;if(!r.end_date)return e.push("End date is required"),e;const t=new Date(r.start_date);new Date(r.end_date)<=t&&e.push("End date must be after start date"),r.registration_start&&new Date(r.registration_start)>=t&&e.push("Registration start must be before event start date");if(r.registration_end){const a=new Date(r.registration_end);a>t&&e.push("Registration end must be before or equal to event start date"),r.registration_start&&a<=new Date(r.registration_start)&&e.push("Registration end must be after registration start")}return e})();if(s.length>0)alert("Date validation errors:\n"+s.join("\n"));else{d(!0);try{const e=new FormData;e.append("name",r.name.trim()),e.append("description",r.description.trim()),e.append("type",r.type),e.append("tier",r.tier),e.append("format",r.format),e.append("region",r.region),e.append("game_mode",r.game_mode),e.append("start_date",r.start_date),e.append("end_date",r.end_date),e.append("max_teams",parseInt(r.max_teams)||16),e.append("currency",r.currency),e.append("timezone",r.timezone),e.append("featured",r.featured?"1":"0"),e.append("public",r.public?"1":"0"),e.append("status",r.status);const s=r.registration_start||(e=>{if(!e)return"";const t=new Date(e);return t.setDate(t.getDate()-7),t.toISOString().split("T")[0]})(r.start_date),n=r.registration_end||(e=>{if(!e)return"";const t=new Date(e);return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]})(r.start_date);let l;s&&e.append("registration_start",s),n&&e.append("registration_end",n),r.prize_pool&&e.append("prize_pool",parseFloat(r.prize_pool)),r.rules&&e.append("rules",r.rules),Object.keys(r.prize_distribution).length>0&&e.append("prize_distribution",JSON.stringify(r.prize_distribution)),Object.keys(r.registration_requirements).length>0&&e.append("registration_requirements",JSON.stringify(r.registration_requirements)),Object.keys(r.streams).length>0&&e.append("streams",JSON.stringify(r.streams)),Object.keys(r.social_links).length>0&&e.append("social_links",JSON.stringify(r.social_links)),m&&e.append("logo",m),l=k?await j.postFile("/admin/events/".concat(t),e,{method:"PUT"}):await j.postFile("/admin/events",e),alert("Event ".concat(k?"updated":"created"," successfully!")),a&&a("admin-events")}catch(i){var n,l;console.error("Error saving event:",i);const e=(null===(n=i.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||i.message||"Unknown error";alert("Error ".concat(k?"updating":"creating"," event: ").concat(e))}finally{d(!1)}}},className:"space-y-8",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Event Images"}),(0,u.jsx)("div",{className:"max-w-sm",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Event Logo"}),(0,u.jsx)(Wi,{onImageSelect:(e,t)=>{x(e),n((e=>c(c({},e),{},{logo:t||""})))},currentImage:r.logo,placeholder:"Upload Event Logo (512x512)",className:"w-full",aspectRatio:"square"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: 512x512px, PNG format"})]})})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Basic Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{className:"md:col-span-2 lg:col-span-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Event Name *"}),(0,u.jsx)("input",{type:"text",name:"name",value:r.name,onChange:N,className:"form-input",placeholder:"e.g., Marvel Rivals World Championship 2025",required:!0})]}),(0,u.jsxs)("div",{className:"md:col-span-2 lg:col-span-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Description *"}),(0,u.jsx)("textarea",{name:"description",value:r.description,onChange:N,rows:4,className:"form-input",placeholder:"Detailed event description (minimum 20 characters)...",required:!0,minLength:20}),(0,u.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[r.description.length,"/20 characters minimum"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Event Type *"}),(0,u.jsx)("select",{name:"type",value:r.type,onChange:N,className:"form-input",required:!0,children:[{value:"championship",label:"Championship"},{value:"tournament",label:"Tournament"},{value:"scrim",label:"Scrim"},{value:"qualifier",label:"Qualifier"},{value:"regional",label:"Regional"},{value:"international",label:"International"},{value:"invitational",label:"Invitational"},{value:"community",label:"Community"},{value:"friendly",label:"Friendly"},{value:"practice",label:"Practice"},{value:"exhibition",label:"Exhibition"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Tier"}),(0,u.jsx)("select",{name:"tier",value:r.tier,onChange:N,className:"form-input",children:[{value:"S",label:"S-Tier (Premier)"},{value:"A",label:"A-Tier (Major)"},{value:"B",label:"B-Tier (Regional)"},{value:"C",label:"C-Tier (Community)"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Status"}),(0,u.jsx)("select",{name:"status",value:r.status,onChange:N,className:"form-input",children:[{value:"upcoming",label:"Upcoming"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Region *"}),(0,u.jsx)("select",{name:"region",value:r.region,onChange:N,className:"form-input",required:!0,children:["International","North America","Europe","Asia-Pacific","China","South America","Middle East & North Africa","Oceania"].map((e=>(0,u.jsx)("option",{value:e,children:e},e)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Game Mode *"}),(0,u.jsx)("select",{name:"game_mode",value:r.game_mode,onChange:N,className:"form-input",required:!0,children:["Convoy","Domination","Convergence"].map((e=>(0,u.jsx)("option",{value:e,children:e},e)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Timezone"}),(0,u.jsx)("input",{type:"text",name:"timezone",value:r.timezone,onChange:N,className:"form-input",placeholder:"e.g., UTC, EST, PST"})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Tournament Format"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Format *"}),(0,u.jsx)("select",{name:"format",value:r.format,onChange:N,className:"form-input",required:!0,children:[{value:"single_elimination",label:"Single Elimination"},{value:"double_elimination",label:"Double Elimination"},{value:"round_robin",label:"Round Robin"},{value:"swiss",label:"Swiss System"},{value:"group_stage",label:"Group Stage"},{value:"bo1",label:"Best of 1"},{value:"bo3",label:"Best of 3"},{value:"bo5",label:"Best of 5"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Max Teams *"}),(0,u.jsx)("input",{type:"number",name:"max_teams",value:r.max_teams,onChange:N,className:"form-input",min:"2",max:"256",required:!0})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Schedule"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Start Date *"}),(0,u.jsx)("input",{type:"date",name:"start_date",value:r.start_date,onChange:N,className:"form-input",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"End Date *"}),(0,u.jsx)("input",{type:"date",name:"end_date",value:r.end_date,onChange:N,className:"form-input",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Registration Start"}),(0,u.jsx)("input",{type:"date",name:"registration_start",value:r.registration_start,onChange:N,className:"form-input"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Optional. Must be before event start date. Defaults to 7 days before event."})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Registration End"}),(0,u.jsx)("input",{type:"date",name:"registration_end",value:r.registration_end,onChange:N,className:"form-input"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Optional. Must be before or equal to event start date. Defaults to 1 day before event."})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Prize Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Prize Pool"}),(0,u.jsx)("input",{type:"number",name:"prize_pool",value:r.prize_pool,onChange:N,className:"form-input",step:"0.01",min:"0",placeholder:"100000"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Currency"}),(0,u.jsx)("select",{name:"currency",value:r.currency,onChange:N,className:"form-input",children:[{value:"USD",label:"USD ($)"},{value:"EUR",label:"EUR (\u20ac)"},{value:"GBP",label:"GBP (\xa3)"},{value:"JPY",label:"JPY (\xa5)"},{value:"CNY",label:"CNY (\xa5)"},{value:"KRW",label:"KRW (\u20a9)"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Additional Information"}),(0,u.jsx)("div",{className:"space-y-6",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Rules & Regulations"}),(0,u.jsx)("textarea",{name:"rules",value:r.rules,onChange:N,rows:4,className:"form-input",placeholder:"Tournament rules, code of conduct, technical requirements..."})]})})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Event Settings"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",name:"featured",checked:r.featured,onChange:N,className:"mr-3",id:"featured"}),(0,u.jsx)("label",{htmlFor:"featured",className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Featured Event (appears prominently on homepage)"})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",name:"public",checked:r.public,onChange:N,className:"mr-3",id:"public"}),(0,u.jsx)("label",{htmlFor:"public",className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Public Event (visible to all users)"})]})]})]}),k&&t&&(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Team Management"}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Add Team to Event"}),(0,u.jsxs)("div",{className:"flex gap-4",children:[(0,u.jsxs)("select",{value:y,onChange:e=>f(e.target.value),className:"form-input flex-1",children:[(0,u.jsx)("option",{value:"",children:"Select a team..."}),h.filter((e=>!p.some((t=>t.id===e.id)))).map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (",e.short_name,") - ",e.region]},e.id)))]}),(0,u.jsx)("button",{type:"button",onClick:async()=>{if(y&&t)try{await j.post("/admin/events/".concat(t,"/teams/").concat(y)),await w(),f(""),alert("Team added successfully!")}catch(r){var e,a;console.error("Error adding team:",r);const t=(null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||r.message||"Error adding team";alert(t)}},disabled:!y,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Add Team"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:["Current Teams (",Array.isArray(p)?p.length:0,"/",r.max_teams,")"]}),Array.isArray(p)&&0!==p.length?(0,u.jsx)("div",{className:"space-y-2",children:p.map(((e,a)=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",e.seed||a+1]}),e.logo&&(0,u.jsx)("img",{src:e.logo,alt:e.name,className:"w-8 h-8 rounded",onError:e=>{e.target.src=S(null,"team-logo")}}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,u.jsxs)("div",{className:"text-sm text-gray-500",children:[e.region," \u2022 Rating: ",e.rating||1e3]})]})]}),(0,u.jsx)("button",{type:"button",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to remove this team?"))try{await j.delete("/admin/events/".concat(t,"/teams/").concat(e)),await w(),alert("Team removed successfully!")}catch(s){var a,r;console.error("Error removing team:",s);const e=(null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||s.message||"Error removing team";alert(e)}})(e.id),className:"text-red-600 hover:text-red-700 font-medium text-sm",children:"Remove"})]},e.id)))}):(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No teams registered yet"})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,u.jsx)("button",{type:"button",onClick:()=>a&&a("admin-events"),className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:o,className:"px-8 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:o?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),k?"Updating...":"Creating..."]}):k?"Update Event":"Create Event"})]})]})]})};const Vi=function(){const{api:e}=b(),[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(1),[m]=(0,s.useState)(12),[x,h]=(0,s.useState)({search:"",status:"all",type:"all",sortBy:"date"}),[g,p]=(0,s.useState)(new Set),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null),[N,_]=(0,s.useState)({name:"",description:"",start_date:"",end_date:"",location:"",status:"upcoming",type:"tournament"});(0,s.useEffect)((()=>{S()}),[]);const S=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{var s;n(!0),i(null);const l=await e.get("/api/admin/events?page=".concat(t,"&limit=").concat(r)),o=(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data)||(null===l||void 0===l?void 0:l.data)||l||[];a(Array.isArray(o)?o:[])}catch(d){var l,o;const e=(null===(l=d.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||d.message||"Failed to load events";i(e),console.error("Error fetching events:",d),a([])}finally{n(!1)}},C=(0,s.useMemo)((()=>{let e=[...t];if(x.search.trim()){const t=x.search.toLowerCase().trim();e=e.filter((e=>{var a,r,s;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.location)||void 0===s?void 0:s.toLowerCase().includes(t))}))}return"all"!==x.status&&(e=e.filter((e=>e.status===x.status))),"all"!==x.type&&(e=e.filter((e=>e.type===x.type))),"date"===x.sortBy?e.sort(((e,t)=>new Date(t.start_date||t.created_at)-new Date(e.start_date||e.created_at))):"name"===x.sortBy?e.sort(((e,t)=>(e.name||"").localeCompare(t.name||""))):"status"===x.sortBy&&e.sort(((e,t)=>(e.status||"").localeCompare(t.status||""))),e}),[t,x]),E=(0,s.useMemo)((()=>{const e=(o-1)*m;return C.slice(e,e+m)}),[C,o,m]),T=Math.ceil(C.length/m);(0,s.useEffect)((()=>{d(1)}),[x]);const A=()=>{_({name:"",description:"",start_date:"",end_date:"",location:"",status:"upcoming",type:"tournament"}),w(null),j(!0)},M=async t=>{if(0===g.size)return;const a='Are you sure you want to change status to "'.concat(t,'" for ').concat(g.size," events?");if(window.confirm(a))try{var r;const a=await e.post("/api/admin/events/bulk-update",{event_ids:Array.from(g),status:t});var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Bulk update failed");await S(),p(new Set),y(!1),alert("".concat(g.size," events updated successfully!"))}catch(l){var n,i;console.error("Error in bulk status update:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Bulk update failed";alert(t)}},P=e=>{switch(e){case"live":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"upcoming":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"cancelled":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"}},R=e=>e?new Date(e).toLocaleDateString():"TBD";return r?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,u.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,u.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map(((e,t)=>(0,u.jsx)("div",{className:"h-40 bg-gray-200 dark:bg-gray-700 rounded"},t)))})]})}):l?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Events"}),(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:l}),(0,u.jsx)("button",{onClick:S,className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Event Management"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage tournaments and events"})]}),(0,u.jsx)("button",{onClick:A,className:"btn btn-primary",children:"Create New Event"})]}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Events"}),(0,u.jsx)("input",{type:"text",placeholder:"Search by name or location...",value:x.search,onChange:e=>h(c(c({},x),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,u.jsxs)("select",{value:x.status,onChange:e=>h(c(c({},x),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Status"}),(0,u.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,u.jsx)("option",{value:"live",children:"Live"}),(0,u.jsx)("option",{value:"completed",children:"Completed"}),(0,u.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Type"}),(0,u.jsxs)("select",{value:x.type,onChange:e=>h(c(c({},x),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Types"}),(0,u.jsx)("option",{value:"tournament",children:"Tournament"}),(0,u.jsx)("option",{value:"championship",children:"Championship"}),(0,u.jsx)("option",{value:"qualifier",children:"Qualifier"}),(0,u.jsx)("option",{value:"exhibition",children:"Exhibition"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,u.jsxs)("select",{value:x.sortBy,onChange:e=>h(c(c({},x),{},{sortBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"date",children:"Date"}),(0,u.jsx)("option",{value:"name",children:"Name"}),(0,u.jsx)("option",{value:"status",children:"Status"})]})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsx)("button",{onClick:()=>h({search:"",status:"all",type:"all",sortBy:"date"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),v&&(0,u.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[g.size," events selected"]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>M("upcoming"),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:"Mark as Upcoming"}),(0,u.jsx)("button",{onClick:()=>M("live"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Mark as Live"}),(0,u.jsx)("button",{onClick:()=>M("completed"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:"Mark as Completed"}),(0,u.jsx)("button",{onClick:async()=>{if(0===g.size)return;const t="Are you sure you want to delete ".concat(g.size," events? This action cannot be undone.");if(window.confirm(t))try{var a;const t=await e.post("/api/admin/events/bulk-delete",{event_ids:Array.from(g)});var r;if(!1===(null===(a=t.data)||void 0===a?void 0:a.success))throw new Error((null===(r=t.data)||void 0===r?void 0:r.message)||"Bulk delete failed");await S(),p(new Set),y(!1),alert("".concat(g.size," events deleted successfully!"))}catch(l){var s,n;console.error("Error in bulk delete:",l);const t=(null===(s=l.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||l.message||"Bulk delete failed";alert(t)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete"})]})]}),(0,u.jsx)("button",{onClick:()=>{p(new Set),y(!1)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),C.length>0&&(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:(0,u.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,u.jsx)("input",{type:"checkbox",checked:g.size===C.length&&C.length>0,onChange:()=>{g.size===C.length?(p(new Set),y(!1)):(p(new Set(C.map((e=>e.id)))),y(!0))},className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:["Select all ",C.length," events"]})]})}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map((t=>(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsx)("input",{type:"checkbox",checked:g.has(t.id),onChange:()=>(e=>{const t=new Set(g);t.has(e)?t.delete(e):t.add(e),p(t),y(t.size>0)})(t.id),className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate flex-1 mx-3",children:t.name}),(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(P(t.status)),children:t.status||"TBD"})]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2",children:t.description||"No description available"}),(0,u.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,u.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("span",{className:"font-medium mr-2",children:"Start Date:"}),R(t.start_date)]}),t.end_date&&(0,u.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("span",{className:"font-medium mr-2",children:"End Date:"}),R(t.end_date)]}),t.location&&(0,u.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("span",{className:"font-medium mr-2",children:"Location:"}),t.location]}),(0,u.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("span",{className:"font-medium mr-2",children:"Teams:"}),t.team_count||0," registered"]})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{className:"flex-1 btn btn-outline-primary text-sm",children:"View Details"}),(0,u.jsx)("button",{onClick:()=>(e=>{var t,a;w(e),_({name:e.name||"",description:e.description||"",start_date:(null===(t=e.start_date)||void 0===t?void 0:t.slice(0,10))||"",end_date:(null===(a=e.end_date)||void 0===a?void 0:a.slice(0,10))||"",location:e.location||"",status:e.status||"upcoming",type:e.type||"tournament"}),j(!0)})(t),className:"flex-1 btn btn-outline-secondary text-sm",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{if(window.confirm('Are you sure you want to delete event "'.concat(a,'"? This action cannot be undone.')))try{var r;const a=await e.delete("/api/admin/events/".concat(t));var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Delete failed");await S(),alert("Event deleted successfully!")}catch(l){var n,i;console.error("Error deleting event:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Error deleting event";alert(t)}})(t.id,t.name),className:"btn btn-outline-danger text-sm",children:"Delete"})]})]})},t.id)))}),T>1&&(0,u.jsx)("div",{className:"flex justify-center",children:(0,u.jsxs)("nav",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:()=>d(Math.max(1,o-1)),disabled:1===o,className:"btn btn-secondary",children:"Previous"}),(0,u.jsx)("div",{className:"flex space-x-1",children:[...Array(Math.min(T,5))].map(((e,t)=>{let a;return a=T<=5||o<=3?t+1:o>=T-2?T-4+t:o-2+t,(0,u.jsx)("button",{onClick:()=>d(a),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(o===a?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:a},a)}))}),(0,u.jsx)("button",{onClick:()=>d(Math.min(T,o+1)),disabled:o===T,className:"btn btn-secondary",children:"Next"})]})}),0===C.length&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-12 text-center",children:[(0,u.jsx)("div",{className:"text-6xl mb-4"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Events Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:x.search||"all"!==x.status||"all"!==x.type?"Try adjusting your filters to find more events.":"Get started by creating your first event."}),(0,u.jsx)("button",{onClick:A,className:"btn btn-primary",children:"Create First Event"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Events"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd34"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:t.filter((e=>"live"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live Events"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.filter((e=>"upcoming"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Upcoming"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u2705"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.filter((e=>"completed"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})]}),f&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:k?"Edit Event":"Create New Event"}),(0,u.jsx)("button",{onClick:()=>{j(!1),w(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)(Hi,{eventId:null===k||void 0===k?void 0:k.id,navigateTo:e=>{j(!1),w(null),S()}})})]})})]})};function qi(e){let{user:t,navigateToProfile:a}=e;const[r,n]=s.useState(!1);if(!t)return(0,u.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-400 font-bold text-lg",children:"?"});let l=null;if(t.hero_image)l=t.hero_image;else if(t.hero_flair&&!1!==t.show_hero_flair){const e=U(t.hero_flair);e&&(l="/images/heroes/".concat(e))}else t.avatar&&(l=A(t));return r||!l||"?"===l||l.includes("placeholder")||l.includes("data:image")?(0,u.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-400 font-bold text-lg cursor-pointer hover:border-blue-500 hover:border-2 transition-all",onClick:a,title:"Click to view ".concat(t.name,"'s profile"),children:"?"}):(0,u.jsx)("div",{className:"h-10 w-10 rounded-full overflow-hidden cursor-pointer border-2 border-transparent hover:border-blue-500 transition-colors bg-gray-200 dark:bg-gray-700",onClick:a,title:"Click to view ".concat(t.name,"'s profile"),children:(0,u.jsx)("img",{src:l,alt:t.name||"User",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.style.display="none",e.target.parentElement.innerHTML='<span class="text-gray-600 dark:text-gray-400 font-bold text-lg">?</span>',e.target.parentElement.classList.add("flex","items-center","justify-center")}})})}const Gi=function(){const{api:e}=b(),[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(1),[m]=(0,s.useState)(20),[x,h]=(0,s.useState)({search:"",role:"all",status:"all",sortBy:"created"}),[g,p]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null),[N,_]=(0,s.useState)({name:"",email:"",password:"",role:"user",status:"active",hero_flair:"",team_flair_id:"",show_hero_flair:!0,show_team_flair:!1}),[S,C]=(0,s.useState)({}),[E,T]=(0,s.useState)(!1),[A,M]=(0,s.useState)(new Set),[P,R]=(0,s.useState)(!1),[I,D]=(0,s.useState)([]),[L,U]=(0,s.useState)(!1);(0,s.useEffect)((()=>{O(),z()}),[]);const z=async()=>{try{var t;U(!0);const a=await e.get("/heroes"),r=(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)||(null===a||void 0===a?void 0:a.data)||a||[];D(Array.isArray(r)?r:[])}catch(a){console.error("Error fetching heroes:",a),D([])}finally{U(!1)}},O=(0,s.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{var s;n(!0),i(null);const l=await e.get("/admin/users?page=".concat(t,"&limit=").concat(r)),o=(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data)||(null===l||void 0===l?void 0:l.data)||l||[];a(Array.isArray(o)?o:[])}catch(d){var l,o;const e=(null===(l=d.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||d.message||"Failed to load users";i(e),console.error("Error fetching users:",d),a([])}finally{n(!1)}}),[e]),F=(0,s.useMemo)((()=>{let e=[...t];if(x.search.trim()){const t=x.search.toLowerCase().trim();e=e.filter((e=>{var a,r;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(t))}))}return"all"!==x.role&&(e=e.filter((e=>e.role===x.role))),"all"!==x.status&&(e=e.filter((e=>e.status===x.status))),"created"===x.sortBy?e.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))):"name"===x.sortBy?e.sort(((e,t)=>(e.name||"").localeCompare(t.name||""))):"email"===x.sortBy&&e.sort(((e,t)=>(e.email||"").localeCompare(t.email||""))),e}),[t,x]),B=(0,s.useMemo)((()=>{const e=(o-1)*m;return F.slice(e,e+m)}),[F,o,m]),W=Math.ceil(F.length/m);(0,s.useEffect)((()=>{d(1)}),[x]);const H=()=>{p(!1),y(!1),j(!1),w(null),_({name:"",email:"",password:"",role:"user",status:"active",hero_flair:"",team_flair_id:"",show_hero_flair:!0,show_team_flair:!1}),C({})},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a={};return e.name.trim()||(a.name="Name is required"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(a.email="Email is invalid"):a.email="Email is required",t||e.password.trim()?e.password.trim()&&e.password.length<8&&(a.password="Password must be at least 8 characters"):a.password="Password is required",["admin","moderator","user"].includes(e.role)||(a.role="Invalid role selected"),["active","inactive","banned","suspended"].includes(e.status)||(a.status="Invalid status selected"),a},q=e=>{switch(e){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"moderator":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"user":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},G=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"banned":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"suspended":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},Y=async t=>{if(0===A.size)return;const a='Are you sure you want to change status to "'.concat(t,'" for ').concat(A.size," users?");if(window.confirm(a))try{var r;const a=await e.post("/api/admin/users/bulk-update",{user_ids:Array.from(A),status:t});var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Bulk update failed");await O(),M(new Set),R(!1),alert("".concat(A.size," users updated successfully!"))}catch(l){var n,i;console.error("Error in bulk status update:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Bulk update failed";alert(t)}};return r?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,u.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,u.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"}),(0,u.jsx)("div",{className:"space-y-3",children:[...Array(10)].map(((e,t)=>(0,u.jsx)("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"},t)))})]})}):l?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Users"}),(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:l}),(0,u.jsx)("button",{onClick:O,className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage user accounts and permissions"})]}),(0,u.jsxs)("button",{onClick:()=>{_({name:"",email:"",password:"",role:"user",status:"active",hero_flair:"",team_flair_id:"",show_hero_flair:!0,show_team_flair:!1}),C({}),p(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[(0,u.jsx)("span",{children:"+"}),(0,u.jsx)("span",{children:"Create User"})]})]}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Users"}),(0,u.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:x.search,onChange:e=>h(c(c({},x),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Role"}),(0,u.jsxs)("select",{value:x.role,onChange:e=>h(c(c({},x),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Roles"}),(0,u.jsx)("option",{value:"admin",children:"Admin"}),(0,u.jsx)("option",{value:"moderator",children:"Moderator"}),(0,u.jsx)("option",{value:"user",children:"User"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,u.jsxs)("select",{value:x.status,onChange:e=>h(c(c({},x),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Status"}),(0,u.jsx)("option",{value:"active",children:"Active"}),(0,u.jsx)("option",{value:"inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"suspended",children:"Suspended"}),(0,u.jsx)("option",{value:"banned",children:"Banned"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,u.jsxs)("select",{value:x.sortBy,onChange:e=>h(c(c({},x),{},{sortBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"created",children:"Created Date"}),(0,u.jsx)("option",{value:"name",children:"Name"}),(0,u.jsx)("option",{value:"email",children:"Email"})]})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsx)("button",{onClick:()=>h({search:"",role:"all",status:"all",sortBy:"created"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),P&&(0,u.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[A.size," users selected"]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>Y("active"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:"Activate"}),(0,u.jsx)("button",{onClick:()=>Y("inactive"),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm",children:"Deactivate"}),(0,u.jsx)("button",{onClick:()=>Y("banned"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Ban"}),(0,u.jsx)("button",{onClick:()=>Y("suspended"),className:"px-3 py-1 bg-orange-600 hover:bg-orange-700 text-white rounded text-sm",children:"Suspend"}),(0,u.jsx)("button",{onClick:()=>(async t=>{if(0===A.size)return;const a='Are you sure you want to change role to "'.concat(t,'" for ').concat(A.size," users?");if(window.confirm(a))try{var r;const a=await e.post("/api/admin/users/bulk-update",{user_ids:Array.from(A),role:t});var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Bulk update failed");await O(),M(new Set),R(!1),alert("".concat(A.size," users updated successfully!"))}catch(l){var n,i;console.error("Error in bulk role update:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Bulk update failed";alert(t)}})("moderator"),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:"Make Moderator"}),(0,u.jsx)("button",{onClick:async()=>{if(0===A.size)return;const t="Are you sure you want to delete ".concat(A.size," users? This action cannot be undone.");if(window.confirm(t))try{var a;const t=await e.post("/admin/users/bulk-delete",{user_ids:Array.from(A)});var r;if(!1===(null===(a=t.data)||void 0===a?void 0:a.success))throw new Error((null===(r=t.data)||void 0===r?void 0:r.message)||"Bulk delete failed");await O(),M(new Set),R(!1),alert("".concat(A.size," users deleted successfully!"))}catch(l){var s,n;console.error("Error in bulk delete:",l);const t=(null===(s=l.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||l.message||"Bulk delete failed";alert(t)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete"})]})]}),(0,u.jsx)("button",{onClick:()=>{M(new Set),R(!1)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,u.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:(0,u.jsx)("input",{type:"checkbox",checked:A.size===F.length&&F.length>0,onChange:()=>{A.size===F.length?(M(new Set),R(!1)):(M(new Set(F.map((e=>e.id)))),R(!0))},className:"rounded border-gray-300 dark:border-gray-600"})}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Role"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Joined"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,u.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:B.map((t=>(0,u.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("input",{type:"checkbox",checked:A.has(t.id),onChange:()=>(e=>{const t=new Set(A);t.has(e)?t.delete(e):t.add(e),M(t),R(t.size>0)})(t.id),className:"rounded border-gray-300 dark:border-gray-600"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,u.jsx)(qi,{user:t,navigateToProfile:()=>{console.log("\ud83d\udd0d AdminUsers: Navigating to user profile:",t.id),window.confirm("Navigate to user profile for ".concat(t.name,"?"))&&window.open("/profile/".concat(t.id),"_blank")}})}),(0,u.jsxs)("div",{className:"ml-4",children:[(0,u.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.name,t.hero_flair&&(0,u.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:t.hero_flair})]}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email})]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("select",{value:t.role||"user",onChange:a=>(async(t,a)=>{try{var r;const n=await e.put("/admin/users/".concat(t),{role:a});var s;if(!1===(null===(r=n.data)||void 0===r?void 0:r.success))throw new Error((null===(s=n.data)||void 0===s?void 0:s.message)||"Role update failed");await O(),alert("User role updated to ".concat(a,"!"))}catch(l){var n,i;console.error("Error updating user role:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.message||"Error updating user role";alert(t)}})(t.id,a.target.value),className:"px-2 py-1 text-xs font-medium rounded-full border-0 ".concat(q(t.role)),children:[(0,u.jsx)("option",{value:"user",children:"User"}),(0,u.jsx)("option",{value:"moderator",children:"Moderator"}),(0,u.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("select",{value:t.status||"active",onChange:a=>(async(t,a)=>{try{var r;n(!0);const l=await e.put("/admin/users/".concat(t),{status:a});var s;if(!1===(null===(r=l.data)||void 0===r?void 0:r.success))throw new Error((null===(s=l.data)||void 0===s?void 0:s.message)||"Status update failed");await O(),alert("User status updated to ".concat(a,"!"))}catch(l){var i,o;console.error("Error updating user status:",l);const t=(null===(i=l.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Error updating user status. Please try again.";alert(t)}finally{n(!1)}})(t.id,a.target.value),className:"px-2 py-1 text-xs font-medium rounded-full border-0 ".concat(G(t.status)),children:[(0,u.jsx)("option",{value:"active",children:"Active"}),(0,u.jsx)("option",{value:"inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"banned",children:"Banned"}),(0,u.jsx)("option",{value:"suspended",children:"Suspended"})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:t.created_at?new Date(t.created_at).toLocaleDateString():"Unknown"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{w(e),j(!0)})(t),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"View"}),(0,u.jsx)("button",{onClick:()=>(e=>{var t,a;w(e),_({name:e.name||"",email:e.email||"",password:"",role:e.role||"user",status:e.status||"active",hero_flair:e.hero_flair||"",team_flair_id:e.team_flair_id||"",show_hero_flair:null===(t=e.show_hero_flair)||void 0===t||t,show_team_flair:null!==(a=e.show_team_flair)&&void 0!==a&&a}),C({}),y(!0)})(t),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{if(window.confirm('Are you sure you want to delete user "'.concat(a,'"? This action cannot be undone.')))try{var r;n(!0);const a=await e.delete("/admin/users/".concat(t));var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Delete failed");await O(),alert("User deleted successfully!")}catch(l){var i,o;console.error("Error deleting user:",l);const t=(null===(i=l.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Error deleting user. Please try again.";alert(t)}finally{n(!1)}})(t.id,t.name),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},t.id)))})]})}),W>1&&(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,u.jsx)("button",{onClick:()=>d(Math.max(1,o-1)),disabled:1===o,className:"btn btn-secondary",children:"Previous"}),(0,u.jsx)("button",{onClick:()=>d(Math.min(W,o+1)),disabled:o===W,className:"btn btn-secondary",children:"Next"})]}),(0,u.jsx)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:(0,u.jsx)("div",{children:(0,u.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(0,u.jsx)("span",{className:"font-medium",children:(o-1)*m+1})," to"," ",(0,u.jsx)("span",{className:"font-medium",children:Math.min(o*m,F.length)})," ","of ",(0,u.jsx)("span",{className:"font-medium",children:F.length})," results"]})})})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udd34"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:t.filter((e=>"admin"===e.role)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Admins"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udfe1"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:t.filter((e=>"moderator"===e.role)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Moderators"})]}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[(0,u.jsx)("div",{className:"text-3xl mb-2",children:"\u2705"}),(0,u.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.filter((e=>"active"===e.status)).length}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"})]})]}),g&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New User"}),(0,u.jsx)("button",{onClick:H,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const a=V(N,!1);if(Object.keys(a).length>0)C(a);else{T(!0),C({});try{var r;const t=await e.post("/admin/users",N);var s;if(!1===(null===(r=t.data)||void 0===r?void 0:r.success))throw new Error((null===(s=t.data)||void 0===s?void 0:s.message)||"User creation failed");await O(),H(),alert("User created successfully!")}catch(l){var n,i,o,d;console.error("Error creating user:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Error creating user. Please try again.";null!==(o=l.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.errors?C(l.response.data.errors):alert(t)}finally{T(!1)}}},className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,u.jsx)("input",{type:"text",value:N.name,onChange:e=>_(c(c({},N),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.name&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.name})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,u.jsx)("input",{type:"email",value:N.email,onChange:e=>_(c(c({},N),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.email&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.email})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password *"}),(0,u.jsx)("input",{type:"password",value:N.password,onChange:e=>_(c(c({},N),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.password&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.password})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),(0,u.jsxs)("select",{value:N.role,onChange:e=>_(c(c({},N),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"user",children:"User"}),(0,u.jsx)("option",{value:"moderator",children:"Moderator"}),(0,u.jsx)("option",{value:"admin",children:"Admin"})]}),S.role&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.role})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,u.jsxs)("select",{value:N.status,onChange:e=>_(c(c({},N),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"active",children:"Active"}),(0,u.jsx)("option",{value:"inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"banned",children:"Banned"}),(0,u.jsx)("option",{value:"suspended",children:"Suspended"})]}),S.status&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.status})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hero Avatar"}),(0,u.jsxs)("select",{value:N.hero_flair,onChange:e=>_(c(c({},N),{},{hero_flair:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"",children:"No Hero Selected"}),I.map((e=>(0,u.jsx)("option",{value:e.name,children:e.name},e.name)))]}),S.hero_flair&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.hero_flair})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:"create_show_hero_flair",checked:N.show_hero_flair,onChange:e=>_(c(c({},N),{},{show_hero_flair:e.target.checked})),className:"mr-2"}),(0,u.jsx)("label",{htmlFor:"create_show_hero_flair",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show hero avatar publicly"})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,u.jsx)("button",{type:"button",onClick:H,className:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:E?"Creating...":"Create User"})]})]})]})}),v&&k&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit User"}),(0,u.jsx)("button",{onClick:H,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const a=V(N,!0);if(Object.keys(a).length>0)C(a);else{T(!0),C({});try{var r;const t=c({},N);t.password.trim()||delete t.password;const a=await e.put("/admin/users/".concat(k.id),t);var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"User update failed");await O(),H(),alert("User updated successfully!")}catch(l){var n,i,o,d;console.error("Error updating user:",l);const t=(null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Error updating user. Please try again.";null!==(o=l.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.errors?C(l.response.data.errors):alert(t)}finally{T(!1)}}},className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),(0,u.jsx)("input",{type:"text",value:N.name,onChange:e=>_(c(c({},N),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.name&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.name})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,u.jsx)("input",{type:"email",value:N.email,onChange:e=>_(c(c({},N),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",required:!0}),S.email&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.email})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password (Leave blank to keep current)"}),(0,u.jsx)("input",{type:"password",value:N.password,onChange:e=>_(c(c({},N),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"}),S.password&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.password})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),(0,u.jsxs)("select",{value:N.role,onChange:e=>_(c(c({},N),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"user",children:"User"}),(0,u.jsx)("option",{value:"moderator",children:"Moderator"}),(0,u.jsx)("option",{value:"admin",children:"Admin"})]}),S.role&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.role})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),(0,u.jsxs)("select",{value:N.status,onChange:e=>_(c(c({},N),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"active",children:"Active"}),(0,u.jsx)("option",{value:"inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"banned",children:"Banned"}),(0,u.jsx)("option",{value:"suspended",children:"Suspended"})]}),S.status&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.status})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hero Avatar"}),(0,u.jsxs)("select",{value:N.hero_flair,onChange:e=>_(c(c({},N),{},{hero_flair:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"",children:"No Hero Selected"}),I.map((e=>(0,u.jsx)("option",{value:e.name,children:e.name},e.name)))]}),S.hero_flair&&(0,u.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.hero_flair})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",id:"edit_show_hero_flair",checked:N.show_hero_flair,onChange:e=>_(c(c({},N),{},{show_hero_flair:e.target.checked})),className:"mr-2"}),(0,u.jsx)("label",{htmlFor:"edit_show_hero_flair",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show hero avatar publicly"})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,u.jsx)("button",{type:"button",onClick:H,className:"px-4 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:E?"Updating...":"Update User"})]})]})]})}),f&&k&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md max-h-screen overflow-y-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Details"}),(0,u.jsx)("button",{onClick:H,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"h-16 w-16 mx-auto mb-3",children:(0,u.jsx)(qi,{user:k,navigateToProfile:()=>{}})}),(0,u.jsx)("h4",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:k.name}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:k.email}),k.hero_flair&&(0,u.jsxs)("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:["Hero: ",k.hero_flair]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Role"}),(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(q(k.role)),children:k.role||"user"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(G(k.status)),children:k.status||"active"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Joined"}),(0,u.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:k.created_at?new Date(k.created_at).toLocaleDateString():"Unknown"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Last Login"}),(0,u.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:k.last_login?new Date(k.last_login).toLocaleDateString():"Never"})]})]}),k.stats&&(0,u.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Activity Stats"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,u.jsxs)("div",{children:["Forum Posts: ",k.stats.total_forum_posts||0]}),(0,u.jsxs)("div",{children:["Comments: ",k.stats.total_comments||0]}),(0,u.jsxs)("div",{children:["Forum Threads: ",k.stats.total_forum_threads||0]})]})]}),(0,u.jsx)("div",{className:"flex justify-end pt-4",children:(0,u.jsx)("button",{onClick:H,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})]})})]})};function Yi(e){var t;let{video:a}=e;const[r,n]=(0,s.useState)(null),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1);(0,s.useEffect)((()=>{a.thumbnail&&!l&&n(a.thumbnail)}),[a.thumbnail,l]),(0,s.useEffect)((()=>{"vlrgg"!==a.type||o||c||(m(!0),ut(a.originalUrl).then((e=>{if(e){d(e);const t=xt(e);null!==t&&void 0!==t&&t.thumbnail&&n(t.thumbnail)}})).catch((e=>{console.error("Error fetching VLR data:",e)})).finally((()=>{m(!1)})))}),[a.type,a.originalUrl,o,c]);const x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"youtube":return"\u25b6\ufe0f";case"twitch-clip":case"twitch-video":return"\ud83c\udfae";case"twitter":return"\ud83d\udc26";case"vlrgg":switch(t){case"match":return"\u2694\ufe0f";case"team":return"\ud83d\udc65";case"event":return"\ud83c\udfc6";case"player":return"\ud83d\udc64";default:return"\ud83c\udfaf"}default:return"\ud83d\udcfa"}};return(0,u.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-white dark:bg-gray-800/50 rounded-md border border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:r&&!l?(0,u.jsx)("img",{src:r,alt:"Video thumbnail",className:"w-16 h-12 object-cover rounded",onError:()=>{i(!0),n(null)}}):(0,u.jsxs)("div",{className:"w-16 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-2xl relative",children:[x(a.type,a.contentType),c&&"vlrgg"===a.type&&(0,u.jsx)("div",{className:"absolute inset-0 bg-gray-200/80 dark:bg-gray-700/80 rounded flex items-center justify-center",children:(0,u.jsx)("div",{className:"w-3 h-3 border-2 border-orange-600 border-t-transparent rounded-full animate-spin"})})]})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,u.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"youtube":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";case"twitch-clip":case"twitch-video":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200";case"twitter":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200";case"vlrgg":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200"}})(a.type)),children:[x(a.type,a.contentType)," ",a.platformName,a.contentType&&"vlrgg"===a.type&&(0,u.jsxs)("span",{className:"ml-1 opacity-75",children:["(",a.contentType,")"]})]}),a.isValid?(0,u.jsx)("span",{className:"text-green-600 dark:text-green-400 text-xs",children:"\u2713 Valid"}):(0,u.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs",children:"\u2717 Error"})]}),"vlrgg"===a.type&&o?(0,u.jsxs)("div",{className:"space-y-1",children:[(0,u.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium",children:o.slug.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),o.matchData&&(0,u.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(null===(t=o.matchData.event)||void 0===t?void 0:t.name)&&(0,u.jsxs)("div",{children:["\ud83d\udcc5 ",o.matchData.event.name]}),o.matchData.status&&(0,u.jsxs)("div",{children:["\ud83c\udfaf Status: ",o.matchData.status]}),o.matchData.teams&&o.matchData.teams.length>=2&&(0,u.jsxs)("div",{children:["\u2694\ufe0f ",o.matchData.teams.map((e=>e.name)).join(" vs ")]})]}),o.teamData&&(0,u.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[o.teamData.region&&(0,u.jsxs)("div",{children:["\ud83c\udf0d ",o.teamData.region]}),o.teamData.rank&&(0,u.jsxs)("div",{children:["\ud83c\udfc6 Rank: #",o.teamData.rank]})]})]}):(0,u.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-100 truncate",title:a.originalUrl,children:"vlrgg"===a.type?"".concat(a.contentType,": ").concat(a.slug):"ID: ".concat(a.id)}),a.error&&(0,u.jsx)("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a.error}),(0,u.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",title:a.originalUrl,children:a.displayUrl||a.originalUrl})]}),(0,u.jsx)("div",{className:"flex-shrink-0 flex items-center space-x-2",children:(0,u.jsx)("a",{href:a.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 text-xs",title:"Open in new tab",children:"\ud83d\udd17"})})]})}const Zi=function(e){let{content:t,onVideoDetected:a,className:r=""}=e;const[n,l]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{if(!t)return void l([]);const e=wt(t);l(e),a&&a(e)}),[t,a]),n.length&&i?(0,u.jsx)("div",{className:"video-preview-container mt-4 ".concat(r),children:(0,u.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsxs)("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 flex items-center",children:["\ud83c\udfaf Content Embeds Detected (",n.length,")"]}),(0,u.jsx)("button",{onClick:()=>{o(!1)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 text-sm",title:"Hide preview",children:"\u2715"})]}),(0,u.jsx)("div",{className:"space-y-3",children:n.map(((e,t)=>(0,u.jsx)(Yi,{video:e},t)))}),(0,u.jsxs)("div",{className:"mt-3 text-xs text-blue-700 dark:text-blue-300",children:[(0,u.jsx)("strong",{children:"This content will be automatically embedded in your article."}),(0,u.jsx)("br",{}),"Supported platforms: YouTube, Twitch (clips & videos), Twitter/X, VLR.gg (esports content)"]})]})}):null};const Ki=function(e){let{newsId:t,navigateTo:a}=e;const[r,n]=(0,s.useState)({title:"",excerpt:"",content:"",category:"updates",status:"draft",featured:!1,image:"",publishedAt:"",tags:[],metaTitle:"",metaDescription:"",slug:"",authorNotes:"",relatedMatches:[],relatedTeams:[],relatedPlayers:[]}),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(""),[p,v]=(0,s.useState)(!1),[y,f]=(0,s.useState)([]),[j,k]=(0,s.useState)([]),[w,N]=(0,s.useState)([]),[_,S]=(0,s.useState)(0),[C,E]=(0,s.useState)([]),[T,A]=(0,s.useState)(!0),[M,P]=(0,s.useState)({words:0,characters:0,videos:0,mentions:0}),{api:R}=b(),{textareaRef:I,dropdownRef:D,showDropdown:L,mentionResults:U,selectedIndex:z,loading:O,dropdownPosition:F,handleInputChange:B,handleKeyDown:W,selectMention:H}=Wl(),{textareaRef:V,dropdownRef:q,showDropdown:G,mentionResults:Y,selectedIndex:Z,loading:K,dropdownPosition:J,handleInputChange:Q,handleKeyDown:X,selectMention:$}=Wl(),{textareaRef:ee,dropdownRef:te,showDropdown:ae,mentionResults:re,selectedIndex:se,loading:ne,dropdownPosition:le,handleInputChange:ie,handleKeyDown:oe,selectMention:de}=Wl(),ce=Boolean(t);(0,s.useEffect)((()=>{(async()=>{if(ce)try{i(!0);const e=await R.get("/admin/news/".concat(t)),a=e.data||e;n({title:a.title||"",excerpt:a.excerpt||"",content:a.content||"",category:a.category||"updates",status:a.status||"draft",featured:a.featured||!1,image:a.featured_image||a.image||"",publishedAt:a.published_at?a.published_at.split("T")[0]:"",tags:a.tags||[]})}catch(e){console.error("Error fetching news:",e),alert("Error loading news data")}finally{i(!1)}})()}),[t,ce]),(0,s.useEffect)((()=>{ue()}),[r.title,r.excerpt,r.content]);const me=e=>{const{name:t,value:a,type:r,checked:s}=e.target;n((e=>c(c({},e),{},{[t]:"checkbox"===r?s:a})))},ue=()=>{const e=r.content||"",t=r.title||"",a=r.excerpt||"",s="".concat(t," ").concat(a," ").concat(e),n=s.trim().split(/\s+/).filter((e=>e.length>0)).length,l=e.length,i=wt(e),o=(s.match(/\w+|team:\w+|player:\w+/g)||[]).length;P({words:n,characters:l,videos:i.length,mentions:o}),E(i)},xe=()=>{h.trim()&&!r.tags.includes(h.trim())&&(n((e=>c(c({},e),{},{tags:[...e.tags,h.trim()]}))),g(""))};return l?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading news data..."})]})}):(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:ce?"Edit News Article":"Create News Article"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:ce?"Update news article":"Create a new news article"})]}),(0,u.jsx)("button",{onClick:()=>a&&a("admin-news"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to News"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.title.trim())if(r.excerpt.trim())if(r.content.trim())if(r.content.trim().length<50)alert("Content must be at least 50 characters long");else{d(!0);try{var s,l,i;const{processedContent:e,videos:d}=yt(r.content.trim()),p={title:r.title.trim(),excerpt:r.excerpt.trim(),content:e,category_id:"updates"===r.category?1:"esports"===r.category?2:"balance"===r.category?3:"community"===r.category?4:"content"===r.category?5:"events"===r.category?6:1,status:r.status,featured:r.featured,featured_image:(m?null:r.image)||null,published_at:r.publishedAt||null,tags:r.tags,videos:d.map((e=>({platform:e.type,video_id:e.id,embed_url:e.embedUrl||null,original_url:e.originalUrl})))};let v;if(v=ce?await R.put("/admin/news/".concat(t),p):await R.post("/admin/news",p),m&&(ce||null!==(s=v)&&void 0!==s&&null!==(l=s.data)&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&i.id)){const e=ce?t:v.data.data.id,a=new FormData;a.append("image",m),a.append("news_id",e);try{var o,u,x;const e=await R.postFile("/admin/news/media/featured-image",a);if(console.log("Featured image upload response:",e),null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&null!==(u=o.data)&&void 0!==u&&u.path||null!==e&&void 0!==e&&null!==(x=e.data)&&void 0!==x&&x.path){var h;const t=(null===(h=e.data.data)||void 0===h?void 0:h.path)||e.data.path;console.log("Image upload successful, path:",t),n((e=>c(c({},e),{},{image:t})))}}catch(g){console.error("Error uploading image:",g),alert("Image uploaded but there was an error updating the article. Please try uploading the image again.")}}alert("News article ".concat(ce?"updated":"created"," successfully!")),a&&a("admin-news")}catch(p){console.error("Error saving news:",p),alert("Error ".concat(ce?"updating":"creating"," news article: ").concat(p.message))}finally{d(!1)}}else alert("Content is required");else alert("Excerpt is required");else alert("Title is required")},className:"space-y-6",children:[(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Article Content"}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Featured Image"}),(0,u.jsx)(Wi,{onImageSelect:(e,t)=>{x(e),n((e=>c(c({},e),{},{image:t||""})))},currentImage:r.image,placeholder:"Upload Article Image",className:"w-full max-w-md"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Title *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{ref:ee,type:"text",name:"title",value:r.title,onChange:e=>{me(e),ie(e,null),ue()},onKeyDown:e=>{const t=oe(e,null);null!==t&&void 0!==t&&t.selectMention&&de(t.selectMention,(e=>{n((t=>c(c({},t),{},{title:e})))}),r.title)},className:"form-input",placeholder:"Enter article title... (Type  to mention teams/players)",required:!0}),(0,u.jsx)(Vl,{show:ae,results:re,selectedIndex:se,loading:ne,position:le,onSelect:e=>de(e,(e=>{n((t=>c(c({},t),{},{title:e})))}),r.title),dropdownRef:te})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Excerpt *"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("textarea",{ref:V,name:"excerpt",value:r.excerpt,onChange:e=>{me(e),Q(e,null),ue()},onKeyDown:e=>{const t=X(e,null);null!==t&&void 0!==t&&t.selectMention&&$(t.selectMention,(e=>{n((t=>c(c({},t),{},{excerpt:e})))}),r.excerpt)},rows:2,className:"form-input",placeholder:"Brief summary of the article... (Type  to mention teams/players)",required:!0}),(0,u.jsx)(Vl,{show:G,results:Y,selectedIndex:Z,loading:K,position:J,onSelect:e=>$(e,(e=>{n((t=>c(c({},t),{},{excerpt:e})))}),r.excerpt),dropdownRef:q})]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Short description that appears in article previews. Type  to mention teams, players, or users!"})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,u.jsx)("label",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Content *"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("span",{className:M.characters<50?"text-red-500":"",children:[M.characters," chars"]}),(0,u.jsxs)("span",{children:[M.words," words"]}),M.videos>0&&(0,u.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[M.videos," video",1!==M.videos?"s":""]}),M.mentions>0&&(0,u.jsxs)("span",{className:"text-purple-600 dark:text-purple-400",children:[M.mentions," mention",1!==M.mentions?"s":""]})]})]}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("textarea",{ref:I,name:"content",value:r.content,onChange:e=>{me(e),B(e,null),setTimeout((()=>ue()),300)},onKeyDown:e=>{const t=W(e,null);null!==t&&void 0!==t&&t.selectMention&&H(t.selectMention,(e=>{n((t=>c(c({},t),{},{content:e})))}),r.content)},rows:12,className:"form-input",placeholder:"Write your article content here...  Type  to mention teams, players, or users Add video links (YouTube, Twitch, Twitter): \u2022 YouTube: https://youtube.com/watch?v=VIDEO_ID \u2022 Twitch Clips: https://clips.twitch.tv/CLIP_ID   \u2022 Twitch Videos: https://twitch.tv/videos/VIDEO_ID \u2022 Twitter: https://twitter.com/user/status/TWEET_ID Add VLR.gg esports content: \u2022 Matches: https://vlr.gg/12345/match-name \u2022 Teams: https://vlr.gg/team/123/team-name \u2022 Events: https://vlr.gg/event/456/tournament-name \u2022 Players: https://vlr.gg/player/789/player-name All content will auto-embed with rich previews and metadata!",required:!0}),(0,u.jsx)(Vl,{show:L,results:U,selectedIndex:z,loading:O,position:F,onSelect:e=>H(e,(e=>{n((t=>c(c({},t),{},{content:e})))}),r.content),dropdownRef:D})]}),(0,u.jsxs)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,u.jsx)("strong",{children:"Content Guidelines:"}),(0,u.jsxs)("ul",{className:"list-disc ml-4 mt-1 space-y-1",children:[(0,u.jsx)("li",{children:"Minimum 50 characters required for publication"}),(0,u.jsxs)("li",{children:["Use ",(0,u.jsx)("code",{children:"username"})," to mention users, ",(0,u.jsx)("code",{children:"team:name"})," for teams, ",(0,u.jsx)("code",{children:"player:name"})," for players"]}),(0,u.jsx)("li",{children:"Paste video/content URLs directly - they'll auto-embed! (YouTube, Twitch clips/videos, Twitter, VLR.gg matches/teams/events)"}),(0,u.jsx)("li",{children:"Write in engaging, professional esports journalism style"}),(0,u.jsx)("li",{children:"Include relevant context and background information"})]})]}),r.content&&T&&(0,u.jsx)(Zi,{content:r.content,onVideoDetected:e=>{E(e)},className:"mt-3"})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Article Settings"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Category"}),(0,u.jsx)("select",{name:"category",value:r.category,onChange:me,className:"form-input",children:[{value:"updates",label:"Game Updates"},{value:"esports",label:"Esports"},{value:"balance",label:"Hero Balance"},{value:"community",label:"Community"},{value:"content",label:"Dev Insights"},{value:"events",label:"Analysis"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Status"}),(0,u.jsxs)("select",{name:"status",value:r.status,onChange:me,className:"form-input",children:[(0,u.jsx)("option",{value:"draft",children:"Draft"}),(0,u.jsx)("option",{value:"published",children:"Published"}),(0,u.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,u.jsx)("option",{value:"archived",children:"Archived"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Publish Date"}),(0,u.jsx)("input",{type:"date",name:"publishedAt",value:r.publishedAt,onChange:me,className:"form-input"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave blank to publish immediately"})]}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",name:"featured",checked:r.featured,onChange:me,className:"mr-2",id:"featured"}),(0,u.jsx)("label",{htmlFor:"featured",className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Feature this article"})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Tags"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),xe()),className:"form-input flex-1",placeholder:"Add a tag..."}),(0,u.jsx)("button",{type:"button",onClick:xe,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Add"})]}),r.tags.length>0&&(0,u.jsx)("div",{className:"flex flex-wrap gap-2",children:r.tags.map((e=>(0,u.jsxs)("span",{className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-full text-sm flex items-center space-x-2",children:[(0,u.jsx)("span",{children:e}),(0,u.jsx)("button",{type:"button",onClick:()=>{return t=e,void n((e=>c(c({},e),{},{tags:e.tags.filter((e=>e!==t))})));var t},className:"text-red-500 hover:text-red-700",children:"\xd7"})]},e)))})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,u.jsx)("button",{type:"button",onClick:()=>a&&a("admin-news"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),ce?"Updating...":"Creating..."]}):ce?"Update Article":"Create Article"})]})]})]})};const Ji=function(e){let{navigateTo:t}=e;const{api:a}=b(),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[c,m]=(0,s.useState)("list"),[x,h]=(0,s.useState)(null),[g,p]=(0,s.useState)("all"),[v,y]=(0,s.useState)("");(0,s.useEffect)((()=>{f(),j()}),[]);const f=async()=>{try{var e;d(!0);const t=await a.get("/admin/news-moderation"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||[];console.log("\ud83d\udcf0 News data received:",r.slice(0,1)),n(Array.isArray(r)?r:[])}catch(t){console.error("Error fetching news:",t),n([])}finally{d(!1)}},j=async()=>{try{var e;const t=await a.get("/news/categories"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||[];i(Array.isArray(r)?r:[])}catch(t){console.error("Error fetching categories:",t),i([])}},k=r.filter((e=>{var t,a,r,s;const n=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase()))||(null===(a=e.excerpt)||void 0===a?void 0:a.toLowerCase().includes(v.toLowerCase())),l="all"===g||e.category===g||(null===(r=e.category)||void 0===r?void 0:r.slug)===g||(null===(s=e.category)||void 0===s?void 0:s.id)===g;return n&&l}));return"edit"===c?(t("admin-news-edit",{id:null===x||void 0===x?void 0:x.id}),null):"create"===c?(t("admin-news-create"),null):(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"News Management"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,u.jsx)("button",{onClick:()=>{h(null),m("create")},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Create Article"}),(0,u.jsx)("input",{type:"text",placeholder:"Search articles...",value:v,onChange:e=>y(e.target.value),className:"px-4 py-2 border rounded flex-1 max-w-xs"}),(0,u.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"px-4 py-2 border rounded",children:[(0,u.jsx)("option",{value:"all",children:"All Categories"}),l.map((e=>(0,u.jsx)("option",{value:e.slug||e.id,children:e.name},e.slug||e.id)))]})]})]}),o?(0,u.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,u.jsx)("div",{className:"grid gap-4",children:0===k.length?(0,u.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No articles found"}):k.map((e=>{var t;return console.log("\ud83d\uddbc\ufe0f Article image data:",{id:e.id,featured_image:e.featured_image,featured_image_url:e.featured_image_url,image:e.image}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:(0,u.jsxs)("div",{className:"flex gap-4",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("img",{src:P(e),alt:e.title,className:"w-24 h-24 object-cover rounded",onError:e=>{console.log("\ud83d\uddbc\ufe0f Image failed to load:",e.target.src),e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjQ4IiB5PSI1OCIgZm9udC1mYW1pbHk9InN5c3RlbS11aSIgZm9udC1zaXplPSIzMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPj88L3RleHQ+Cjwvc3ZnPg=="},onLoad:()=>{console.log("\ud83d\uddbc\ufe0f Image loaded successfully:",P(e))}})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold",children:[e.title,e.featured&&(0,u.jsx)("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Featured"}),(0,u.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.excerpt||"No excerpt"})]})}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mb-3",children:[(0,u.jsxs)("span",{children:["Category: ","string"===typeof e.category?e.category:(null===(t=e.category)||void 0===t?void 0:t.name)||"Uncategorized"]}),(0,u.jsxs)("span",{children:["Views: ",e.views||0]}),(0,u.jsxs)("span",{children:["Comments: ",e.comments_count||0]}),(0,u.jsxs)("span",{children:["Published: ",e.published_at?new Date(e.published_at).toLocaleDateString():"Not published"]})]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{h(e),m("edit")})(e),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async e=>{try{const t="published"===e.status?"draft":"published";await a.put("/admin/news/".concat(e.id),{status:t}),await f()}catch(t){alert("Failed to update publish status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat("published"===e.status?"bg-gray-600 hover:bg-gray-700":"bg-green-600 hover:bg-green-700"),children:"published"===e.status?"Unpublish":"Publish"}),(0,u.jsx)("button",{onClick:()=>(async e=>{try{const t=e.featured?"/moderator/news/".concat(e.id,"/unfeature"):"/moderator/news/".concat(e.id,"/feature");await a.put(t),await f()}catch(t){alert("Failed to update featured status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat(e.featured?"bg-gray-600 hover:bg-gray-700":"bg-yellow-600 hover:bg-yellow-700"),children:e.featured?"Unfeature":"Feature"}),(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this article?"))try{await a.delete("/admin/news/".concat(e)),await f(),alert("Article deleted successfully")}catch(t){alert("Failed to delete article")}})(e.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Delete"})]})]})]})},e.id)}))})]})};const Qi=function(e){let{navigateTo:t}=e;const{api:a,user:r}=b(),[n,l]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[m,x]=(0,s.useState)("all"),[h,g]=(0,s.useState)("");(0,s.useEffect)((()=>{p(),v()}),[]);const p=async()=>{try{var e;c(!0);const t=await a.get("/forums/threads?sort=latest&limit=50"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||[];l(Array.isArray(r)?r:[])}catch(t){console.error("Error fetching threads:",t),l([])}finally{c(!1)}},v=async()=>{try{var e;const t=await a.get("/forums/categories"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||[];o(Array.isArray(r)?r:[])}catch(t){console.error("Error fetching categories:",t),o([])}},y=n.filter((e=>{var t,a,r;const s=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(a=e.content)||void 0===a?void 0:a.toLowerCase().includes(h.toLowerCase())),n="all"===m||(null===(r=e.category)||void 0===r?void 0:r.id)===m||e.category_id===m;return s&&n}));return(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Forum Management"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,u.jsx)("button",{onClick:()=>{t("admin-forum-create")},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Create Thread"}),(0,u.jsx)("input",{type:"text",placeholder:"Search threads...",value:h,onChange:e=>g(e.target.value),className:"px-4 py-2 border rounded flex-1 max-w-xs"}),(0,u.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"px-4 py-2 border rounded",children:[(0,u.jsx)("option",{value:"all",children:"All Categories"}),i.map((e=>(0,u.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),d?(0,u.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,u.jsx)("div",{className:"grid gap-4",children:0===y.length?(0,u.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No threads found"}):y.map((e=>{var r,s,n,l;return(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,u.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold",children:[e.title,e.pinned&&(0,u.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Pinned"}),e.locked&&(0,u.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Locked"})]}),(0,u.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[null===(r=e.content)||void 0===r?void 0:r.substring(0,150),"..."]}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mt-2",children:[(0,u.jsxs)("span",{children:["Category: ",(null===(s=e.category)||void 0===s?void 0:s.name)||"Uncategorized"]}),(0,u.jsxs)("span",{children:["Replies: ",e.replies||0]}),(0,u.jsxs)("span",{children:["Views: ",e.views||0]}),(0,u.jsxs)("span",{children:["Author: ",(null===(n=e.user)||void 0===n?void 0:n.name)||(null===(l=e.author)||void 0===l?void 0:l.name)||"Unknown"]}),(0,u.jsxs)("span",{children:["Created: ",e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"]})]})]})}),(0,u.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,u.jsx)("button",{onClick:()=>(e=>{t("admin-forum-edit",{id:e.id})})(e),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async e=>{try{await a.put("/admin/forums/".concat(e.id),{pinned:!e.pinned}),await p()}catch(t){alert("Failed to update pinned status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat(e.pinned?"bg-gray-600 hover:bg-gray-700":"bg-blue-600 hover:bg-blue-700"),children:e.pinned?"Unpin":"Pin"}),(0,u.jsx)("button",{onClick:()=>(async e=>{try{await a.put("/admin/forums/".concat(e.id),{locked:!e.locked}),await p()}catch(t){alert("Failed to update locked status")}})(e),className:"px-3 py-1 text-white text-sm rounded ".concat(e.locked?"bg-gray-600 hover:bg-gray-700":"bg-orange-600 hover:bg-orange-700"),children:e.locked?"Unlock":"Lock"}),(0,u.jsx)("button",{onClick:()=>t("thread-detail",{id:e.id}),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"View"}),(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this thread?"))try{await a.delete("/admin/forums/".concat(e)),await p(),alert("Thread deleted successfully")}catch(t){alert("Failed to delete thread")}})(e.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Delete"})]})]},e.id)}))})]})};const Xi=function(){var e;const{api:t}=b(),[a,r]=(0,s.useState)(""),[n,l]=(0,s.useState)(""),[i,o]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)({}),k={news:{name:"News System",types:["articles","categories","comments","tags"]},forums:{name:"Forums System",types:["threads","posts","categories","reports"]},players:{name:"Players System",types:["players","stats","achievements","transfers"]},teams:{name:"Teams System",types:["teams","rosters","staff","achievements"]},events:{name:"Events System",types:["events","tournaments","brackets","registrations"]},matches:{name:"Matches System",types:["matches","rounds","maps","stats"]},users:{name:"Users System",types:["users","roles","permissions","activity"]}},w={create:{name:"Create",color:"green",requiresData:!0},read:{name:"Export/Read",color:"blue",requiresData:!1},update:{name:"Update",color:"yellow",requiresData:!0},delete:{name:"Delete",color:"red",requiresData:!1},archive:{name:"Archive",color:"gray",requiresData:!1},restore:{name:"Restore",color:"purple",requiresData:!1},activate:{name:"Activate",color:"green",requiresData:!1},deactivate:{name:"Deactivate",color:"orange",requiresData:!1}};(0,s.useEffect)((()=>{a&&n&&N()}),[a,n]);const N=async()=>{try{m(!0);const e=await t.get("/admin/".concat(a,"/").concat(n));p(e.data||[]),h([]),y(!1)}catch(e){console.error("Error fetching items:",e),p([])}finally{m(!1)}};return(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Bulk Operations"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Perform bulk CRUD operations on platform data"}),(0,u.jsx)("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Admin Only - Use with extreme caution"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Selection"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"System"}),(0,u.jsxs)("select",{value:a,onChange:e=>{r(e.target.value),l(""),p([]),h([])},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"",children:"Select System"}),Object.entries(k).map((e=>{let[t,a]=e;return(0,u.jsx)("option",{value:t,children:a.name},t)}))]})]}),a&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Data Type"}),(0,u.jsxs)("select",{value:n,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"",children:"Select Type"}),k[a].types.map((e=>(0,u.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Operation"}),(0,u.jsxs)("select",{value:i,onChange:e=>{o(e.target.value),j({})},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"",children:"Select Operation"}),Object.entries(w).map((e=>{let[t,a]=e;return(0,u.jsx)("option",{value:t,children:a.name},t)}))]})]})]}),(()=>{var e;return null!==(e=w[i])&&void 0!==e&&e.requiresData?(0,u.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[(0,u.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Bulk Data"}),(0,u.jsxs)("div",{className:"space-y-3",children:["create"===i&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Number of items to create"}),(0,u.jsx)("input",{type:"number",value:f.count||1,onChange:e=>j(c(c({},f),{},{count:e.target.value})),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name prefix"}),(0,u.jsx)("input",{type:"text",value:f.prefix||"",onChange:e=>j(c(c({},f),{},{prefix:e.target.value})),placeholder:"New ".concat(n," "),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),"update"===i&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Field to update"}),(0,u.jsxs)("select",{value:f.field||"",onChange:e=>j(c(c({},f),{},{field:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"",children:"Select field"}),(0,u.jsx)("option",{value:"status",children:"Status"}),(0,u.jsx)("option",{value:"featured",children:"Featured"}),(0,u.jsx)("option",{value:"published",children:"Published"}),(0,u.jsx)("option",{value:"category",children:"Category"}),(0,u.jsx)("option",{value:"tags",children:"Tags"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New value"}),(0,u.jsx)("input",{type:"text",value:f.value||"",onChange:e=>j(c(c({},f),{},{value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]})]})]}):null})(),(0,u.jsx)("div",{className:"mt-6",children:(0,u.jsx)("button",{onClick:async()=>{if(!a||!n||!i)return void alert("Please select system, type, and operation");if("create"!==i&&0===x.length)return void alert("Please select items to perform the operation");const e=w[i].name,r="create"===i?"Are you sure you want to create new ".concat(n," in ").concat(k[a].name,"?"):"Are you sure you want to ".concat(e," ").concat(x.length," ").concat(n," in ").concat(k[a].name,"? This action cannot be undone.");if(window.confirm(r))try{m(!0);const r={operation:i,items:x,data:f};await t.post("/admin/bulk/".concat(a,"/").concat(n),r),alert("Bulk ".concat(e," completed successfully!")),N(),h([]),y(!1),j({})}catch(s){console.error("Error performing bulk operation:",s),alert("Error performing bulk ".concat(e,"."))}finally{m(!1)}},disabled:d||!i||!a||!n,className:"w-full px-4 py-2 rounded-lg font-medium transition-colors ".concat(i&&w[i]?"delete"===i?"bg-red-600 hover:bg-red-700 text-white":"create"===i?"bg-green-600 hover:bg-green-700 text-white":"update"===i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-400 text-gray-200 cursor-not-allowed"),children:d?"Processing...":i?"Perform ".concat((null===(e=w[i])||void 0===e?void 0:e.name)||i):"Select Operation"})})]}),(0,u.jsxs)("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n?"".concat(n.charAt(0).toUpperCase()+n.slice(1)," Items"):"Select System & Type"}),g.length>0&&(0,u.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"checkbox",checked:v,onChange:()=>{h(v?[]:g.map((e=>e.id))),y(!v)},className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,u.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Select All"})]})]}),a&&n?(0,u.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d?(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Loading items..."}):g.length>0?g.map((e=>(0,u.jsx)("div",{className:"flex items-center justify-between p-3 rounded-lg border ".concat(x.includes(e.id)?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700"),children:(0,u.jsxs)("label",{className:"flex items-center space-x-3 flex-1 cursor-pointer",children:[(0,u.jsx)("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>{return t=e.id,void(x.includes(t)?h(x.filter((e=>e!==t))):h([...x,t]));var t},className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.name||e.title||"".concat(n," #").concat(e.id)}),e.status&&(0,u.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"inactive"===e.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]})},e.id))):(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No items found"})}):(0,u.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Select a system and type to view items"}),x.length>0&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,u.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[x.length," item",1!==x.length?"s":""," selected"]})})]})]}),(0,u.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"\u26a0\ufe0f Warning"}),(0,u.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300",children:"Bulk operations affect large amounts of data and cannot be undone. Always create a backup before performing bulk operations. Delete operations are permanent and will remove all associated data."})]})]})};const $i=function(){var e;const{user:t,api:a}=b(),[r,n]=(0,s.useState)(null),[l,i]=(0,s.useState)(!0),[o,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)({name:"",email:"",hero_flair:"",show_hero_flair:!1,team_flair_id:null,show_team_flair:!1,current_password:"",new_password:"",new_password_confirmation:""});(0,s.useEffect)((()=>{h()}),[]);const h=async()=>{try{var e;i(!0);const t=await a.get("/user/profile");n(t.data),x({name:t.data.name||"",email:t.data.email||"",hero_flair:t.data.hero_flair||"",show_hero_flair:t.data.show_hero_flair||!1,team_flair_id:(null===(e=t.data.team_flair)||void 0===e?void 0:e.id)||null,show_team_flair:t.data.show_team_flair||!1,current_password:"",new_password:"",new_password_confirmation:""})}catch(t){console.error("Error fetching profile:",t)}finally{i(!1)}};return l?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)("div",{className:"animate-pulse",children:"Loading profile..."})}):(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Profile"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your administrator account settings"})]}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700",children:(0,u.jsx)("img",{src:null!==t&&void 0!==t&&t.hero_flair?"/images/heroes/".concat(t.hero_flair.toLowerCase(),"-headbig.webp"):S(null,"player-avatar"),alt:null===t||void 0===t?void 0:t.name,className:"w-full h-full object-cover",onError:e=>{e.target.src=S(null,"player-avatar")}})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:null===t||void 0===t?void 0:t.name}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:null===t||void 0===t?void 0:t.email}),(0,u.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("admin"===(null===t||void 0===t?void 0:t.role)?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"moderator"===(null===t||void 0===t?void 0:t.role)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:null===t||void 0===t||null===(e=t.role)||void 0===e?void 0:e.toUpperCase()}),(null===t||void 0===t?void 0:t.hero_flair)&&(null===t||void 0===t?void 0:t.show_hero_flair)&&(0,u.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 rounded-full",children:t.hero_flair})]})]})]}),(0,u.jsx)("button",{onClick:()=>d(!o),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:o?"Cancel":"Edit Profile"})]}),o?(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={name:m.name,email:m.email,hero_flair:m.hero_flair,show_hero_flair:m.show_hero_flair,team_flair_id:m.team_flair_id,show_team_flair:m.show_team_flair};m.new_password&&(e.current_password=m.current_password,e.new_password=m.new_password,e.new_password_confirmation=m.new_password_confirmation),await a.put("/user/profile",e),await h(),d(!1),alert("Profile updated successfully!")}catch(t){console.error("Error updating profile:",t),alert("Failed to update profile. Please check your input.")}},className:"space-y-4",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),(0,u.jsx)("input",{type:"text",value:m.name,onChange:e=>x(c(c({},m),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),(0,u.jsx)("input",{type:"email",value:m.email,onChange:e=>x(c(c({},m),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]})]}),(0,u.jsxs)("div",{className:"border-t dark:border-gray-700 pt-4",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Change Password"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Password"}),(0,u.jsx)("input",{type:"password",value:m.current_password,onChange:e=>x(c(c({},m),{},{current_password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),(0,u.jsx)("input",{type:"password",value:m.new_password,onChange:e=>x(c(c({},m),{},{new_password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),(0,u.jsx)("input",{type:"password",value:m.new_password_confirmation,onChange:e=>x(c(c({},m),{},{new_password_confirmation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),(0,u.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,u.jsx)("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Save Changes"})]})]}):(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Account Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"User ID"}),(0,u.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:null===t||void 0===t?void 0:t.id})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Role"}),(0,u.jsx)("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:null===t||void 0===t?void 0:t.role})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Member Since"}),(0,u.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:null!==t&&void 0!==t&&t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Login"}),(0,u.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:null!==t&&void 0!==t&&t.last_login_at?new Date(t.last_login_at).toLocaleDateString():"N/A"})]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:"Permissions"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:["admin"===(null===t||void 0===t?void 0:t.role)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"Full System Access"}),(0,u.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"User Management"}),(0,u.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"Bulk Operations"}),(0,u.jsx)("span",{className:"px-3 py-1 text-sm bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 rounded-full",children:"System Statistics"})]}),("admin"===(null===t||void 0===t?void 0:t.role)||"moderator"===(null===t||void 0===t?void 0:t.role))&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"Content Moderation"}),(0,u.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"Forum Management"}),(0,u.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 rounded-full",children:"News Management"})]})]})]})]})]})}),(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("div",{className:"flex items-center justify-between py-2 border-b dark:border-gray-700",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Logged in"}),(0,u.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Today at ",(new Date).toLocaleTimeString()]})]})}),(0,u.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:(0,u.jsx)("p",{className:"text-sm",children:"Full activity log coming soon..."})})]})]})]})};function eo(e){let{navigateTo:t}=e;const[a,r]=(0,s.useState)("overview"),{user:n,logout:l,api:i}=b(),o={primary:"admin"===(null===n||void 0===n?void 0:n.role)?"bg-red-600":"moderator"===(null===n||void 0===n?void 0:n.role)?"bg-yellow-600":"bg-green-600",primaryHover:"admin"===(null===n||void 0===n?void 0:n.role)?"hover:bg-red-700":"moderator"===(null===n||void 0===n?void 0:n.role)?"hover:bg-yellow-700":"hover:bg-green-700",shadow:"admin"===(null===n||void 0===n?void 0:n.role)?"shadow-red-500/30":"moderator"===(null===n||void 0===n?void 0:n.role)?"shadow-yellow-500/30":"shadow-green-500/30"},d="admin"===(null===n||void 0===n?void 0:n.role)?[{id:"overview",name:"Overview"},{id:"teams",name:"Teams"},{id:"players",name:"Players"},{id:"matches",name:"Matches"},{id:"events",name:"Events"},{id:"users",name:"Users"},{id:"news",name:"News"},{id:"forums",name:"Forums"},{id:"bulk-operations",name:"Bulk Ops"},{id:"profile",name:"Profile"}]:"moderator"===(null===n||void 0===n?void 0:n.role)?[{id:"overview",name:"Overview"},{id:"teams",name:"Teams"},{id:"players",name:"Players"},{id:"matches",name:"Matches"},{id:"events",name:"Events"},{id:"news",name:"News"},{id:"forums",name:"Forums"}]:[],c=()=>(0,u.jsx)("div",{className:"p-8 text-center",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[(0,u.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/40 rounded-full mb-4",children:(0,u.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Access Denied"}),(0,u.jsxs)("p",{className:"text-red-700 dark:text-red-300",children:["You don't have permission to access this section.",(0,u.jsxs)("span",{className:"block mt-2",children:["This section requires ","moderator"===(null===n||void 0===n?void 0:n.role)?"Admin":"higher"," privileges."]})]})]})});return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,u.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"px-6 py-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["admin"===(null===n||void 0===n?void 0:n.role)?"Admin":"moderator"===(null===n||void 0===n?void 0:n.role)?"Moderator":"User"," Dashboard"]}),(0,u.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat("admin"===(null===n||void 0===n?void 0:n.role)?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"moderator"===(null===n||void 0===n?void 0:n.role)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:"admin"===(null===n||void 0===n?void 0:n.role)?"Administrator":"moderator"===(null===n||void 0===n?void 0:n.role)?"Moderator":"User"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Welcome, ",null===n||void 0===n?void 0:n.name]}),(0,u.jsx)("button",{onClick:()=>t("home"),className:"btn btn-secondary",children:"Back to Site"}),(0,u.jsx)("button",{onClick:l,className:"btn btn-ghost",children:"Logout"})]})]})})}),(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)("nav",{className:"w-64 bg-white dark:bg-gray-800 shadow-sm h-[calc(100vh-73px)] overflow-y-auto border-r border-gray-200 dark:border-gray-700",children:(0,u.jsx)("div",{className:"p-4",children:0===d.length?(0,u.jsx)("div",{className:"text-red-500 font-bold p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:"NO SECTIONS ACCESSIBLE - CHECK USER ROLE!"}):(0,u.jsx)("div",{className:"space-y-1",children:d.map((e=>(0,u.jsxs)("button",{onClick:()=>r(e.id),className:"w-full text-left px-4 py-3 rounded-lg font-medium transition-all duration-200 flex items-center justify-between border ".concat(a===e.id?"".concat(o.primary," text-white shadow-lg border-transparent"):"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border-transparent hover:border-gray-200 dark:hover:border-gray-600"),children:[(0,u.jsx)("span",{children:e.name}),"admin"===(null===n||void 0===n?void 0:n.role)&&["users","bulk-operations","stats"].includes(e.id)&&(0,u.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(a===e.id?"bg-white/20 text-white":"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300"),children:"Admin"})]},e.id)))})})}),(0,u.jsx)("main",{className:"flex-1 p-6",children:(()=>{const e=d.some((e=>e.id===a));d.find((e=>e.id===a));if(!e)return(0,u.jsx)("div",{className:"p-8 text-center",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[(0,u.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/40 rounded-full mb-4",children:(0,u.jsx)("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Access Denied"}),(0,u.jsxs)("p",{className:"text-red-700 dark:text-red-300",children:["You don't have permission to access this section.",(0,u.jsxs)("span",{className:"block mt-2",children:["This section requires ","moderator"===(null===n||void 0===n?void 0:n.role)?"Admin":"higher"," privileges."]})]}),(0,u.jsx)("span",{className:"mt-3 px-3 py-1 text-sm font-medium rounded-full ".concat("admin"===(null===n||void 0===n?void 0:n.role)?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"moderator"===(null===n||void 0===n?void 0:n.role)?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:"admin"===(null===n||void 0===n?void 0:n.role)?"Administrator":"moderator"===(null===n||void 0===n?void 0:n.role)?"Moderator":"User"})]})});switch(a){case"overview":default:return(0,u.jsx)(Ii,{});case"teams":return V(n,O.MODERATOR)?(0,u.jsx)(Li,{navigateTo:t}):(0,u.jsx)(c,{});case"players":return V(n,O.MODERATOR)?(0,u.jsx)(Ui,{navigateTo:t}):(0,u.jsx)(c,{});case"matches":return V(n,O.MODERATOR)?(0,u.jsx)(Bi,{navigateTo:t}):(0,u.jsx)(c,{});case"events":return V(n,O.MODERATOR)?(0,u.jsx)(Vi,{navigateTo:t}):(0,u.jsx)(c,{});case"users":return H(n,O.ADMIN)?(0,u.jsx)(Gi,{}):(0,u.jsx)(c,{});case"news":return V(n,O.MODERATOR)?(0,u.jsx)(Ji,{navigateTo:t}):(0,u.jsx)(c,{});case"forums":return V(n,O.MODERATOR)?(0,u.jsx)(Qi,{navigateTo:t}):(0,u.jsx)(c,{});case"bulk-operations":return H(n,O.ADMIN)?(0,u.jsx)(Xi,{}):(0,u.jsx)(c,{});case"profile":return(0,u.jsx)($i,{})}})()})]})]})}const to=function(e){let{navigateTo:t}=e;const{user:a}=b();return a?(0,u.jsx)(eo,{navigateTo:t}):(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-red-600",children:"Error: No User Data"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Admin dashboard requires authentication"})]})})};const ao=function(e){let{teamId:t,navigateTo:a}=e;const[r,n]=(0,s.useState)({name:"",shortName:"",region:"",logo:"",country:"",earnings:0,elo_rating:1e3,wins:"",losses:"",matches_played:"",achievements:"",captain:"",status:"Active",coach:{name:"",avatar:"",country:"US"},socialLinks:{twitter:"",instagram:"",youtube:"",website:"",discord:"",tiktok:""}}),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),[x,h]=(0,s.useState)(null),[g,p]=(0,s.useState)(null),[v,y]=(0,s.useState)(null),[f,j]=(0,s.useState)(null),{api:k}=b(),w=Boolean(t);(0,s.useEffect)((()=>{(async()=>{if(w)try{i(!0);const e=await k.get("/admin/teams/".concat(t)),a=e.data||e;console.log("TeamForm - Fetched team data:",a),n({name:a.name||"",shortName:a.short_name||a.shortName||"",region:a.region||"",logo:a.logo_url||a.logo||"",flag:a.flag_url||a.flag||"",country:a.country||"",earnings:a.earnings||0,elo_rating:a.elo_rating||a.rating||1e3,peak_elo:a.peak_elo||"",wins:a.wins||"",losses:a.losses||"",matches_played:a.matches_played||"",achievements:a.achievements||"",captain:a.captain||"",status:a.status||"Active",coach:{name:a.coach_name||a.coach||"",avatar:a.coach_image||"",country:a.coach_country||"US"},socialLinks:a.social_links||a.socialLinks||{twitter:"",instagram:"",youtube:"",website:"",discord:"",tiktok:""}})}catch(f){console.error("Error fetching team:",f),j("Error loading team data: "+f.message)}finally{i(!1)}})()}),[t,w]);const N=e=>{const{name:t,value:a}=e.target;if(t.startsWith("social_")){const e=t.replace("social_","");n((t=>c(c({},t),{},{socialLinks:c(c({},t.socialLinks),{},{[e]:a})})))}else if(t.startsWith("coach_")){const e=t.replace("coach_","");n((t=>c(c({},t),{},{coach:c(c({},t.coach),{},{[e]:a})})))}else n((e=>c(c({},e),{},{[t]:a})))},_=async(e,t,a)=>{if(!e)return null;try{console.log("TeamForm - Uploading ".concat(a," for team ").concat(t,":"),e.name);const r=new FormData;"logo"===a?r.append("logo",e):"flag"===a?r.append("flag",e):"coach_avatar"===a&&r.append("coach_avatar",e);const s="/upload/team/".concat(t,"logo"===a?"/logo":"flag"===a?"/flag":"/coach-avatar");console.log("TeamForm - Upload endpoint: ".concat(s));const n=await k.postFile(s,r);console.log("TeamForm - ".concat(a," upload response:"),n);const l=n.data||n;let i;if(i=l.data?l.data.logo_url||l.data.flag_url||l.data.logo||l.data.flag:l.logo_url||l.flag_url||l.url||l.logo||l.flag,console.log("TeamForm - Extracted ".concat(a," URL:"),i),!i)throw console.error("TeamForm - No ".concat(a," URL found in response:"),l),new Error("No ".concat(a," URL returned from upload"));return i}catch(f){throw console.error("TeamForm - Error uploading ".concat(a,":"),f),f}};return l?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading team data..."})]})}):(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:w?"Edit Team":"Create New Team"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:w?"Update team information and social links":"Add a new team to the database"})]}),(0,u.jsx)("button",{onClick:()=>a&&a("admin-dashboard"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to Dashboard"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.name.trim())if(r.shortName.trim())if(r.region){d(!0),j(null);try{console.log("TeamForm - Starting save process...");const e={name:r.name.trim(),short_name:r.shortName.trim(),region:r.region,country:r.country,rating:parseInt(r.elo_rating)||1e3,earnings:parseFloat(r.earnings)||0,elo_rating:r.elo_rating?parseInt(r.elo_rating):1e3,peak_elo:r.peak_elo?parseInt(r.peak_elo):null,wins:r.wins?parseInt(r.wins):null,losses:r.losses?parseInt(r.losses):null,matches_played:r.matches_played?parseInt(r.matches_played):null,achievements:r.achievements||null,captain:r.captain||null,status:r.status||"Active",coach:r.coach.name||"",coach_name:r.coach.name||"",coach_country:r.coach.country||"US",social_links:{twitter:r.socialLinks.twitter||"",instagram:r.socialLinks.instagram||"",youtube:r.socialLinks.youtube||"",website:r.socialLinks.website||"",discord:r.socialLinks.discord||"",tiktok:r.socialLinks.tiktok||""}};console.log("TeamForm - Submit data prepared:",e);let s=t;if(w)console.log("Updating existing team with ID:",t),await k.put("/admin/teams/".concat(t),e),console.log("Team updated successfully");else{console.log("Creating new team first to get ID...");const t=await k.post("/admin/teams",e);s=(t.data||t).id,console.log("New team created with ID:",s)}let l=r.logo,o=r.flag,d=r.coach.avatar;try{x&&(console.log("TeamForm - Uploading logo..."),l=await _(x,s,"logo"),l&&console.log("TeamForm - Logo uploaded successfully:",l)),g&&(console.log("TeamForm - Uploading flag..."),o=await _(g,s,"flag"),o&&console.log("TeamForm - Flag uploaded successfully:",o)),v&&(console.log("TeamForm - Uploading coach avatar..."),d=await _(v,s,"coach_avatar"),d&&console.log("TeamForm - Coach avatar uploaded successfully:",d))}catch(i){console.error("TeamForm - Image upload failed:",i),alert("Team saved but image upload failed: "+i.message)}if(x&&l||g&&o||v&&d){console.log("TeamForm - Updating team with image URLs...");const t=c(c({},e),{},{logo:l&&l.includes("storage/")?l.replace("".concat(m.BASE_URL,"/storage/"),""):l,flag:o&&o.includes("storage/")?o.replace("".concat(m.BASE_URL,"/storage/"),""):o,coach_data:c(c({},e.coach_data),{},{avatar:d&&d.includes("storage/")?d.replace("".concat(m.BASE_URL,"/storage/"),""):d})});await k.put("/admin/teams/".concat(s),t),console.log("TeamForm - Team updated with images")}n((e=>c(c({},e),{},{logo:l,flag:o,coach:c(c({},e.coach),{},{avatar:d})}))),alert("Team ".concat(w?"updated":"created"," successfully!")),setTimeout((()=>{a&&a("admin-dashboard")}),1500)}catch(f){var s,l;if(console.error("TeamForm - Error saving team:",f),f.message.includes("500")?j("BACKEND ISSUE: Server error. Please check backend team validation and database constraints."):f.message.includes("422")?f.message.includes("name")&&f.message.includes("unique")?j("BACKEND ISSUE: Team name already exists. Check unique constraints."):f.message.includes("social_links")?j("BACKEND ISSUE: Social links validation failed. Check backend social_links field format."):j("BACKEND ISSUE: Validation error. Check backend validation rules for team fields."):f.message.includes("404")?j("BACKEND ISSUE: Team API endpoint not found. Implement /api/admin/teams routes."):j("Failed to save team: ".concat(f.message)),console.log("TeamForm - Form data preserved for retry"),null!==(s=f.response)&&void 0!==s&&null!==(l=s.data)&&void 0!==l&&l.data){const t=f.response.data.data;n((e=>c(c(c({},e),t),{},{socialLinks:c(c({},e.socialLinks),t.social_links||t.socialLinks||{})})))}}finally{d(!1)}}else j("Region is required");else j("Short name is required");else j("Team name is required")},className:"space-y-6",children:[f&&(0,u.jsxs)("div",{className:"border px-4 py-3 rounded mb-4 ".concat(f.includes("BACKEND ISSUE")?"bg-red-100 border-red-400 text-red-700":"bg-yellow-100 border-yellow-400 text-yellow-700"),children:[f,f.includes("BACKEND ISSUE")&&(0,u.jsxs)("div",{className:"mt-2 text-sm",children:[(0,u.jsx)("strong",{children:"For Backend Developer:"})," Please check Laravel team model validation and API routes."]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team Logo"}),(0,u.jsx)(Wi,{onImageSelect:(e,t)=>{console.log("TeamForm - Logo selected:",null===e||void 0===e?void 0:e.name,t),h(e),n((e=>c(c({},e),{},{logo:t||""})))},currentImage:r.logo,placeholder:"Upload Team Logo",className:"w-full max-w-md"}),r.logo&&(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("img",{src:r.logo,alt:"Current logo",className:"w-16 h-16 object-cover rounded",onError:e=>{e.target.style.display="none"}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team Name *"}),(0,u.jsx)("input",{type:"text",name:"name",value:r.name,onChange:N,className:"form-input",placeholder:"e.g., Team Stark Industries",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Short Name *"}),(0,u.jsx)("input",{type:"text",name:"shortName",value:r.shortName,onChange:N,className:"form-input",placeholder:"e.g., STARK",maxLength:"8",required:!0}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maximum 8 characters"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Region *"}),(0,u.jsxs)("select",{name:"region",value:r.region,onChange:N,className:"form-input",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select Region"}),(0,u.jsx)("option",{value:"NA",children:"North America"}),(0,u.jsx)("option",{value:"EU",children:"Europe"}),(0,u.jsx)("option",{value:"APAC",children:"Asia-Pacific"}),(0,u.jsx)("option",{value:"SA",children:"South America"}),(0,u.jsx)("option",{value:"MENA",children:"Middle East & North Africa"}),(0,u.jsx)("option",{value:"OCE",children:"Oceania"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Country"}),(0,u.jsx)("input",{type:"text",name:"country",value:r.country,onChange:N,className:"form-input",placeholder:"e.g., United States"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Current ELO Rating"}),(0,u.jsx)("input",{type:"number",name:"elo_rating",value:r.elo_rating,onChange:N,className:"form-input",placeholder:"2400",min:"0",max:"5000",step:"1"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current team ELO rating (0-5000)"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Total Earnings (USD)"}),(0,u.jsx)("input",{type:"number",name:"earnings",value:r.earnings,onChange:e=>{const{name:t,value:a}=e.target,r="earnings"===t?parseFloat(a):parseInt(a);n((e=>c(c({},e),{},{[t]:r||0})))},className:"form-input",placeholder:"0",min:"0",step:"0.01"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Total prize earnings in USD. Example: 50000.00"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team Status"}),(0,u.jsxs)("select",{name:"status",value:r.status,onChange:N,className:"form-input",children:[(0,u.jsx)("option",{value:"Active",children:"Active"}),(0,u.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"Disbanded",children:"Disbanded"}),(0,u.jsx)("option",{value:"Suspended",children:"Suspended"})]})]}),(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Achievements"}),(0,u.jsx)("textarea",{name:"achievements",value:r.achievements,onChange:N,className:"form-input",rows:"3",placeholder:"Major tournament wins, championships, notable accomplishments..."})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Team Statistics"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Wins"}),(0,u.jsx)("input",{type:"number",name:"wins",value:r.wins,onChange:N,className:"form-input",placeholder:"100",min:"0",step:"1"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Losses"}),(0,u.jsx)("input",{type:"number",name:"losses",value:r.losses,onChange:N,className:"form-input",placeholder:"30",min:"0",step:"1"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Matches Played"}),(0,u.jsx)("input",{type:"number",name:"matches_played",value:r.matches_played,onChange:N,className:"form-input",placeholder:"130",min:"0",step:"1"})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Coach Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Coach Avatar"}),(0,u.jsx)(Wi,{onImageSelect:(e,t)=>{console.log("TeamForm - Coach avatar selected:",null===e||void 0===e?void 0:e.name,t),y(e),n((e=>c(c({},e),{},{coach:c(c({},e.coach),{},{avatar:t||""})})))},currentImage:r.coach.avatar,placeholder:"Upload Coach Avatar",className:"w-full max-w-md"}),r.coach.avatar&&(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("img",{src:r.coach.avatar,alt:"Current coach avatar",className:"w-16 h-16 object-cover rounded",onError:e=>{e.target.style.display="none"}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Coach Name"}),(0,u.jsx)("input",{type:"text",name:"coach_name",value:r.coach.name,onChange:N,className:"form-input",placeholder:"e.g., John 'Coach' Smith"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Coach Country"}),(0,u.jsx)("select",{name:"coach_country",value:r.coach.country,onChange:N,className:"form-input",children:[{value:"US",label:"\ud83c\uddfa\ud83c\uddf8 United States"},{value:"CA",label:"\ud83c\udde8\ud83c\udde6 Canada"},{value:"MX",label:"\ud83c\uddf2\ud83c\uddfd Mexico"},{value:"BR",label:"\ud83c\udde7\ud83c\uddf7 Brazil"},{value:"AR",label:"\ud83c\udde6\ud83c\uddf7 Argentina"},{value:"UK",label:"\ud83c\uddec\ud83c\udde7 United Kingdom"},{value:"DE",label:"\ud83c\udde9\ud83c\uddea Germany"},{value:"FR",label:"\ud83c\uddeb\ud83c\uddf7 France"},{value:"ES",label:"\ud83c\uddea\ud83c\uddf8 Spain"},{value:"IT",label:"\ud83c\uddee\ud83c\uddf9 Italy"},{value:"NL",label:"\ud83c\uddf3\ud83c\uddf1 Netherlands"},{value:"SE",label:"\ud83c\uddf8\ud83c\uddea Sweden"},{value:"DK",label:"\ud83c\udde9\ud83c\uddf0 Denmark"},{value:"FI",label:"\ud83c\uddeb\ud83c\uddee Finland"},{value:"NO",label:"\ud83c\uddf3\ud83c\uddf4 Norway"},{value:"PL",label:"\ud83c\uddf5\ud83c\uddf1 Poland"},{value:"RU",label:"\ud83c\uddf7\ud83c\uddfa Russia"},{value:"UA",label:"\ud83c\uddfa\ud83c\udde6 Ukraine"},{value:"KR",label:"\ud83c\uddf0\ud83c\uddf7 South Korea"},{value:"JP",label:"\ud83c\uddef\ud83c\uddf5 Japan"},{value:"CN",label:"\ud83c\udde8\ud83c\uddf3 China"},{value:"TW",label:"\ud83c\uddf9\ud83c\uddfc Taiwan"},{value:"HK",label:"\ud83c\udded\ud83c\uddf0 Hong Kong"},{value:"SG",label:"\ud83c\uddf8\ud83c\uddec Singapore"},{value:"MY",label:"\ud83c\uddf2\ud83c\uddfe Malaysia"},{value:"TH",label:"\ud83c\uddf9\ud83c\udded Thailand"},{value:"VN",label:"\ud83c\uddfb\ud83c\uddf3 Vietnam"},{value:"PH",label:"\ud83c\uddf5\ud83c\udded Philippines"},{value:"ID",label:"\ud83c\uddee\ud83c\udde9 Indonesia"},{value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"},{value:"AU",label:"\ud83c\udde6\ud83c\uddfa Australia"},{value:"NZ",label:"\ud83c\uddf3\ud83c\uddff New Zealand"},{value:"ZA",label:"\ud83c\uddff\ud83c\udde6 South Africa"},{value:"AE",label:"\ud83c\udde6\ud83c\uddea UAE"},{value:"SA",label:"\ud83c\uddf8\ud83c\udde6 Saudi Arabia"},{value:"INTL",label:"\ud83c\udf0d International"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Social Links"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Twitter"}),(0,u.jsx)("input",{type:"url",name:"social_twitter",value:r.socialLinks.twitter,onChange:N,className:"form-input",placeholder:"https://twitter.com/teamname"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Full Twitter URL"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Instagram"}),(0,u.jsx)("input",{type:"url",name:"social_instagram",value:r.socialLinks.instagram,onChange:N,className:"form-input",placeholder:"https://instagram.com/teamname"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Full Instagram URL"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"YouTube"}),(0,u.jsx)("input",{type:"url",name:"social_youtube",value:r.socialLinks.youtube,onChange:N,className:"form-input",placeholder:"https://youtube.com/c/teamname"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Full YouTube URL"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Website"}),(0,u.jsx)("input",{type:"url",name:"social_website",value:r.socialLinks.website,onChange:N,className:"form-input",placeholder:"https://teamname.com"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Official team website"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Discord"}),(0,u.jsx)("input",{type:"text",name:"social_discord",value:r.socialLinks.discord,onChange:N,className:"form-input",placeholder:"Discord server invite or team handle"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Team Discord server"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"TikTok"}),(0,u.jsx)("input",{type:"url",name:"social_tiktok",value:r.socialLinks.tiktok,onChange:N,className:"form-input",placeholder:"https://tiktok.com/teamname"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Team TikTok account"})]})]}),(r.socialLinks.twitter||r.socialLinks.instagram||r.socialLinks.youtube||r.socialLinks.website||r.socialLinks.discord||r.socialLinks.tiktok)&&(0,u.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,u.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Social Links Preview:"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[r.socialLinks.twitter&&(0,u.jsx)("a",{href:r.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 text-sm",children:"Twitter"}),r.socialLinks.instagram&&(0,u.jsx)("a",{href:r.socialLinks.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-pink-500 hover:text-pink-700 text-sm",children:"Instagram"}),r.socialLinks.youtube&&(0,u.jsx)("a",{href:r.socialLinks.youtube,target:"_blank",rel:"noopener noreferrer",className:"text-red-500 hover:text-red-700 text-sm",children:"YouTube"}),r.socialLinks.website&&(0,u.jsx)("a",{href:r.socialLinks.website,target:"_blank",rel:"noopener noreferrer",className:"text-green-500 hover:text-green-700 text-sm",children:"Website"}),r.socialLinks.discord&&(0,u.jsxs)("span",{className:"text-indigo-500 text-sm",children:["Discord: ",r.socialLinks.discord]}),r.socialLinks.tiktok&&(0,u.jsx)("a",{href:r.socialLinks.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:text-purple-700 text-sm",children:"TikTok"})]})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,u.jsx)("button",{type:"button",onClick:()=>a&&a("admin-dashboard"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),w?"Updating...":"Creating..."]}):w?"Update Team":"Create Team"})]})]})]})};const ro=function(e){let{playerId:t,navigateTo:a}=e;const[r,n]=(0,s.useState)({name:"",username:"",team:"",role:"",region:"",country:"US",age:"",earnings:"",avatar:"",elo_rating:1e3,status:"active",socialLinks:{twitter:"",twitch:"",youtube:"",instagram:"",discord:"",tiktok:""}}),[l,i]=(0,s.useState)([]),[o,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[p,v]=(0,s.useState)(null),{api:y}=b(),f=Boolean(t);(0,s.useEffect)((()=>{(async()=>{if(f)try{var e;d(!0);const a=await y.get("/players/".concat(t)),r=a.data||a;console.log(" PlayerForm - Fetched player data:",r),n({name:r.real_name||r.name||"",username:r.username||r.gamer_tag||"",team:r.team_id||(null===(e=r.team)||void 0===e?void 0:e.id)||"",role:r.role||"",region:r.region||"",country:r.country||"US",age:r.age||"",earnings:r.earnings||"",avatar:r.avatar_url||r.avatar||"",elo_rating:r.elo_rating||r.eloRating||1e3,status:r.status||"active",socialLinks:r.social_media||r.social_links||r.socialLinks||{twitter:"",twitch:"",youtube:"",instagram:"",discord:"",tiktok:""}})}catch(h){console.error("Error fetching player:",h),alert("Error loading player data: "+h.message)}finally{d(!1)}})(),(async()=>{try{const e=await y.get("/admin/teams");i(e.data||e||[])}catch(h){console.error("Error fetching teams:",h)}})()}),[t,f]);const j=e=>{const{name:t,value:a}=e.target;if(t.startsWith("social_")){const e=t.replace("social_","");n((t=>c(c({},t),{},{socialLinks:c(c({},t.socialLinks),{},{[e]:a})})))}else n((e=>c(c({},e),{},{[t]:a})))};return o?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading player data..."})]})}):(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:f?"Edit Player":"Create New Player"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:f?"Update player information and team assignment":"Add a new player to the database"})]}),(0,u.jsx)("button",{onClick:()=>a&&a("admin-dashboard"),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"\u2190 Back to Dashboard"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!m)if(console.log(" PlayerForm - Starting save process..."),r.name.trim())if(r.username.trim())if(r.role){x(!0),g(null);try{let e=t;const n={username:r.username.trim(),real_name:r.name.trim(),team_id:r.team?parseInt(r.team):null,role:r.role,region:r.region,country:r.country,age:r.age?parseInt(r.age):null,earnings:r.earnings?parseFloat(r.earnings):null,elo_rating:r.elo_rating?parseInt(r.elo_rating):1e3,status:r.status||"active",social_media:r.socialLinks};if(console.log(" PlayerForm - Submit data prepared:",n),t)console.log(" Editing existing player with ID:",t),await y.put("/admin/players/".concat(t),n),console.log(" Player data updated successfully");else{var s;console.log(" Creating new player...");const t=await y.post("/admin/players",n);e=(null===(s=t.data)||void 0===s?void 0:s.id)||t.id,console.log(" Player created with ID:",e)}if(console.log(" Checking avatar upload conditions:",{avatarFile:!!p,avatarFileName:null===p||void 0===p?void 0:p.name,currentPlayerId:e,shouldUpload:!(!p||!e)}),p&&e){console.log(" Uploading new avatar for player:",e);try{const t=await(async(e,t)=>{if(!e)return null;try{console.log(" PlayerForm - Uploading avatar for player",t,":",e.name);const a=new FormData;a.append("avatar",e);const r="/upload/player/".concat(t,"/avatar");console.log(" PlayerForm - Upload endpoint:",r);const s=await y.postFile(r,a);console.log(" PlayerForm - Avatar upload response:",s);const n=s.data||s;let l;if(l=n.data?n.data.avatar_url||n.data.avatar:n.avatar_url||n.url||n.avatar,console.log(" PlayerForm - Extracted avatar URL:",l),!l)throw console.error(" PlayerForm - No avatar URL found in response:",n),new Error("No avatar URL returned from upload");return l}catch(h){throw console.error(" PlayerForm - Error uploading avatar:",h),h}})(p,e);console.log(" Avatar uploaded successfully:",t);const a=c(c({},n),{},{avatar:t});console.log(" Updating player with avatar URL:",a.avatar),await y.put("/admin/players/".concat(e),a),console.log(" Player updated with avatar URL")}catch(o){console.error(" Avatar upload failed:",o),alert(" Player saved but avatar upload failed. Please try uploading the avatar again.")}}else console.log(" Skipping avatar upload:",{reason:p?"No player ID available":"No avatar file selected"});alert(" Player saved successfully!"),a&&a("admin-dashboard")}catch(h){var l,i;if(console.error(" PlayerForm - Error saving player:",h),h.message.includes("500")?g(" BACKEND ISSUE: Server error. Please check backend player validation and database constraints."):h.message.includes("422")?h.message.includes("role")&&h.message.includes("invalid")?g(" BACKEND ISSUE: Invalid role validation. Backend expects specific role values."):h.message.includes("team_id")?g(" BACKEND ISSUE: Team assignment failed. Check team_id foreign key constraints."):g(" BACKEND ISSUE: Validation error. Check backend validation rules for player fields."):h.message.includes("404")?g(" BACKEND ISSUE: Player API endpoint not found. Implement /api/admin/players routes."):g("Failed to save player: ".concat(h.message)),console.log(" Form data preserved for retry"),null!==(l=h.response)&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&i.data){const t=h.response.data.data;n((e=>c(c(c({},e),t),{},{socialLinks:c(c({},e.socialLinks),t.social_media||t.socialLinks||{})})))}}finally{x(!1)}}else g("Player role is required");else g("Username is required");else g("Player name is required")},className:"space-y-6",children:[h&&(0,u.jsxs)("div",{className:"border px-4 py-3 rounded mb-4 ".concat(h.includes("BACKEND ISSUE")?"bg-red-100 border-red-400 text-red-700":"bg-yellow-100 border-yellow-400 text-yellow-700"),children:[h,h.includes("BACKEND ISSUE")&&(0,u.jsxs)("div",{className:"mt-2 text-sm",children:[(0,u.jsx)("strong",{children:"For Backend Developer:"})," Please check Laravel player model validation and API routes."]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"md:col-span-2",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Player Avatar"}),(0,u.jsx)(Wi,{onImageSelect:(e,t)=>{console.log("\ud83d\uddbc\ufe0f PlayerForm - Avatar selected:",null===e||void 0===e?void 0:e.name,t),v(e),e&&n((e=>c(c({},e),{},{avatar:""})))},currentImage:r.avatar,placeholder:"Upload Player Avatar",className:"w-full max-w-md"}),r.avatar&&(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("img",{src:r.avatar,alt:"Current avatar",className:"w-16 h-16 object-cover rounded",onError:e=>{e.target.style.display="none"}})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Player Name *"}),(0,u.jsx)("input",{type:"text",name:"name",value:r.name,onChange:j,className:"form-input",placeholder:"e.g., Tony Stark",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Username/Gamertag *"}),(0,u.jsx)("input",{type:"text",name:"username",value:r.username,onChange:j,className:"form-input",placeholder:"e.g., IronMan_Tony",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Age"}),(0,u.jsx)("input",{type:"number",name:"age",value:r.age,onChange:j,className:"form-input",placeholder:"e.g., 25",min:"16",max:"50"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Earnings (USD)"}),(0,u.jsx)("input",{type:"number",name:"earnings",value:r.earnings,onChange:j,className:"form-input",placeholder:"e.g., 25000.00",min:"0",step:"0.01"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Total prize earnings in USD"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"ELO Rating"}),(0,u.jsx)("input",{type:"number",name:"elo_rating",value:r.elo_rating,onChange:j,className:"form-input",placeholder:"e.g., 2500",min:"0",max:"5000",step:"1"}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current ELO rating (0-5000)"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Status"}),(0,u.jsxs)("select",{name:"status",value:r.status,onChange:j,className:"form-input",children:[(0,u.jsx)("option",{value:"active",children:"Active"}),(0,u.jsx)("option",{value:"inactive",children:"Inactive"}),(0,u.jsx)("option",{value:"retired",children:"Retired"}),(0,u.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Team Assignment"}),(0,u.jsxs)("select",{name:"team",value:r.team,onChange:j,className:"form-input",children:[(0,u.jsx)("option",{value:"",children:" Free Agent (No Team)"}),l.map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (",e.short_name||e.shortName,")"]},e.id)))]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r.team?"Player will be assigned to selected team":"Player will be listed as Free Agent"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Role *"}),(0,u.jsxs)("select",{name:"role",value:r.role,onChange:j,className:"form-input",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select Role"}),[{value:"Duelist",label:"Duelist (DPS)",description:"Damage dealers"},{value:"Vanguard",label:"Vanguard (Tank)",description:"Front-line defenders"},{value:"Strategist",label:"Strategist (Support)",description:"Team support and healing"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Region *"}),(0,u.jsxs)("select",{name:"region",value:r.region,onChange:j,className:"form-input",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select Region"}),(0,u.jsx)("option",{value:"NA",children:"North America"}),(0,u.jsx)("option",{value:"EU",children:"Europe"}),(0,u.jsx)("option",{value:"APAC",children:"Asia-Pacific"}),(0,u.jsx)("option",{value:"SA",children:"South America"}),(0,u.jsx)("option",{value:"OCE",children:"Oceania"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Country *"}),(0,u.jsxs)("select",{name:"country",value:r.country,onChange:j,className:"form-input",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select Country"}),[{value:"US",label:"\ud83c\uddfa\ud83c\uddf8 United States"},{value:"CA",label:"\ud83c\udde8\ud83c\udde6 Canada"},{value:"MX",label:"\ud83c\uddf2\ud83c\uddfd Mexico"},{value:"BR",label:"\ud83c\udde7\ud83c\uddf7 Brazil"},{value:"AR",label:"\ud83c\udde6\ud83c\uddf7 Argentina"},{value:"CL",label:"\ud83c\udde8\ud83c\uddf1 Chile"},{value:"CO",label:"\ud83c\udde8\ud83c\uddf4 Colombia"},{value:"PE",label:"\ud83c\uddf5\ud83c\uddea Peru"},{value:"UY",label:"\ud83c\uddfa\ud83c\uddfe Uruguay"},{value:"UK",label:"\ud83c\uddec\ud83c\udde7 United Kingdom"},{value:"DE",label:"\ud83c\udde9\ud83c\uddea Germany"},{value:"FR",label:"\ud83c\uddeb\ud83c\uddf7 France"},{value:"ES",label:"\ud83c\uddea\ud83c\uddf8 Spain"},{value:"IT",label:"\ud83c\uddee\ud83c\uddf9 Italy"},{value:"NL",label:"\ud83c\uddf3\ud83c\uddf1 Netherlands"},{value:"BE",label:"\ud83c\udde7\ud83c\uddea Belgium"},{value:"CH",label:"\ud83c\udde8\ud83c\udded Switzerland"},{value:"AT",label:"\ud83c\udde6\ud83c\uddf9 Austria"},{value:"PL",label:"\ud83c\uddf5\ud83c\uddf1 Poland"},{value:"CZ",label:"\ud83c\udde8\ud83c\uddff Czech Republic"},{value:"HU",label:"\ud83c\udded\ud83c\uddfa Hungary"},{value:"RO",label:"\ud83c\uddf7\ud83c\uddf4 Romania"},{value:"SE",label:"\ud83c\uddf8\ud83c\uddea Sweden"},{value:"NO",label:"\ud83c\uddf3\ud83c\uddf4 Norway"},{value:"DK",label:"\ud83c\udde9\ud83c\uddf0 Denmark"},{value:"FI",label:"\ud83c\uddeb\ud83c\uddee Finland"},{value:"IS",label:"\ud83c\uddee\ud83c\uddf8 Iceland"},{value:"IE",label:"\ud83c\uddee\ud83c\uddea Ireland"},{value:"PT",label:"\ud83c\uddf5\ud83c\uddf9 Portugal"},{value:"GR",label:"\ud83c\uddec\ud83c\uddf7 Greece"},{value:"TR",label:"\ud83c\uddf9\ud83c\uddf7 Turkey"},{value:"RU",label:"\ud83c\uddf7\ud83c\uddfa Russia"},{value:"UA",label:"\ud83c\uddfa\ud83c\udde6 Ukraine"},{value:"KR",label:"\ud83c\uddf0\ud83c\uddf7 South Korea"},{value:"JP",label:"\ud83c\uddef\ud83c\uddf5 Japan"},{value:"CN",label:"\ud83c\udde8\ud83c\uddf3 China"},{value:"TW",label:"\ud83c\uddf9\ud83c\uddfc Taiwan"},{value:"HK",label:"\ud83c\udded\ud83c\uddf0 Hong Kong"},{value:"SG",label:"\ud83c\uddf8\ud83c\uddec Singapore"},{value:"MY",label:"\ud83c\uddf2\ud83c\uddfe Malaysia"},{value:"TH",label:"\ud83c\uddf9\ud83c\udded Thailand"},{value:"VN",label:"\ud83c\uddfb\ud83c\uddf3 Vietnam"},{value:"PH",label:"\ud83c\uddf5\ud83c\udded Philippines"},{value:"ID",label:"\ud83c\uddee\ud83c\udde9 Indonesia"},{value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"},{value:"PK",label:"\ud83c\uddf5\ud83c\uddf0 Pakistan"},{value:"BD",label:"\ud83c\udde7\ud83c\udde9 Bangladesh"},{value:"LK",label:"\ud83c\uddf1\ud83c\uddf0 Sri Lanka"},{value:"AU",label:"\ud83c\udde6\ud83c\uddfa Australia"},{value:"NZ",label:"\ud83c\uddf3\ud83c\uddff New Zealand"},{value:"ZA",label:"\ud83c\uddff\ud83c\udde6 South Africa"},{value:"EG",label:"\ud83c\uddea\ud83c\uddec Egypt"},{value:"NG",label:"\ud83c\uddf3\ud83c\uddec Nigeria"},{value:"KE",label:"\ud83c\uddf0\ud83c\uddea Kenya"},{value:"MA",label:"\ud83c\uddf2\ud83c\udde6 Morocco"},{value:"TN",label:"\ud83c\uddf9\ud83c\uddf3 Tunisia"},{value:"DZ",label:"\ud83c\udde9\ud83c\uddff Algeria"},{value:"IL",label:"\ud83c\uddee\ud83c\uddf1 Israel"},{value:"SA",label:"\ud83c\uddf8\ud83c\udde6 Saudi Arabia"},{value:"AE",label:"\ud83c\udde6\ud83c\uddea UAE"},{value:"QA",label:"\ud83c\uddf6\ud83c\udde6 Qatar"},{value:"KW",label:"\ud83c\uddf0\ud83c\uddfc Kuwait"},{value:"BH",label:"\ud83c\udde7\ud83c\udded Bahrain"},{value:"OM",label:"\ud83c\uddf4\ud83c\uddf2 Oman"},{value:"JO",label:"\ud83c\uddef\ud83c\uddf4 Jordan"},{value:"LB",label:"\ud83c\uddf1\ud83c\udde7 Lebanon"},{value:"IQ",label:"\ud83c\uddee\ud83c\uddf6 Iraq"},{value:"IR",label:"\ud83c\uddee\ud83c\uddf7 Iran"},{value:"INTL",label:" International"}].map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]})]})]}),(0,u.jsxs)("div",{className:"card p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Social Links"}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Twitter"}),(0,u.jsx)("input",{type:"url",name:"social_twitter",value:r.socialLinks.twitter,onChange:j,className:"form-input",placeholder:"https://twitter.com/username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Twitch"}),(0,u.jsx)("input",{type:"url",name:"social_twitch",value:r.socialLinks.twitch,onChange:j,className:"form-input",placeholder:"https://twitch.tv/username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"YouTube"}),(0,u.jsx)("input",{type:"url",name:"social_youtube",value:r.socialLinks.youtube,onChange:j,className:"form-input",placeholder:"https://youtube.com/c/username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Instagram"}),(0,u.jsx)("input",{type:"url",name:"social_instagram",value:r.socialLinks.instagram,onChange:j,className:"form-input",placeholder:"https://instagram.com/username"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Discord"}),(0,u.jsx)("input",{type:"text",name:"social_discord",value:r.socialLinks.discord,onChange:j,className:"form-input",placeholder:"Discord username or invite"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"TikTok"}),(0,u.jsx)("input",{type:"url",name:"social_tiktok",value:r.socialLinks.tiktok,onChange:j,className:"form-input",placeholder:"https://tiktok.com/username"})]})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,u.jsx)("button",{type:"button",onClick:()=>a&&a("admin-dashboard"),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?(0,u.jsxs)("span",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),f?"Updating...":"Creating..."]}):f?"Update Player":"Create Player"})]})]})]})};const so=function(e){let{navigateTo:t,userId:a=null}=e;const[r,n]=(0,s.useState)({name:"",email:"",password:"",roles:["user"],avatar:null,status:"active"}),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),{api:m}=b(),x=!!a;(0,s.useEffect)((()=>{x&&h()}),[a]);const h=async()=>{try{i(!0);const e=await m.get("/admin/users/".concat(a)),t=e.data||e;n(c(c({},t),{},{password:"",roles:t.roles||["user"]}))}catch(e){console.error("Error fetching user:",e),alert("Error loading user data. Please try again."),t("admin-dashboard")}finally{i(!1)}},g=(e,t)=>{n((a=>c(c({},a),{},{[e]:t})))};return l?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,u.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading user data..."})]})}):(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:x?"Edit User":"Create New User"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:x?"Update user information and permissions":"Add a new user to the platform"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0);try{if(0===r.roles.length)return void alert("Please select at least one role");const e=c({},r);let s;x&&!e.password&&delete e.password,e.roles&&e.roles.length>0&&(e.role=e.roles[0],delete e.roles),x?(e._method="PUT",s=await m.post("/admin/users/".concat(a),e)):s=await m.post("/admin/users",e),alert("User ".concat(x?"updated":"created"," successfully!")),t("admin-dashboard")}catch(s){console.error("Error saving user:",s),alert("Error ".concat(x?"updating":"creating"," user: ").concat(s.message))}finally{d(!1)}},className:"space-y-6",children:[(0,u.jsx)("div",{className:"card p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Basic Information"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Name *"}),(0,u.jsx)("input",{type:"text",name:"name",value:r.name,onChange:e=>g("name",e.target.value),className:"form-input",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Email *"}),(0,u.jsx)("input",{type:"email",name:"email",value:r.email,onChange:e=>g("email",e.target.value),className:"form-input",required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:["Password ",x&&"(leave blank to keep current)"]}),(0,u.jsx)("input",{type:"password",name:"password",value:r.password,onChange:e=>g("password",e.target.value),className:"form-input",required:!x})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,u.jsx)("select",{name:"status",value:r.status,onChange:e=>g("status",e.target.value),className:"form-input",children:["active","inactive","banned"].map((e=>(0,u.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})]})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Roles & Appearance"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"User Roles *"}),(0,u.jsx)("div",{className:"space-y-3",children:[{id:"admin",label:"Administrator",description:"Full access to all features"},{id:"moderator",label:"Moderator",description:"Can moderate content and users"},{id:"user",label:"Regular User",description:"Standard user account"}].map((e=>(0,u.jsxs)("div",{className:"flex items-start",children:[(0,u.jsx)("input",{type:"checkbox",id:"role-".concat(e.id),checked:r.roles.includes(e.id),onChange:()=>(e=>{n((t=>{const a=[...t.roles];return a.includes(e)?c(c({},t),{},{roles:a.filter((t=>t!==e))}):c(c({},t),{},{roles:[...a,e]})}))})(e.id),className:"mt-1 mr-3"}),(0,u.jsxs)("label",{htmlFor:"role-".concat(e.id),className:"cursor-pointer",children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),(0,u.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]},e.id)))}),0===r.roles.length&&(0,u.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:"Please select at least one role"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Avatar"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Users select their hero avatar from their profile settings page. Admin cannot set user avatars."})]})]})]})}),(0,u.jsxs)("div",{className:"flex justify-between",children:[(0,u.jsx)("button",{type:"button",onClick:()=>t("admin-dashboard"),className:"btn btn-secondary",disabled:o,children:"Cancel"}),(0,u.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:o||0===r.roles.length,children:o?"Saving...":x?"Update User":"Create User"})]})]})]})};const no=function(){const{api:e}=b(),[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),[j,k]=(0,s.useState)(null),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)({targetCategoryId:"",action:"reassign"}),[C,E]=(0,s.useState)({title:"",content:"",excerpt:"",category_id:null,status:"draft",featured_image:"",tags:"",author:"",published_at:"",scheduled_at:"",is_featured:!1,allow_comments:!0,seo_title:"",seo_description:"",reading_time:0}),[T,A]=(0,s.useState)(!1),[M,P]=(0,s.useState)(!1),[R,I]=(0,s.useState)(null),[D,L]=(0,s.useState)([]),[U,z]=(0,s.useState)({}),[O,F]=(0,s.useState)([]),[B,W]=(0,s.useState)(!1),[H,V]=(0,s.useState)(!1),[q,G]=(0,s.useState)({format:"csv",dateRange:"all",includeComments:!0,includeAnalytics:!0}),[Y,Z]=(0,s.useState)({name:"",description:"",color:"#3B82F6"}),[K,J]=(0,s.useState)({search:"",category:"all",status:"all"}),[Q,X]=(0,s.useState)(new Set),[$,ee]=(0,s.useState)(!1);(0,s.useEffect)((()=>{se(),ne()}),[]),(0,s.useEffect)((()=>{t.length>0&&(te(),ae())}),[t]);const te=async()=>{try{var t;const a=await e.get("/admin/news-moderation"),r=(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)||(null===a||void 0===a?void 0:a.data)||[],s=Array.isArray(r)?r.filter((e=>e.featured)):[];F(s)}catch(a){console.warn("Could not load featured articles:",a),F([])}},ae=async()=>{try{const e={};t.forEach((t=>{e[t.id]={views:Math.floor(1e3*Math.random())+50,comments:Math.floor(20*Math.random()),engagement:Math.floor(100*Math.random())+10}})),z(e)}catch(e){console.warn("Could not load article analytics:",e),z({})}},re=async t=>{try{var a,r,s;let l;try{l=await e.get("/admin/news-moderation/".concat(t,"/comments"))}catch(n){l=await e.get("/news/".concat(t,"/comments"))}const i=(null===(a=l)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.data)||(null===(s=l)||void 0===s?void 0:s.data)||[];L(Array.isArray(i)?i:[])}catch(l){console.warn("Could not load comments:",l),L([])}},se=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{var s;i(!0);const n=await e.get("/admin/news-moderation?page=".concat(t,"&limit=").concat(r)),l=(null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.data)||(null===n||void 0===n?void 0:n.data)||n||[];a(Array.isArray(l)?l:[]),d(null)}catch(o){var n,l;const e=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Failed to load news";d(e),console.error("Error fetching news:",o),a([])}finally{i(!1)}},ne=async()=>{try{var t;const a=await e.get("/admin/news-moderation/categories"),r=(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)||(null===a||void 0===a?void 0:a.data)||a||[];n(Array.isArray(r)?r:[])}catch(s){var a,r;console.error("Error fetching categories:",s);const e=(null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to load categories";console.warn("Categories fetch error:",e),n([])}},le=(0,s.useMemo)((()=>{let e=[...t];if(K.search.trim()){const t=K.search.toLowerCase();e=e.filter((e=>{var a,r,s;return(null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.content)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.excerpt)||void 0===s?void 0:s.toLowerCase().includes(t))}))}return"all"!==K.category&&(e=e.filter((e=>{var t;return(null===(t=e.category_id)||void 0===t?void 0:t.toString())===K.category}))),"all"!==K.status&&(e=e.filter((e=>e.status===K.status))),e.sort(((e,t)=>new Date(t.created_at||0)-new Date(e.created_at||0)))}),[t,K]),ie=()=>{E({title:"",content:"",excerpt:"",category_id:null,status:"draft",featured_image:"",tags:"",author:"",published_at:""}),v(null),x(!0)},oe=async(t,a)=>{try{var r;const n=await e.put("/admin/news-moderation/".concat(t),{featured:!a});var s;if(!1===(null===(r=n.data)||void 0===r?void 0:r.success))throw new Error((null===(s=n.data)||void 0===s?void 0:s.message)||"Feature toggle failed");await se(),await te(),alert("Article ".concat(a?"unfeatured":"featured"," successfully!"))}catch(o){console.error("Error toggling featured status:",o),alert("Failed to update featured status")}},de=async(t,a)=>{try{var r;const n=await e.post("/admin/comments/".concat(t,"/").concat(a));var s;if(!1===(null===(r=n.data)||void 0===r?void 0:r.success))throw new Error((null===(s=n.data)||void 0===s?void 0:s.message)||"Comment action failed");await re(R.id),alert("Comment ".concat(a,"ed successfully!"))}catch(o){console.error("Error performing comment action:",o),alert("Failed to perform comment action")}},ce=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var s;const l={reassign_to_category_id:a,delete_articles:r},i=await e.delete("/admin/news-moderation/categories/".concat(t),{data:l});var n;if(!1===(null===(s=i.data)||void 0===s?void 0:s.success))throw new Error((null===(n=i.data)||void 0===n?void 0:n.message)||"Delete failed");await ne(),await se(),alert("Category deleted successfully!")}catch(o){var l,i;console.error("Error deleting category:",o);const t=(null===(l=o.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||o.message||"Error deleting category";alert(t)}},me=()=>{x(!1),g(!1),N(!1),v(null),f(null),k(null),S({targetCategoryId:"",action:"reassign"})},ue=async t=>{if(0===Q.size)return;const a='Are you sure you want to change status to "'.concat(t,'" for ').concat(Q.size," news articles?");if(window.confirm(a))try{var r;const a=await e.post("/admin/news-moderation/bulk-update",{news_ids:Array.from(Q),status:t});var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Bulk update failed");await se(),X(new Set),ee(!1),alert("".concat(Q.size," articles updated successfully!"))}catch(o){var n,l;console.error("Error in bulk status update:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Bulk update failed";alert(t)}};return l?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map(((e,t)=>(0,u.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},t)))})}):(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"News Management"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage news articles and content"})]}),(0,u.jsxs)("div",{className:"flex space-x-3",children:[(0,u.jsx)("button",{onClick:()=>{Z({name:"",description:"",color:"#3B82F6"}),f(null),g(!0)},className:"btn btn-secondary",children:"Manage Categories"}),(0,u.jsx)("button",{onClick:()=>W(!0),className:"btn btn-info",children:"Manage Featured"}),(0,u.jsx)("button",{onClick:()=>V(!0),className:"btn btn-outline-secondary",children:"Export Data"}),(0,u.jsx)("button",{onClick:ie,className:"btn btn-primary",children:"Create News Article"})]})]}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Search Articles"}),(0,u.jsx)("input",{type:"text",placeholder:"Search by title or content...",value:K.search,onChange:e=>J(c(c({},K),{},{search:e.target.value})),className:"form-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Category"}),(0,u.jsxs)("select",{value:K.category,onChange:e=>J(c(c({},K),{},{category:e.target.value})),className:"form-input",children:[(0,u.jsx)("option",{value:"all",children:"All Categories"}),r.map((e=>(0,u.jsx)("option",{value:e.id.toString(),children:e.name},e.id)))]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,u.jsxs)("select",{value:K.status,onChange:e=>J(c(c({},K),{},{status:e.target.value})),className:"form-input",children:[(0,u.jsx)("option",{value:"all",children:"All Status"}),(0,u.jsx)("option",{value:"published",children:"Published"}),(0,u.jsx)("option",{value:"draft",children:"Draft"})]})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsx)("button",{onClick:()=>J({search:"",category:"all",status:"all"}),className:"btn btn-secondary w-full",children:"Clear Filters"})})]})}),$&&(0,u.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[Q.size," articles selected"]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>ue("published"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:"Publish"}),(0,u.jsx)("button",{onClick:()=>ue("draft"),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm",children:"Set as Draft"}),(0,u.jsx)("button",{onClick:async()=>{if(0===Q.size)return;const t="Are you sure you want to delete ".concat(Q.size," news articles? This action cannot be undone.");if(window.confirm(t))try{var a;const t=await e.post("/admin/news-moderation/bulk-delete",{news_ids:Array.from(Q)});var r;if(!1===(null===(a=t.data)||void 0===a?void 0:a.success))throw new Error((null===(r=t.data)||void 0===r?void 0:r.message)||"Bulk delete failed");await se(),X(new Set),ee(!1),alert("".concat(Q.size," articles deleted successfully!"))}catch(o){var s,n;console.error("Error in bulk delete:",o);const t=(null===(s=o.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||o.message||"Bulk delete failed";alert(t)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete"})]})]}),(0,u.jsx)("button",{onClick:()=>{X(new Set),ee(!1)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,u.jsxs)("div",{className:"space-y-4",children:[le.length>0&&(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:(0,u.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,u.jsx)("input",{type:"checkbox",checked:Q.size===le.length&&le.length>0,onChange:()=>{Q.size===le.length?(X(new Set),ee(!1)):(X(new Set(le.map((e=>e.id)))),ee(!0))},className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:["Select all ",le.length," articles"]})]})}),le.map((t=>{var a,r,s,n,l,i,d;return(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)("input",{type:"checkbox",checked:Q.has(t.id),onChange:()=>(e=>{const t=new Set(Q);t.has(e)?t.delete(e):t.add(e),X(t),ee(t.size>0)})(t.id),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t.title}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4 line-clamp-2",children:t.excerpt||(null===(a=t.content)||void 0===a?void 0:a.substring(0,200))+"..."}),(0,u.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[null!==(r=t.author)&&void 0!==r&&r.avatar?(0,u.jsx)("img",{src:t.author.avatar,alt:t.author.name,className:"w-6 h-6 rounded-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<div class="w-6 h-6 rounded-full bg-white border border-gray-300 flex items-center justify-center text-gray-600 font-bold text-xs">?</div>'}}):(0,u.jsx)("div",{className:"w-6 h-6 rounded-full bg-white border border-gray-300 flex items-center justify-center text-gray-600 font-bold text-xs",children:"?"}),(0,u.jsxs)("span",{children:["By ",(null===(s=t.author)||void 0===s?void 0:s.name)||"Admin"]})]}),(0,u.jsxs)("span",{children:["\ud83d\udcac ",t.comments_count||(null===(n=t.comments)||void 0===n?void 0:n.length)||0," comments"]}),(0,u.jsxs)("span",{children:["\ud83d\udcc5 ",t.published_at||null!==(l=t.meta)&&void 0!==l&&l.published_at?new Date(t.published_at||(null===(i=t.meta)||void 0===i?void 0:i.published_at)).toLocaleDateString():t.created_at?new Date(t.created_at).toLocaleDateString():"Not published"]}),t.reading_time&&(0,u.jsxs)("span",{children:["\ud83d\udd52 ",t.reading_time," min read"]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[t.featured&&(0,u.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 text-xs rounded-full font-medium",children:"\u2b50 Featured"}),t.scheduled_at&&(0,u.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 text-xs rounded-full font-medium",children:"\ud83d\udd52 Scheduled"}),(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("published"===t.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"scheduled"===t.status?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400"),children:t.status||"draft"})]})]}),t.category&&(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,u.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Category:"}),(0,u.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-sm rounded",children:t.category.name||t.category})]}),t.tags&&Array.isArray(t.tags)&&t.tags.length>0&&(0,u.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[t.tags.slice(0,3).map(((e,t)=>(0,u.jsxs)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400 text-xs rounded",children:["#",e]},t))),t.tags.length>3&&(0,u.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded",children:["+",t.tags.length-3," more"]})]})]})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2 ml-4",children:[(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{v(e),E({title:e.title||"",content:e.content||"",excerpt:e.excerpt||"",category_id:e.category_id||null,status:e.status||"draft",featured_image:e.featured_image||"",tags:Array.isArray(e.tags)?e.tags.join(", "):e.tags||"",author:e.author||"",published_at:e.published_at||"",scheduled_at:e.scheduled_at||"",is_featured:e.featured||!1,allow_comments:!1!==e.allow_comments,seo_title:e.seo_title||"",seo_description:e.seo_description||"",reading_time:e.reading_time||0}),x(!0)})(t),className:"btn btn-outline-primary text-sm",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>oe(t.id,t.featured),className:"btn btn-outline-info text-sm",children:t.featured?"Unfeature":"Feature"}),(0,u.jsx)("button",{className:"btn btn-outline-secondary text-sm",children:"View Analytics"})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsxs)("button",{onClick:()=>(e=>{I(e),re(e.id),P(!0)})(t),className:"btn btn-outline-warning text-sm",children:["Comments (",t.comments_count||(null===(d=t.comments)||void 0===d?void 0:d.length)||0,")"]}),(0,u.jsx)("button",{onClick:()=>{I(t),A(!0)},className:"btn btn-outline-info text-sm",children:"Schedule"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{if(window.confirm('Are you sure you want to delete "'.concat(a,'"?')))try{var r;const a=await e.delete("/admin/news-moderation/".concat(t));var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Delete failed");await se(),alert("News deleted successfully!")}catch(o){var n,l;console.error("Error deleting news:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Error deleting news";alert(t)}})(t.id,t.title),className:"btn btn-outline-danger text-sm",children:"Delete"})]})]})]})},t.id)}))]}),0===le.length&&(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcf0"}),(0,u.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:0===t.length?"No News Articles":"No Articles Found"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:0===t.length?"Get started by creating your first news article.":"Try adjusting your filters to find more articles."}),0===t.length&&(0,u.jsx)("button",{onClick:ie,className:"btn btn-primary",children:"Create First Article"})]}),m&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:p?"Edit Article":"Create New Article"}),(0,u.jsx)("button",{onClick:me,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)(Ki,{newsId:null===p||void 0===p?void 0:p.id,navigateTo:e=>{x(!1),se()}})})]})}),h&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Manage Categories"}),(0,u.jsx)("button",{onClick:me,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsx)("div",{className:"space-y-4 mb-6 max-h-60 overflow-y-auto",children:r.map((e=>{const a=t.filter((t=>{var a;return(null===(a=t.category_id)||void 0===a?void 0:a.toString())===e.id.toString()})).length;return(0,u.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:e.color}}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.name,a>0&&(0,u.jsxs)("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded-full",children:[a," articles"]})]}),e.description&&(0,u.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{f(e),Z({name:e.name||"",description:e.description||"",color:e.color||"#3B82F6"}),g(!0)})(e),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async(e,a)=>{try{const r=t.filter((t=>{var a;return(null===(a=t.category_id)||void 0===a?void 0:a.toString())===e.toString()}));if(r.length>0)return k({id:e,name:a,articleCount:r.length}),S({targetCategoryId:"",action:"reassign"}),void N(!0);window.confirm('Are you sure you want to delete category "'.concat(a,'"?'))&&await ce(e)}catch(o){var r,s;console.error("Error preparing category deletion:",o);const t=(null===(r=o.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||o.message||"Error deleting category";alert(t)}})(e.id,e.name),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},e.id)}))}),(0,u.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),Y.name.trim())try{if(y){var a;const t=await e.put("/admin/news-moderation/categories/".concat(y.id),Y);var r;if(!1===(null===(a=t.data)||void 0===a?void 0:a.success))throw new Error((null===(r=t.data)||void 0===r?void 0:r.message)||"Update failed");alert("Category updated successfully!")}else{var s;const t=await e.post("/admin/news-moderation/categories",Y);var n;if(!1===(null===(s=t.data)||void 0===s?void 0:s.success))throw new Error((null===(n=t.data)||void 0===n?void 0:n.message)||"Creation failed");alert("Category created successfully!")}await ne(),g(!1)}catch(o){var l,i;console.error("Error submitting category:",o);const t=(null===(l=o.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||o.message||"Error ".concat(y?"updating":"creating"," category");alert(t)}else alert("Please enter a category name")},className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Name *"}),(0,u.jsx)("input",{type:"text",required:!0,value:Y.name,onChange:e=>Z(c(c({},Y),{},{name:e.target.value})),className:"form-input",placeholder:"Enter category name"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,u.jsx)("input",{type:"text",value:Y.description,onChange:e=>Z(c(c({},Y),{},{description:e.target.value})),className:"form-input",placeholder:"Category description"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),(0,u.jsx)("input",{type:"color",value:Y.color,onChange:e=>Z(c(c({},Y),{},{color:e.target.value})),className:"form-input h-12"})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,u.jsx)("button",{type:"button",onClick:me,className:"btn btn-secondary",children:"Close"}),(0,u.jsx)("button",{type:"submit",className:"btn btn-primary",children:y?"Update Category":"Add Category"})]})]})]})]})}),w&&j&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Delete Category: ",j.name]}),(0,u.jsx)("button",{onClick:me,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsx)("div",{className:"mb-6",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,u.jsx)("div",{className:"text-yellow-600 dark:text-yellow-400 text-lg",children:"\u26a0\ufe0f"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:["This category contains ",j.articleCount," articles"]}),(0,u.jsx)("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Choose what to do with these articles before deleting the category."})]})]})}),(0,u.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,u.jsx)("div",{children:(0,u.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,u.jsx)("input",{type:"radio",name:"reassignAction",value:"reassign",checked:"reassign"===_.action,onChange:e=>S(c(c({},_),{},{action:e.target.value})),className:"text-blue-600"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:"Reassign articles"}),(0,u.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Move all articles to another category"})]})]})}),"reassign"===_.action&&(0,u.jsxs)("div",{className:"ml-6 mt-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select target category:"}),(0,u.jsxs)("select",{value:_.targetCategoryId,onChange:e=>S(c(c({},_),{},{targetCategoryId:e.target.value})),className:"form-input w-full",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Choose a category..."}),r.filter((e=>e.id!==j.id)).map((e=>(0,u.jsx)("option",{value:e.id,children:e.name},e.id))),(0,u.jsx)("option",{value:"null",children:"No Category"})]})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,u.jsx)("input",{type:"radio",name:"reassignAction",value:"delete",checked:"delete"===_.action,onChange:e=>S(c(c({},_),{},{action:e.target.value})),className:"text-red-600"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-gray-900 dark:text-white text-red-600 dark:text-red-400",children:"Delete all articles"}),(0,u.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Permanently delete all ",j.articleCount," articles (cannot be undone)"]})]})]})})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,u.jsx)("button",{type:"button",onClick:me,className:"btn btn-secondary",children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{if(j)try{const{action:e,targetCategoryId:t}=_;if("reassign"===e&&!t)return void alert("Please select a category to reassign articles to.");const a="reassign"===e?"This will reassign ".concat(j.articleCount,' articles to the selected category and then delete "').concat(j.name,'". Continue?'):'This will delete "'.concat(j.name,'" and all ').concat(j.articleCount," articles in it. This action cannot be undone. Continue?");window.confirm(a)&&(await ce(j.id,"reassign"===e?t:null,"delete"===e),N(!1),k(null),S({targetCategoryId:"",action:"reassign"}))}catch(o){console.error("Error in reassign operation:",o),alert("Failed to process category deletion. Please try again.")}},className:"btn ".concat("delete"===_.action?"btn-danger":"btn-primary"),children:"delete"===_.action?"Delete Category & Articles":"Reassign & Delete Category"})]})]})]})}),H&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Export News Data"}),(0,u.jsx)("button",{onClick:()=>V(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsxs)("div",{className:"p-6 space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Export Format"}),(0,u.jsxs)("select",{value:q.format,onChange:e=>G(c(c({},q),{},{format:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"csv",children:"CSV (Comma Separated)"}),(0,u.jsx)("option",{value:"xlsx",children:"Excel (XLSX)"}),(0,u.jsx)("option",{value:"json",children:"JSON"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),(0,u.jsxs)("select",{value:q.dateRange,onChange:e=>G(c(c({},q),{},{dateRange:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Time"}),(0,u.jsx)("option",{value:"today",children:"Today"}),(0,u.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,u.jsx)("option",{value:"month",children:"Last 30 Days"}),(0,u.jsx)("option",{value:"year",children:"Last Year"})]})]}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Include Additional Data"}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"checkbox",checked:q.includeComments,onChange:e=>G(c(c({},q),{},{includeComments:e.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:"Include Comments Data"})]}),(0,u.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"checkbox",checked:q.includeAnalytics,onChange:e=>G(c(c({},q),{},{includeAnalytics:e.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:"Include Analytics (views, engagement)"})]})]})]})]}),(0,u.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex space-x-3",children:[(0,u.jsx)("button",{onClick:()=>V(!1),className:"btn btn-secondary flex-1",children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{try{const t=new URLSearchParams({format:q.format,dateRange:q.dateRange,includeComments:q.includeComments,includeAnalytics:q.includeAnalytics}),a=await e.get("/admin/news-moderation/export?".concat(t),{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=r,s.setAttribute("download","news-export-".concat((new Date).toISOString().split("T")[0],".").concat(q.format)),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r),V(!1),alert("Export completed successfully!")}catch(o){console.error("Error exporting data:",o),alert("Failed to export data")}},className:"btn btn-primary flex-1",children:"Export Data"})]})]})}),B&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Featured Articles Management"}),(0,u.jsx)("button",{onClick:()=>W(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Currently Featured (",O.length,")"]}),(0,u.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[O.map((e=>(0,u.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[(0,u.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:e.title}),(0,u.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,u.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown date"}),(0,u.jsx)("button",{onClick:()=>oe(e.id,!0),className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 text-sm",children:"Remove"})]})]},e.id))),0===O.length&&(0,u.jsxs)("div",{className:"text-center py-8",children:[(0,u.jsx)("div",{className:"text-4xl mb-2",children:"\u2b50"}),(0,u.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No featured articles"})]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Available to Feature"}),(0,u.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.filter((e=>!e.featured&&"published"===e.status)).map((e=>{var t;return(0,u.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[(0,u.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:e.title}),(0,u.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:[(0,u.jsx)("div",{children:e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown date"}),(0,u.jsxs)("div",{children:["\ud83d\udc41\ufe0f ",(null===(t=U[e.id])||void 0===t?void 0:t.views)||0," views"]})]}),(0,u.jsx)("button",{onClick:()=>oe(e.id,!1),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Feature"})]})]},e.id)}))})]})]})})]})}),M&&R&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Comment Moderation: ",R.title]}),(0,u.jsx)("button",{onClick:()=>P(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsx)("div",{className:"p-6",children:D.length>0?(0,u.jsx)("div",{className:"space-y-4",children:D.map((e=>{var t,a;return(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[null!==(t=e.user)&&void 0!==t&&t.avatar?(0,u.jsx)("img",{src:e.user.avatar,alt:e.user.name,className:"w-8 h-8 rounded-full object-cover",onError:e=>{e.target.style.display="none",e.target.parentElement.innerHTML='<div class="w-8 h-8 rounded-full bg-white border border-gray-300 flex items-center justify-center text-gray-600 font-bold">?</div>'}}):(0,u.jsx)("div",{className:"w-8 h-8 rounded-full bg-white border border-gray-300 flex items-center justify-center text-gray-600 font-bold",children:"?"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:(null===(a=e.user)||void 0===a?void 0:a.name)||e.author||"Anonymous"}),(0,u.jsx)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:e.created_at?new Date(e.created_at).toLocaleString():"Unknown time"})]}),(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("approved"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"pending"===e.status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:e.status||"pending"})]}),(0,u.jsx)("div",{className:"text-gray-900 dark:text-white mb-3",children:e.content}),e.reports&&e.reports.length>0&&(0,u.jsxs)("div",{className:"text-sm text-orange-600 dark:text-orange-400 mb-2",children:["\u26a0\ufe0f ",e.reports.length," report(s)"]})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:["approved"!==e.status&&(0,u.jsx)("button",{onClick:()=>de(e.id,"approve"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:"Approve"}),"rejected"!==e.status&&(0,u.jsx)("button",{onClick:()=>de(e.id,"reject"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Reject"}),(0,u.jsx)("button",{onClick:()=>de(e.id,"delete"),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm",children:"Delete"})]})]})},e.id)}))}):(0,u.jsxs)("div",{className:"text-center py-8",children:[(0,u.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcac"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Comments"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"This article has no comments to moderate."})]})})]})}),T&&R&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Schedule Article: ",R.title]})}),(0,u.jsxs)("div",{className:"p-6 space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Schedule Date & Time"}),(0,u.jsx)("input",{type:"datetime-local",min:(new Date).toISOString().slice(0,16),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",onChange:t=>{t.target.value&&(async(t,a)=>{try{var r;const n=await e.put("/admin/news-moderation/".concat(t),{status:"scheduled",scheduled_at:a});var s;if(!1===(null===(r=n.data)||void 0===r?void 0:r.success))throw new Error((null===(s=n.data)||void 0===s?void 0:s.message)||"Scheduling failed");await se(),alert("Article scheduled successfully!"),A(!1)}catch(o){console.error("Error scheduling article:",o),alert("Failed to schedule article")}})(R.id,t.target.value)}})]}),(0,u.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"text-blue-600 dark:text-blue-400",children:"\u2139\ufe0f"}),(0,u.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Scheduled articles will be automatically published at the specified time."})]})})]}),(0,u.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex space-x-3",children:(0,u.jsx)("button",{onClick:()=>{A(!1),I(null)},className:"btn btn-secondary flex-1",children:"Cancel"})})]})})]})};const lo=function(){const{api:e}=b(),[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null),[m,x]=(0,s.useState)("threads"),[h,g]=(0,s.useState)([]),[p,v]=(0,s.useState)({search:"",status:"all",sortBy:"date"}),[y,f]=(0,s.useState)({page:1,limit:20,total:0,totalPages:0}),[j,k]=(0,s.useState)("cards"),[w,N]=(0,s.useState)(new Set),[_,S]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),[T,A]=(0,s.useState)(null),[M,P]=(0,s.useState)({title:"",content:"",category_id:"",is_pinned:!1,is_locked:!1,status:"active"}),[R,I]=(0,s.useState)(!1),[D,L]=(0,s.useState)(null),[U,z]=(0,s.useState)(""),[O,F]=(0,s.useState)({reason:"",duration:"24",permanent:!1,ban_type:"suspend"}),[B,W]=(0,s.useState)(!1),[H,V]=(0,s.useState)(null),[q,G]=(0,s.useState)({name:"",description:"",slug:"",color:"#3b82f6",icon:"\ud83d\udcac",sort_order:0,is_active:!0}),[Y,Z]=(0,s.useState)({}),[K,J]=(0,s.useState)([]);(0,s.useEffect)((()=>{"threads"===m?Q():"posts"===m?X():"categories"===m&&$()}),[m]);const Q=async()=>{try{var t;i(!0);const r=await e.get("/api/admin/forums-moderation/threads"),s=(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data)||(null===r||void 0===r?void 0:r.data)||r||[];a(Array.isArray(s)?s:[]),d(null)}catch(n){var r,s;console.error("Error fetching threads:",n);const e=(null===(r=n.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||n.message||"Failed to load threads";d(e),a([])}finally{i(!1)}},X=async()=>{try{var t;i(!0);const a=await e.get("/api/admin/forums-moderation/posts"),r=(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)||(null===a||void 0===a?void 0:a.data)||a||[];n(Array.isArray(r)?r:[]),d(null)}catch(s){var a,r;console.error("Error fetching posts:",s);const e=(null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||s.message||"Failed to load posts";d(e),n([])}finally{i(!1)}},$=async()=>{try{var t;i(!0);const a=await e.get("/forums/categories"),r=(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)||(null===a||void 0===a?void 0:a.data)||a||[];g(Array.isArray(r)?r:[]),d(null)}catch(s){var a,r;console.error("Error fetching categories:",s);const e=(null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||s.message||"Failed to load categories";d(e),g([])}finally{i(!1)}},ee=async function(t,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var s,n;let o;switch(a){case"ban":case"suspend":case"timeout":o=await e.post("/api/admin/users/".concat(t,"/moderation"),c({action:a},r));break;case"unban":o=await e.delete("/api/admin/users/".concat(t,"/moderation"));break;case"warn":o=await e.post("/api/admin/users/".concat(t,"/warn"),{reason:(null===r||void 0===r?void 0:r.reason)||"General warning"});break;default:throw new Error("Unknown action")}var l,i;if(!1===(null===(s=o)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.success))throw new Error((null===(l=o)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||"".concat(a," failed"));alert("User ".concat(a," action completed successfully!")),I(!1),L(null),await Q()}catch(o){var d,m;console.error("Error performing ".concat(a,":"),o);const t=(null===(d=o.response)||void 0===d||null===(m=d.data)||void 0===m?void 0:m.message)||o.message||"Failed to ".concat(a," user");alert(t)}},te=()=>{V(null),G({name:"",description:"",slug:"",color:"#3b82f6",icon:"\ud83d\udcac",sort_order:h.length,is_active:!0}),W(!0)},ae=e=>{const t=new Set(w);t.has(e)?t.delete(e):t.add(e),N(t),S(t.size>0)},re=()=>{let e=[..."threads"===m?t:"posts"===m?r:h];if(p.search.trim()){const t=p.search.toLowerCase();e="categories"===m?e.filter((e=>{var a,r,s;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.slug)||void 0===s?void 0:s.toLowerCase().includes(t))})):e.filter((e=>{var a,r,s,n;return(null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(r=e.content)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.user)||void 0===s||null===(n=s.name)||void 0===n?void 0:n.toLowerCase().includes(t))}))}return"all"!==p.status&&(e="categories"===m?e.filter((e=>"active"===p.status?e.is_active:!e.is_active)):e.filter((e=>e.status===p.status))),"date"===p.sortBy?e.sort(((e,t)=>new Date(t.created_at||0)-new Date(e.created_at||0))):"replies"===p.sortBy&&"threads"===m?e.sort(((e,t)=>(t.posts_count||0)-(e.posts_count||0))):"order"===p.sortBy&&"categories"===m&&e.sort(((e,t)=>(e.sort_order||0)-(t.sort_order||0))),e};return l?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map(((e,t)=>(0,u.jsx)("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"},t)))})}):o?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-200 mb-2",children:"Error Loading Data"}),(0,u.jsx)("p",{className:"text-red-700 dark:text-red-300 mb-4",children:o}),(0,u.jsx)("button",{onClick:()=>"threads"===m?Q():X(),className:"btn btn-outline-primary",children:"Try Again"})]})}):(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsx)("div",{className:"flex items-center justify-between",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Forum Moderation"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Moderate forum threads and posts"})]})}),(0,u.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,u.jsxs)("button",{onClick:()=>x("threads"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("threads"===m?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:["Threads (",t.length,")"]}),(0,u.jsxs)("button",{onClick:()=>x("posts"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("posts"===m?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:["Posts (",r.length,")"]}),(0,u.jsxs)("button",{onClick:()=>x("categories"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("categories"===m?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:["Categories (",h.length,")"]})]})}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:["Search ",m]}),(0,u.jsx)("input",{type:"text",placeholder:"Search ".concat(m,"..."),value:p.search,onChange:e=>v(c(c({},p),{},{search:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Status"}),(0,u.jsxs)("select",{value:p.status,onChange:e=>v(c(c({},p),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"all",children:"All Status"}),(0,u.jsx)("option",{value:"active",children:"Active"}),"categories"!==m&&(0,u.jsx)("option",{value:"locked",children:"Locked"}),"categories"!==m&&(0,u.jsx)("option",{value:"hidden",children:"Hidden"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort By"}),(0,u.jsxs)("select",{value:p.sortBy,onChange:e=>v(c(c({},p),{},{sortBy:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,u.jsx)("option",{value:"date",children:"Date"}),"threads"===m&&(0,u.jsx)("option",{value:"replies",children:"Replies"}),"categories"===m&&(0,u.jsx)("option",{value:"order",children:"Sort Order"})]})]}),(0,u.jsxs)("div",{className:"flex items-end gap-2",children:["threads"===m&&(0,u.jsx)("button",{onClick:()=>{A(null),P({title:"",content:"",category_id:"",is_pinned:!1,is_locked:!1,status:"active"}),E(!0)},className:"btn btn-primary flex-1",children:"Create Thread"}),"categories"===m&&(0,u.jsx)("button",{onClick:te,className:"btn btn-primary flex-1",children:"Create Category"}),(0,u.jsx)("button",{onClick:()=>v({search:"",status:"all",sortBy:"categories"===m?"order":"date"}),className:"btn btn-secondary ".concat("categories"===m?"flex-1":"w-full"),children:"Clear Filters"})]})]})}),_&&(0,u.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[w.size," ",m," selected"]}),(0,u.jsx)("div",{className:"flex space-x-2",children:(0,u.jsx)("button",{onClick:async()=>{if(0===w.size)return;const t="threads"===m?"threads":"posts",a="Are you sure you want to delete ".concat(w.size," ").concat(t,"? This action cannot be undone.");if(window.confirm(a))try{var r;const a="threads"===m?"/api/admin/forums-moderation/threads/bulk-delete":"/api/admin/forums-moderation/posts/bulk-delete",n=await e.post(a,{ids:Array.from(w)});var s;if(!1===(null===(r=n.data)||void 0===r?void 0:r.success))throw new Error((null===(s=n.data)||void 0===s?void 0:s.message)||"Bulk delete failed");"threads"===m?await Q():await X(),N(new Set),S(!1),alert("".concat(w.size," ").concat(t," deleted successfully!"))}catch(o){var n,l;console.error("Error in bulk delete:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Bulk delete failed";alert(t)}},className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm",children:"Delete Selected"})})]}),(0,u.jsx)("button",{onClick:()=>{N(new Set),S(!1)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm",children:"Clear Selection"})]})}),(0,u.jsxs)("div",{className:"space-y-4",children:[re().length>0&&(0,u.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:(0,u.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,u.jsx)("input",{type:"checkbox",checked:w.size===re().length&&re().length>0,onChange:()=>{const e="threads"===m?t:r;w.size===e.length?(N(new Set),S(!1)):(N(new Set(e.map((e=>e.id)))),S(!0))},className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("span",{className:"text-gray-700 dark:text-gray-300",children:["Select all ",re().length," ",m]})]})}),"categories"===m?re().map((t=>(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)("input",{type:"checkbox",checked:w.has(t.id),onChange:()=>ae(t.id),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,u.jsx)("span",{className:"text-2xl",children:t.icon}),(0,u.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:t.color}}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(t.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:t.is_active?"Active":"Inactive"})]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:t.description||"No description provided"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("span",{children:["Slug: /",t.slug]}),(0,u.jsxs)("span",{children:["Order: ",t.sort_order]}),(0,u.jsxs)("span",{children:["Threads: ",t.threads_count||0]}),(0,u.jsx)("span",{children:t.created_at?new Date(t.created_at).toLocaleDateString():"Unknown date"})]})]})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{V(e),G({name:e.name||"",description:e.description||"",slug:e.slug||"",color:e.color||"#3b82f6",icon:e.icon||"\ud83d\udcac",sort_order:e.sort_order||0,is_active:!1!==e.is_active}),W(!0)})(t),className:"btn btn-outline-primary text-sm",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{const r=!a;try{var s;const a=await e.put("/forums/categories/".concat(t),{is_active:r});var n;if(!1===(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.success))throw new Error((null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||"Status update failed");await $(),alert("Category ".concat(r?"activated":"deactivated"," successfully!"))}catch(o){var l,i;console.error("Error updating category status:",o);const t=(null===(l=o.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||o.message||"Failed to update category status";alert(t)}})(t.id,t.is_active),className:"btn btn-outline-secondary text-sm",children:t.is_active?"Deactivate":"Activate"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{if(window.confirm('Delete category "'.concat(a,'"? This will move all threads in this category to "General".')))try{var r;const a=await e.delete("/forums/categories/".concat(t));var s;if(!1===(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Delete failed");await $(),alert("Category deleted successfully!")}catch(o){var n,l;console.error("Error deleting category:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Failed to delete category";alert(t)}})(t.id,t.name),className:"btn btn-outline-danger text-sm",children:"Delete"})]})]})},t.id))):"threads"===m?re().map((t=>{var a,r,s,n;return(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)("input",{type:"checkbox",checked:w.has(t.id),onChange:()=>ae(t.id),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[t.is_pinned&&(0,u.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 text-xs rounded-full font-medium",children:"\ud83d\udccc Pinned"}),(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.title})]}),t.content&&(0,u.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:[t.content.substring(0,150),"..."]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("img",{src:(null===(a=t.user)||void 0===a?void 0:a.hero_image)||(null===(r=t.user)||void 0===r?void 0:r.avatar)||"?",alt:(null===(s=t.user)||void 0===s?void 0:s.name)||t.author,className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 object-cover",onError:e=>{e.target.onerror=null,e.target.src="?"}}),(0,u.jsxs)("span",{children:["By ",(null===(n=t.user)||void 0===n?void 0:n.name)||t.author||"Unknown"]})]}),(0,u.jsxs)("span",{children:["\ud83d\udcac ",t.posts_count||0," posts"]}),(0,u.jsxs)("span",{children:["\ud83d\udc41\ufe0f ",t.views_count||0," views"]}),(0,u.jsxs)("span",{children:["\ud83d\udcc5 ",t.created_at?new Date(t.created_at).toLocaleDateString():"Unknown date"]}),t.category&&(0,u.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded",children:t.category.name||t.category})]}),(0,u.jsx)("div",{className:"flex items-center space-x-2",children:(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===t.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:t.status||"active"})})]})]})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>(e=>{A(e),P({title:e.title||"",content:e.content||"",category_id:e.category_id||"",is_pinned:e.is_pinned||!1,is_locked:"locked"===e.status,status:e.status||"active"}),E(!0)})(t),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Edit thread",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{if(window.confirm('Delete thread "'.concat(a,'"?')))try{var r;const a=await e.delete("/api/admin/forums-moderation/threads/".concat(t));var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Delete failed");await Q(),alert("Thread deleted successfully!")}catch(o){var n,l;console.error("Error deleting thread:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Error deleting thread";alert(t)}})(t.id,t.title),className:"px-3 py-1 text-sm border border-red-300 dark:border-red-600 text-red-600 dark:text-red-400 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete thread",children:"Delete"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{const r="active"===a?"locked":"active";try{var s;const a=await e.put("/api/admin/forums-moderation/threads/".concat(t),{status:r});var n;if(!1===(null===(s=a.data)||void 0===s?void 0:s.success))throw new Error((null===(n=a.data)||void 0===n?void 0:n.message)||"Status update failed");await Q(),alert("Thread ".concat("active"===r?"unlocked":"locked"," successfully!"))}catch(o){var l,i;console.error("Error updating thread status:",o);const t=(null===(l=o.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||o.message||"Error updating thread status";alert(t)}})(t.id,t.status||"active"),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"active"===t.status?"Lock thread":"Unlock thread",children:"active"===t.status?"Lock":"Unlock"}),(0,u.jsx)("button",{onClick:()=>(async(t,a)=>{try{var r;const n=await e.put("/api/admin/forums-moderation/threads/".concat(t),{is_pinned:!a});var s;if(!1===(null===(r=n.data)||void 0===r?void 0:r.success))throw new Error((null===(s=n.data)||void 0===s?void 0:s.message)||"Pin status update failed");await Q(),alert("Thread ".concat(a?"unpinned":"pinned"," successfully!"))}catch(o){var n,l;console.error("Error updating thread pin status:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Error updating thread pin status";alert(t)}})(t.id,t.is_pinned),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:t.is_pinned?"Unpin thread":"Pin thread",children:t.is_pinned?"Unpin":"Pin"})]})]})},t.id)})):re().map((t=>{var a,r,s;return(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,u.jsxs)("div",{className:"flex items-start justify-between",children:[(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)("input",{type:"checkbox",checked:w.has(t.id),onChange:()=>ae(t.id),className:"mt-1 rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"text-gray-600 dark:text-gray-400 mb-2 line-clamp-3",children:[(null===(a=t.content)||void 0===a?void 0:a.substring(0,200))||"No content","..."]}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,u.jsxs)("span",{children:["By ",(null===(r=t.user)||void 0===r?void 0:r.name)||t.author||"Unknown"]}),(0,u.jsx)("span",{children:t.created_at?new Date(t.created_at).toLocaleDateString():"Unknown date"}),(0,u.jsxs)("span",{children:["Thread: ",(null===(s=t.thread)||void 0===s?void 0:s.title)||"Unknown"]})]})]})]}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)("button",{className:"btn btn-outline-primary text-sm",children:"View"}),(0,u.jsx)("button",{onClick:()=>{var a;return(async(t,a)=>{if(window.confirm('Delete post "'.concat(a,'"?')))try{var r;const a=await e.delete("/api/admin/forums-moderation/posts/".concat(t));var s;if(!1===(null===(r=a.data)||void 0===r?void 0:r.success))throw new Error((null===(s=a.data)||void 0===s?void 0:s.message)||"Delete failed");await X(),alert("Post deleted successfully!")}catch(o){var n,l;console.error("Error deleting post:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Error deleting post";alert(t)}})(t.id,(null===(a=t.content)||void 0===a?void 0:a.substring(0,50))||"Post")},className:"btn btn-outline-danger text-sm",children:"Delete"})]})]})},t.id)}))]}),0===re().length&&(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-6xl mb-4",children:"categories"===m?"\ud83d\udcc1":"\ud83d\udcac"}),(0,u.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:["No ","threads"===m?"Forum Threads":"posts"===m?"Forum Posts":"Forum Categories"]}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:p.search||"all"!==p.status?"No ".concat(m," match your current filters."):"No ".concat(m," to moderate at this time.")}),"categories"===m&&!p.search&&(0,u.jsx)("button",{onClick:te,className:"btn btn-primary mt-4",children:"Create First Category"})]}),("threads"===m||"posts"===m)&&y.totalPages>1&&(0,u.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Show"}),(0,u.jsxs)("select",{value:y.limit,onChange:e=>{const t=parseInt(e.target.value);f((e=>c(c({},e),{},{limit:t,page:1}))),"threads"===m?Q(1):X(1)},className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white text-sm",children:[(0,u.jsx)("option",{value:"10",children:"10"}),(0,u.jsx)("option",{value:"20",children:"20"}),(0,u.jsx)("option",{value:"50",children:"50"}),(0,u.jsx)("option",{value:"100",children:"100"})]}),(0,u.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"per page"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:()=>{const e=Math.max(1,y.page-1);f((t=>c(c({},t),{},{page:e}))),"threads"===m?Q(e):X(e)},disabled:y.page<=1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,u.jsx)("div",{className:"flex items-center space-x-1",children:[...Array(Math.min(5,y.totalPages))].map(((e,t)=>{const a=Math.max(1,Math.min(y.totalPages-4,Math.max(1,y.page-2)))+t;return a>y.totalPages?null:(0,u.jsx)("button",{onClick:()=>{f((e=>c(c({},e),{},{page:a}))),"threads"===m?Q(a):X(a)},className:"px-3 py-1 border rounded text-sm ".concat(a===y.page?"bg-blue-600 text-white border-blue-600":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white"),children:a},a)}))}),(0,u.jsx)("button",{onClick:()=>{const e=Math.min(y.totalPages,y.page+1);f((t=>c(c({},t),{},{page:e}))),"threads"===m?Q(e):X(e)},disabled:y.page>=y.totalPages,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),B&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:H?"Edit Category":"Create New Category"})}),(0,u.jsxs)("div",{className:"p-6 space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Category Name *"}),(0,u.jsx)("input",{type:"text",value:q.name,onChange:e=>G(c(c({},q),{},{name:e.target.value})),placeholder:"e.g., General Discussion",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Description"}),(0,u.jsx)("textarea",{value:q.description,onChange:e=>G(c(c({},q),{},{description:e.target.value})),placeholder:"Brief description of what this category is for...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Slug (URL)"}),(0,u.jsx)("input",{type:"text",value:q.slug,onChange:e=>G(c(c({},q),{},{slug:e.target.value})),placeholder:"auto-generated",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Sort Order"}),(0,u.jsx)("input",{type:"number",min:"0",value:q.sort_order,onChange:e=>G(c(c({},q),{},{sort_order:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Icon"}),(0,u.jsx)("input",{type:"text",value:q.icon,onChange:e=>G(c(c({},q),{},{icon:e.target.value})),placeholder:"\ud83d\udcac",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Color"}),(0,u.jsx)("input",{type:"color",value:q.color,onChange:e=>G(c(c({},q),{},{color:e.target.value})),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900"})]})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"checkbox",checked:q.is_active,onChange:e=>G(c(c({},q),{},{is_active:e.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsx)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:"Active (users can create threads in this category)"})]})})]}),(0,u.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex space-x-3",children:[(0,u.jsx)("button",{onClick:()=>{W(!1),V(null)},className:"btn btn-secondary flex-1",children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{try{var t,a;if(!q.name.trim())return void alert("Category name is required");const n=q.slug.trim()||q.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),l=c(c({},q),{},{slug:n,name:q.name.trim(),description:q.description.trim()});let i;var r,s;if(i=H?await e.put("/forums/categories/".concat(H.id),l):await e.post("/forums/categories",l),!1===(null===(t=i)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.success))throw new Error((null===(r=i)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Save failed");await $(),W(!1),V(null),alert("Category ".concat(H?"updated":"created"," successfully!"))}catch(o){var n,l;console.error("Error saving category:",o);const t=(null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)||o.message||"Failed to save category";alert(t)}},className:"btn btn-primary flex-1",children:H?"Update Category":"Create Category"})]})]})}),C&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:T?"Edit Thread":"Create New Thread"}),(0,u.jsx)("button",{onClick:()=>{E(!1),A(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)(Jl,{navigateTo:e=>{E(!1),A(null),Q()}})})]})}),R&&D&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full",children:[(0,u.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[U.charAt(0).toUpperCase()+U.slice(1)," User: ",D.name||D.username]})}),(0,u.jsxs)("div",{className:"p-6 space-y-4",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,u.jsx)("div",{className:"text-yellow-600 dark:text-yellow-400 text-lg",children:"\u26a0\ufe0f"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Moderation Action"}),(0,u.jsxs)("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:["You are about to ",U," this user. This action will be logged."]})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:["Reason for ",U," *"]}),(0,u.jsx)("textarea",{value:O.reason,onChange:e=>F(c(c({},O),{},{reason:e.target.value})),placeholder:"Explain why you are ".concat(U,"ing this user..."),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]}),("ban"===U||"suspend"===U||"timeout"===U)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:(0,u.jsxs)("label",{className:"flex items-center space-x-2 mb-3",children:[(0,u.jsx)("input",{type:"checkbox",checked:O.permanent,onChange:e=>F(c(c({},O),{},{permanent:e.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),(0,u.jsxs)("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Permanent ",U]})]})}),!O.permanent&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:["Duration (","timeout"===U?"minutes":"hours",")"]}),(0,u.jsx)("select",{value:O.duration,onChange:e=>F(c(c({},O),{},{duration:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:"timeout"===U?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("option",{value:"5",children:"5 minutes"}),(0,u.jsx)("option",{value:"10",children:"10 minutes"}),(0,u.jsx)("option",{value:"30",children:"30 minutes"}),(0,u.jsx)("option",{value:"60",children:"1 hour"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("option",{value:"1",children:"1 hour"}),(0,u.jsx)("option",{value:"6",children:"6 hours"}),(0,u.jsx)("option",{value:"24",children:"24 hours"}),(0,u.jsx)("option",{value:"72",children:"3 days"}),(0,u.jsx)("option",{value:"168",children:"1 week"}),(0,u.jsx)("option",{value:"720",children:"30 days"})]})})]})]})]}),(0,u.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex space-x-3",children:[(0,u.jsx)("button",{onClick:()=>{I(!1),L(null),z("")},className:"btn btn-secondary flex-1",children:"Cancel"}),(0,u.jsxs)("button",{onClick:async()=>{if(!O.reason.trim())return void alert("Please provide a reason for this action");const e={reason:O.reason,duration_hours:O.permanent?null:parseInt(O.duration),permanent:O.permanent};await ee(D.id,U,e)},className:"btn flex-1 ".concat("ban"===U||"suspend"===U?"btn-danger":"timeout"===U?"btn-warning":"btn-primary"),children:["Confirm ",U.charAt(0).toUpperCase()+U.slice(1)]})]})]})})]})},io=e=>{let{value:t,onChange:a,onSubmit:r,placeholder:s="Type @ to mention users, teams, or players...",loading:n=!1,rows:l=3,className:i=""}=e;const{textareaRef:o,dropdownRef:d,showDropdown:c,mentionResults:m,selectedIndex:x,loading:h,dropdownPosition:g,handleInputChange:p,handleKeyDown:v,selectMention:y}=Wl();return(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("textarea",{ref:o,value:t,onChange:e=>{a(e.target.value),p(e,null)},onKeyDown:e=>{const s=v(e,null);null!==s&&void 0!==s&&s.selectMention&&y(s.selectMention,a,t),"Enter"===e.key&&e.ctrlKey&&r&&(e.preventDefault(),r())},placeholder:s,rows:l,disabled:n,className:"w-full p-3 bg-[#0f1419] border border-[#2b3d4d] rounded-lg text-white placeholder-[#768894] focus:border-[#fa4454] focus:outline-none resize-none ".concat(n?"opacity-50 cursor-not-allowed":""," ").concat(i)}),(0,u.jsx)(Vl,{show:c,results:m,selectedIndex:x,loading:h,position:g,onSelect:e=>y(e,a,t),dropdownRef:d}),r&&(0,u.jsx)("div",{className:"text-xs text-[#768894] mt-1",children:"Press Ctrl+Enter to submit"})]})};const oo=function(e){let{newsId:t,navigateTo:a}=e;const[r,n]=(0,s.useState)({title:"",excerpt:"",content:"",category:"news",status:"draft",featured:!1,featured_image:"",published_at:(new Date).toISOString().split("T")[0],tags:[]}),[l,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(""),[p,v]=(0,s.useState)([]),[y,f]=(0,s.useState)({words:0,characters:0,videos:0,mentions:0}),{api:j}=b(),{textareaRef:k,dropdownRef:w,showDropdown:N,mentionResults:_,selectedIndex:S,loading:C,dropdownPosition:E,handleInputChange:T,handleKeyDown:A,selectMention:M}=Wl(),{textareaRef:P,dropdownRef:R,showDropdown:I,mentionResults:D,selectedIndex:L,loading:U,dropdownPosition:z,handleInputChange:O,handleKeyDown:F,selectMention:B}=Wl(),W=Boolean(t);(0,s.useEffect)((()=>{(async()=>{if(W)try{i(!0);const e=await j.get("/admin/news/".concat(t)),a=e.data||e;n({title:a.title||"",excerpt:a.excerpt||"",content:a.content||"",category:a.category||"news",status:a.status||"draft",featured:a.featured||!1,featured_image:a.featured_image||"",published_at:a.published_at?a.published_at.split("T")[0]:(new Date).toISOString().split("T")[0],tags:a.tags||[]}),g(a.featured_image?Hl(a.featured_image):"")}catch(e){console.error("Error fetching news:",e),alert("Error loading news data")}finally{i(!1)}})()}),[t,W]),(0,s.useEffect)((()=>{V()}),[r.title,r.excerpt,r.content]);const H=e=>{const{name:t,value:a,type:r,checked:s}=e.target;n((e=>c(c({},e),{},{[t]:"checkbox"===r?s:a}))),"title"!==t&&"excerpt"!==t&&"content"!==t||setTimeout((()=>V()),300)},V=()=>{const e=r.content||"",t=r.title||"",a=r.excerpt||"",s="".concat(t," ").concat(a," ").concat(e),n=s.trim().split(/\s+/).filter((e=>e.length>0)).length,l=e.length,i=wt(e),o=(s.match(/\w+|team:\w+|player:\w+/g)||[]).length;f({words:n,characters:l,videos:i.length,mentions:o}),v(i)},q=e=>({news:1,esports:1,updates:2,community:3,guides:4,opinion:5,balance:2,content:2,events:1}[e]||1);return l?(0,u.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,u.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-[#fa4454] border-t-transparent rounded-full"})}):(0,u.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsx)("button",{onClick:()=>a&&a("admin-news"),className:"text-[#768894] hover:text-white mb-4 inline-flex items-center",children:"\u2190 Back to News"}),(0,u.jsx)("h1",{className:"text-3xl font-bold text-white",children:W?"Edit Article":"Create Article"})]}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.title.trim())if(r.content.trim())if(r.content.trim().length<50)alert("Article content must be at least 50 characters long. Please add more details to your article.");else{d(!0);try{var s;const{processedContent:e,videos:i}=yt(r.content.trim()),o={title:r.title.trim(),excerpt:r.excerpt.trim(),content:e,category_id:q(r.category),status:r.status,featured:r.featured,published_at:r.published_at,featured_image:r.featured_image||null,videos:i.map((e=>({platform:e.type,video_id:e.id,embed_url:e.embedUrl||null,original_url:e.originalUrl})))};let d;if(d=W?await j.put("/admin/news/".concat(t),o):await j.post("/admin/news",o),m&&null!==(s=d)&&void 0!==s&&s.data){var n;const e=W?t:(null===(n=d.data.data)||void 0===n?void 0:n.id)||d.data.id,a=new FormData;a.append("featured_image",m);try{await j.postFile("/admin/news/".concat(e,"/featured-image"),a)}catch(l){console.error("Error uploading image:",l),alert("Article saved but image upload failed. You can try uploading the image again.")}}alert("News article ".concat(W?"updated":"created"," successfully!")),a&&a("admin-news")}catch(i){console.error("Error saving news:",i),alert("Error ".concat(W?"updating":"creating"," news article: ").concat(i.message))}finally{d(!1)}}else alert("Content is required");else alert("Title is required")},className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{ref:k,type:"text",name:"title",value:r.title,onChange:e=>{H(e),T(e,null)},onKeyDown:e=>{const t=A(e,null);null!==t&&void 0!==t&&t.selectMention&&M(t.selectMention,(e=>{n((t=>c(c({},t),{},{title:e})))}),r.title)},className:"w-full px-4 py-3 bg-[#0f1419] border border-[#2b3d4d] rounded-lg text-white placeholder-[#768894] focus:border-[#fa4454] focus:outline-none text-xl",placeholder:"e.g., Team Liquid signs new roster for VCT 2025 (Use  to mention)",required:!0}),(0,u.jsx)(Vl,{show:N,results:_,selectedIndex:S,loading:C,position:E,onSelect:e=>M(e,(e=>{n((t=>c(c({},t),{},{title:e})))}),r.title),dropdownRef:w})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-[#768894]",children:[(0,u.jsxs)("div",{className:"space-x-4",children:[(0,u.jsxs)("span",{children:[y.words," words"]}),(0,u.jsxs)("span",{className:y.characters<50?"text-red-400":"",children:[y.characters," chars"]})]}),(0,u.jsxs)("div",{className:"space-x-3",children:[y.videos>0&&(0,u.jsxs)("span",{className:"text-blue-400",children:[" ",y.videos]}),y.mentions>0&&(0,u.jsxs)("span",{className:"text-purple-400",children:[" ",y.mentions]})]})]})]}),(0,u.jsxs)("div",{className:"bg-[#1a2332] border border-[#2b3d4d] rounded-lg p-4",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-[#768894] mb-3",children:"Featured Image"}),h?(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("img",{src:h,alt:"Preview",className:"w-full h-64 object-cover rounded-lg"}),(0,u.jsx)("button",{type:"button",onClick:()=>{x(null),g(""),n((e=>c(c({},e),{},{featured_image:""})))},className:"absolute top-2 right-2 bg-[#ef4444] text-white px-3 py-1 rounded text-sm hover:bg-[#dc2626]",children:"Remove"})]}):(0,u.jsxs)("label",{className:"block",children:[(0,u.jsxs)("div",{className:"border-2 border-dashed border-[#2b3d4d] rounded-lg p-8 text-center cursor-pointer hover:border-[#fa4454] transition-colors",children:[(0,u.jsx)("svg",{className:"w-12 h-12 text-[#768894] mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,u.jsx)("p",{className:"text-[#768894]",children:"Click to upload image"}),(0,u.jsx)("p",{className:"text-xs text-[#768894] mt-1",children:"PNG, JPG up to 5MB"})]}),(0,u.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("Image size must be less than 5MB");x(t);const e=new FileReader;e.onloadend=()=>{g(e.result)},e.readAsDataURL(t)}},className:"hidden"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-[#768894] mb-2",children:"Summary (optional)"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("textarea",{ref:P,name:"excerpt",value:r.excerpt,onChange:e=>{H(e),O(e,null)},onKeyDown:e=>{const t=F(e,null);null!==t&&void 0!==t&&t.selectMention&&B(t.selectMention,(e=>{n((t=>c(c({},t),{},{excerpt:e})))}),r.excerpt)},rows:2,className:"w-full p-3 bg-[#0f1419] border border-[#2b3d4d] rounded-lg text-white placeholder-[#768894] focus:border-[#fa4454] focus:outline-none resize-none",placeholder:"e.g., The European powerhouse completes their roster with two new signings ahead of the upcoming season. (Use  to mention)"}),(0,u.jsx)(Vl,{show:I,results:D,selectedIndex:L,loading:U,position:z,onSelect:e=>B(e,(e=>{n((t=>c(c({},t),{},{excerpt:e})))}),r.excerpt),dropdownRef:R})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,u.jsx)("label",{className:"text-sm font-medium text-[#768894]",children:"Content"}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-[#768894]",children:[(0,u.jsxs)("span",{className:r.content.trim().length<50?"text-red-400":"",children:[r.content.trim().length," / 50 min chars"]}),(0,u.jsxs)("span",{children:[y.words," words"]}),y.videos>0&&(0,u.jsxs)("span",{className:"text-blue-400",children:[" ",y.videos," video",1!==y.videos?"s":""]})]})]}),(0,u.jsx)(io,{value:r.content,onChange:e=>n((t=>c(c({},t),{},{content:e}))),placeholder:"Write your article content here (minimum 50 characters). Paste video URLs to auto-embed: YouTube, Twitch clips/videos, Twitter Use  to mention users, teams (team:name), or players (player:name) Include tournament context, team backgrounds, and player performances Add statistics and match analysis for comprehensive coverage Write in professional esports journalism style with engaging storytelling.",rows:15}),r.content&&(0,u.jsx)(Zi,{content:r.content,onVideoDetected:e=>{v(e)},className:"mt-3"}),(0,u.jsxs)("div",{className:"mt-3 text-xs text-[#768894]",children:[(0,u.jsx)("strong",{children:"Writing Tips:"})," Focus on engaging storytelling, include player quotes when possible, provide context for newcomers, and maintain objectivity in analysis."]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-xs font-medium text-[#768894] mb-1",children:"Category"}),(0,u.jsxs)("select",{name:"category",value:r.category,onChange:H,className:"w-full px-3 py-2 bg-[#0f1419] border border-[#2b3d4d] rounded text-white focus:border-[#fa4454] focus:outline-none text-sm",children:[(0,u.jsx)("option",{value:"esports",children:"Esports"}),(0,u.jsx)("option",{value:"news",children:"General News"}),(0,u.jsx)("option",{value:"updates",children:"Game Updates"}),(0,u.jsx)("option",{value:"events",children:"Events"}),(0,u.jsx)("option",{value:"community",children:"Community"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-xs font-medium text-[#768894] mb-1",children:"Status"}),(0,u.jsxs)("select",{name:"status",value:r.status,onChange:H,className:"w-full px-3 py-2 bg-[#0f1419] border border-[#2b3d4d] rounded text-white focus:border-[#fa4454] focus:outline-none text-sm",children:[(0,u.jsx)("option",{value:"draft",children:"Draft"}),(0,u.jsx)("option",{value:"published",children:"Published"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-xs font-medium text-[#768894] mb-1",children:"Publish Date"}),(0,u.jsx)("input",{type:"date",name:"published_at",value:r.published_at,onChange:H,className:"w-full px-3 py-2 bg-[#0f1419] border border-[#2b3d4d] rounded text-white focus:border-[#fa4454] focus:outline-none text-sm"})]}),(0,u.jsx)("div",{className:"flex items-end",children:(0,u.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,u.jsx)("input",{type:"checkbox",name:"featured",checked:r.featured,onChange:H,className:"w-4 h-4 text-[#fa4454] bg-[#0f1419] border-[#2b3d4d] rounded focus:ring-[#fa4454] focus:ring-2"}),(0,u.jsx)("span",{className:"text-sm text-[#768894]",children:"Featured"})]})})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between pt-6",children:[(0,u.jsx)("button",{type:"button",onClick:()=>a&&a("admin-news"),className:"px-6 py-2 text-[#768894] hover:text-white transition-colors",children:"Cancel"}),(0,u.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,u.jsx)("button",{type:"submit",name:"status",value:"draft",onClick:e=>{n((e=>c(c({},e),{},{status:"draft"})))},className:"px-6 py-2 bg-[#2b3d4d] text-white rounded-lg hover:bg-[#374555] transition-colors",disabled:o,children:"Save as Draft"}),(0,u.jsx)("button",{type:"submit",name:"status",value:"published",onClick:e=>{n((e=>c(c({},e),{},{status:"published"})))},className:"px-6 py-2 bg-[#fa4454] text-white rounded-lg hover:bg-[#e03e4e] transition-colors",disabled:o,children:o?"Saving...":W?"Update":"Publish"})]})]})]})]})};const co=function(e){let{threadId:t,navigateTo:a,params:r}=e;const{api:n,user:l}=b(),[i,o]=(0,s.useState)({title:"",content:"",category_id:"",pinned:!1,locked:!1,sticky:!1}),[d,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1),v=Boolean(t||(null===r||void 0===r?void 0:r.editId)),y=t||(null===r||void 0===r?void 0:r.editId);(0,s.useEffect)((()=>{f(),v&&y&&j()}),[y]);const f=async()=>{try{var e;const t=await n.get("/forums/categories"),a=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||(null===t||void 0===t?void 0:t.data)||[];m(Array.isArray(a)?a:[]),!v&&a.length>0&&o((e=>c(c({},e),{},{category_id:a[0].id})))}catch(t){console.error("Error fetching categories:",t),m([])}},j=async()=>{try{var e,t;h(!0);const a=await n.get("/forums/threads/".concat(y)),r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||(null===a||void 0===a?void 0:a.data)||{};o({title:r.title||"",content:r.content||"",category_id:(null===(t=r.category)||void 0===t?void 0:t.id)||r.category_id||"",pinned:r.pinned||!1,locked:r.locked||!1,sticky:r.sticky||!1})}catch(a){console.error("Error fetching thread:",a),alert("Failed to load thread data")}finally{h(!1)}};return x?(0,u.jsx)("div",{className:"p-6",children:(0,u.jsx)("div",{className:"text-center py-8",children:"Loading thread data..."})}):(0,u.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,u.jsx)("div",{className:"mb-6",children:(0,u.jsx)("h2",{className:"text-2xl font-bold",children:v?"Edit Thread":"Create New Thread"})}),(0,u.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.title.trim())if(i.content.trim())if(i.category_id){p(!0);try{const e={title:i.title.trim(),content:i.content.trim(),category_id:i.category_id,pinned:i.pinned,locked:i.locked,sticky:i.sticky};if(v)await n.put("/admin/forums/".concat(y),e),alert("Thread updated successfully!");else{var t,r,s;const i=await n.post("/forums/threads",c(c({},e),{},{user_id:null===l||void 0===l?void 0:l.id}));alert("Thread created successfully!");const o=(null===i||void 0===i||null===(t=i.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.id)||(null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.id);if(o)return void a("thread-detail",{id:o})}a("admin-forums")}catch(m){var o,d;console.error("Error saving thread:",m);const e=(null===(o=m.response)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.message)||"Failed to save thread";alert(e)}finally{p(!1)}}else alert("Please select a category");else alert("Content is required");else alert("Title is required")},children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Title ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("input",{type:"text",value:i.title,onChange:e=>o(c(c({},i),{},{title:e.target.value})),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"Enter thread title...",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Category ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsxs)("select",{value:i.category_id,onChange:e=>o(c(c({},i),{},{category_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0,children:[(0,u.jsx)("option",{value:"",children:"Select a category"}),d.map((e=>(0,u.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Content ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("textarea",{value:i.content,onChange:e=>o(c(c({},i),{},{content:e.target.value})),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:"12",placeholder:"Enter thread content...",required:!0}),(0,u.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"You can use @username to mention users, @team:teamname for teams, and @player:playername for players"})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Thread Options"}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",checked:i.pinned,onChange:e=>o(c(c({},i),{},{pinned:e.target.checked})),className:"mr-2"}),(0,u.jsx)("span",{children:"Pin this thread (appears at the top of the category)"})]}),(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",checked:i.sticky,onChange:e=>o(c(c({},i),{},{sticky:e.target.checked})),className:"mr-2"}),(0,u.jsx)("span",{children:"Make sticky (stays at the top even when not recent)"})]}),(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",checked:i.locked,onChange:e=>o(c(c({},i),{},{locked:e.target.checked})),className:"mr-2"}),(0,u.jsx)("span",{children:"Lock this thread (no new replies allowed)"})]})]})]}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:g?"Saving...":v?"Update Thread":"Create Thread"}),(0,u.jsx)("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to cancel? Any unsaved changes will be lost.")&&a("admin-forums")},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]})})]})},mo=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function uo(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("","/sw.js");mo?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((a=>{const r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):xo(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("\ud83d\udd27 Service worker is running in development mode")}))):xo(t,e)}))}}function xo(e,t){navigator.serviceWorker.register(e).then((e=>{console.log("\u2705 Service Worker registered successfully"),e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("\ud83d\udd04 New content is available and will be used when all tabs are closed"),t&&t.onUpdate&&t.onUpdate(e)):(console.log("\ud83d\udcf1 Content is cached for offline use"),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("\u274c Service Worker registration failed:",e)}))}const ho=new class{constructor(){this.registration=null,this.isOnline=navigator.onLine,this.setupEventListeners()}setupEventListeners(){window.addEventListener("online",(()=>{this.isOnline=!0,console.log("\ud83c\udf10 Back online")})),window.addEventListener("offline",(()=>{this.isOnline=!1,console.log("\ud83d\udcf1 Gone offline")})),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",(e=>{this.handleMessage(e.data)}))}async init(){if("serviceWorker"in navigator)try{this.registration=await navigator.serviceWorker.register("/sw.js"),console.log("\ud83d\ude80 Service Worker Manager initialized")}catch(e){console.error("Service Worker registration failed:",e)}}handleMessage(e){const{type:t,payload:a}=e;if("CACHE_STATUS"===t)console.log("Cache status:",a);else console.log("SW message:",e)}async sendMessage(e){this.registration&&this.registration.active?this.registration.active.postMessage(e):console.warn("Service Worker not active")}async cacheApiResponse(e,t){await this.sendMessage({type:"CACHE_API_RESPONSE",payload:{url:e,data:t}})}async clearCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];await this.sendMessage({type:"CLEAR_CACHE",payload:{cacheNames:e}})}async getCacheStatus(){return new Promise((e=>{if(!this.registration||!this.registration.active)return void e({});const t=new MessageChannel;t.port1.onmessage=t=>{e(t.data.payload)},this.registration.active.postMessage({type:"GET_CACHE_STATUS"},[t.port2])}))}async scheduleBackgroundSync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"background-sync";if("sync"in window.ServiceWorkerRegistration.prototype)try{await this.registration.sync.register(e),console.log("\ud83d\udccb Background sync scheduled")}catch(t){console.error("Background sync registration failed:",t)}}async subscribeToNotifications(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),null;if("granted"!==await Notification.requestPermission())return console.warn("Notification permission denied"),null;try{const e=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUSHER_KEY:"your_pusher_key_here",REACT_APP_PUSHER_CLUSTER:"us2",REACT_APP_BACKEND_URL:"https://staging.mrvl.net",REACT_APP_ENVIRONMENT:"production"}.REACT_APP_VAPID_PUBLIC_KEY||"")});return console.log("\ud83d\udd14 Push subscription created"),e}catch(e){return console.error("Push subscription failed:",e),null}}urlBase64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(t),r=new Uint8Array(a.length);for(let s=0;s<a.length;++s)r[s]=a.charCodeAt(s);return r}};class go{constructor(){this.init()}init(){this.setupBottomNavigation(),this.setupSwipeGestures(),this.setupPullToRefresh(),this.setupInfiniteScroll(),this.setupMatchCardOptimizations(),this.setupCompactLayouts(),this.setupQuickActions(),this.setupOfflineSupport()}setupBottomNavigation(){if(window.innerWidth<768){document.head.insertAdjacentHTML("beforeend","\n      <style>\n        .vlr-bottom-nav {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          height: 56px;\n          background: var(--bg-secondary);\n          border-top: 1px solid var(--border-color);\n          display: flex;\n          justify-content: space-around;\n          align-items: center;\n          z-index: 1000;\n          transform: translateY(0);\n          transition: transform 0.3s ease;\n        }\n\n        .vlr-bottom-nav.hidden {\n          transform: translateY(100%);\n        }\n\n        .vlr-bottom-nav .nav-item {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          height: 100%;\n          color: var(--text-secondary);\n          text-decoration: none;\n          transition: all 0.2s ease;\n          position: relative;\n        }\n\n        .vlr-bottom-nav .nav-item.active {\n          color: var(--primary-color);\n        }\n\n        .vlr-bottom-nav .nav-item.active::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 2px;\n          background: var(--primary-color);\n        }\n\n        .vlr-bottom-nav .nav-icon {\n          width: 24px;\n          height: 24px;\n          fill: currentColor;\n          margin-bottom: 2px;\n        }\n\n        .vlr-bottom-nav span {\n          font-size: 10px;\n          font-weight: 500;\n        }\n\n        @media (min-width: 768px) {\n          .vlr-bottom-nav {\n            display: none;\n          }\n        }\n      </style>\n    "),document.body.insertAdjacentHTML("beforeend",'\n      <nav class="vlr-bottom-nav">\n        <a href="/" class="nav-item" data-route="home">\n          <svg class="nav-icon" viewBox="0 0 24 24">\n            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n          </svg>\n          <span>Home</span>\n        </a>\n        <a href="/matches" class="nav-item" data-route="matches">\n          <svg class="nav-icon" viewBox="0 0 24 24">\n            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>\n          </svg>\n          <span>Matches</span>\n        </a>\n        <a href="/rankings" class="nav-item" data-route="rankings">\n          <svg class="nav-icon" viewBox="0 0 24 24">\n            <path d="M7 14l5-5 5 5z"/>\n          </svg>\n          <span>Rankings</span>\n        </a>\n        <a href="/forums" class="nav-item" data-route="forums">\n          <svg class="nav-icon" viewBox="0 0 24 24">\n            <path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"/>\n          </svg>\n          <span>Forums</span>\n        </a>\n        <a href="/profile" class="nav-item" data-route="profile">\n          <svg class="nav-icon" viewBox="0 0 24 24">\n            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>\n          </svg>\n          <span>Profile</span>\n        </a>\n      </nav>\n    ');let e=0;window.addEventListener("scroll",(()=>{const t=window.pageYOffset||document.documentElement.scrollTop,a=document.querySelector(".vlr-bottom-nav");t>e&&t>100?null===a||void 0===a||a.classList.add("hidden"):null===a||void 0===a||a.classList.remove("hidden"),e=t}),{passive:!0})}}setupSwipeGestures(){let e=0,t=0,a=0,r=0;document.addEventListener("touchstart",(t=>{e=t.changedTouches[0].screenX,a=t.changedTouches[0].screenY}),{passive:!0}),document.addEventListener("touchend",(s=>{t=s.changedTouches[0].screenX,r=s.changedTouches[0].screenY,(()=>{const s=t-e,n=Math.abs(r-a);if(Math.abs(s)>50&&n<100)if(s>0)window.history.length>1&&window.history.back();else{const e=document.querySelector('[data-action="next"]');e&&e.click()}})()}),{passive:!0})}setupPullToRefresh(){let e=0,t=0,a=!1;const r=document.createElement("div");r.className="pull-to-refresh",r.innerHTML='\n      <div class="pull-to-refresh-icon">\n        <svg viewBox="0 0 24 24" width="24" height="24">\n          <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>\n        </svg>\n      </div>\n      <div class="pull-to-refresh-text">Pull to refresh</div>\n    ';window.innerWidth<768&&(document.head.insertAdjacentHTML("beforeend","\n      <style>\n        .pull-to-refresh {\n          position: fixed;\n          top: -60px;\n          left: 0;\n          right: 0;\n          height: 60px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: var(--bg-primary);\n          transition: transform 0.3s ease;\n          z-index: 999;\n        }\n\n        .pull-to-refresh.visible {\n          transform: translateY(60px);\n        }\n\n        .pull-to-refresh.refreshing {\n          transform: translateY(60px);\n        }\n\n        .pull-to-refresh-icon {\n          margin-right: 8px;\n          animation: spin 1s linear infinite;\n        }\n\n        .pull-to-refresh.refreshing .pull-to-refresh-icon {\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      </style>\n    "),document.body.insertAdjacentElement("afterbegin",r),document.addEventListener("touchstart",(t=>{0===window.scrollY&&(e=t.touches[0].clientY,a=!0)}),{passive:!0}),document.addEventListener("touchmove",(s=>{if(!a)return;t=s.touches[0].clientY;const n=t-e;n>50&&(r.classList.add("visible"),r.querySelector(".pull-to-refresh-text").textContent=n>100?"Release to refresh":"Pull to refresh")}),{passive:!0}),document.addEventListener("touchend",(()=>{if(!a)return;t-e>100?(r.classList.add("refreshing"),r.querySelector(".pull-to-refresh-text").textContent="Refreshing...",setTimeout((()=>{window.location.reload()}),1e3)):r.classList.remove("visible"),a=!1,e=0,t=0})))}setupInfiniteScroll(){const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target,a=parseInt(t.dataset.page||"1");window.dispatchEvent(new CustomEvent("infiniteScroll",{detail:{page:a+1}})),t.dataset.page=a+1}}))}),{root:null,rootMargin:"100px",threshold:.1});document.querySelectorAll("[data-infinite-scroll]").forEach((t=>{e.observe(t)}))}setupMatchCardOptimizations(){document.head.insertAdjacentHTML("beforeend","\n      <style>\n        @media (max-width: 767px) {\n          .match-card {\n            padding: 12px;\n            margin-bottom: 8px;\n            display: flex;\n            align-items: center;\n            background: var(--bg-secondary);\n            border-radius: 8px;\n            position: relative;\n          }\n\n          .match-card.live {\n            border-left: 3px solid #ff4444;\n          }\n\n          .match-card .time {\n            font-size: 11px;\n            color: var(--text-secondary);\n            min-width: 45px;\n          }\n\n          .match-card .teams {\n            flex: 1;\n            margin: 0 12px;\n          }\n\n          .match-card .team {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            margin: 4px 0;\n          }\n\n          .match-card .team-name {\n            font-size: 14px;\n            font-weight: 500;\n          }\n\n          .match-card .score {\n            font-size: 14px;\n            font-weight: 600;\n            min-width: 20px;\n            text-align: right;\n          }\n\n          .match-card .tournament {\n            font-size: 10px;\n            color: var(--text-secondary);\n            position: absolute;\n            top: 4px;\n            right: 8px;\n          }\n\n          /* Compact bracket view for mobile */\n          .bracket-mobile {\n            overflow-x: auto;\n            -webkit-overflow-scrolling: touch;\n            padding-bottom: 16px;\n          }\n\n          .bracket-stage {\n            min-width: 280px;\n            margin-right: 16px;\n          }\n\n          .bracket-match {\n            background: var(--bg-secondary);\n            border-radius: 8px;\n            padding: 8px;\n            margin-bottom: 8px;\n          }\n\n          .bracket-team {\n            display: flex;\n            justify-content: space-between;\n            padding: 4px 0;\n            font-size: 13px;\n          }\n\n          .bracket-team.winner {\n            font-weight: 600;\n          }\n        }\n      </style>\n    ")}setupCompactLayouts(){if(window.innerWidth<768){document.body.classList.add("mobile-compact");const e=document.createElement("button");e.className="compact-toggle",e.innerHTML="\u2630",e.onclick=()=>{document.body.classList.toggle("ultra-compact")};const t="\n        <style>\n          .compact-toggle {\n            position: fixed;\n            bottom: 70px;\n            right: 16px;\n            width: 48px;\n            height: 48px;\n            border-radius: 50%;\n            background: var(--primary-color);\n            color: white;\n            border: none;\n            font-size: 20px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            z-index: 999;\n          }\n\n          .mobile-compact .content-padding {\n            padding: 8px;\n          }\n\n          .mobile-compact .card {\n            margin-bottom: 8px;\n          }\n\n          .mobile-compact h1 {\n            font-size: 24px;\n          }\n\n          .mobile-compact h2 {\n            font-size: 20px;\n          }\n\n          .ultra-compact * {\n            font-size: 12px !important;\n          }\n\n          .ultra-compact .card {\n            padding: 6px !important;\n          }\n        </style>\n      ";document.head.insertAdjacentHTML("beforeend",t),document.body.appendChild(e)}}setupQuickActions(){let e;document.addEventListener("touchstart",(t=>{const a=t.target.closest("[data-quick-action]");a&&(e=setTimeout((()=>{t.preventDefault(),this.showQuickActionMenu(a,t.touches[0])}),500))}),{passive:!1}),document.addEventListener("touchend",(()=>{clearTimeout(e)})),document.addEventListener("touchmove",(()=>{clearTimeout(e)}))}showQuickActionMenu(e,t){const a=document.createElement("div");a.className="quick-action-menu",a.style.cssText="\n      position: fixed;\n      top: ".concat(t.clientY,"px;\n      left: ").concat(t.clientX,"px;\n      transform: translate(-50%, -100%);\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: 8px;\n      padding: 8px 0;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 10000;\n    ");JSON.parse(e.dataset.quickAction||"[]").forEach((t=>{const r=document.createElement("button");r.className="quick-action-item",r.textContent=t.label,r.style.cssText="\n        display: block;\n        width: 100%;\n        padding: 8px 16px;\n        border: none;\n        background: none;\n        text-align: left;\n        cursor: pointer;\n      ",r.onclick=()=>{window.dispatchEvent(new CustomEvent(t.event,{detail:{element:e,action:t}})),a.remove()},a.appendChild(r)})),document.body.appendChild(a),setTimeout((()=>{document.addEventListener("click",(()=>a.remove()),{once:!0})}),100)}setupOfflineSupport(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((e=>{console.log("Service Worker registered:",e),window.addEventListener("offline",(()=>{this.showOfflineIndicator()})),window.addEventListener("online",(()=>{this.hideOfflineIndicator()}))})).catch((e=>{console.error("Service Worker registration failed:",e)}))}showOfflineIndicator(){const e=document.createElement("div");e.className="offline-indicator",e.textContent="You are offline",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      background: #ff4444;\n      color: white;\n      text-align: center;\n      padding: 8px;\n      z-index: 10000;\n    ",document.body.appendChild(e)}hideOfflineIndicator(){const e=document.querySelector(".offline-indicator");e&&e.remove()}}"undefined"!==typeof window&&window.innerWidth<768&&new go;const po=go,vo={home:De,news:Ke,"news-detail":Rt,matches:Lt,"match-detail":e=>{var t;return(0,u.jsx)($t,c(c({},e),{},{matchId:(null===(t=e.params)||void 0===t?void 0:t.id)||e.id}))},"team-detail":ra,players:sa,"player-detail":la,"free-agents":Is,rankings:Ds,events:Ls,"event-detail":Qs,tournaments:Xs,"tournament-detail":vn,forums:Fl,"thread-detail":Bl,"create-thread":Jl,"user-dashboard":ei,"user-profile":oi,stats:di,search:ci,test:hi,"reset-password":gi,"admin-dashboard":to,"admin-team-create":e=>(0,u.jsx)(ao,c({},e)),"admin-team-edit":e=>{var t;return(0,u.jsx)(ao,c(c({},e),{},{teamId:null===(t=e.params)||void 0===t?void 0:t.id}))},"admin-player-create":e=>(0,u.jsx)(ro,c({},e)),"admin-player-edit":e=>{var t;return(0,u.jsx)(ro,c(c({},e),{},{playerId:null===(t=e.params)||void 0===t?void 0:t.id}))},"admin-user-create":e=>(0,u.jsx)(so,c({},e)),"admin-user-edit":e=>{var t;return(0,u.jsx)(so,c(c({},e),{},{userId:null===(t=e.params)||void 0===t?void 0:t.id}))},"admin-news":no,"admin-news-create":e=>(0,u.jsx)(oo,c({},e)),"admin-news-edit":e=>{var t;return(0,u.jsx)(oo,c(c({},e),{},{newsId:null===(t=e.params)||void 0===t?void 0:t.id}))},"admin-events":Vi,"admin-event-create":e=>(0,u.jsx)(Hi,c({},e)),"admin-event-edit":e=>{var t;return(0,u.jsx)(Hi,c(c({},e),{},{eventId:null===(t=e.params)||void 0===t?void 0:t.id}))},"admin-match-create":e=>(0,u.jsx)(Fi,c({},e)),"admin-match-edit":e=>{var t;return(0,u.jsx)(Fi,c(c({},e),{},{matchId:null===(t=e.params)||void 0===t?void 0:t.id}))},"admin-live-scoring":e=>(0,u.jsx)(Vt,c({},e)),"admin-forums":lo,"admin-forum-create":e=>(0,u.jsx)(co,c({},e)),"admin-forum-edit":e=>(0,u.jsx)(co,c(c({},e),{},{params:e.params})),"admin-forum-categories":lo,"admin-news-categories":no,contact:pi,privacy:vi,terms:yi,careers:bi};function yo(){const[e,t]=(0,s.useState)("home"),[a,r]=(0,s.useState)({}),[n,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),{user:d}=b(),{theme:c}=p();(0,s.useEffect)((()=>{const e=()=>{o(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{const a=()=>{const a=window.location.hash.slice(1),s=window.location.pathname,n=window.location.hostname;if("status.mrvl.net"!==n&&"status.localhost"!==n){if("/reset-password"===s&&window.location.search){const e=new URLSearchParams(window.location.search),a=e.get("token"),s=e.get("email");if(a&&s)return console.log("\ud83d\udd17 Direct reset password URL detected"),t("reset-password"),void r({token:a,email:s})}if(a){const[e,...s]=a.split("/");if(vo[e]){const a={};s.length>0&&(a.id=s[0]),console.log("\ud83d\udd17 Hash route detected:",e,a),t(e),r(a)}}else"/"===s&&(t("home"),r({}))}else"status"!==e&&(t("status"),r({}))};return a(),window.addEventListener("hashchange",a),()=>{window.removeEventListener("hashchange",a)}}),[]),(0,s.useEffect)((()=>{const e=()=>{console.log("\ud83d\udd11 App.js: Received custom auth modal event"),l(!0)};return window.addEventListener("mrvl-show-auth-modal",e),()=>{window.removeEventListener("mrvl-show-auth-modal",e)}}),[]);const m=(0,s.useCallback)((function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("\ud83e\udded Navigating to:",e,a),t(e);let s=a;if("string"!==typeof a&&"number"!==typeof a||(s={id:a}),r(s),"home"===e)window.location.hash="";else{const t=s.id?"".concat(e,"/").concat(s.id):e;window.location.hash=t}window.scrollTo(0,0)}),[]),x=(0,s.useCallback)((()=>{console.log("\ud83d\udd11 App.js: Auth button clicked from navigation"),l(!0)}),[]),h=(0,s.useCallback)((()=>{console.log("\ud83d\udd11 App.js: Auth modal closed"),l(!1)}),[]),g=(0,s.useMemo)((()=>{const t=window.location.hostname;if("status.mrvl.net"===t||"status.localhost"===t)return(0,u.jsx)(Ti,{});const r=vo[e]||De;return e.startsWith("admin-")&&!d?(0,u.jsxs)("div",{className:"card p-8 text-center",children:[(0,u.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Admin Access Required"}),(0,u.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"You need to be logged in as an administrator to access this page."}),(0,u.jsxs)("div",{className:"space-x-4",children:[(0,u.jsx)("button",{onClick:()=>l(!0),className:"btn bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition-colors",children:"Login as Admin"}),(0,u.jsx)("button",{onClick:()=>m("home"),className:"btn border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 px-6 py-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Go Home"})]})]}):(0,u.jsx)(r,{navigateTo:m,params:a,onAuthClick:x})}),[e,a,d]),v="status.mrvl.net"===window.location.hostname||"status.localhost"===window.location.hostname;return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-all duration-300",children:[!v&&i?(0,u.jsx)(Se,{currentPage:e,navigateTo:m,onAuthClick:x,user:d,theme:c}):v?null:(0,u.jsx)(J,{currentPage:e,navigateTo:m,onAuthClick:x,user:d,theme:c}),!i&&!v&&(0,u.jsx)(Pe,{currentPage:e,pageParams:a,navigateTo:m}),(0,u.jsx)("main",{className:"".concat(i?"mobile-content pt-16 pb-20":"container mx-auto px-4 py-6"),children:g}),!v&&(0,u.jsx)(Me,{navigateTo:m}),n&&(0,u.jsx)(Ce,{isOpen:n,onClose:h})]})}const bo=function(){return(0,s.useEffect)((()=>{uo({onSuccess:e=>{console.log("\ud83d\ude80 Service Worker registered successfully")},onUpdate:e=>{console.log("\ud83d\udd04 New version available, please reload")}}),ho.init(),window.innerWidth<768&&new po}),[]),(0,u.jsx)(Ae,{component:"App",children:(0,u.jsx)(v,{children:(0,u.jsx)(f,{children:(0,u.jsx)(k,{children:(0,u.jsx)(Ae,{component:"AppContent",children:(0,u.jsx)(yo,{})})})})})})};n.createRoot(document.getElementById("root")).render((0,u.jsx)(bo,{}))})();