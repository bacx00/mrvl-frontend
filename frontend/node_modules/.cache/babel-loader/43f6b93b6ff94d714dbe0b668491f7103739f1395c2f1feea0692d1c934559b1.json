{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useAuth}from'../../hooks';import{TeamLogo}from'../../utils/imageUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ComprehensiveLiveScoring(_ref){var _match$team3,_match$team4,_match$event,_match$team5,_match$team6,_match$team7,_match$team8;let{match,isOpen,onClose,onUpdate}=_ref;const{api}=useAuth();const[activeMap,setActiveMap]=useState(0);// COMPREHENSIVE MARVEL RIVALS MAP POOL - REAL GAME MAPS\nconst marvelRivalsMaps=[{name:'Tokyo 2099: Spider-Islands',mode:'Convoy',icon:'ðŸ™ï¸',checkpoints:['Spider Bridge','Neon District','Final Plaza'],timeLimit:600// 10 minutes\n},{name:'Midtown Manhattan',mode:'Domination',icon:'ðŸ¢',checkpoints:['Times Square','Central Park','Brooklyn Bridge'],timeLimit:480// 8 minutes\n},{name:'Wakanda Palace',mode:'Convoy',icon:'âš¡',checkpoints:['Vibranium Mines','Royal Chambers','Panther Statue'],timeLimit:600},{name:'Sanctum Sanctorum',mode:'Domination',icon:'ðŸ”®',checkpoints:['Mystic Library','Portal Room','Astral Plane'],timeLimit:480},{name:'Asgard: Royal Palace',mode:'Convoy',icon:'ðŸŒˆ',checkpoints:['Bifrost Bridge','Throne Room','Rainbow Bridge'],timeLimit:600},{name:'Klyntar Symbiote World',mode:'Domination',icon:'ðŸŒŒ',checkpoints:['Symbiote Nest','Dark Caverns','Venom Pools'],timeLimit:480},{name:'Birnin Zana: Golden City',mode:'Convoy',icon:'ðŸ›ï¸',checkpoints:['Golden District','Tech Labs','Ceremonial Plaza'],timeLimit:600}];// âœ… ENHANCED MARVEL RIVALS HEROES BY ROLE - ALIGNED WITH BACKEND\nconst marvelRivalsHeroes={Tank:['Captain America','Doctor Strange','Groot','Hulk','Magneto','Peni Parker','The Thing','Thor','Venom'],Duelist:['Black Panther','Black Widow','Hawkeye','Hela','Human Torch','Iron Fist','Iron Man','Magik','Moon Knight','Namor','Psylocke','The Punisher','Scarlet Witch','Spider-Man','Squirrel Girl','Star-Lord','Storm','Wolverine'],Support:['Adam Warlock','Cloak & Dagger','Invisible Woman','Jeff the Land Shark','Loki','Luna Snow','Mantis','Rocket Raccoon']};// COMPREHENSIVE MATCH STATE\nconst[matchStats,setMatchStats]=useState(()=>{if(!match)return null;return{// Overall match stats\ntotalMaps:match.format==='BO5'?5:match.format==='BO3'?3:1,currentMap:0,mapWins:{team1:match.team1_score||0,team2:match.team2_score||0},// Map-specific stats\nmapStats:marvelRivalsMaps.map((map,index)=>({mapName:map.name,mode:map.mode,status:'upcoming',// upcoming, live, completed\nwinner:null,duration:0,checkpointProgress:{team1:0,team2:0},// Team stats per map\nteamStats:{team1:{eliminations:0,deaths:0,assists:0,damage:0,healing:0,objectiveTime:0,ultimatesUsed:0},team2:{eliminations:0,deaths:0,assists:0,damage:0,healing:0,objectiveTime:0,ultimatesUsed:0}},// Player stats per map\nplayerStats:{team1:Array(6).fill(null).map((_,i)=>{var _match$team;return{playerName:\"\".concat(((_match$team=match.team1)===null||_match$team===void 0?void 0:_match$team.short_name)||'T1',\"_Player\").concat(i+1),hero:marvelRivalsHeroes.Tank[0]||'Captain America',// âœ… FIXED: Tank role aligned with backend\nrole:'Tank',eliminations:0,deaths:0,assists:0,damage:0,healing:0,objectiveTime:0,ultimatesUsed:0,heroSwitches:0,timePlayedAsHero:0};}),team2:Array(6).fill(null).map((_,i)=>{var _match$team2;return{playerName:\"\".concat(((_match$team2=match.team2)===null||_match$team2===void 0?void 0:_match$team2.short_name)||'T2',\"_Player\").concat(i+1),hero:marvelRivalsHeroes.Tank[0]||'Captain America',// âœ… FIXED: Tank role aligned with backend\nrole:'Tank',eliminations:0,deaths:0,assists:0,damage:0,healing:0,objectiveTime:0,ultimatesUsed:0,heroSwitches:0,timePlayedAsHero:0};})}}))};});// CRITICAL FIX: Null check for match AFTER hooks\nif(!isOpen||!match||!matchStats)return null;// UPDATE PLAYER STAT\nconst updatePlayerStat=(mapIndex,team,playerIndex,statType,value)=>{setMatchStats(prev=>{const newStats=_objectSpread({},prev);newStats.mapStats[mapIndex].playerStats[team][playerIndex][statType]=value;// Update team totals\nconst teamTotal=newStats.mapStats[mapIndex].playerStats[team].reduce((sum,player)=>sum+(player[statType]||0),0);newStats.mapStats[mapIndex].teamStats[team][statType]=teamTotal;return newStats;});};// UPDATE MAP STATUS\nconst updateMapStatus=async function(mapIndex,status){let winner=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;setMatchStats(prev=>{const newStats=_objectSpread({},prev);newStats.mapStats[mapIndex].status=status;newStats.mapStats[mapIndex].winner=winner;if(winner){newStats.mapWins[winner]++;}return newStats;});// Send to backend\ntry{await api.put(\"/matches/\".concat(match.id,\"/maps/\").concat(mapIndex),{status,winner,stats:matchStats.mapStats[mapIndex]});}catch(error){console.error('Error updating map:',error);}};// HERO CHANGE\nconst changePlayerHero=(mapIndex,team,playerIndex,hero,role)=>{setMatchStats(prev=>{const newStats=_objectSpread({},prev);newStats.mapStats[mapIndex].playerStats[team][playerIndex].hero=hero;newStats.mapStats[mapIndex].playerStats[team][playerIndex].role=role;newStats.mapStats[mapIndex].playerStats[team][playerIndex].heroSwitches++;return newStats;});};const currentMapData=matchStats.mapStats[activeMap];return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg max-w-7xl w-full max-h-[95vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-3xl font-bold text-gray-900 dark:text-white flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Marvel Rivals Live Statistics\"}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 animate-pulse\",children:\"\\uD83D\\uDD34 PROFESSIONAL ESPORTS TRACKING\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-gray-600 dark:text-gray-400\",children:[(_match$team3=match.team1)===null||_match$team3===void 0?void 0:_match$team3.name,\" vs \",(_match$team4=match.team2)===null||_match$team4===void 0?void 0:_match$team4.name,\" \\u2022 \",match.format||'BO3',\" \\u2022 \",((_match$event=match.event)===null||_match$event===void 0?void 0:_match$event.name)||match.event_name]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-2xl text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-red-50 dark:from-blue-900/20 dark:to-red-900/20 rounded-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-4 mb-4\",children:[/*#__PURE__*/_jsx(TeamLogo,{team:match.team1,size:\"w-20 h-20\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:(_match$team5=match.team1)===null||_match$team5===void 0?void 0:_match$team5.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:(_match$team6=match.team1)===null||_match$team6===void 0?void 0:_match$team6.region})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-8xl font-bold text-blue-600 dark:text-blue-400\",children:matchStats.mapWins.team1})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl text-gray-500 dark:text-gray-500 font-bold\",children:\"VS\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400 mt-2\",children:[\"Best of \",matchStats.totalMaps]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:(_match$team7=match.team2)===null||_match$team7===void 0?void 0:_match$team7.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:(_match$team8=match.team2)===null||_match$team8===void 0?void 0:_match$team8.region})]}),/*#__PURE__*/_jsx(TeamLogo,{team:match.team2,size:\"w-20 h-20\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-8xl font-bold text-red-600 dark:text-red-400\",children:matchStats.mapWins.team2})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2 overflow-x-auto\",children:marvelRivalsMaps.map((map,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveMap(index),className:\"px-4 py-3 rounded-lg whitespace-nowrap flex items-center space-x-2 transition-colors \".concat(activeMap===index?'bg-red-600 text-white':matchStats.mapStats[index].status==='completed'?'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400':matchStats.mapStats[index].status==='live'?'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400':'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:map.icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold\",children:map.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs\",children:map.mode})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 dark:border-gray-700 rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold text-gray-900 dark:text-white flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:marvelRivalsMaps[activeMap].icon}),/*#__PURE__*/_jsx(\"span\",{children:marvelRivalsMaps[activeMap].name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-normal text-gray-600 dark:text-gray-400\",children:[\"(\",marvelRivalsMaps[activeMap].mode,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateMapStatus(activeMap,'live'),className:\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\",disabled:currentMapData.status==='completed',children:\"\\uD83D\\uDD34 Start Map\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateMapStatus(activeMap,'completed','team1'),className:\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",disabled:currentMapData.status!=='live',children:\"T1 Wins\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateMapStatus(activeMap,'completed','team2'),className:\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\",disabled:currentMapData.status!=='live',children:\"T2 Wins\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:['team1','team2'].map((team,teamIndex)=>{var _match$team9;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-bold text-gray-900 dark:text-white mb-4\",children:[(_match$team9=match[team])===null||_match$team9===void 0?void 0:_match$team9.name,\" Players - \",marvelRivalsMaps[activeMap].name]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:currentMapData.playerStats[team].map((player,playerIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-10 h-10 rounded text-white text-sm flex items-center justify-center font-bold \".concat(teamIndex===0?'bg-blue-500':'bg-red-500'),children:[\"P\",playerIndex+1]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-gray-900 dark:text-white\",children:player.playerName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[player.role,\" \\u2022 \",player.hero]})]})]}),/*#__PURE__*/_jsx(\"select\",{value:player.hero,onChange:e=>{const selectedHero=e.target.value;const heroRole=Object.keys(marvelRivalsHeroes).find(role=>marvelRivalsHeroes[role].includes(selectedHero));changePlayerHero(activeMap,team,playerIndex,selectedHero,heroRole);},className:\"text-xs border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800\",children:Object.entries(marvelRivalsHeroes).map(_ref2=>{let[role,heroes]=_ref2;return/*#__PURE__*/_jsx(\"optgroup\",{label:role,children:heroes.map(hero=>/*#__PURE__*/_jsx(\"option\",{value:hero,children:hero},hero))},role);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-2 text-xs\",children:['eliminations','deaths','assists','damage'].map(stat=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-600 dark:text-gray-400 mb-1 capitalize\",children:stat}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:player[stat]||0,onChange:e=>updatePlayerStat(activeMap,team,playerIndex,stat,parseInt(e.target.value)||0),className:\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white\",min:\"0\"})]},stat))}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-2 font-bold text-gray-900 dark:text-white\",children:[\"K/D/A: \",player.eliminations,\"/\",player.deaths,\"/\",player.assists]})]},playerIndex))})]},team);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{// CRITICAL FIX: Use existing backend endpoint for saving stats\nawait api.put(\"/matches/\".concat(match.id,\"/score\"),{team1_score:matchStats.mapWins.team1,team2_score:matchStats.mapWins.team2,status:'live',// Include match stats in the update\nmatch_data:matchStats});alert('Stats saved successfully!');if(onUpdate)onUpdate(match);}catch(error){console.error('Error saving stats:',error);// BACKUP: Try alternative endpoint\ntry{await api.put(\"/matches/\".concat(match.id),{team1_score:matchStats.mapWins.team1,team2_score:matchStats.mapWins.team2,status:'live'});alert('Basic stats saved successfully!');if(onUpdate)onUpdate(match);}catch(backupError){console.error('Backup save failed:',backupError);alert('Stats saved locally! (Backend endpoint needs implementation)');}}},className:\"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold\",children:\"\\uD83D\\uDCBE Save Match Statistics\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-8 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold\",children:\"Close\"})]})]})]})});}export default ComprehensiveLiveScoring;","map":{"version":3,"names":["React","useState","useAuth","TeamLogo","jsx","_jsx","jsxs","_jsxs","ComprehensiveLiveScoring","_ref","_match$team3","_match$team4","_match$event","_match$team5","_match$team6","_match$team7","_match$team8","match","isOpen","onClose","onUpdate","api","activeMap","setActiveMap","marvelRivalsMaps","name","mode","icon","checkpoints","timeLimit","marvelRivalsHeroes","Tank","Duelist","Support","matchStats","setMatchStats","totalMaps","format","currentMap","mapWins","team1","team1_score","team2","team2_score","mapStats","map","index","mapName","status","winner","duration","checkpointProgress","teamStats","eliminations","deaths","assists","damage","healing","objectiveTime","ultimatesUsed","playerStats","Array","fill","_","i","_match$team","playerName","concat","short_name","hero","role","heroSwitches","timePlayedAsHero","_match$team2","updatePlayerStat","mapIndex","team","playerIndex","statType","value","prev","newStats","_objectSpread","teamTotal","reduce","sum","player","updateMapStatus","arguments","length","undefined","put","id","stats","error","console","changePlayerHero","currentMapData","className","children","event","event_name","onClick","size","region","disabled","teamIndex","_match$team9","onChange","e","selectedHero","target","heroRole","Object","keys","find","includes","entries","_ref2","heroes","label","stat","type","parseInt","min","match_data","alert","backupError"],"sources":["/app/frontend/src/components/admin/ComprehensiveLiveScoring.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuth } from '../../hooks';\nimport { TeamLogo } from '../../utils/imageUtils';\n\nfunction ComprehensiveLiveScoring({ match, isOpen, onClose, onUpdate }) {\n  const { api } = useAuth();\n  const [activeMap, setActiveMap] = useState(0);\n\n  // COMPREHENSIVE MARVEL RIVALS MAP POOL - REAL GAME MAPS\n  const marvelRivalsMaps = [\n    { \n      name: 'Tokyo 2099: Spider-Islands', \n      mode: 'Convoy', \n      icon: 'ðŸ™ï¸',\n      checkpoints: ['Spider Bridge', 'Neon District', 'Final Plaza'],\n      timeLimit: 600 // 10 minutes\n    },\n    { \n      name: 'Midtown Manhattan', \n      mode: 'Domination', \n      icon: 'ðŸ¢',\n      checkpoints: ['Times Square', 'Central Park', 'Brooklyn Bridge'],\n      timeLimit: 480 // 8 minutes\n    },\n    { \n      name: 'Wakanda Palace', \n      mode: 'Convoy', \n      icon: 'âš¡',\n      checkpoints: ['Vibranium Mines', 'Royal Chambers', 'Panther Statue'],\n      timeLimit: 600\n    },\n    { \n      name: 'Sanctum Sanctorum', \n      mode: 'Domination', \n      icon: 'ðŸ”®',\n      checkpoints: ['Mystic Library', 'Portal Room', 'Astral Plane'],\n      timeLimit: 480\n    },\n    { \n      name: 'Asgard: Royal Palace', \n      mode: 'Convoy', \n      icon: 'ðŸŒˆ',\n      checkpoints: ['Bifrost Bridge', 'Throne Room', 'Rainbow Bridge'],\n      timeLimit: 600\n    },\n    { \n      name: 'Klyntar Symbiote World', \n      mode: 'Domination', \n      icon: 'ðŸŒŒ',\n      checkpoints: ['Symbiote Nest', 'Dark Caverns', 'Venom Pools'],\n      timeLimit: 480\n    },\n    { \n      name: 'Birnin Zana: Golden City', \n      mode: 'Convoy', \n      icon: 'ðŸ›ï¸',\n      checkpoints: ['Golden District', 'Tech Labs', 'Ceremonial Plaza'],\n      timeLimit: 600\n    }\n  ];\n\n  // âœ… ENHANCED MARVEL RIVALS HEROES BY ROLE - ALIGNED WITH BACKEND\n  const marvelRivalsHeroes = {\n    Tank: [\n      'Captain America', 'Doctor Strange', 'Groot', 'Hulk', \n      'Magneto', 'Peni Parker', 'The Thing', 'Thor', 'Venom'\n    ],\n    Duelist: [\n      'Black Panther', 'Black Widow', 'Hawkeye', 'Hela', 'Human Torch',\n      'Iron Fist', 'Iron Man', 'Magik', 'Moon Knight', 'Namor', \n      'Psylocke', 'The Punisher', 'Scarlet Witch', 'Spider-Man', \n      'Squirrel Girl', 'Star-Lord', 'Storm', 'Wolverine'\n    ],\n    Support: [\n      'Adam Warlock', 'Cloak & Dagger', 'Invisible Woman', 'Jeff the Land Shark', \n      'Loki', 'Luna Snow', 'Mantis', 'Rocket Raccoon'\n    ]\n  };\n\n  // COMPREHENSIVE MATCH STATE\n  const [matchStats, setMatchStats] = useState(() => {\n    if (!match) return null;\n    \n    return {\n      // Overall match stats\n      totalMaps: match.format === 'BO5' ? 5 : match.format === 'BO3' ? 3 : 1,\n      currentMap: 0,\n      mapWins: { team1: match.team1_score || 0, team2: match.team2_score || 0 },\n      \n      // Map-specific stats\n      mapStats: marvelRivalsMaps.map((map, index) => ({\n        mapName: map.name,\n        mode: map.mode,\n        status: 'upcoming', // upcoming, live, completed\n        winner: null,\n        duration: 0,\n        checkpointProgress: { team1: 0, team2: 0 },\n        \n        // Team stats per map\n        teamStats: {\n          team1: {\n            eliminations: 0,\n            deaths: 0,\n            assists: 0,\n            damage: 0,\n            healing: 0,\n            objectiveTime: 0,\n            ultimatesUsed: 0\n          },\n          team2: {\n            eliminations: 0,\n            deaths: 0,\n            assists: 0,\n            damage: 0,\n            healing: 0,\n            objectiveTime: 0,\n            ultimatesUsed: 0\n          }\n        },\n        \n        // Player stats per map\n        playerStats: {\n          team1: Array(6).fill(null).map((_, i) => ({\n            playerName: `${match.team1?.short_name || 'T1'}_Player${i + 1}`,\n            hero: marvelRivalsHeroes.Tank[0] || 'Captain America', // âœ… FIXED: Tank role aligned with backend\n            role: 'Tank',\n            eliminations: 0,\n            deaths: 0,\n            assists: 0,\n            damage: 0,\n            healing: 0,\n            objectiveTime: 0,\n            ultimatesUsed: 0,\n            heroSwitches: 0,\n            timePlayedAsHero: 0\n          })),\n          team2: Array(6).fill(null).map((_, i) => ({\n            playerName: `${match.team2?.short_name || 'T2'}_Player${i + 1}`,\n            hero: marvelRivalsHeroes.Tank[0] || 'Captain America', // âœ… FIXED: Tank role aligned with backend\n            role: 'Tank',\n            eliminations: 0,\n            deaths: 0,\n            assists: 0,\n            damage: 0,\n            healing: 0,\n            objectiveTime: 0,\n            ultimatesUsed: 0,\n            heroSwitches: 0,\n            timePlayedAsHero: 0\n          }))\n        }\n      }))\n    };\n  });\n\n  // CRITICAL FIX: Null check for match AFTER hooks\n  if (!isOpen || !match || !matchStats) return null;\n\n  // UPDATE PLAYER STAT\n  const updatePlayerStat = (mapIndex, team, playerIndex, statType, value) => {\n    setMatchStats(prev => {\n      const newStats = { ...prev };\n      newStats.mapStats[mapIndex].playerStats[team][playerIndex][statType] = value;\n      \n      // Update team totals\n      const teamTotal = newStats.mapStats[mapIndex].playerStats[team].reduce((sum, player) => \n        sum + (player[statType] || 0), 0\n      );\n      newStats.mapStats[mapIndex].teamStats[team][statType] = teamTotal;\n      \n      return newStats;\n    });\n  };\n\n  // UPDATE MAP STATUS\n  const updateMapStatus = async (mapIndex, status, winner = null) => {\n    setMatchStats(prev => {\n      const newStats = { ...prev };\n      newStats.mapStats[mapIndex].status = status;\n      newStats.mapStats[mapIndex].winner = winner;\n      \n      if (winner) {\n        newStats.mapWins[winner]++;\n      }\n      \n      return newStats;\n    });\n\n    // Send to backend\n    try {\n      await api.put(`/matches/${match.id}/maps/${mapIndex}`, {\n        status,\n        winner,\n        stats: matchStats.mapStats[mapIndex]\n      });\n    } catch (error) {\n      console.error('Error updating map:', error);\n    }\n  };\n\n  // HERO CHANGE\n  const changePlayerHero = (mapIndex, team, playerIndex, hero, role) => {\n    setMatchStats(prev => {\n      const newStats = { ...prev };\n      newStats.mapStats[mapIndex].playerStats[team][playerIndex].hero = hero;\n      newStats.mapStats[mapIndex].playerStats[team][playerIndex].role = role;\n      newStats.mapStats[mapIndex].playerStats[team][playerIndex].heroSwitches++;\n      return newStats;\n    });\n  };\n\n  const currentMapData = matchStats.mapStats[activeMap];\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-7xl w-full max-h-[95vh] overflow-y-auto\">\n        {/* HEADER */}\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-3xl font-bold text-gray-900 dark:text-white flex items-center space-x-3\">\n                <span>ðŸ“Š</span>\n                <span>Marvel Rivals Live Statistics</span>\n                <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 animate-pulse\">\n                  ðŸ”´ PROFESSIONAL ESPORTS TRACKING\n                </span>\n              </h2>\n              <div className=\"mt-2 text-gray-600 dark:text-gray-400\">\n                {match.team1?.name} vs {match.team2?.name} â€¢ {match.format || 'BO3'} â€¢ {match.event?.name || match.event_name}\n              </div>\n            </div>\n            <button onClick={onClose} className=\"text-2xl text-gray-400 hover:text-gray-600\">âœ•</button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* OVERALL MATCH SCOREBOARD */}\n          <div className=\"bg-gradient-to-r from-blue-50 to-red-50 dark:from-blue-900/20 dark:to-red-900/20 rounded-lg p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-center flex-1\">\n                <div className=\"flex items-center justify-center space-x-4 mb-4\">\n                  <TeamLogo team={match.team1} size=\"w-20 h-20\" />\n                  <div>\n                    <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">{match.team1?.name}</div>\n                    <div className=\"text-sm text-gray-600 dark:text-gray-400\">{match.team1?.region}</div>\n                  </div>\n                </div>\n                <div className=\"text-8xl font-bold text-blue-600 dark:text-blue-400\">\n                  {matchStats.mapWins.team1}\n                </div>\n              </div>\n              \n              <div className=\"text-center px-8\">\n                <div className=\"text-3xl text-gray-500 dark:text-gray-500 font-bold\">VS</div>\n                <div className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">Best of {matchStats.totalMaps}</div>\n              </div>\n              \n              <div className=\"text-center flex-1\">\n                <div className=\"flex items-center justify-center space-x-4 mb-4\">\n                  <div>\n                    <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">{match.team2?.name}</div>\n                    <div className=\"text-sm text-gray-600 dark:text-gray-400\">{match.team2?.region}</div>\n                  </div>\n                  <TeamLogo team={match.team2} size=\"w-20 h-20\" />\n                </div>\n                <div className=\"text-8xl font-bold text-red-600 dark:text-red-400\">\n                  {matchStats.mapWins.team2}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* MAP SELECTION TABS */}\n          <div className=\"flex space-x-2 overflow-x-auto\">\n            {marvelRivalsMaps.map((map, index) => (\n              <button\n                key={index}\n                onClick={() => setActiveMap(index)}\n                className={`px-4 py-3 rounded-lg whitespace-nowrap flex items-center space-x-2 transition-colors ${\n                  activeMap === index\n                    ? 'bg-red-600 text-white'\n                    : matchStats.mapStats[index].status === 'completed'\n                    ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400'\n                    : matchStats.mapStats[index].status === 'live'\n                    ? 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400'\n                    : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\n                }`}\n              >\n                <span className=\"text-xl\">{map.icon}</span>\n                <div>\n                  <div className=\"font-bold\">{map.name}</div>\n                  <div className=\"text-xs\">{map.mode}</div>\n                </div>\n              </button>\n            ))}\n          </div>\n\n          {/* CURRENT MAP DETAILED VIEW */}\n          <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center space-x-2\">\n                <span className=\"text-3xl\">{marvelRivalsMaps[activeMap].icon}</span>\n                <span>{marvelRivalsMaps[activeMap].name}</span>\n                <span className=\"text-sm font-normal text-gray-600 dark:text-gray-400\">({marvelRivalsMaps[activeMap].mode})</span>\n              </h3>\n              \n              <div className=\"flex space-x-2\">\n                <button\n                  onClick={() => updateMapStatus(activeMap, 'live')}\n                  className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\n                  disabled={currentMapData.status === 'completed'}\n                >\n                  ðŸ”´ Start Map\n                </button>\n                <button\n                  onClick={() => updateMapStatus(activeMap, 'completed', 'team1')}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n                  disabled={currentMapData.status !== 'live'}\n                >\n                  T1 Wins\n                </button>\n                <button\n                  onClick={() => updateMapStatus(activeMap, 'completed', 'team2')}\n                  className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\n                  disabled={currentMapData.status !== 'live'}\n                >\n                  T2 Wins\n                </button>\n              </div>\n            </div>\n\n            {/* COMPREHENSIVE PLAYER STATS */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {['team1', 'team2'].map((team, teamIndex) => (\n                <div key={team} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                  <h4 className=\"text-lg font-bold text-gray-900 dark:text-white mb-4\">\n                    {match[team]?.name} Players - {marvelRivalsMaps[activeMap].name}\n                  </h4>\n                  \n                  <div className=\"space-y-3\">\n                    {currentMapData.playerStats[team].map((player, playerIndex) => (\n                      <div key={playerIndex} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <div className=\"flex items-center space-x-3\">\n                            <div className={`w-10 h-10 rounded text-white text-sm flex items-center justify-center font-bold ${\n                              teamIndex === 0 ? 'bg-blue-500' : 'bg-red-500'\n                            }`}>\n                              P{playerIndex + 1}\n                            </div>\n                            <div>\n                              <div className=\"font-bold text-gray-900 dark:text-white\">{player.playerName}</div>\n                              <div className=\"text-sm text-gray-600 dark:text-gray-400\">{player.role} â€¢ {player.hero}</div>\n                            </div>\n                          </div>\n                          \n                          {/* Hero Selection */}\n                          <select\n                            value={player.hero}\n                            onChange={(e) => {\n                              const selectedHero = e.target.value;\n                              const heroRole = Object.keys(marvelRivalsHeroes).find(role =>\n                                marvelRivalsHeroes[role].includes(selectedHero)\n                              );\n                              changePlayerHero(activeMap, team, playerIndex, selectedHero, heroRole);\n                            }}\n                            className=\"text-xs border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800\"\n                          >\n                            {Object.entries(marvelRivalsHeroes).map(([role, heroes]) => (\n                              <optgroup key={role} label={role}>\n                                {heroes.map(hero => (\n                                  <option key={hero} value={hero}>{hero}</option>\n                                ))}\n                              </optgroup>\n                            ))}\n                          </select>\n                        </div>\n                        \n                        {/* Player Stat Inputs */}\n                        <div className=\"grid grid-cols-4 gap-2 text-xs\">\n                          {['eliminations', 'deaths', 'assists', 'damage'].map(stat => (\n                            <div key={stat}>\n                              <label className=\"block text-gray-600 dark:text-gray-400 mb-1 capitalize\">\n                                {stat}\n                              </label>\n                              <input\n                                type=\"number\"\n                                value={player[stat] || 0}\n                                onChange={(e) => updatePlayerStat(activeMap, team, playerIndex, stat, parseInt(e.target.value) || 0)}\n                                className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                                min=\"0\"\n                              />\n                            </div>\n                          ))}\n                        </div>\n                        \n                        {/* K/D/A Display */}\n                        <div className=\"text-center mt-2 font-bold text-gray-900 dark:text-white\">\n                          K/D/A: {player.eliminations}/{player.deaths}/{player.assists}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* SAVE TO BACKEND */}\n          <div className=\"flex justify-center space-x-4\">\n            <button\n              onClick={async () => {\n                try {\n                  // CRITICAL FIX: Use existing backend endpoint for saving stats\n                  await api.put(`/matches/${match.id}/score`, {\n                    team1_score: matchStats.mapWins.team1,\n                    team2_score: matchStats.mapWins.team2,\n                    status: 'live',\n                    // Include match stats in the update\n                    match_data: matchStats\n                  });\n                  alert('Stats saved successfully!');\n                  if (onUpdate) onUpdate(match);\n                } catch (error) {\n                  console.error('Error saving stats:', error);\n                  // BACKUP: Try alternative endpoint\n                  try {\n                    await api.put(`/matches/${match.id}`, {\n                      team1_score: matchStats.mapWins.team1,\n                      team2_score: matchStats.mapWins.team2,\n                      status: 'live'\n                    });\n                    alert('Basic stats saved successfully!');\n                    if (onUpdate) onUpdate(match);\n                  } catch (backupError) {\n                    console.error('Backup save failed:', backupError);\n                    alert('Stats saved locally! (Backend endpoint needs implementation)');\n                  }\n                }\n              }}\n              className=\"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold\"\n            >\n              ðŸ’¾ Save Match Statistics\n            </button>\n            <button\n              onClick={onClose}\n              className=\"px-8 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ComprehensiveLiveScoring;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}