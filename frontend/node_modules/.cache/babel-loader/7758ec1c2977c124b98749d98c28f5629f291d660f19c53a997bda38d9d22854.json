{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useAuth}from'../../hooks';import{API_CONFIG}from'../../config';import ImageUpload from'../shared/ImageUpload';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PlayerForm(_ref){let{playerId,navigateTo}=_ref;const[formData,setFormData]=useState({name:'',realName:'',username:'',team:'',role:'',region:'',country:'US',age:'',avatar:'',socialLinks:{twitter:'',twitch:'',youtube:'',instagram:''}});const[teams,setTeams]=useState([]);const[loading,setLoading]=useState(false);const[saving,setSaving]=useState(false);const[error,setError]=useState(null);const[avatarFile,setAvatarFile]=useState(null);const{api}=useAuth();const isEdit=Boolean(playerId);const fetchPlayer=async()=>{if(!isEdit)return;try{var _player$team;setLoading(true);const response=await api.get(\"/players/\".concat(playerId));const player=response.data||response;console.log('🔍 PlayerForm - Fetched player data:',player);setFormData({name:player.name||'',realName:player.real_name||player.realName||'',username:player.username||player.gamer_tag||'',team:player.team_id||((_player$team=player.team)===null||_player$team===void 0?void 0:_player$team.id)||'',role:player.role||'',region:player.region||'',country:player.country||'US',age:player.age||'',avatar:player.avatar_url||player.avatar||'',socialLinks:player.social_links||player.socialLinks||{twitter:'',twitch:'',youtube:'',instagram:''}});}catch(error){console.error('Error fetching player:',error);alert('Error loading player data: '+error.message);}finally{setLoading(false);}};const fetchTeams=async()=>{try{const response=await api.get('/teams');setTeams(response.data||response||[]);}catch(error){console.error('Error fetching teams:',error);}};useEffect(()=>{fetchPlayer();fetchTeams();},[playerId,isEdit]);// eslint-disable-line react-hooks/exhaustive-deps\nconst handleInputChange=e=>{const{name,value}=e.target;if(name.startsWith('social_')){const socialKey=name.replace('social_','');setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{socialLinks:_objectSpread(_objectSpread({},prev.socialLinks),{},{[socialKey]:value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}};const handleImageSelect=(file,previewUrl)=>{console.log('🖼️ PlayerForm - Avatar selected:',file===null||file===void 0?void 0:file.name,previewUrl);setAvatarFile(file);// Don't use blob URL for display - use a placeholder or wait for actual upload\nif(file){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{avatar:''// Clear current avatar URL since we have a new file\n}));}};const uploadAvatar=async(file,playerId)=>{if(!file)return null;try{console.log('🚀 PlayerForm - Uploading avatar for player',playerId,':',file.name);const uploadFormData=new FormData();uploadFormData.append('avatar',file);const endpoint=\"/upload/player/\".concat(playerId,\"/avatar\");console.log('🚀 PlayerForm - Upload endpoint:',endpoint);const response=await api.postFile(endpoint,uploadFormData);console.log('✅ PlayerForm - Avatar upload response:',response);const data=response.data||response;let avatarUrl;if(data.data){avatarUrl=data.data.avatar_url||data.data.avatar;}else{avatarUrl=data.avatar_url||data.url||data.avatar;}console.log('✅ PlayerForm - Extracted avatar URL:',avatarUrl);if(!avatarUrl){console.error('❌ PlayerForm - No avatar URL found in response:',data);throw new Error('No avatar URL returned from upload');}return avatarUrl;}catch(error){console.error('❌ PlayerForm - Error uploading avatar:',error);throw error;}};const handleSubmit=async e=>{e.preventDefault();if(saving)return;console.log('💾 PlayerForm - Starting save process...');// Frontend validation\nif(!formData.name.trim()){setError('Player name is required');return;}if(!formData.role){setError('Player role is required');return;}setSaving(true);setError(null);try{let currentPlayerId=playerId;// CRITICAL FIX: Prepare proper data format for Laravel backend\nconst submitData={name:formData.name.trim(),username:formData.username.trim(),real_name:formData.realName.trim(),team_id:formData.team?parseInt(formData.team):null,// FIXED: Ensure team_id is properly set\nrole:formData.role,region:formData.region,country:formData.country,age:formData.age?parseInt(formData.age):null,social_links:formData.socialLinks};console.log('💾 PlayerForm - Submit data prepared:',submitData);if(playerId){// EDITING existing player\nconsole.log('📝 Editing existing player with ID:',playerId);await api.put(\"/admin/players/\".concat(playerId),submitData);console.log('✅ Player data updated successfully');}else{var _playerResponse$data;// CREATING new player\nconsole.log('🆕 Creating new player...');const playerResponse=await api.post('/admin/players',submitData);currentPlayerId=((_playerResponse$data=playerResponse.data)===null||_playerResponse$data===void 0?void 0:_playerResponse$data.id)||playerResponse.id;console.log('✅ Player created with ID:',currentPlayerId);}// CRITICAL FIX: Upload avatar if a new file was selected\nconsole.log('🔍 Checking avatar upload conditions:',{avatarFile:!!avatarFile,avatarFileName:avatarFile===null||avatarFile===void 0?void 0:avatarFile.name,currentPlayerId:currentPlayerId,shouldUpload:!!(avatarFile&&currentPlayerId)});if(avatarFile&&currentPlayerId){console.log('📸 Uploading new avatar for player:',currentPlayerId);try{const avatarUrl=await uploadAvatar(avatarFile,currentPlayerId);console.log('✅ Avatar uploaded successfully:',avatarUrl);// Update player with new avatar URL\nconst updatedFormData=_objectSpread(_objectSpread({},submitData),{},{avatar:avatarUrl});console.log('🔄 Updating player with avatar URL:',updatedFormData.avatar);await api.put(\"/admin/players/\".concat(currentPlayerId),updatedFormData);console.log('✅ Player updated with avatar URL');}catch(avatarError){console.error('❌ Avatar upload failed:',avatarError);// Don't fail the whole operation for avatar upload failure\nalert('⚠️ Player saved but avatar upload failed. Please try uploading the avatar again.');}}else{console.log('⚠️ Skipping avatar upload:',{reason:!avatarFile?'No avatar file selected':'No player ID available'});}alert('✅ Player saved successfully!');// Navigate back to admin dashboard\nif(navigateTo){navigateTo('admin-dashboard');}}catch(error){console.error('❌ PlayerForm - Error saving player:',error);// Enhanced error handling for different scenarios\nif(error.message.includes('500')){setError('🚨 BACKEND ISSUE: Server error. Please check backend player validation and database constraints.');}else if(error.message.includes('422')){if(error.message.includes('role')&&error.message.includes('invalid')){setError('🚨 BACKEND ISSUE: Invalid role validation. Backend expects specific role values.');}else if(error.message.includes('team_id')){setError('🚨 BACKEND ISSUE: Team assignment failed. Check team_id foreign key constraints.');}else{setError('🚨 BACKEND ISSUE: Validation error. Check backend validation rules for player fields.');}}else if(error.message.includes('404')){setError('🚨 BACKEND ISSUE: Player API endpoint not found. Implement /api/admin/players routes.');}else{setError(\"Failed to save player: \".concat(error.message));}// Keep form data so user doesn't lose their input\nconsole.log('🔄 Form data preserved for retry');}finally{setSaving(false);}};// ✅ FIXED: Use only backend-supported roles (database constraint issue with Flex)\nconst roles=[{value:'Duelist',label:'Duelist (DPS)',description:'Damage dealers'},{value:'Tank',label:'Tank (Vanguard)',description:'Front-line defenders'},{value:'Support',label:'Support (Strategist)',description:'Team support and healing'}];const countries=[{value:'US',label:'🇺🇸 United States'},{value:'CA',label:'🇨🇦 Canada'},{value:'MX',label:'🇲🇽 Mexico'},{value:'BR',label:'🇧🇷 Brazil'},{value:'AR',label:'🇦🇷 Argentina'},{value:'CL',label:'🇨🇱 Chile'},{value:'CO',label:'🇨🇴 Colombia'},{value:'PE',label:'🇵🇪 Peru'},{value:'UY',label:'🇺🇾 Uruguay'},{value:'UK',label:'🇬🇧 United Kingdom'},{value:'DE',label:'🇩🇪 Germany'},{value:'FR',label:'🇫🇷 France'},{value:'ES',label:'🇪🇸 Spain'},{value:'IT',label:'🇮🇹 Italy'},{value:'NL',label:'🇳🇱 Netherlands'},{value:'BE',label:'🇧🇪 Belgium'},{value:'CH',label:'🇨🇭 Switzerland'},{value:'AT',label:'🇦🇹 Austria'},{value:'PL',label:'🇵🇱 Poland'},{value:'CZ',label:'🇨🇿 Czech Republic'},{value:'HU',label:'🇭🇺 Hungary'},{value:'RO',label:'🇷🇴 Romania'},{value:'SE',label:'🇸🇪 Sweden'},{value:'NO',label:'🇳🇴 Norway'},{value:'DK',label:'🇩🇰 Denmark'},{value:'FI',label:'🇫🇮 Finland'},{value:'IS',label:'🇮🇸 Iceland'},{value:'IE',label:'🇮🇪 Ireland'},{value:'PT',label:'🇵🇹 Portugal'},{value:'GR',label:'🇬🇷 Greece'},{value:'TR',label:'🇹🇷 Turkey'},{value:'RU',label:'🇷🇺 Russia'},{value:'UA',label:'🇺🇦 Ukraine'},{value:'KR',label:'🇰🇷 South Korea'},{value:'JP',label:'🇯🇵 Japan'},{value:'CN',label:'🇨🇳 China'},{value:'TW',label:'🇹🇼 Taiwan'},{value:'HK',label:'🇭🇰 Hong Kong'},{value:'SG',label:'🇸🇬 Singapore'},{value:'MY',label:'🇲🇾 Malaysia'},{value:'TH',label:'🇹🇭 Thailand'},{value:'VN',label:'🇻🇳 Vietnam'},{value:'PH',label:'🇵🇭 Philippines'},{value:'ID',label:'🇮🇩 Indonesia'},{value:'IN',label:'🇮🇳 India'},{value:'PK',label:'🇵🇰 Pakistan'},{value:'BD',label:'🇧🇩 Bangladesh'},{value:'LK',label:'🇱🇰 Sri Lanka'},{value:'AU',label:'🇦🇺 Australia'},{value:'NZ',label:'🇳🇿 New Zealand'},{value:'ZA',label:'🇿🇦 South Africa'},{value:'EG',label:'🇪🇬 Egypt'},{value:'NG',label:'🇳🇬 Nigeria'},{value:'KE',label:'🇰🇪 Kenya'},{value:'MA',label:'🇲🇦 Morocco'},{value:'TN',label:'🇹🇳 Tunisia'},{value:'DZ',label:'🇩🇿 Algeria'},{value:'IL',label:'🇮🇱 Israel'},{value:'SA',label:'🇸🇦 Saudi Arabia'},{value:'AE',label:'🇦🇪 UAE'},{value:'QA',label:'🇶🇦 Qatar'},{value:'KW',label:'🇰🇼 Kuwait'},{value:'BH',label:'🇧🇭 Bahrain'},{value:'OM',label:'🇴🇲 Oman'},{value:'JO',label:'🇯🇴 Jordan'},{value:'LB',label:'🇱🇧 Lebanon'},{value:'IQ',label:'🇮🇶 Iraq'},{value:'IR',label:'🇮🇷 Iran'},{value:'INTL',label:'🌍 International'}];if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Loading player data...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white\",children:isEdit?'Edit Player':'Create New Player'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:isEdit?'Update player information and team assignment':'Add a new player to the database'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo&&navigateTo('admin-dashboard'),className:\"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\",children:\"\\u2190 Back to Dashboard\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"border px-4 py-3 rounded mb-4 \".concat(error.includes('BACKEND ISSUE')?'bg-red-100 border-red-400 text-red-700':'bg-yellow-100 border-yellow-400 text-yellow-700'),children:[error,error.includes('BACKEND ISSUE')&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"For Backend Developer:\"}),\" Please check Laravel player model validation and API routes.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Player Avatar\"}),/*#__PURE__*/_jsx(ImageUpload,{onImageSelect:handleImageSelect,currentImage:formData.avatar,placeholder:\"Upload Player Avatar\",className:\"w-full max-w-md\"}),formData.avatar&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-2 bg-gray-50 dark:bg-gray-800 rounded\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[\"Current avatar URL: \",formData.avatar]}),/*#__PURE__*/_jsx(\"img\",{src:formData.avatar,alt:\"Current avatar\",className:\"w-16 h-16 object-cover rounded mt-1\",onError:e=>{e.target.style.display='none';}})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Player Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,className:\"form-input\",placeholder:\"e.g., Tony Stark\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Username/Gamertag *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formData.username,onChange:handleInputChange,className:\"form-input\",placeholder:\"e.g., IronMan_Tony\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Real Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"realName\",value:formData.realName,onChange:handleInputChange,className:\"form-input\",placeholder:\"e.g., Anthony Edward Stark\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",value:formData.age,onChange:handleInputChange,className:\"form-input\",placeholder:\"e.g., 25\",min:\"16\",max:\"50\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Team Assignment\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"team\",value:formData.team,onChange:handleInputChange,className:\"form-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uD83D\\uDEAB Free Agent (No Team)\"}),teams.map(team=>/*#__PURE__*/_jsxs(\"option\",{value:team.id,children:[team.name,\" (\",team.short_name||team.shortName,\")\"]},team.id))]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:formData.team?'Player will be assigned to selected team':'Player will be listed as Free Agent'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Role *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",value:formData.role,onChange:handleInputChange,className:\"form-input\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Role\"}),roles.map(role=>/*#__PURE__*/_jsx(\"option\",{value:role.value,children:role.label},role.value))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Region *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"region\",value:formData.region,onChange:handleInputChange,className:\"form-input\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Region\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NA\",children:\"North America\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EU\",children:\"Europe\"}),/*#__PURE__*/_jsx(\"option\",{value:\"APAC\",children:\"Asia-Pacific\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SA\",children:\"South America\"}),/*#__PURE__*/_jsx(\"option\",{value:\"OCE\",children:\"Oceania\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Country *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"country\",value:formData.country,onChange:handleInputChange,className:\"form-input\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Country\"}),countries.map(country=>/*#__PURE__*/_jsx(\"option\",{value:country.value,children:country.label},country.value))]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-4\",children:\"Social Links\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Twitter\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"social_twitter\",value:formData.socialLinks.twitter,onChange:handleInputChange,className:\"form-input\",placeholder:\"https://twitter.com/username\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Twitch\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"social_twitch\",value:formData.socialLinks.twitch,onChange:handleInputChange,className:\"form-input\",placeholder:\"https://twitch.tv/username\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"YouTube\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"social_youtube\",value:formData.socialLinks.youtube,onChange:handleInputChange,className:\"form-input\",placeholder:\"https://youtube.com/c/username\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\",children:\"Instagram\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"social_instagram\",value:formData.socialLinks.instagram,onChange:handleInputChange,className:\"form-input\",placeholder:\"https://instagram.com/username\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigateTo&&navigateTo('admin-dashboard'),className:\"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:saving,className:\"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:saving?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"}),isEdit?'Updating...':'Creating...']}):isEdit?'Update Player':'Create Player'})]})]})]});}export default PlayerForm;","map":{"version":3,"names":["React","useState","useEffect","useAuth","API_CONFIG","ImageUpload","jsx","_jsx","jsxs","_jsxs","PlayerForm","_ref","playerId","navigateTo","formData","setFormData","name","realName","username","team","role","region","country","age","avatar","socialLinks","twitter","twitch","youtube","instagram","teams","setTeams","loading","setLoading","saving","setSaving","error","setError","avatarFile","setAvatarFile","api","isEdit","Boolean","fetchPlayer","_player$team","response","get","concat","player","data","console","log","real_name","gamer_tag","team_id","id","avatar_url","social_links","alert","message","fetchTeams","handleInputChange","e","value","target","startsWith","socialKey","replace","prev","_objectSpread","handleImageSelect","file","previewUrl","uploadAvatar","uploadFormData","FormData","append","endpoint","postFile","avatarUrl","url","Error","handleSubmit","preventDefault","trim","currentPlayerId","submitData","parseInt","put","_playerResponse$data","playerResponse","post","avatarFileName","shouldUpload","updatedFormData","avatarError","reason","includes","roles","label","description","countries","className","children","onClick","onSubmit","onImageSelect","currentImage","placeholder","src","alt","onError","style","display","type","onChange","required","min","max","map","short_name","shortName","disabled"],"sources":["/app/frontend/src/components/admin/PlayerForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../hooks';\nimport { API_CONFIG } from '../../config';\nimport ImageUpload from '../shared/ImageUpload';\n\nfunction PlayerForm({ playerId, navigateTo }) {\n  const [formData, setFormData] = useState({\n    name: '',\n    realName: '',\n    username: '',\n    team: '',\n    role: '',\n    region: '',\n    country: 'US',\n    age: '',\n    avatar: '',\n    socialLinks: {\n      twitter: '',\n      twitch: '',\n      youtube: '',\n      instagram: ''\n    }\n  });\n  const [teams, setTeams] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [avatarFile, setAvatarFile] = useState(null);\n  const { api } = useAuth();\n\n  const isEdit = Boolean(playerId);\n\n  const fetchPlayer = async () => {\n    if (!isEdit) return;\n    \n    try {\n      setLoading(true);\n      const response = await api.get(`/players/${playerId}`);\n      const player = response.data || response;\n      \n      console.log('🔍 PlayerForm - Fetched player data:', player);\n      \n      setFormData({\n        name: player.name || '',\n        realName: player.real_name || player.realName || '',\n        username: player.username || player.gamer_tag || '',\n        team: player.team_id || player.team?.id || '',\n        role: player.role || '',\n        region: player.region || '',\n        country: player.country || 'US',\n        age: player.age || '',\n        avatar: player.avatar_url || player.avatar || '',\n        socialLinks: player.social_links || player.socialLinks || {\n          twitter: '',\n          twitch: '',\n          youtube: '',\n          instagram: ''\n        }\n      });\n    } catch (error) {\n      console.error('Error fetching player:', error);\n      alert('Error loading player data: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchTeams = async () => {\n    try {\n      const response = await api.get('/teams');\n      setTeams(response.data || response || []);\n    } catch (error) {\n      console.error('Error fetching teams:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchPlayer();\n    fetchTeams();\n  }, [playerId, isEdit]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    \n    if (name.startsWith('social_')) {\n      const socialKey = name.replace('social_', '');\n      setFormData(prev => ({\n        ...prev,\n        socialLinks: {\n          ...prev.socialLinks,\n          [socialKey]: value\n        }\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n\n  const handleImageSelect = (file, previewUrl) => {\n    console.log('🖼️ PlayerForm - Avatar selected:', file?.name, previewUrl);\n    setAvatarFile(file);\n    \n    // Don't use blob URL for display - use a placeholder or wait for actual upload\n    if (file) {\n      setFormData(prev => ({\n        ...prev,\n        avatar: '' // Clear current avatar URL since we have a new file\n      }));\n    }\n  };\n\n  const uploadAvatar = async (file, playerId) => {\n    if (!file) return null;\n    \n    try {\n      console.log('🚀 PlayerForm - Uploading avatar for player', playerId, ':', file.name);\n      \n      const uploadFormData = new FormData();\n      uploadFormData.append('avatar', file);\n      \n      const endpoint = `/upload/player/${playerId}/avatar`;\n      console.log('🚀 PlayerForm - Upload endpoint:', endpoint);\n      \n      const response = await api.postFile(endpoint, uploadFormData);\n      \n      console.log('✅ PlayerForm - Avatar upload response:', response);\n      \n      const data = response.data || response;\n      \n      let avatarUrl;\n      if (data.data) {\n        avatarUrl = data.data.avatar_url || data.data.avatar;\n      } else {\n        avatarUrl = data.avatar_url || data.url || data.avatar;\n      }\n      \n      console.log('✅ PlayerForm - Extracted avatar URL:', avatarUrl);\n      \n      if (!avatarUrl) {\n        console.error('❌ PlayerForm - No avatar URL found in response:', data);\n        throw new Error('No avatar URL returned from upload');\n      }\n      \n      return avatarUrl;\n    } catch (error) {\n      console.error('❌ PlayerForm - Error uploading avatar:', error);\n      throw error;\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (saving) return;\n\n    console.log('💾 PlayerForm - Starting save process...');\n\n    // Frontend validation\n    if (!formData.name.trim()) {\n      setError('Player name is required');\n      return;\n    }\n    if (!formData.role) {\n      setError('Player role is required');\n      return;\n    }\n\n    setSaving(true);\n    setError(null);\n\n    try {\n      let currentPlayerId = playerId;\n\n      // CRITICAL FIX: Prepare proper data format for Laravel backend\n      const submitData = {\n        name: formData.name.trim(),\n        username: formData.username.trim(),\n        real_name: formData.realName.trim(),\n        team_id: formData.team ? parseInt(formData.team) : null, // FIXED: Ensure team_id is properly set\n        role: formData.role,\n        region: formData.region,\n        country: formData.country,\n        age: formData.age ? parseInt(formData.age) : null,\n        social_links: formData.socialLinks\n      };\n\n      console.log('💾 PlayerForm - Submit data prepared:', submitData);\n\n      if (playerId) {\n        // EDITING existing player\n        console.log('📝 Editing existing player with ID:', playerId);\n        await api.put(`/admin/players/${playerId}`, submitData);\n        console.log('✅ Player data updated successfully');\n      } else {\n        // CREATING new player\n        console.log('🆕 Creating new player...');\n        const playerResponse = await api.post('/admin/players', submitData);\n        currentPlayerId = playerResponse.data?.id || playerResponse.id;\n        console.log('✅ Player created with ID:', currentPlayerId);\n      }\n\n      // CRITICAL FIX: Upload avatar if a new file was selected\n      console.log('🔍 Checking avatar upload conditions:', {\n        avatarFile: !!avatarFile,\n        avatarFileName: avatarFile?.name,\n        currentPlayerId: currentPlayerId,\n        shouldUpload: !!(avatarFile && currentPlayerId)\n      });\n      \n      if (avatarFile && currentPlayerId) {\n        console.log('📸 Uploading new avatar for player:', currentPlayerId);\n        try {\n          const avatarUrl = await uploadAvatar(avatarFile, currentPlayerId);\n          console.log('✅ Avatar uploaded successfully:', avatarUrl);\n          \n          // Update player with new avatar URL\n          const updatedFormData = { ...submitData, avatar: avatarUrl };\n          console.log('🔄 Updating player with avatar URL:', updatedFormData.avatar);\n          await api.put(`/admin/players/${currentPlayerId}`, updatedFormData);\n          console.log('✅ Player updated with avatar URL');\n        } catch (avatarError) {\n          console.error('❌ Avatar upload failed:', avatarError);\n          // Don't fail the whole operation for avatar upload failure\n          alert('⚠️ Player saved but avatar upload failed. Please try uploading the avatar again.');\n        }\n      } else {\n        console.log('⚠️ Skipping avatar upload:', {\n          reason: !avatarFile ? 'No avatar file selected' : 'No player ID available'\n        });\n      }\n\n      alert('✅ Player saved successfully!');\n\n      // Navigate back to admin dashboard\n      if (navigateTo) {\n        navigateTo('admin-dashboard');\n      }\n    } catch (error) {\n      console.error('❌ PlayerForm - Error saving player:', error);\n      \n      // Enhanced error handling for different scenarios\n      if (error.message.includes('500')) {\n        setError('🚨 BACKEND ISSUE: Server error. Please check backend player validation and database constraints.');\n      } else if (error.message.includes('422')) {\n        if (error.message.includes('role') && error.message.includes('invalid')) {\n          setError('🚨 BACKEND ISSUE: Invalid role validation. Backend expects specific role values.');\n        } else if (error.message.includes('team_id')) {\n          setError('🚨 BACKEND ISSUE: Team assignment failed. Check team_id foreign key constraints.');\n        } else {\n          setError('🚨 BACKEND ISSUE: Validation error. Check backend validation rules for player fields.');\n        }\n      } else if (error.message.includes('404')) {\n        setError('🚨 BACKEND ISSUE: Player API endpoint not found. Implement /api/admin/players routes.');\n      } else {\n        setError(`Failed to save player: ${error.message}`);\n      }\n      \n      // Keep form data so user doesn't lose their input\n      console.log('🔄 Form data preserved for retry');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // ✅ FIXED: Use only backend-supported roles (database constraint issue with Flex)\n  const roles = [\n    { value: 'Duelist', label: 'Duelist (DPS)', description: 'Damage dealers' },\n    { value: 'Tank', label: 'Tank (Vanguard)', description: 'Front-line defenders' },\n    { value: 'Support', label: 'Support (Strategist)', description: 'Team support and healing' }\n  ];\n\n  const countries = [\n    { value: 'US', label: '🇺🇸 United States' },\n    { value: 'CA', label: '🇨🇦 Canada' },\n    { value: 'MX', label: '🇲🇽 Mexico' },\n    { value: 'BR', label: '🇧🇷 Brazil' },\n    { value: 'AR', label: '🇦🇷 Argentina' },\n    { value: 'CL', label: '🇨🇱 Chile' },\n    { value: 'CO', label: '🇨🇴 Colombia' },\n    { value: 'PE', label: '🇵🇪 Peru' },\n    { value: 'UY', label: '🇺🇾 Uruguay' },\n    { value: 'UK', label: '🇬🇧 United Kingdom' },\n    { value: 'DE', label: '🇩🇪 Germany' },\n    { value: 'FR', label: '🇫🇷 France' },\n    { value: 'ES', label: '🇪🇸 Spain' },\n    { value: 'IT', label: '🇮🇹 Italy' },\n    { value: 'NL', label: '🇳🇱 Netherlands' },\n    { value: 'BE', label: '🇧🇪 Belgium' },\n    { value: 'CH', label: '🇨🇭 Switzerland' },\n    { value: 'AT', label: '🇦🇹 Austria' },\n    { value: 'PL', label: '🇵🇱 Poland' },\n    { value: 'CZ', label: '🇨🇿 Czech Republic' },\n    { value: 'HU', label: '🇭🇺 Hungary' },\n    { value: 'RO', label: '🇷🇴 Romania' },\n    { value: 'SE', label: '🇸🇪 Sweden' },\n    { value: 'NO', label: '🇳🇴 Norway' },\n    { value: 'DK', label: '🇩🇰 Denmark' },\n    { value: 'FI', label: '🇫🇮 Finland' },\n    { value: 'IS', label: '🇮🇸 Iceland' },\n    { value: 'IE', label: '🇮🇪 Ireland' },\n    { value: 'PT', label: '🇵🇹 Portugal' },\n    { value: 'GR', label: '🇬🇷 Greece' },\n    { value: 'TR', label: '🇹🇷 Turkey' },\n    { value: 'RU', label: '🇷🇺 Russia' },\n    { value: 'UA', label: '🇺🇦 Ukraine' },\n    { value: 'KR', label: '🇰🇷 South Korea' },\n    { value: 'JP', label: '🇯🇵 Japan' },\n    { value: 'CN', label: '🇨🇳 China' },\n    { value: 'TW', label: '🇹🇼 Taiwan' },\n    { value: 'HK', label: '🇭🇰 Hong Kong' },\n    { value: 'SG', label: '🇸🇬 Singapore' },\n    { value: 'MY', label: '🇲🇾 Malaysia' },\n    { value: 'TH', label: '🇹🇭 Thailand' },\n    { value: 'VN', label: '🇻🇳 Vietnam' },\n    { value: 'PH', label: '🇵🇭 Philippines' },\n    { value: 'ID', label: '🇮🇩 Indonesia' },\n    { value: 'IN', label: '🇮🇳 India' },\n    { value: 'PK', label: '🇵🇰 Pakistan' },\n    { value: 'BD', label: '🇧🇩 Bangladesh' },\n    { value: 'LK', label: '🇱🇰 Sri Lanka' },\n    { value: 'AU', label: '🇦🇺 Australia' },\n    { value: 'NZ', label: '🇳🇿 New Zealand' },\n    { value: 'ZA', label: '🇿🇦 South Africa' },\n    { value: 'EG', label: '🇪🇬 Egypt' },\n    { value: 'NG', label: '🇳🇬 Nigeria' },\n    { value: 'KE', label: '🇰🇪 Kenya' },\n    { value: 'MA', label: '🇲🇦 Morocco' },\n    { value: 'TN', label: '🇹🇳 Tunisia' },\n    { value: 'DZ', label: '🇩🇿 Algeria' },\n    { value: 'IL', label: '🇮🇱 Israel' },\n    { value: 'SA', label: '🇸🇦 Saudi Arabia' },\n    { value: 'AE', label: '🇦🇪 UAE' },\n    { value: 'QA', label: '🇶🇦 Qatar' },\n    { value: 'KW', label: '🇰🇼 Kuwait' },\n    { value: 'BH', label: '🇧🇭 Bahrain' },\n    { value: 'OM', label: '🇴🇲 Oman' },\n    { value: 'JO', label: '🇯🇴 Jordan' },\n    { value: 'LB', label: '🇱🇧 Lebanon' },\n    { value: 'IQ', label: '🇮🇶 Iraq' },\n    { value: 'IR', label: '🇮🇷 Iran' },\n    { value: 'INTL', label: '🌍 International' }\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"loading-spinner mx-auto mb-4\"></div>\n          <div className=\"text-gray-600 dark:text-gray-400\">Loading player data...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white\">\n            {isEdit ? 'Edit Player' : 'Create New Player'}\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            {isEdit ? 'Update player information and team assignment' : 'Add a new player to the database'}\n          </p>\n        </div>\n        <button \n          onClick={() => navigateTo && navigateTo('admin-dashboard')}\n          className=\"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\"\n        >\n          ← Back to Dashboard\n        </button>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* Error Display with Backend Issue Highlighting */}\n        {error && (\n          <div className={`border px-4 py-3 rounded mb-4 ${\n            error.includes('BACKEND ISSUE') \n              ? 'bg-red-100 border-red-400 text-red-700' \n              : 'bg-yellow-100 border-yellow-400 text-yellow-700'\n          }`}>\n            {error}\n            {error.includes('BACKEND ISSUE') && (\n              <div className=\"mt-2 text-sm\">\n                <strong>For Backend Developer:</strong> Please check Laravel player model validation and API routes.\n              </div>\n            )}\n          </div>\n        )}\n        \n        <div className=\"card p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Basic Information</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Player Avatar */}\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Player Avatar\n              </label>\n              <ImageUpload\n                onImageSelect={handleImageSelect}\n                currentImage={formData.avatar}\n                placeholder=\"Upload Player Avatar\"\n                className=\"w-full max-w-md\"\n              />\n              {formData.avatar && (\n                <div className=\"mt-2 p-2 bg-gray-50 dark:bg-gray-800 rounded\">\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    Current avatar URL: {formData.avatar}\n                  </p>\n                  <img \n                    src={formData.avatar} \n                    alt=\"Current avatar\" \n                    className=\"w-16 h-16 object-cover rounded mt-1\"\n                    onError={(e) => {\n                      e.target.style.display = 'none';\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Player Name */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Player Name *\n              </label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"e.g., Tony Stark\"\n                required\n              />\n            </div>\n\n            {/* Username/Gamertag */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Username/Gamertag *\n              </label>\n              <input\n                type=\"text\"\n                name=\"username\"\n                value={formData.username}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"e.g., IronMan_Tony\"\n                required\n              />\n            </div>\n\n            {/* Real Name */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Real Name\n              </label>\n              <input\n                type=\"text\"\n                name=\"realName\"\n                value={formData.realName}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"e.g., Anthony Edward Stark\"\n              />\n            </div>\n\n            {/* Age */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Age\n              </label>\n              <input\n                type=\"number\"\n                name=\"age\"\n                value={formData.age}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"e.g., 25\"\n                min=\"16\"\n                max=\"50\"\n              />\n            </div>\n\n            {/* Team - CRITICAL FIX for Free Agent issue */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Team Assignment\n              </label>\n              <select\n                name=\"team\"\n                value={formData.team}\n                onChange={handleInputChange}\n                className=\"form-input\"\n              >\n                <option value=\"\">🚫 Free Agent (No Team)</option>\n                {teams.map(team => (\n                  <option key={team.id} value={team.id}>\n                    {team.name} ({team.short_name || team.shortName})\n                  </option>\n                ))}\n              </select>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                {formData.team ? 'Player will be assigned to selected team' : 'Player will be listed as Free Agent'}\n              </p>\n            </div>\n\n            {/* Role */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Role *\n              </label>\n              <select\n                name=\"role\"\n                value={formData.role}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                required\n              >\n                <option value=\"\">Select Role</option>\n                {roles.map(role => (\n                  <option key={role.value} value={role.value}>\n                    {role.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Region */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Region *\n              </label>\n              <select\n                name=\"region\"\n                value={formData.region}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                required\n              >\n                <option value=\"\">Select Region</option>\n                <option value=\"NA\">North America</option>\n                <option value=\"EU\">Europe</option>\n                <option value=\"APAC\">Asia-Pacific</option>\n                <option value=\"SA\">South America</option>\n                <option value=\"OCE\">Oceania</option>\n              </select>\n            </div>\n\n            {/* Country */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Country *\n              </label>\n              <select\n                name=\"country\"\n                value={formData.country}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                required\n              >\n                <option value=\"\">Select Country</option>\n                {countries.map(country => (\n                  <option key={country.value} value={country.value}>\n                    {country.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Social Links */}\n        <div className=\"card p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">Social Links</h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Twitter\n              </label>\n              <input\n                type=\"url\"\n                name=\"social_twitter\"\n                value={formData.socialLinks.twitter}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"https://twitter.com/username\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Twitch\n              </label>\n              <input\n                type=\"url\"\n                name=\"social_twitch\"\n                value={formData.socialLinks.twitch}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"https://twitch.tv/username\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                YouTube\n              </label>\n              <input\n                type=\"url\"\n                name=\"social_youtube\"\n                value={formData.socialLinks.youtube}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"https://youtube.com/c/username\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                Instagram\n              </label>\n              <input\n                type=\"url\"\n                name=\"social_instagram\"\n                value={formData.socialLinks.instagram}\n                onChange={handleInputChange}\n                className=\"form-input\"\n                placeholder=\"https://instagram.com/username\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <div className=\"flex justify-end space-x-4\">\n          <button\n            type=\"button\"\n            onClick={() => navigateTo && navigateTo('admin-dashboard')}\n            className=\"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            disabled={saving}\n            className=\"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            {saving ? (\n              <span className=\"flex items-center\">\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                {isEdit ? 'Updating...' : 'Creating...'}\n              </span>\n            ) : (\n              isEdit ? 'Update Player' : 'Create Player'\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default PlayerForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}