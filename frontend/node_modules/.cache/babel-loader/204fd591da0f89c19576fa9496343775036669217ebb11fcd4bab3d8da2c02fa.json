{"ast":null,"code":"import React,{useState,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ImageUpload(_ref){let{onImageSelect,currentImage,placeholder=\"Upload Image\",accept=\"image/*\",maxSize=5*1024*1024,// 5MB default\nclassName=\"\"}=_ref;const[dragActive,setDragActive]=useState(false);const[uploading,setUploading]=useState(false);const[preview,setPreview]=useState(currentImage||null);const fileInputRef=useRef(null);const handleFiles=async files=>{const file=files[0];if(!file)return;// Validate file type\nif(!file.type.startsWith('image/')){alert('Please select an image file');return;}// Validate file size\nif(file.size>maxSize){alert(\"File size must be less than \".concat(Math.round(maxSize/1024/1024),\"MB\"));return;}setUploading(true);try{// Create preview URL\nconst previewUrl=URL.createObjectURL(file);setPreview(previewUrl);// For actual upload, you would typically upload to your server\n// For now, we'll just pass the file to the parent component\nif(onImageSelect&&typeof onImageSelect==='function'){onImageSelect(file,previewUrl);}}catch(error){console.error('Error processing image:',error);alert('Error processing image. Please try again.');}finally{setUploading(false);}};const handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type==='dragenter'||e.type==='dragover'){setDragActive(true);}else if(e.type==='dragleave'){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){handleFiles(e.dataTransfer.files);}};const handleFileSelect=e=>{if(e.target.files&&e.target.files[0]){handleFiles(e.target.files);}};const handleClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const removeImage=()=>{setPreview(null);if(onImageSelect&&typeof onImageSelect==='function'){onImageSelect(null,null);}if(fileInputRef.current){fileInputRef.current.value='';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative \".concat(className),children:[/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:accept,onChange:handleFileSelect,className:\"hidden\"}),preview?/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Preview\",className:\"w-full h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleClick,className:\"px-3 py-1 bg-white text-gray-900 text-sm rounded hover:bg-gray-100 transition-colors\",children:\"Change\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeImage,className:\"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors\",children:\"Remove\"})]})]}):/*#__PURE__*/_jsx(\"div\",{onClick:handleClick,onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,className:\"\\n            w-full h-32 border-2 border-dashed rounded-lg cursor-pointer transition-all\\n            flex flex-col items-center justify-center text-center p-4\\n            \".concat(dragActive?'border-red-500 bg-red-50 dark:bg-red-900/20':'border-gray-300 dark:border-gray-600 hover:border-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50',\"\\n          \"),children:uploading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 border-2 border-red-500 border-t-transparent rounded-full animate-spin mb-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Processing...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-gray-400 mb-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:placeholder}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-500 mt-1\",children:\"Drag & drop or click to select\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-400 dark:text-gray-600 mt-1\",children:[\"Max \",Math.round(maxSize/1024/1024),\"MB\"]})]})})]});}export default ImageUpload;","map":{"version":3,"names":["React","useState","useRef","jsx","_jsx","jsxs","_jsxs","ImageUpload","_ref","onImageSelect","currentImage","placeholder","accept","maxSize","className","dragActive","setDragActive","uploading","setUploading","preview","setPreview","fileInputRef","handleFiles","files","file","type","startsWith","alert","size","concat","Math","round","previewUrl","URL","createObjectURL","error","console","handleDrag","e","preventDefault","stopPropagation","handleDrop","dataTransfer","handleFileSelect","target","handleClick","_fileInputRef$current","current","click","removeImage","value","children","ref","onChange","src","alt","onClick","onDragEnter","onDragLeave","onDragOver","onDrop","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/app/frontend/src/components/shared/ImageUpload.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\n\nfunction ImageUpload({ \n  onImageSelect, \n  currentImage, \n  placeholder = \"Upload Image\",\n  accept = \"image/*\",\n  maxSize = 5 * 1024 * 1024, // 5MB default\n  className = \"\"\n}) {\n  const [dragActive, setDragActive] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [preview, setPreview] = useState(currentImage || null);\n  const fileInputRef = useRef(null);\n\n  const handleFiles = async (files) => {\n    const file = files[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      alert('Please select an image file');\n      return;\n    }\n\n    // Validate file size\n    if (file.size > maxSize) {\n      alert(`File size must be less than ${Math.round(maxSize / 1024 / 1024)}MB`);\n      return;\n    }\n\n    setUploading(true);\n\n    try {\n      // Create preview URL\n      const previewUrl = URL.createObjectURL(file);\n      setPreview(previewUrl);\n\n      // For actual upload, you would typically upload to your server\n      // For now, we'll just pass the file to the parent component\n      if (onImageSelect && typeof onImageSelect === 'function') {\n        onImageSelect(file, previewUrl);\n      }\n    } catch (error) {\n      console.error('Error processing image:', error);\n      alert('Error processing image. Please try again.');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n\n  const handleFileSelect = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      handleFiles(e.target.files);\n    }\n  };\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const removeImage = () => {\n    setPreview(null);\n    if (onImageSelect && typeof onImageSelect === 'function') {\n      onImageSelect(null, null);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <div className={`relative ${className}`}>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept={accept}\n        onChange={handleFileSelect}\n        className=\"hidden\"\n      />\n\n      {preview ? (\n        <div className=\"relative group\">\n          <img\n            src={preview}\n            alt=\"Preview\"\n            className=\"w-full h-32 object-cover rounded-lg border border-gray-300 dark:border-gray-600\"\n          />\n          \n          {/* Overlay with actions */}\n          <div className=\"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-2\">\n            <button\n              type=\"button\"\n              onClick={handleClick}\n              className=\"px-3 py-1 bg-white text-gray-900 text-sm rounded hover:bg-gray-100 transition-colors\"\n            >\n              Change\n            </button>\n            <button\n              type=\"button\"\n              onClick={removeImage}\n              className=\"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors\"\n            >\n              Remove\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div\n          onClick={handleClick}\n          onDragEnter={handleDrag}\n          onDragLeave={handleDrag}\n          onDragOver={handleDrag}\n          onDrop={handleDrop}\n          className={`\n            w-full h-32 border-2 border-dashed rounded-lg cursor-pointer transition-all\n            flex flex-col items-center justify-center text-center p-4\n            ${dragActive \n              ? 'border-red-500 bg-red-50 dark:bg-red-900/20' \n              : 'border-gray-300 dark:border-gray-600 hover:border-red-400 hover:bg-gray-50 dark:hover:bg-gray-700/50'\n            }\n          `}\n        >\n          {uploading ? (\n            <div className=\"flex flex-col items-center\">\n              <div className=\"w-6 h-6 border-2 border-red-500 border-t-transparent rounded-full animate-spin mb-2\"></div>\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">Processing...</span>\n            </div>\n          ) : (\n            <div className=\"flex flex-col items-center\">\n              <svg className=\"w-8 h-8 text-gray-400 mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n              </svg>\n              <span className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{placeholder}</span>\n              <span className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\n                Drag & drop or click to select\n              </span>\n              <span className=\"text-xs text-gray-400 dark:text-gray-600 mt-1\">\n                Max {Math.round(maxSize / 1024 / 1024)}MB\n              </span>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ImageUpload;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAOjB,IAPkB,CACnBC,aAAa,CACbC,YAAY,CACZC,WAAW,CAAG,cAAc,CAC5BC,MAAM,CAAG,SAAS,CAClBC,OAAO,CAAG,CAAC,CAAG,IAAI,CAAG,IAAI,CAAE;AAC3BC,SAAS,CAAG,EACd,CAAC,CAAAN,IAAA,CACC,KAAM,CAACO,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACgB,SAAS,CAAEC,YAAY,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAACS,YAAY,EAAI,IAAI,CAAC,CAC5D,KAAM,CAAAW,YAAY,CAAGnB,MAAM,CAAC,IAAI,CAAC,CAEjC,KAAM,CAAAoB,WAAW,CAAG,KAAO,CAAAC,KAAK,EAAK,CACnC,KAAM,CAAAC,IAAI,CAAGD,KAAK,CAAC,CAAC,CAAC,CACrB,GAAI,CAACC,IAAI,CAAE,OAEX;AACA,GAAI,CAACA,IAAI,CAACC,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,CAAE,CACnCC,KAAK,CAAC,6BAA6B,CAAC,CACpC,OACF,CAEA;AACA,GAAIH,IAAI,CAACI,IAAI,CAAGf,OAAO,CAAE,CACvBc,KAAK,gCAAAE,MAAA,CAAgCC,IAAI,CAACC,KAAK,CAAClB,OAAO,CAAG,IAAI,CAAG,IAAI,CAAC,MAAI,CAAC,CAC3E,OACF,CAEAK,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACF;AACA,KAAM,CAAAc,UAAU,CAAGC,GAAG,CAACC,eAAe,CAACV,IAAI,CAAC,CAC5CJ,UAAU,CAACY,UAAU,CAAC,CAEtB;AACA;AACA,GAAIvB,aAAa,EAAI,MAAO,CAAAA,aAAa,GAAK,UAAU,CAAE,CACxDA,aAAa,CAACe,IAAI,CAAEQ,UAAU,CAAC,CACjC,CACF,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CR,KAAK,CAAC,2CAA2C,CAAC,CACpD,CAAC,OAAS,CACRT,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAmB,UAAU,CAAIC,CAAC,EAAK,CACxBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBD,CAAC,CAACE,eAAe,CAAC,CAAC,CACnB,GAAIF,CAAC,CAACb,IAAI,GAAK,WAAW,EAAIa,CAAC,CAACb,IAAI,GAAK,UAAU,CAAE,CACnDT,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,IAAIsB,CAAC,CAACb,IAAI,GAAK,WAAW,CAAE,CACjCT,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAyB,UAAU,CAAIH,CAAC,EAAK,CACxBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBD,CAAC,CAACE,eAAe,CAAC,CAAC,CACnBxB,aAAa,CAAC,KAAK,CAAC,CAEpB,GAAIsB,CAAC,CAACI,YAAY,CAACnB,KAAK,EAAIe,CAAC,CAACI,YAAY,CAACnB,KAAK,CAAC,CAAC,CAAC,CAAE,CACnDD,WAAW,CAACgB,CAAC,CAACI,YAAY,CAACnB,KAAK,CAAC,CACnC,CACF,CAAC,CAED,KAAM,CAAAoB,gBAAgB,CAAIL,CAAC,EAAK,CAC9B,GAAIA,CAAC,CAACM,MAAM,CAACrB,KAAK,EAAIe,CAAC,CAACM,MAAM,CAACrB,KAAK,CAAC,CAAC,CAAC,CAAE,CACvCD,WAAW,CAACgB,CAAC,CAACM,MAAM,CAACrB,KAAK,CAAC,CAC7B,CACF,CAAC,CAED,KAAM,CAAAsB,WAAW,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CACxB,CAAAA,qBAAA,CAAAzB,YAAY,CAAC0B,OAAO,UAAAD,qBAAA,iBAApBA,qBAAA,CAAsBE,KAAK,CAAC,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB7B,UAAU,CAAC,IAAI,CAAC,CAChB,GAAIX,aAAa,EAAI,MAAO,CAAAA,aAAa,GAAK,UAAU,CAAE,CACxDA,aAAa,CAAC,IAAI,CAAE,IAAI,CAAC,CAC3B,CACA,GAAIY,YAAY,CAAC0B,OAAO,CAAE,CACxB1B,YAAY,CAAC0B,OAAO,CAACG,KAAK,CAAG,EAAE,CACjC,CACF,CAAC,CAED,mBACE5C,KAAA,QAAKQ,SAAS,aAAAe,MAAA,CAAcf,SAAS,CAAG,CAAAqC,QAAA,eACtC/C,IAAA,UACEgD,GAAG,CAAE/B,YAAa,CAClBI,IAAI,CAAC,MAAM,CACXb,MAAM,CAAEA,MAAO,CACfyC,QAAQ,CAAEV,gBAAiB,CAC3B7B,SAAS,CAAC,QAAQ,CACnB,CAAC,CAEDK,OAAO,cACNb,KAAA,QAAKQ,SAAS,CAAC,gBAAgB,CAAAqC,QAAA,eAC7B/C,IAAA,QACEkD,GAAG,CAAEnC,OAAQ,CACboC,GAAG,CAAC,SAAS,CACbzC,SAAS,CAAC,iFAAiF,CAC5F,CAAC,cAGFR,KAAA,QAAKQ,SAAS,CAAC,oJAAoJ,CAAAqC,QAAA,eACjK/C,IAAA,WACEqB,IAAI,CAAC,QAAQ,CACb+B,OAAO,CAAEX,WAAY,CACrB/B,SAAS,CAAC,sFAAsF,CAAAqC,QAAA,CACjG,QAED,CAAQ,CAAC,cACT/C,IAAA,WACEqB,IAAI,CAAC,QAAQ,CACb+B,OAAO,CAAEP,WAAY,CACrBnC,SAAS,CAAC,oFAAoF,CAAAqC,QAAA,CAC/F,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAEN/C,IAAA,QACEoD,OAAO,CAAEX,WAAY,CACrBY,WAAW,CAAEpB,UAAW,CACxBqB,WAAW,CAAErB,UAAW,CACxBsB,UAAU,CAAEtB,UAAW,CACvBuB,MAAM,CAAEnB,UAAW,CACnB3B,SAAS,kLAAAe,MAAA,CAGLd,UAAU,CACR,6CAA6C,CAC7C,sGAAsG,gBAE1G,CAAAoC,QAAA,CAEDlC,SAAS,cACRX,KAAA,QAAKQ,SAAS,CAAC,4BAA4B,CAAAqC,QAAA,eACzC/C,IAAA,QAAKU,SAAS,CAAC,qFAAqF,CAAM,CAAC,cAC3GV,IAAA,SAAMU,SAAS,CAAC,0CAA0C,CAAAqC,QAAA,CAAC,eAAa,CAAM,CAAC,EAC5E,CAAC,cAEN7C,KAAA,QAAKQ,SAAS,CAAC,4BAA4B,CAAAqC,QAAA,eACzC/C,IAAA,QAAKU,SAAS,CAAC,4BAA4B,CAAC+C,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAZ,QAAA,cAC/F/C,IAAA,SAAM4D,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,4BAA4B,CAAE,CAAC,CACjG,CAAC,cACN/D,IAAA,SAAMU,SAAS,CAAC,sDAAsD,CAAAqC,QAAA,CAAExC,WAAW,CAAO,CAAC,cAC3FP,IAAA,SAAMU,SAAS,CAAC,+CAA+C,CAAAqC,QAAA,CAAC,gCAEhE,CAAM,CAAC,cACP7C,KAAA,SAAMQ,SAAS,CAAC,+CAA+C,CAAAqC,QAAA,EAAC,MAC1D,CAACrB,IAAI,CAACC,KAAK,CAAClB,OAAO,CAAG,IAAI,CAAG,IAAI,CAAC,CAAC,IACzC,EAAM,CAAC,EACJ,CACN,CACE,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAAN,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}