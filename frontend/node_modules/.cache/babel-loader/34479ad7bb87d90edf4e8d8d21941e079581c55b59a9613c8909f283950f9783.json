{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../hooks';// Import dashboards for each role\nimport UserDashboard from'./pages/UserDashboard';import ModeratorDashboard from'./admin/ModeratorDashboard';import AdminDashboard from'./admin/AdminDashboard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RoleBasedDashboard(_ref){let{navigateTo,params}=_ref;const{user,isAuthenticated}=useAuth();const[loading,setLoading]=useState(true);useEffect(()=>{// Simulate brief loading to check user roles\nconst timer=setTimeout(()=>{setLoading(false);},500);return()=>clearTimeout(timer);},[user]);if(!isAuthenticated||!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-white mb-2\",children:\"Authentication Required\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-6\",children:\"Please log in to access your dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('home'),className:\"btn btn-primary\",children:\"Return to Home\"})]})});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Loading your dashboard...\"})]})});}// Determine which dashboard to show based on user roles\nconst userRoles=user.roles||[];// Priority: Admin > Moderator > User\nif(userRoles.includes('admin')){return/*#__PURE__*/_jsx(AdminDashboard,{navigateTo:navigateTo,params:params});}else if(userRoles.includes('moderator')){return/*#__PURE__*/_jsx(ModeratorDashboard,{navigateTo:navigateTo,params:params});}else{return/*#__PURE__*/_jsx(UserDashboard,{navigateTo:navigateTo,params:params});}}export default RoleBasedDashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","UserDashboard","ModeratorDashboard","AdminDashboard","jsx","_jsx","jsxs","_jsxs","RoleBasedDashboard","_ref","navigateTo","params","user","isAuthenticated","loading","setLoading","timer","setTimeout","clearTimeout","className","children","onClick","userRoles","roles","includes"],"sources":["/app/frontend/src/components/RoleBasedDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../hooks';\n\n// Import dashboards for each role\nimport UserDashboard from './pages/UserDashboard';\nimport ModeratorDashboard from './admin/ModeratorDashboard';\nimport AdminDashboard from './admin/AdminDashboard';\n\nfunction RoleBasedDashboard({ navigateTo, params }) {\n  const { user, isAuthenticated } = useAuth();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Simulate brief loading to check user roles\n    const timer = setTimeout(() => {\n      setLoading(false);\n    }, 500);\n    return () => clearTimeout(timer);\n  }, [user]);\n\n  if (!isAuthenticated || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">ðŸ”’</div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n            Authentication Required\n          </h2>\n          <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n            Please log in to access your dashboard\n          </p>\n          <button \n            onClick={() => navigateTo('home')}\n            className=\"btn btn-primary\"\n          >\n            Return to Home\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"loading-spinner mx-auto mb-4\"></div>\n          <div className=\"text-gray-600 dark:text-gray-400\">Loading your dashboard...</div>\n        </div>\n      </div>\n    );\n  }\n\n  // Determine which dashboard to show based on user roles\n  const userRoles = user.roles || [];\n  \n  // Priority: Admin > Moderator > User\n  if (userRoles.includes('admin')) {\n    return <AdminDashboard navigateTo={navigateTo} params={params} />;\n  } else if (userRoles.includes('moderator')) {\n    return <ModeratorDashboard navigateTo={navigateTo} params={params} />;\n  } else {\n    return <UserDashboard navigateTo={navigateTo} params={params} />;\n  }\n}\n\nexport default RoleBasedDashboard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,UAAU,CAElC;AACA,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CACjD,MAAO,CAAAC,kBAAkB,KAAM,4BAA4B,CAC3D,MAAO,CAAAC,cAAc,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,QAAS,CAAAC,kBAAkBA,CAAAC,IAAA,CAAyB,IAAxB,CAAEC,UAAU,CAAEC,MAAO,CAAC,CAAAF,IAAA,CAChD,KAAM,CAAEG,IAAI,CAAEC,eAAgB,CAAC,CAAGb,OAAO,CAAC,CAAC,CAC3C,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAiB,KAAK,CAAGC,UAAU,CAAC,IAAM,CAC7BF,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,GAAG,CAAC,CACP,MAAO,IAAMG,YAAY,CAACF,KAAK,CAAC,CAClC,CAAC,CAAE,CAACJ,IAAI,CAAC,CAAC,CAEV,GAAI,CAACC,eAAe,EAAI,CAACD,IAAI,CAAE,CAC7B,mBACEP,IAAA,QAAKc,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5Db,KAAA,QAAKY,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1Bf,IAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACvCf,IAAA,OAAIc,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAAC,yBAEtE,CAAI,CAAC,cACLf,IAAA,MAAGc,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,wCAErD,CAAG,CAAC,cACJf,IAAA,WACEgB,OAAO,CAAEA,CAAA,GAAMX,UAAU,CAAC,MAAM,CAAE,CAClCS,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAC5B,gBAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAEA,GAAIN,OAAO,CAAE,CACX,mBACET,IAAA,QAAKc,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5Db,KAAA,QAAKY,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1Bf,IAAA,QAAKc,SAAS,CAAC,8BAA8B,CAAM,CAAC,cACpDd,IAAA,QAAKc,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,2BAAyB,CAAK,CAAC,EAC9E,CAAC,CACH,CAAC,CAEV,CAEA;AACA,KAAM,CAAAE,SAAS,CAAGV,IAAI,CAACW,KAAK,EAAI,EAAE,CAElC;AACA,GAAID,SAAS,CAACE,QAAQ,CAAC,OAAO,CAAC,CAAE,CAC/B,mBAAOnB,IAAA,CAACF,cAAc,EAACO,UAAU,CAAEA,UAAW,CAACC,MAAM,CAAEA,MAAO,CAAE,CAAC,CACnE,CAAC,IAAM,IAAIW,SAAS,CAACE,QAAQ,CAAC,WAAW,CAAC,CAAE,CAC1C,mBAAOnB,IAAA,CAACH,kBAAkB,EAACQ,UAAU,CAAEA,UAAW,CAACC,MAAM,CAAEA,MAAO,CAAE,CAAC,CACvE,CAAC,IAAM,CACL,mBAAON,IAAA,CAACJ,aAAa,EAACS,UAAU,CAAEA,UAAW,CAACC,MAAM,CAAEA,MAAO,CAAE,CAAC,CAClE,CACF,CAEA,cAAe,CAAAH,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}